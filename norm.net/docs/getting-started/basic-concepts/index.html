<!DOCTYPE html><html lang=en><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Basic Concepts</title><meta name=description content="Basic Concepts"><link href=https://vb-consulting.github.io//norm.net/docs/getting-started/basic-concepts/ rel=canonical><link rel=stylesheet href=/_elderjs/assets/svelte-4fe1e2ed.css media=all><style></style><link href=/style.css?1701422117752 rel=stylesheet><script>!function(){var e="theme",t=localStorage.getItem(e);t||(t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",localStorage.setItem(e,t)),document.getElementsByTagName("html")[0].dataset.bsTheme=t}();</script><body class="d-flex flex-column h-100"><header id=header><nav class="navbar navbar-expand-md navbar-dark fixed-top py-0 py-md-0 svelte-13wa5zp"><div class="container-fluid flex-nowrap svelte-13wa5zp"><div class="d-flex svelte-13wa5zp"><button id=nav-btn type=button class="d-flex btn btn-sm logo animate-rotate svelte-13wa5zp"><i class=material-icons-outlined>menu</i></button></div><div class="d-flex right svelte-13wa5zp"><a class="nav-link my-auto me-2 svelte-13wa5zp"href=https://github.com/vb-consulting/norm.net/ ><i class=bi-github></i></a> <a class="github-button svelte-13wa5zp"href=https://github.com/vb-consulting/norm.net/ data-color-scheme="no-preference: light_high_contrast; light: light_high_contrast; dark: light_high_contrast;"data-icon=octicon-star data-show-count=true aria-label="Star vb-consulting/norm.net/ on GitHub"></a><div class="vr text-white my-auto svelte-13wa5zp"></div><button id=theme-btn type=button aria-pressed=true aria-label=theme class=svelte-13wa5zp><span class="check hidden svelte-13wa5zp"><span class="icon svelte-13wa5zp"><svg xmlns=http://www.w3.org/2000/svg width=32 height=32 viewBox="0 0 24 24"class=svelte-13wa5zp><path fill=currentColor d="M12 21q-3.775 0-6.388-2.613T3 12q0-3.45 2.25-5.988T11 3.05q.625-.075.975.45t-.025 1.1q-.425.65-.638 1.375T11.1 7.5q0 2.25 1.575 3.825T16.5 12.9q.775 0 1.538-.225t1.362-.625q.525-.35 1.075-.037t.475.987q-.35 3.45-2.937 5.725T12 21Zm0-2q2.2 0 3.95-1.213t2.55-3.162q-.5.125-1 .2t-1 .075q-3.075 0-5.238-2.163T9.1 7.5q0-.5.075-1t.2-1q-1.95.8-3.163 2.55T5 12q0 2.9 2.05 4.95T12 19Zm-.25-6.75Z"></path></svg> <svg xmlns=http://www.w3.org/2000/svg width=32 height=32 viewBox="0 0 24 24"class=svelte-13wa5zp><g fill=none stroke-linecap=round stroke-linejoin=round stroke-width=2><path d="M0 0h24v24H0z"></path><path fill=currentColor d="M12 19a1 1 0 0 1 .993.883L13 20v1a1 1 0 0 1-1.993.117L11 21v-1a1 1 0 0 1 1-1zm6.313-2.09l.094.083l.7.7a1 1 0 0 1-1.32 1.497l-.094-.083l-.7-.7a1 1 0 0 1 1.218-1.567l.102.07zm-11.306.083a1 1 0 0 1 .083 1.32l-.083.094l-.7.7a1 1 0 0 1-1.497-1.32l.083-.094l.7-.7a1 1 0 0 1 1.414 0zM4 11a1 1 0 0 1 .117 1.993L4 13H3a1 1 0 0 1-.117-1.993L3 11h1zm17 0a1 1 0 0 1 .117 1.993L21 13h-1a1 1 0 0 1-.117-1.993L20 11h1zM6.213 4.81l.094.083l.7.7a1 1 0 0 1-1.32 1.497l-.094-.083l-.7-.7A1 1 0 0 1 6.11 4.74l.102.07zm12.894.083a1 1 0 0 1 .083 1.32l-.083.094l-.7.7a1 1 0 0 1-1.497-1.32l.083-.094l.7-.7a1 1 0 0 1 1.414 0zM12 2a1 1 0 0 1 .993.883L13 3v1a1 1 0 0 1-1.993.117L11 4V3a1 1 0 0 1 1-1zm0 5a5 5 0 1 1-4.995 5.217L7 12l.005-.217A5 5 0 0 1 12 7z"></path></g></svg></span></span></button></div></div></nav></header><main class=svelte-1sva13r><div class="sidebar sidebar-hide svelte-1sva13r"><div class=svelte-1sva13r><button type=button class="btn btn-sm close-sidebar svelte-1sva13r"style="display: none;"><i class=material-icons-outlined>close</i></button><ul class="navbar-nav sidenav accordion svelte-1sva13r"><li class="nav-item svelte-1sva13r"data-id=""title="Norm Home"><a class="nav-link svelte-1sva13r text-uppercase"href=/norm.net/ >Norm Home</a><li class="nav-divider svelte-1sva13r"><hr class=svelte-1sva13r><li class="nav-item svelte-1sva13r"data-id=""title="example project"><a class="nav-link svelte-1sva13r text-uppercase"href=/norm.net/example/ >example project</a><li class="nav-item svelte-1sva13r"data-id=""title=changelog><a class="nav-link svelte-1sva13r lr-arrow text-uppercase"href=/norm.net/changelog/ ><i class="bi bi-archive svelte-1sva13r"></i> changelog</a><li class="accordion-item svelte-1sva13r"title=docs><button class="accordion-header accordion-button collapsed svelte-1sva13r lr-arrow text-uppercase"type=button data-bs-toggle=collapse data-bs-target=#accordion-docs aria-expanded=false aria-controls=accordion-docs><i class="bi bi-file-earmark-text svelte-1sva13r"></i> docs</button><div id=accordion-docs class="accordion-collapse collapse"><div class="accordion-body svelte-1sva13r"><ul class=navbar-nav><li class="nav-txt-divider text-muted svelte-1sva13r"><hr class=svelte-1sva13r><span class=svelte-1sva13r>getting started</span><hr class=svelte-1sva13r><li class="nav-item svelte-1sva13r"data-id=""title=Introduction><a class="nav-link svelte-1sva13r lr-arrow text-uppercase"href=/norm.net/docs/getting-started/introduction/ ><i class="bi bi-file-text svelte-1sva13r"></i> Introduction</a><li class="nav-item svelte-1sva13r"data-id=""title=Installation><a class="nav-link svelte-1sva13r lr-arrow text-uppercase"href=/norm.net/docs/getting-started/installation/ ><i class="bi bi-file-text svelte-1sva13r"></i> Installation</a><li class="nav-item svelte-1sva13r"data-id=""title="First Use"><a class="nav-link svelte-1sva13r lr-arrow text-uppercase"href=/norm.net/docs/getting-started/first-use/ ><i class="bi bi-file-text svelte-1sva13r"></i> First Use</a><li class="nav-item svelte-1sva13r active"data-id=""title="Basic Concepts"><a class="nav-link svelte-1sva13r lr-arrow text-uppercase"href=/norm.net/docs/getting-started/basic-concepts/ ><i class="bi bi-file-text svelte-1sva13r"></i> Basic Concepts</a><li class="nav-txt-divider text-muted svelte-1sva13r"><hr class=svelte-1sva13r><span class=svelte-1sva13r>reference</span><hr class=svelte-1sva13r><li class="nav-item svelte-1sva13r"data-id=""title="Extensions Methods"><a class="nav-link svelte-1sva13r lr-arrow text-uppercase"href=/norm.net/docs/reference/methods/ ><i class="bi bi-file-text svelte-1sva13r"></i> Extensions Methods</a><li class="nav-item svelte-1sva13r"data-id=""title=Options><a class="nav-link svelte-1sva13r lr-arrow text-uppercase"href=/norm.net/docs/reference/options/ ><i class="bi bi-file-text svelte-1sva13r"></i> Options</a><li class="nav-item svelte-1sva13r"data-id=""title="Working With Parameters"><a class="nav-link svelte-1sva13r lr-arrow text-uppercase"href=/norm.net/docs/reference/parameters/ ><i class="bi bi-file-text svelte-1sva13r"></i> Working With Parameters</a></ul></div></div></ul></div></div><div class="content svelte-1sva13r"><div class="container main-content gh-content"><h2 id=basic-concepts>Basic Concepts<a class="anchor bookmark-target"href=#basic-concepts><i class="bi bi-link-45deg"></i></a></h2><h3 id=connection-extensions>Connection Extensions<a class="anchor bookmark-target"href=#connection-extensions><i class="bi bi-link-45deg"></i></a></h3><p><strong>Three main extensions methods (and their derivatives):</strong><ol><li><strong><code>Execute</code></strong> - execute a command <strong>without returning any values</strong>.<li><strong><code>Read</code></strong> - execute and return an <strong>iterator over values</strong>.<li><strong><code>Multiple</code></strong> - return disposable object for multiple <code>Read</code> operations.</ol><ul><li><p>Both extensions will attempt to <strong>open the underlying connection</strong> - and then initiate command execution.<li><p><code>Execute</code> extensions are generally simple since they don't return any values. Just execute a command without returning a value.<li><p><code>Read</code> extensions implement many overload versions and support many different type mappings (tuples, named tuples, instances, dynaimc, anonymous, etc).</ul><p><a href=/docs/fundamentals/read-method/ >See more on the <code>Read</code> method.</a><h3 id=fluid-syntax>Fluid Syntax<a class="anchor bookmark-target"href=#fluid-syntax><i class="bi bi-link-45deg"></i></a></h3><ul><li><p>In addition to these three main extensions - there are 14 additional helper extensions on the connection object.<li><p>These extensions methods will return <code>Norm</code> instance object that has state set according to the extensions.<li><p><code>Norm</code> instance object implements the same instance methods as extension methods on the connection object.<li><p>This is useful to be able to have a <strong>fluid syntax.</strong><li><p>Foe example, execute a stored procedure with command timoout 60 seconds would look like this by using <strong>fluid syntax</strong>:</ul><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Execute a stored procedure with command timoout 60 seconds</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">AsProcedure</span><span style="color: #E6E6E6">()</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">WithTimeout</span><span style="color: #E6E6E6">(</span><span style="color: #B5CEA8">60</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Execute</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"delete_inactive_customers"</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Execute a stored procedure with command timoout 60 seconds</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">AsProcedure</span><span style="color: #000000">()</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">WithTimeout</span><span style="color: #000000">(</span><span style="color: #098658">60</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Execute</span><span style="color: #000000">(</span><span style="color: #A31515">"delete_inactive_customers"</span><span style="color: #000000">);</span></span></code></pre></div><ul><li><p>Note that <code>AsProcedure</code> and <code>WithTimeout</code> will return <code>Norm</code> instance with altered state and all of these three methods exist as instance method and as extension method on connection object.<li><p>A full list of helper extension methods:<li><p><code>As(System.Data.Common.CommandType type)</code> - sets the command type - text, table direct or stored procedure (see more at <a href=https://learn.microsoft.com/en-us/dotnet/api/system.data.commandtype>System.Data.CommandType</a>)<li><p><code>AsProcedure()</code> - sets the command type to stored procedure.<li><p><code>AsText()</code> - sets command type to text.<li><p><code>Prepared()</code> - sets the command into a prepared mode.<li><p><code>WithCancellationToken(System.Threading.CancellationToken cancellationToken)</code> - sets the cancellation token for the execution.<li><p><code>WithCommandBehavior(System.Data.CommandBehavior behavior)</code> - sets the reader behavior like default, single result, schema only, key info, single row, sequential access or close connection (see more at <a href=https://learn.microsoft.com/en-us/dotnet/api/system.data.commandbehavior>System.Data.CommandBehavior</a>).<li><p><code>WithCommandCallback(Action&lt;DbCommand> dbCommandCallback)</code> - adds a command callback to be executed before command execution which gives you a full access to the <a href=https://learn.microsoft.com/en-us/dotnet/api/system.data.common.dbcommand>DbCommand</a> object.<li><p><code>WithComment(string comment)</code> - adds custom comment to SQL command.<li><p><code>WithCommentCallerInfo()</code> - adds comment to SQL command what contains a caller info data (source method name from where this command was executed with source code file path and line number if available).<li><p><code>WithCommentHeader(string comment = null, bool includeCommandAttributes = true, bool includeParameters = true, bool includeCallerInfo = true, bool includeTimestamp = false)</code> - configures comment to SQL command to include either custom comment, command attributes, caller info, timestamp or parameters.<li><p><code>WithCommentParameters()</code> - adds comment to SQL command what contains a parameters data.<li><p><code>WithParameters(params object[] parameters)</code> - add command parameters list.<li><p><code>WithReaderCallback(Func&lt;(string Name, int Ordinal, DbDataReader Reader), object> readerCallback)</code> - adds reader callback executed on each reader step. Gives you chance to return alternative values or types by returning a non-null value.<li><p><code>WithTimeout(int timeout)</code> - add command timeout.<li><p><code>WithTransaction(DbTransaction transaction)</code> - add transaction object to command.<li><p><code>WithUnknownResultType(params bool[])</code> - set the unknown type for all or some fields that will be returned as raw string (<code>Npgsql</code> only).</ul><h3 id=read-iterators>Read Iterators<a class="anchor bookmark-target"href=#read-iterators><i class="bi bi-link-45deg"></i></a></h3><p>The <code>Read</code> extension method and all the overload versions of that method - will always return <strong>the <a href=https://learn.microsoft.com/en-us/dotnet/csharp/iterators>iterator</a></strong> of the <a href=https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.ienumerable-1><code>Enumerable&lt;T></code></a> interface type.<p>Values are <strong><a href=https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/statements/yield>yielded</a> to the iterator</strong> as they are returned from the database.<p>For example, the following statements:<div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6">;</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">// doesn't do anything with the database</span></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">result1</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;</span><span style="color: #569CD6">int</span><span style="color: #E6E6E6">>(</span><span style="color: #CE9178">"select count(*) from actor"</span><span style="color: #E6E6E6">);</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">// doesn't do anything with the database</span></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">result2</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;</span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">>(</span><span style="color: #CE9178">"select title from film"</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000">;</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">// doesn't do anything with the database</span></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">result1</span><span style="color: #000000"> = </span><span style="color: #001080">connection</span><span style="color: #000000">.</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">int</span><span style="color: #000000">>(</span><span style="color: #A31515">"select count(*) from actor"</span><span style="color: #000000">);</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">// doesn't do anything with the database</span></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">result2</span><span style="color: #000000"> = </span><span style="color: #001080">connection</span><span style="color: #000000">.</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">string</span><span style="color: #000000">>(</span><span style="color: #A31515">"select title from film"</span><span style="color: #000000">);</span></span></code></pre></div><p>These two lines will not send or execute any commands to the database.<p>Instead, they will create an <a href=https://learn.microsoft.com/en-us/dotnet/csharp/iterators>iterator</a> over the database connection that will be executed when the actual iteration starts:<div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">System</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">Linq</span><span style="color: #E6E6E6">;</span></span>
<span class=line><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6">;</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">// doesn't do anything with the database, return iterator</span></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">result1</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;</span><span style="color: #569CD6">int</span><span style="color: #E6E6E6">>(</span><span style="color: #CE9178">"select count(*) from actor"</span><span style="color: #E6E6E6">);</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">// doesn't do anything with the database, return iterator</span></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">result2</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;</span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">>(</span><span style="color: #CE9178">"select title from film"</span><span style="color: #E6E6E6">);</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">// executes select count(*) from actor and retuns int</span></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">count</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">result1</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Single</span><span style="color: #E6E6E6">();</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">// executes select title from film and builds a list of film titles</span></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">list</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">result2</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Tolist</span><span style="color: #E6E6E6">();</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">System</span><span style="color: #000000">.</span><span style="color: #267F99">Linq</span><span style="color: #000000">;</span></span>
<span class=line><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000">;</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">// doesn't do anything with the database, return iterator</span></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">result1</span><span style="color: #000000"> = </span><span style="color: #001080">connection</span><span style="color: #000000">.</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">int</span><span style="color: #000000">>(</span><span style="color: #A31515">"select count(*) from actor"</span><span style="color: #000000">);</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">// doesn't do anything with the database, return iterator</span></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">result2</span><span style="color: #000000"> = </span><span style="color: #001080">connection</span><span style="color: #000000">.</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">string</span><span style="color: #000000">>(</span><span style="color: #A31515">"select title from film"</span><span style="color: #000000">);</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">// executes select count(*) from actor and retuns int</span></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">count</span><span style="color: #000000"> = </span><span style="color: #001080">result1</span><span style="color: #000000">.</span><span style="color: #795E26">Single</span><span style="color: #000000">();</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">// executes select title from film and builds a list of film titles</span></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">list</span><span style="color: #000000"> = </span><span style="color: #001080">result2</span><span style="color: #000000">.</span><span style="color: #795E26">Tolist</span><span style="color: #000000">();</span></span></code></pre></div><p>Or, simply combine <code>Linq</code> statements with the iterator returned from the <code>Read</code> method:<div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">System</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">Linq</span><span style="color: #E6E6E6">;</span></span>
<span class=line><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6">;</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">// executes select count(*) from actor and retuns int</span></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">count</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;</span><span style="color: #569CD6">int</span><span style="color: #E6E6E6">>(</span><span style="color: #CE9178">"select count(*) from actor"</span><span style="color: #E6E6E6">).</span><span style="color: #DCDCAA">Single</span><span style="color: #E6E6E6">();</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">// executes select title from film and builds a list of film titles</span></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">list</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;</span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">>(</span><span style="color: #CE9178">"select title from film"</span><span style="color: #E6E6E6">).</span><span style="color: #DCDCAA">Tolist</span><span style="color: #E6E6E6">();</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">System</span><span style="color: #000000">.</span><span style="color: #267F99">Linq</span><span style="color: #000000">;</span></span>
<span class=line><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000">;</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">// executes select count(*) from actor and retuns int</span></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">count</span><span style="color: #000000"> = </span><span style="color: #001080">connection</span><span style="color: #000000">.</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">int</span><span style="color: #000000">>(</span><span style="color: #A31515">"select count(*) from actor"</span><span style="color: #000000">).</span><span style="color: #795E26">Single</span><span style="color: #000000">();</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">// executes select title from film and builds a list of film titles</span></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">list</span><span style="color: #000000"> = </span><span style="color: #001080">connection</span><span style="color: #000000">.</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">string</span><span style="color: #000000">>(</span><span style="color: #A31515">"select title from film"</span><span style="color: #000000">).</span><span style="color: #795E26">Tolist</span><span style="color: #000000">();</span></span></code></pre></div><p>Or, for example, a standard <code>foreach</code> iteration without <code>Linq</code>:<div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6">;</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">// executes select title from film and iterate titles</span></span>
<span class=line><span style="color: #C586C0">foreach</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">title</span><span style="color: #E6E6E6"> </span><span style="color: #C586C0">in</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;</span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">>(</span><span style="color: #CE9178">"select title from film"</span><span style="color: #E6E6E6">))</span></span>
<span class=line><span style="color: #E6E6E6">{</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #6A9955">// ...</span></span>
<span class=line><span style="color: #E6E6E6">}</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000">;</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">// executes select title from film and iterate titles</span></span>
<span class=line><span style="color: #AF00DB">foreach</span><span style="color: #000000">(</span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">title</span><span style="color: #000000"> </span><span style="color: #AF00DB">in</span><span style="color: #000000"> </span><span style="color: #001080">connection</span><span style="color: #000000">.</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">string</span><span style="color: #000000">>(</span><span style="color: #A31515">"select title from film"</span><span style="color: #000000">))</span></span>
<span class=line><span style="color: #000000">{</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #008000">// ...</span></span>
<span class=line><span style="color: #000000">}</span></span></code></pre></div><p>As we can see, the actual execution is <strong>delayed until the first iteration starts</strong>.<p>In simple pseudo-code, this is what the <code>Read</code> method does:<div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #4EC9B0">IEnumerable</span><span style="color: #E6E6E6">&lt;</span><span style="color: #4EC9B0">TResult</span><span style="color: #E6E6E6">> </span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">()</span></span>
<span class=line><span style="color: #E6E6E6">{</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #C586C0">foreach</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">record</span><span style="color: #E6E6E6"> </span><span style="color: #C586C0">in</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">reader</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    {</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #C586C0">yield</span><span style="color: #E6E6E6"> </span><span style="color: #C586C0">return</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">record</span><span style="color: #E6E6E6">;</span></span>
<span class=line><span style="color: #E6E6E6">    }</span></span>
<span class=line><span style="color: #E6E6E6">}</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #267F99">IEnumerable</span><span style="color: #000000">&lt;</span><span style="color: #267F99">TResult</span><span style="color: #000000">> </span><span style="color: #795E26">Read</span><span style="color: #000000">()</span></span>
<span class=line><span style="color: #000000">{</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #AF00DB">foreach</span><span style="color: #000000">(</span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">record</span><span style="color: #000000"> </span><span style="color: #AF00DB">in</span><span style="color: #000000"> </span><span style="color: #001080">reader</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    {</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #AF00DB">yield</span><span style="color: #000000"> </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">record</span><span style="color: #000000">;</span></span>
<span class=line><span style="color: #000000">    }</span></span>
<span class=line><span style="color: #000000">}</span></span></code></pre></div><p>This approach allows us to build <code>Linq</code> expressions over the iterator - which are then executed <strong>only once per iteration</strong>, and there is no need for additional buffering.<h3 id=async-read-iterators>Async Read Iterators<a class="anchor bookmark-target"href=#async-read-iterators><i class="bi bi-link-45deg"></i></a></h3><p>The asynchronous version <code>ReadAsync</code> extension method and all the overload versions of that method - will always return <strong>the <a href=https://learn.microsoft.com/en-us/dotnet/csharp/iterators>iterator</a></strong> of the <a href=https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.iasyncenumerable-1><code>IAsyncEnumerable&lt;T></code></a> interface type.<p>The asynchronous version <code>ReadAsync</code> - behaves exactly the same as the synchronous <code>Read</code> method - execution is <strong>delayed until the first iteration starts</strong>.<p><a href=https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.iasyncenumerable-1><code>IAsyncEnumerable&lt;T></code></a> enumerator interface that provides <strong>asynchronous iteration over values:</strong><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">System</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">Linq</span><span style="color: #E6E6E6">;</span></span>
<span class=line><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6">;</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">// doesn't do anything with the database, return iterator</span></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">result1</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">ReadAsync</span><span style="color: #E6E6E6">&lt;</span><span style="color: #569CD6">int</span><span style="color: #E6E6E6">>(</span><span style="color: #CE9178">"select count(*) from actor"</span><span style="color: #E6E6E6">);</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">// doesn't do anything with the database, return iterator</span></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">result2</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">ReadAsync</span><span style="color: #E6E6E6">&lt;</span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">>(</span><span style="color: #CE9178">"select title from film"</span><span style="color: #E6E6E6">);</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">// executes select count(*) from actor and retuns int</span></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">count</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">await</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">result1</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">SingleAsync</span><span style="color: #E6E6E6">();</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">// executes select title from film and builds a list of film titles</span></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">list</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">await</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">result2</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">ToListAsync</span><span style="color: #E6E6E6">();</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">System</span><span style="color: #000000">.</span><span style="color: #267F99">Linq</span><span style="color: #000000">;</span></span>
<span class=line><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000">;</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">// doesn't do anything with the database, return iterator</span></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">result1</span><span style="color: #000000"> = </span><span style="color: #001080">connection</span><span style="color: #000000">.</span><span style="color: #795E26">ReadAsync</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">int</span><span style="color: #000000">>(</span><span style="color: #A31515">"select count(*) from actor"</span><span style="color: #000000">);</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">// doesn't do anything with the database, return iterator</span></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">result2</span><span style="color: #000000"> = </span><span style="color: #001080">connection</span><span style="color: #000000">.</span><span style="color: #795E26">ReadAsync</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">string</span><span style="color: #000000">>(</span><span style="color: #A31515">"select title from film"</span><span style="color: #000000">);</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">// executes select count(*) from actor and retuns int</span></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">count</span><span style="color: #000000"> = </span><span style="color: #0000FF">await</span><span style="color: #000000"> </span><span style="color: #001080">result1</span><span style="color: #000000">.</span><span style="color: #795E26">SingleAsync</span><span style="color: #000000">();</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">// executes select title from film and builds a list of film titles</span></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">list</span><span style="color: #000000"> = </span><span style="color: #0000FF">await</span><span style="color: #000000"> </span><span style="color: #001080">result2</span><span style="color: #000000">.</span><span style="color: #795E26">ToListAsync</span><span style="color: #000000">();</span></span></code></pre></div><p>The example above uses <a href=https://www.nuget.org/packages/System.Linq.Async><code>System.Linq.Async</code> package</a>.<p><code>System.Linq.Async</code> is an official .NET Foundation implementation of asynchronous LINQ extension methods. It provides an asynchronous version of every LINQ extension method over the <a href=https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.iasyncenumerable-1><code>IAsyncEnumerable&lt;T></code></a> interface.<h3 id=working-with-tuples>Working With Tuples<a class="anchor bookmark-target"href=#working-with-tuples><i class="bi bi-link-45deg"></i></a></h3><p>Both <code>Read</code> and <code>ReadAsync</code> methods implement a complex mapping system, but they both return a single generic value (<code>IEnumerable&lt;T></code> and <code>IAsyncEnumerable&lt;T></code>, respectively).<p>When those iterators should return multiple values, that generic value is a <a href=https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/value-tuples>tuple type</a>. For example:<ul><li><code>IEnumerable&lt;(T1, T2)></code> - two value tuple <code>(T1, T2)</code> for two values.<li><code>IEnumerable&lt;(T1, T2, T3)></code> - three value tuple <code>(T1, T2, T3)</code> for three values.<li>etc.</ul><p>The same goes for the <code>IAsyncEnumerable&lt;T></code> type.<p>This allows for a convenient <a href=https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/value-tuples#tuple-assignment-and-deconstruction>tuple deconstruction</a>, for example:<div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6">;</span></span>
<span class=line></span>
<span class=line><span style="color: #C586C0">foreach</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> (</span><span style="color: #9CDCFE">title</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">description</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">year</span><span style="color: #E6E6E6">) </span><span style="color: #C586C0">in</span><span style="color: #E6E6E6"> </span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;</span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">int</span><span style="color: #E6E6E6">>(</span><span style="color: #CE9178">"select title, description, release_year from film"</span><span style="color: #E6E6E6">))</span></span>
<span class=line><span style="color: #E6E6E6">{</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">Console</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">WriteLine</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"Title: {0}, Description: {1}, Year: {2}"</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">title</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">description</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">year</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">}</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000">;</span></span>
<span class=line></span>
<span class=line><span style="color: #AF00DB">foreach</span><span style="color: #000000">(</span><span style="color: #0000FF">var</span><span style="color: #000000"> (</span><span style="color: #001080">title</span><span style="color: #000000">, </span><span style="color: #001080">description</span><span style="color: #000000">, </span><span style="color: #001080">year</span><span style="color: #000000">) </span><span style="color: #AF00DB">in</span><span style="color: #000000"> </span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #001080">connection</span><span style="color: #000000">.</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">string</span><span style="color: #000000">, </span><span style="color: #0000FF">string</span><span style="color: #000000">, </span><span style="color: #0000FF">int</span><span style="color: #000000">>(</span><span style="color: #A31515">"select title, description, release_year from film"</span><span style="color: #000000">))</span></span>
<span class=line><span style="color: #000000">{</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #001080">Console</span><span style="color: #000000">.</span><span style="color: #795E26">WriteLine</span><span style="color: #000000">(</span><span style="color: #A31515">"Title: {0}, Description: {1}, Year: {2}"</span><span style="color: #000000">, </span><span style="color: #001080">title</span><span style="color: #000000">, </span><span style="color: #001080">description</span><span style="color: #000000">, </span><span style="color: #001080">year</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">}</span></span></code></pre></div><h3 id=global-settings>Global Settings<a class="anchor bookmark-target"href=#global-settings><i class="bi bi-link-45deg"></i></a></h3><p>It is possible to modify <code>Norm</code>'s default behavior for the entire application by setting the global settings. For example:<div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6">;</span></span>
<span class=line></span>
<span class=line><span style="color: #9CDCFE">NormOptions</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Configure</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">options</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span></span>
<span class=line><span style="color: #E6E6E6">{</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">options</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">CommandTimeout</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #B5CEA8">60</span><span style="color: #E6E6E6">;</span></span>
<span class=line><span style="color: #E6E6E6">});</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000">;</span></span>
<span class=line></span>
<span class=line><span style="color: #001080">NormOptions</span><span style="color: #000000">.</span><span style="color: #795E26">Configure</span><span style="color: #000000">(</span><span style="color: #001080">options</span><span style="color: #000000"> =></span></span>
<span class=line><span style="color: #000000">{</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #001080">options</span><span style="color: #000000">.</span><span style="color: #001080">CommandTimeout</span><span style="color: #000000"> = </span><span style="color: #098658">60</span><span style="color: #000000">;</span></span>
<span class=line><span style="color: #000000">});</span></span></code></pre></div><p>This example sets a global option for all commands executed by <code>Norm</code> to have a timeout of 60 seconds.<blockquote><p>Important note: <code>NormOptions.Configure</code> call is <strong>not thread-safe.</strong></blockquote><p><code>NormOptions.Configure</code> call is intended to be executed <strong>only once from the application's startup code</strong>, typically <code>Startup.cs</code> or <code>Program.cs</code>, before any database command.<div class="my-5 px-5 border-top links svelte-oyz6mf"><div><div class="link-title text-start svelte-oyz6mf">PREVIOUS</div><a class="btn btn-link text-start"href=/norm.net/docs/getting-started/first-use/ >First Use</a></div><div><div class="link-title text-end svelte-oyz6mf">NEXT</div><a class="btn btn-link text-end"href=/norm.net/docs/reference/read-method/ >Read Method</a></div></div></div></div><div class="rightside svelte-1sva13r"><div class=svelte-1sva13r><ul class="navbar-nav sidenav svelte-1sva13r"><li class="nav-txt-divider text-muted svelte-1sva13r"><hr class=svelte-1sva13r><span class=svelte-1sva13r>on this page</span><hr class=svelte-1sva13r><li class="nav-item toc2 right svelte-1sva13r bookmark-nav"data-id=basic-concepts title="Basic Concepts"><a class="nav-link auto-close svelte-1sva13r bookmark-link"href=#basic-concepts>Basic Concepts</a><li class="nav-item toc3 right svelte-1sva13r bookmark-nav"data-id=connection-extensions title="Connection Extensions"><a class="nav-link auto-close svelte-1sva13r bookmark-link"href=#connection-extensions>Connection Extensions</a><li class="nav-item toc3 right svelte-1sva13r bookmark-nav"data-id=fluid-syntax title="Fluid Syntax"><a class="nav-link auto-close svelte-1sva13r bookmark-link"href=#fluid-syntax>Fluid Syntax</a><li class="nav-item toc3 right svelte-1sva13r bookmark-nav"data-id=read-iterators title="Read Iterators"><a class="nav-link auto-close svelte-1sva13r bookmark-link"href=#read-iterators>Read Iterators</a><li class="nav-item toc3 right svelte-1sva13r bookmark-nav"data-id=async-read-iterators title="Async Read Iterators"><a class="nav-link auto-close svelte-1sva13r bookmark-link"href=#async-read-iterators>Async Read Iterators</a><li class="nav-item toc3 right svelte-1sva13r bookmark-nav"data-id=working-with-tuples title="Working With Tuples"><a class="nav-link auto-close svelte-1sva13r bookmark-link"href=#working-with-tuples>Working With Tuples</a><li class="nav-item toc3 right svelte-1sva13r bookmark-nav"data-id=global-settings title="Global Settings"><a class="nav-link auto-close svelte-1sva13r bookmark-link"href=#global-settings>Global Settings</a><li><hr class=svelte-1sva13r><div class="navbar-nav sidenav"><div class="text-muted fs-_7rem mx-2">PREVIOUS</div><a class="btn btn-link btn-sm text-start"href=/norm.net/docs/getting-started/first-use/ >First Use</a></div><div class="navbar-nav sidenav mt-3"><div class="text-muted fs-_7rem mx-2">NEXT</div><a class="btn btn-link btn-sm text-start"href=/norm.net/docs/reference/read-method/ >Read Method</a></div></ul></div></div></main><script>!function(){var i=document.querySelector("nav.navbar"),L=document.getElementsByTagName("main")[0],k=L.getElementsByClassName("sidebar")[0],E=L.getElementsByClassName("content")[0],a=document.querySelectorAll("div.code");function w(e,t){for(var n=2;n<arguments.length;n++)e.classList.remove(arguments[n]);e.classList.add(t)}var t=document.getElementsByTagName("html")[0],s=i.querySelector("#theme-btn"),o="theme";function n(e){var t=s.getElementsByTagName("svg");"dark"===e?(t[0].style.display="",t[1].style.display="none",s.getElementsByClassName("check")[0].classList.add("checked")):(t[0].style.display="none",t[1].style.display="",s.getElementsByClassName("check")[0].classList.remove("checked"));for(var n=0;n<a.length;n++){var i=a[n];"dark"===e?(i.children[1].style.display="inherit",i.children[2].style.display="none"):"light"===e&&(i.children[1].style.display="none",i.children[2].style.display="inherit")}}function l(e,t){var n=e.currentTarget;if(!n.classList.contains("bi-check")){for(var i="",a=0;a<n.classList.length;a++)if(n.classList[a].startsWith("bi-")){i=n.classList[a];break}n.classList.remove(i),n.classList.add("spinner-border-sm"),n.classList.add("spinner-border");e=bootstrap.Tooltip.getInstance(n);e&&(e.setContent({".tooltip-inner":"Copying..."}),e.show()),t(n,function(){var e;n.classList.remove(i),n.classList.remove("spinner-border-sm"),n.classList.remove("spinner-border"),n.classList.add("bi-check"),bootstrap&&(e=bootstrap.Tooltip.getInstance(n))&&(e.setContent({".tooltip-inner":"Copied!"}),e.show()),setTimeout(function(){var e;n.classList.add(i),n.classList.remove("bi-check"),bootstrap&&(e=bootstrap.Tooltip.getInstance(n))&&e.setContent({".tooltip-inner":n.dataset.bsTitle})},2e3)})}}function e(e){l(e,function(e,t){navigator.clipboard.writeText(e.parentElement.nextSibling.innerText),t()})}function r(e){l(e,function(e,t){var n=localStorage.getItem(o);e="dark"===n?e.parentElement.parentElement.children[1]:e.parentElement.parentElement.children[2],setTimeout(function(){html2canvas(e).then(e=>{e.toBlob(e=>navigator.clipboard.write([new ClipboardItem({"image/png":e})])),t()})},0)})}s.addEventListener("click",()=>{var e="dark"===localStorage.getItem(o)?"light":"dark";localStorage.setItem(o,e),n(t.dataset.bsTheme=e)}),n(localStorage.getItem(o)),s.children[0].classList.remove("hidden");for(var c=0;c<a.length;c++)a[c].getElementsByClassName("copy-code")[0].addEventListener("click",e),a[c].getElementsByClassName("photo-code")[0].addEventListener("click",r);for(var d,T=function(){var s,a,o;if(L.children[2]&&"none"!=L.children[2].style.display)return s=L.children[1].children[0].querySelectorAll("[id]"),a=void 0,this.initNavs=function(e){o=e.querySelectorAll("li.bookmark-nav");for(var t=0;t<s.length;t++){for(var n=s[t].id,i=null,a=0;a<o.length;a++)if(o[a].dataset.id==n){i=o[a];break}s[t].nav=i}setTimeout(function(){for(var e=0;e<s.length;e++){var t=s[e];if(l(t).visible&&t.nav)return void t.nav.classList.add("active")}},1e3),r()},L.children[1].addEventListener("scroll",r),this;function l(e){var e=e.getBoundingClientRect(),t=Math.max(document.documentElement.clientHeight,window.innerHeight),n=0<e.top&&!(e.bottom<0||0<=e.top-t)||e.top<0&&e.bottom>t,i=!1;return{visible:n,above:i=n?i:e.bottom<t}}function r(){if(o&&o.length){for(var e=0;e<o.length;e++)o[e].classList.remove("active");for(var t=void 0,e=0;e<s.length;e++){const i=s[e];var n=l(i);if(!n.visible&&n.above&&(t=i.nav),n.visible&&i.nav&&!i.nav.classList.contains("active"))return i.nav.classList.add("active"),a&&clearTimeout(a),void(a=setTimeout(function(){i.nav.scrollIntoView({behavior:"smooth"}),a=void 0},250))}t&&!t.classList.contains("active")&&(t.classList.add("active"),a&&clearTimeout(a),a=setTimeout(function(){t.scrollIntoView({behavior:"smooth"}),a=void 0},250))}}}(),h=function(){var l,r=i.querySelector("#nav-btn"),c=k&&k.firstChild.getElementsByTagName("button")[0],d=480,h="200px",v="0.25fr",m=730,u=535,g=L.children[0].children[0].children[1],b=L.children[2]&&L.children[2].children[0].children[0],e="sidebar-pinned",p=null==localStorage.getItem(e)||"true"==localStorage.getItem(e),y=!1,f=!1;function t(){var e=window.outerWidth||window.innerWidth,t=e<d,n=t?y?"100%":"0":p?""+h:"0",i=`grid-template-columns: ${n} 1fr`,a=t&&y?"width: 100%":"0"!=n?"":"display: none",s=t&&y?"display: none":"",o=t?y?"sidebar-show":"sidebar-hide":p?"sidebar-show":"sidebar-hide",n="0"==n;L.children[2]&&(v&&m&&u&&(n&&e<u||!n&&e<m?f||(g.innerHTML=l+b.innerHTML,T.initNavs(g),f=!0):f&&(g.innerHTML=l,T.initNavs(b),f=!1)),!v||t||f?(i+=";",L.children[2].style.display="none"):(i+=` ${v};`,L.children[2].style.display="")),w(r,!t&&p||t&&y?"rotate":"rotate-back","rotate","rotate-back"),L.style=k?i:"display: block;",k&&w(k,o,"sidebar-show","sidebar-hide"),k&&(k.firstChild.style=a),c&&(c.style.display=t?"":"none"),E.style=s}function n(){window.outerWidth<d?y=!y:p=!p,localStorage.setItem(e,p.toString()),t()}return v&&m&&u&&b&&(l=g.innerHTML,T.initNavs(b)),r.addEventListener("click",n),c&&c.addEventListener("click",()=>{y=!1,t()}),(window.onresize=t)(),this.closeSidebar=function(){window.outerWidth<d&&y&&n()},this}(),v=document.getElementsByClassName("auto-close"),m=0;m<v.length;m++)v[m].addEventListener("click",function(e){h.closeSidebar()});location.hash&&(d=document.getElementById(location.hash.replace("#","")))&&d.scrollIntoView()}();</script><script src=/bootstrap.bundle.min.js></script><script>!function(){for(var t=document.querySelectorAll('[data-bs-toggle="tooltip"]'),e=0;e<t.length;e++)new bootstrap.Tooltip(t[e]);var o=document.getElementsByClassName("accordion-item");if(o.length)for(e=0;e<o.length;e++){var l=o[e];l.querySelectorAll("[href='"+document.location.pathname+"']").length&&l.firstChild.click()}}();</script><script src=/html2canvas.min.js></script><script async defer src=https://buttons.github.io/buttons.js></script>