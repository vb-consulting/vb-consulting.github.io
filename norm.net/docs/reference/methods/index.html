<!DOCTYPE html><html lang=en><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Methods</title><meta name=description content=Methods><link href=https://vb-consulting.github.io//norm.net/docs/reference/methods/ rel=canonical><link rel=stylesheet href=/_elderjs/assets/svelte-86f3d155.css media=all><style></style><link href=/style.css?1701887302576 rel=stylesheet><script>!function(){var e="theme",t=localStorage.getItem(e);t||(t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",localStorage.setItem(e,t)),document.getElementsByTagName("html")[0].dataset.bsTheme=t}();</script><body class="d-flex flex-column h-100"><header id=header><nav class="navbar navbar-expand-md navbar-dark fixed-top py-0 py-md-0 svelte-13wa5zp"><div class="container-fluid flex-nowrap svelte-13wa5zp"><div class="d-flex svelte-13wa5zp"><button id=nav-btn type=button class="d-flex btn btn-sm logo animate-rotate svelte-13wa5zp"><i class=material-icons-outlined>menu</i></button></div><div class="d-flex right svelte-13wa5zp"><a class="nav-link my-auto me-2 svelte-13wa5zp"href=https://github.com/vb-consulting/norm.net/ ><i class=bi-github></i></a> <a class="github-button svelte-13wa5zp"href=https://github.com/vb-consulting/norm.net/ data-color-scheme="no-preference: light_high_contrast; light: light_high_contrast; dark: light_high_contrast;"data-icon=octicon-star data-show-count=true aria-label="Star vb-consulting/norm.net/ on GitHub"></a><div class="vr text-white my-auto svelte-13wa5zp"></div><button id=theme-btn type=button aria-pressed=true aria-label=theme class=svelte-13wa5zp><span class="check hidden svelte-13wa5zp"><span class="icon svelte-13wa5zp"><svg xmlns=http://www.w3.org/2000/svg width=32 height=32 viewBox="0 0 24 24"class=svelte-13wa5zp><path fill=currentColor d="M12 21q-3.775 0-6.388-2.613T3 12q0-3.45 2.25-5.988T11 3.05q.625-.075.975.45t-.025 1.1q-.425.65-.638 1.375T11.1 7.5q0 2.25 1.575 3.825T16.5 12.9q.775 0 1.538-.225t1.362-.625q.525-.35 1.075-.037t.475.987q-.35 3.45-2.937 5.725T12 21Zm0-2q2.2 0 3.95-1.213t2.55-3.162q-.5.125-1 .2t-1 .075q-3.075 0-5.238-2.163T9.1 7.5q0-.5.075-1t.2-1q-1.95.8-3.163 2.55T5 12q0 2.9 2.05 4.95T12 19Zm-.25-6.75Z"></path></svg> <svg xmlns=http://www.w3.org/2000/svg width=32 height=32 viewBox="0 0 24 24"class=svelte-13wa5zp><g fill=none stroke-linecap=round stroke-linejoin=round stroke-width=2><path d="M0 0h24v24H0z"></path><path fill=currentColor d="M12 19a1 1 0 0 1 .993.883L13 20v1a1 1 0 0 1-1.993.117L11 21v-1a1 1 0 0 1 1-1zm6.313-2.09l.094.083l.7.7a1 1 0 0 1-1.32 1.497l-.094-.083l-.7-.7a1 1 0 0 1 1.218-1.567l.102.07zm-11.306.083a1 1 0 0 1 .083 1.32l-.083.094l-.7.7a1 1 0 0 1-1.497-1.32l.083-.094l.7-.7a1 1 0 0 1 1.414 0zM4 11a1 1 0 0 1 .117 1.993L4 13H3a1 1 0 0 1-.117-1.993L3 11h1zm17 0a1 1 0 0 1 .117 1.993L21 13h-1a1 1 0 0 1-.117-1.993L20 11h1zM6.213 4.81l.094.083l.7.7a1 1 0 0 1-1.32 1.497l-.094-.083l-.7-.7A1 1 0 0 1 6.11 4.74l.102.07zm12.894.083a1 1 0 0 1 .083 1.32l-.083.094l-.7.7a1 1 0 0 1-1.497-1.32l.083-.094l.7-.7a1 1 0 0 1 1.414 0zM12 2a1 1 0 0 1 .993.883L13 3v1a1 1 0 0 1-1.993.117L11 4V3a1 1 0 0 1 1-1zm0 5a5 5 0 1 1-4.995 5.217L7 12l.005-.217A5 5 0 0 1 12 7z"></path></g></svg></span></span></button></div></div></nav></header><main class=svelte-1lpnwmm><div class="sidebar sidebar-hide svelte-1lpnwmm"><div class=svelte-1lpnwmm><button type=button class="btn btn-sm close-sidebar svelte-1lpnwmm"style="display: none;"><i class=material-icons-outlined>close</i></button><ul class="navbar-nav sidenav accordion svelte-1lpnwmm"><li class="accordion-item svelte-1lpnwmm"title=VB-Consulting><button class="accordion-header accordion-button collapsed svelte-1lpnwmm text-uppercase"href=/ type=button data-bs-toggle=collapse data-bs-target=#accordion-vb-consulting aria-expanded=false aria-controls=accordion-vb-consulting>VB-Consulting</button><div id=accordion-vb-consulting class="accordion-collapse collapse"><div class="accordion-body svelte-1lpnwmm"><ul class=navbar-nav><li class="nav-item svelte-1lpnwmm"data-id=""title=Home><a class="nav-link svelte-1lpnwmm text-uppercase"href=/ >Home</a><li class="nav-divider svelte-1lpnwmm"><hr class=svelte-1lpnwmm><li class="nav-item toc2 svelte-1lpnwmm"data-id=""title=RazorSvelte><a class="nav-link svelte-1lpnwmm text-uppercase"href=/razorsvelte/ >RazorSvelte</a><li class="nav-item toc2 svelte-1lpnwmm"data-id=""title=PgRoutiner><a class="nav-link svelte-1lpnwmm text-uppercase"href=/pgroutiner/ >PgRoutiner</a><li class="nav-item toc2 svelte-1lpnwmm"data-id=""title=XUnit.Npgsql><a class="nav-link svelte-1lpnwmm text-uppercase"href=/xunit.npgsql/ >XUnit.Npgsql</a><li class="nav-item toc2 svelte-1lpnwmm"data-id=""title="PostrgeSQL Schema Tools"><a class="nav-link svelte-1lpnwmm text-uppercase"href=/pg_schema_tools/ >PostrgeSQL Schema Tools</a></ul></div></div><li class="nav-txt-divider text-muted svelte-1lpnwmm"><hr class=svelte-1lpnwmm><span class=svelte-1lpnwmm>norm.net</span><hr class=svelte-1lpnwmm><li class="nav-item toc2 svelte-1lpnwmm"data-id=""title=Norm.Net><a class="nav-link svelte-1lpnwmm text-uppercase"href=/norm.net/ >Norm.Net</a><li class="nav-item toc2 svelte-1lpnwmm"data-id=""title="example project"><a class="nav-link svelte-1lpnwmm text-uppercase"href=/norm.net/example/ >example project</a><li class="nav-item toc2 svelte-1lpnwmm"data-id=""title=benchmarks><a class="nav-link svelte-1lpnwmm text-uppercase"href=/norm.net/benchmarks/ >benchmarks</a><li class="nav-item toc2 svelte-1lpnwmm"data-id=""title=changelog><a class="nav-link svelte-1lpnwmm text-uppercase"href=/norm.net/changelog/ >changelog</a><li class="accordion-item toc2 svelte-1lpnwmm"title=docs><button class="accordion-header accordion-button collapsed svelte-1lpnwmm lr-arrow text-uppercase"type=button data-bs-toggle=collapse data-bs-target=#accordion-docs aria-expanded=false aria-controls=accordion-docs><i class="bi bi-file-earmark-text svelte-1lpnwmm"></i> docs</button><div id=accordion-docs class="accordion-collapse collapse"><div class="accordion-body svelte-1lpnwmm"><ul class=navbar-nav><li class="nav-txt-divider text-muted svelte-1lpnwmm"><hr class=svelte-1lpnwmm><span class=svelte-1lpnwmm>getting started</span><hr class=svelte-1lpnwmm><li class="nav-item svelte-1lpnwmm"data-id=""title=Introduction><a class="nav-link svelte-1lpnwmm lr-arrow text-uppercase"href=/norm.net/docs/getting-started/introduction/ ><i class="bi bi-file-text svelte-1lpnwmm"></i> Introduction</a><li class="nav-item svelte-1lpnwmm"data-id=""title=Installation><a class="nav-link svelte-1lpnwmm lr-arrow text-uppercase"href=/norm.net/docs/getting-started/installation/ ><i class="bi bi-file-text svelte-1lpnwmm"></i> Installation</a><li class="nav-item svelte-1lpnwmm"data-id=""title="First Use"><a class="nav-link svelte-1lpnwmm lr-arrow text-uppercase"href=/norm.net/docs/getting-started/first-use/ ><i class="bi bi-file-text svelte-1lpnwmm"></i> First Use</a><li class="nav-item svelte-1lpnwmm"data-id=""title="Basic Concepts"><a class="nav-link svelte-1lpnwmm lr-arrow text-uppercase"href=/norm.net/docs/getting-started/basic-concepts/ ><i class="bi bi-file-text svelte-1lpnwmm"></i> Basic Concepts</a><li class="nav-txt-divider text-muted svelte-1lpnwmm"><hr class=svelte-1lpnwmm><span class=svelte-1lpnwmm>reference</span><hr class=svelte-1lpnwmm><li class="nav-item svelte-1lpnwmm active"data-id=""title=Methods><a class="nav-link svelte-1lpnwmm lr-arrow text-uppercase"href=/norm.net/docs/reference/methods/ ><i class="bi bi-file-text svelte-1lpnwmm"></i> Methods</a><li class="nav-item svelte-1lpnwmm"data-id=""title=Options><a class="nav-link svelte-1lpnwmm lr-arrow text-uppercase"href=/norm.net/docs/reference/options/ ><i class="bi bi-file-text svelte-1lpnwmm"></i> Options</a><li class="nav-item svelte-1lpnwmm"data-id=""title=Parameters><a class="nav-link svelte-1lpnwmm lr-arrow text-uppercase"href=/norm.net/docs/reference/parameters/ ><i class="bi bi-file-text svelte-1lpnwmm"></i> Parameters</a><li class="nav-item svelte-1lpnwmm"data-id=""title="Read Mappings"><a class="nav-link svelte-1lpnwmm lr-arrow text-uppercase"href=/norm.net/docs/reference/read/ ><i class="bi bi-file-text svelte-1lpnwmm"></i> Read Mappings</a><li class="nav-item svelte-1lpnwmm"data-id=""title="Multiple Mappings"><a class="nav-link svelte-1lpnwmm lr-arrow text-uppercase"href=/norm.net/docs/reference/multiple/ ><i class="bi bi-file-text svelte-1lpnwmm"></i> Multiple Mappings</a></ul></div></div></ul></div></div><div class="content svelte-1lpnwmm"><div class="container main-content gh-content"><h2 id=extensions-methods>Extensions Methods<a class="anchor bookmark-target"href=#extensions-methods><i class="bi bi-link-45deg"></i></a></h2><ul><li>To implement fluid syntax, Norm extensions are implemented in two versions:</ul><ol><li><blockquote><p>As <code>DbConnection</code> object extension methods.</blockquote><li><blockquote><p>As instance methods.</blockquote></ol><ul><li>Both extension methods and instance methods have the same basic signature (except for <code>this DbConnection connection</code> parameter in extension methods), and they return the <code>Norm</code> instance whenever they can to ensure fluid syntax.</ul><hr><h3 id=as>As<a class="anchor bookmark-target"href=#as><i class="bi bi-link-45deg"></i></a></h3><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #6A9955">// Extension</span></span>
<span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">static</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">As</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">this</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">DbConnection</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">System</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">Data</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">CommandType</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">type</span><span style="color: #E6E6E6">);</span></span>
<span class=line><span style="color: #6A9955">// Norm Instance Method</span></span>
<span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">As</span><span style="color: #E6E6E6">(</span><span style="color: #4EC9B0">System</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">Data</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">CommandType</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">type</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #008000">// Extension</span></span>
<span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">static</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000"> </span><span style="color: #795E26">As</span><span style="color: #000000">(</span><span style="color: #0000FF">this</span><span style="color: #000000"> </span><span style="color: #267F99">DbConnection</span><span style="color: #000000"> </span><span style="color: #001080">connection</span><span style="color: #000000">, </span><span style="color: #267F99">System</span><span style="color: #000000">.</span><span style="color: #267F99">Data</span><span style="color: #000000">.</span><span style="color: #267F99">CommandType</span><span style="color: #000000"> </span><span style="color: #001080">type</span><span style="color: #000000">);</span></span>
<span class=line><span style="color: #008000">// Norm Instance Method</span></span>
<span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000"> </span><span style="color: #795E26">As</span><span style="color: #000000">(</span><span style="color: #267F99">System</span><span style="color: #000000">.</span><span style="color: #267F99">Data</span><span style="color: #000000">.</span><span style="color: #267F99">CommandType</span><span style="color: #000000"> </span><span style="color: #001080">type</span><span style="color: #000000">);</span></span></code></pre></div><ul><li><p>Sets the <a href=https://learn.microsoft.com/en-us/dotnet/api/system.data.commandtype><code>CommandType</code></a> for the next database command.<li><p>This specifies how a command string is interpreted:</ul><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">namespace</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">System</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">Data</span></span>
<span class=line><span style="color: #E6E6E6">{</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #6A9955">// Summary:</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #6A9955">//     Specifies how a command string is interpreted.</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">enum</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">CommandType</span></span>
<span class=line><span style="color: #E6E6E6">    {</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">// Summary:</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">//     An SQL text command. (Default.)</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #9CDCFE">Text</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #B5CEA8">1</span><span style="color: #E6E6E6">,</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">// Summary:</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">//     The name of a stored procedure.</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #9CDCFE">StoredProcedure</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #B5CEA8">4</span><span style="color: #E6E6E6">,</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">// Summary:</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">//     The name of a table.</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #9CDCFE">TableDirect</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #B5CEA8">512</span></span>
<span class=line><span style="color: #E6E6E6">    }</span></span>
<span class=line><span style="color: #E6E6E6">}</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #0000FF">namespace</span><span style="color: #000000"> </span><span style="color: #267F99">System</span><span style="color: #000000">.</span><span style="color: #267F99">Data</span></span>
<span class=line><span style="color: #000000">{</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #008000">//</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #008000">// Summary:</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #008000">//     Specifies how a command string is interpreted.</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">enum</span><span style="color: #000000"> </span><span style="color: #267F99">CommandType</span></span>
<span class=line><span style="color: #000000">    {</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">//</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">// Summary:</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">//     An SQL text command. (Default.)</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #001080">Text</span><span style="color: #000000"> = </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">//</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">// Summary:</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">//     The name of a stored procedure.</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #001080">StoredProcedure</span><span style="color: #000000"> = </span><span style="color: #098658">4</span><span style="color: #000000">,</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">//</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">// Summary:</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">//     The name of a table.</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #001080">TableDirect</span><span style="color: #000000"> = </span><span style="color: #098658">512</span></span>
<span class=line><span style="color: #000000">    }</span></span>
<span class=line><span style="color: #000000">}</span></span></code></pre></div><ul><li>Example:</ul><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Execute a stored procedure "delete_inactive_customers"</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">As</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">System</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Data</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">CommandType</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">StoredProcedure</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Execute</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"delete_inactive_customers"</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Execute a stored procedure "delete_inactive_customers"</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">As</span><span style="color: #000000">(</span><span style="color: #001080">System</span><span style="color: #000000">.</span><span style="color: #001080">Data</span><span style="color: #000000">.</span><span style="color: #001080">CommandType</span><span style="color: #000000">.</span><span style="color: #001080">StoredProcedure</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Execute</span><span style="color: #000000">(</span><span style="color: #A31515">"delete_inactive_customers"</span><span style="color: #000000">);</span></span></code></pre></div><hr><h3 id=asprocedure>AsProcedure<a class="anchor bookmark-target"href=#asprocedure><i class="bi bi-link-45deg"></i></a></h3><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #6A9955">// Extension</span></span>
<span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">static</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">AsProcedure</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">this</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">DbConnection</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">);</span></span>
<span class=line><span style="color: #6A9955">// Norm Instance Method</span></span>
<span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">AsProcedure</span><span style="color: #E6E6E6">();</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #008000">// Extension</span></span>
<span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">static</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000"> </span><span style="color: #795E26">AsProcedure</span><span style="color: #000000">(</span><span style="color: #0000FF">this</span><span style="color: #000000"> </span><span style="color: #267F99">DbConnection</span><span style="color: #000000"> </span><span style="color: #001080">connection</span><span style="color: #000000">);</span></span>
<span class=line><span style="color: #008000">// Norm Instance Method</span></span>
<span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000"> </span><span style="color: #795E26">AsProcedure</span><span style="color: #000000">();</span></span></code></pre></div><ul><li><p>Sets the <a href=https://learn.microsoft.com/en-us/dotnet/api/system.data.commandtype><code>CommandType</code></a> to <code>System.Data.CommandType.StoredProcedure</code>.<li><p>Example:</ul><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Execute a stored procedure "delete_inactive_customers"</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">AsProcedure</span><span style="color: #E6E6E6">()</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Execute</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"delete_inactive_customers"</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Execute a stored procedure "delete_inactive_customers"</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">AsProcedure</span><span style="color: #000000">()</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Execute</span><span style="color: #000000">(</span><span style="color: #A31515">"delete_inactive_customers"</span><span style="color: #000000">);</span></span></code></pre></div><ul><li>This is exactly the same as the previous example (<code>As(System.Data.CommandType.StoredProcedure)</code>).</ul><hr><h3 id=astext>AsText<a class="anchor bookmark-target"href=#astext><i class="bi bi-link-45deg"></i></a></h3><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #6A9955">// Extension</span></span>
<span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">static</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">AsText</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">this</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">DbConnection</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">);</span></span>
<span class=line><span style="color: #6A9955">// Norm Instance Method</span></span>
<span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">AsText</span><span style="color: #E6E6E6">();</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #008000">// Extension</span></span>
<span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">static</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000"> </span><span style="color: #795E26">AsText</span><span style="color: #000000">(</span><span style="color: #0000FF">this</span><span style="color: #000000"> </span><span style="color: #267F99">DbConnection</span><span style="color: #000000"> </span><span style="color: #001080">connection</span><span style="color: #000000">);</span></span>
<span class=line><span style="color: #008000">// Norm Instance Method</span></span>
<span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000"> </span><span style="color: #795E26">AsText</span><span style="color: #000000">();</span></span></code></pre></div><ul><li><p>Sets the <a href=https://learn.microsoft.com/en-us/dotnet/api/system.data.commandtype><code>CommandType</code></a> to <code>System.Data.CommandType.Text</code>.<li><p>This is <strong>the default</strong> command interpretation.<li><p>Example:</ul><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Execute a function "delete_inactive_customers" as text</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">AsText</span><span style="color: #E6E6E6">() </span><span style="color: #6A9955">// this is unnecessary</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Execute</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"select delete_inactive_customers()"</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Execute a function "delete_inactive_customers" as text</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">AsText</span><span style="color: #000000">() </span><span style="color: #008000">// this is unnecessary</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Execute</span><span style="color: #000000">(</span><span style="color: #A31515">"select delete_inactive_customers()"</span><span style="color: #000000">);</span></span></code></pre></div><ul><li><p>Since <code>Execute</code> also returns the current instance, <code>AsText</code> may be used in a chain of commands.<li><p>So, in the example, <code>AsText</code> makes sense:</ul><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Execute a function "delete_inactive_customers1" as procedure and then delete_inactive_customers2 as text</span></span>
<span class=line><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">AsProcedure</span><span style="color: #E6E6E6">()</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Execute</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"delete_inactive_customers1"</span><span style="color: #E6E6E6">);</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">AsText</span><span style="color: #E6E6E6">() </span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Execute</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"select delete_inactive_customers2()"</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Execute a function "delete_inactive_customers1" as procedure and then delete_inactive_customers2 as text</span></span>
<span class=line><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">AsProcedure</span><span style="color: #000000">()</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Execute</span><span style="color: #000000">(</span><span style="color: #A31515">"delete_inactive_customers1"</span><span style="color: #000000">);</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">AsText</span><span style="color: #000000">() </span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Execute</span><span style="color: #000000">(</span><span style="color: #A31515">"select delete_inactive_customers2()"</span><span style="color: #000000">);</span></span></code></pre></div><h3 id=execute>Execute<a class="anchor bookmark-target"href=#execute><i class="bi bi-link-45deg"></i></a></h3><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">static</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">Execute</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">this</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">DbConnection</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">command</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">object</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">parameters</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">null</span><span style="color: #E6E6E6">);</span></span>
<span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">Execute</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">string</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">command</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">object</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">parameters</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">null</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">static</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000"> </span><span style="color: #795E26">Execute</span><span style="color: #000000">(</span><span style="color: #0000FF">this</span><span style="color: #000000"> </span><span style="color: #267F99">DbConnection</span><span style="color: #000000"> </span><span style="color: #001080">connection</span><span style="color: #000000">, </span><span style="color: #0000FF">string</span><span style="color: #000000"> </span><span style="color: #001080">command</span><span style="color: #000000">, </span><span style="color: #0000FF">object</span><span style="color: #000000"> </span><span style="color: #001080">parameters</span><span style="color: #000000"> = </span><span style="color: #0000FF">null</span><span style="color: #000000">);</span></span>
<span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000"> </span><span style="color: #795E26">Execute</span><span style="color: #000000">(</span><span style="color: #0000FF">string</span><span style="color: #000000"> </span><span style="color: #001080">command</span><span style="color: #000000">, </span><span style="color: #0000FF">object</span><span style="color: #000000"> </span><span style="color: #001080">parameters</span><span style="color: #000000"> = </span><span style="color: #0000FF">null</span><span style="color: #000000">);</span></span></code></pre></div><ul><li><p>Executes the SQL command without returning a value from the database.<li><p>Extension returns the new <code>Norm</code> instance and instance method existing <code>Norm</code> instance.<li><p>Can have additional parameters where parameters are supplied as an anonymous object instance.<li><p>The last three parameters with the <code>Caller</code> attribute (<code>memberName</code>, <code>sourceFilePath</code> and <code>sourceLineNumber</code>) should not be supplied, they are intended to be used in diagnostics and logging and are supplied automatically by the compiler.<li><p>Example:</ul><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Execute</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"insert into test values (@p1, @p2)"</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> {</span><span style="color: #9CDCFE">p1</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">"first"</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">p2</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">"second"</span><span style="color: #E6E6E6">});</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Execute</span><span style="color: #000000">(</span><span style="color: #A31515">"insert into test values (@p1, @p2)"</span><span style="color: #000000">, </span><span style="color: #0000FF">new</span><span style="color: #000000"> {</span><span style="color: #001080">p1</span><span style="color: #000000"> = </span><span style="color: #A31515">"first"</span><span style="color: #000000">, </span><span style="color: #001080">p2</span><span style="color: #000000"> = </span><span style="color: #A31515">"second"</span><span style="color: #000000">});</span></span></code></pre></div><hr><h3 id=executeasync>ExecuteAsync<a class="anchor bookmark-target"href=#executeasync><i class="bi bi-link-45deg"></i></a></h3><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">static</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">async</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">ValueTask</span><span style="color: #E6E6E6">&lt;</span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6">> </span><span style="color: #DCDCAA">ExecuteAsync</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">this</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">DbConnection</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">command</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">object</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">parameters</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">null</span><span style="color: #E6E6E6">);</span></span>
<span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">async</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">ValueTask</span><span style="color: #E6E6E6">&lt;</span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6">> </span><span style="color: #DCDCAA">ExecuteAsync</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">string</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">command</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">object</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">parameters</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">null</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">static</span><span style="color: #000000"> </span><span style="color: #0000FF">async</span><span style="color: #000000"> </span><span style="color: #267F99">ValueTask</span><span style="color: #000000">&lt;</span><span style="color: #267F99">Norm</span><span style="color: #000000">> </span><span style="color: #795E26">ExecuteAsync</span><span style="color: #000000">(</span><span style="color: #0000FF">this</span><span style="color: #000000"> </span><span style="color: #267F99">DbConnection</span><span style="color: #000000"> </span><span style="color: #001080">connection</span><span style="color: #000000">, </span><span style="color: #0000FF">string</span><span style="color: #000000"> </span><span style="color: #001080">command</span><span style="color: #000000">, </span><span style="color: #0000FF">object</span><span style="color: #000000"> </span><span style="color: #001080">parameters</span><span style="color: #000000"> = </span><span style="color: #0000FF">null</span><span style="color: #000000">);</span></span>
<span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">async</span><span style="color: #000000"> </span><span style="color: #267F99">ValueTask</span><span style="color: #000000">&lt;</span><span style="color: #267F99">Norm</span><span style="color: #000000">> </span><span style="color: #795E26">ExecuteAsync</span><span style="color: #000000">(</span><span style="color: #0000FF">string</span><span style="color: #000000"> </span><span style="color: #001080">command</span><span style="color: #000000">, </span><span style="color: #0000FF">object</span><span style="color: #000000"> </span><span style="color: #001080">parameters</span><span style="color: #000000"> = </span><span style="color: #0000FF">null</span><span style="color: #000000">);</span></span></code></pre></div><ul><li><p>Execute the SQL command without returning a value from the database and return a value task representing the asynchronous operation.<li><p>Value task returns the new <code>Norm</code> instance and instance method existing <code>Norm</code> instance.<li><p>Can have additional parameters where parameters are supplied as an anonymous object instance.<li><p>Example:</ul><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">await</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">ExecuteAsync</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"insert into test values (@p1, @p2)"</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> {</span><span style="color: #9CDCFE">p1</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">"first"</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">p2</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">"second"</span><span style="color: #E6E6E6">});</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #0000FF">await</span><span style="color: #000000"> </span><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">ExecuteAsync</span><span style="color: #000000">(</span><span style="color: #A31515">"insert into test values (@p1, @p2)"</span><span style="color: #000000">, </span><span style="color: #0000FF">new</span><span style="color: #000000"> {</span><span style="color: #001080">p1</span><span style="color: #000000"> = </span><span style="color: #A31515">"first"</span><span style="color: #000000">, </span><span style="color: #001080">p2</span><span style="color: #000000"> = </span><span style="color: #A31515">"second"</span><span style="color: #000000">});</span></span></code></pre></div><hr><h3 id=executeformat>ExecuteFormat<a class="anchor bookmark-target"href=#executeformat><i class="bi bi-link-45deg"></i></a></h3><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">static</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">ExecuteFormat</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">this</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">DbConnection</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">FormattableString</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">command</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">object</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">parameters</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">null</span><span style="color: #E6E6E6">);</span></span>
<span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">ExecuteFormat</span><span style="color: #E6E6E6">(</span><span style="color: #4EC9B0">FormattableString</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">command</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">object</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">parameters</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">null</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">static</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000"> </span><span style="color: #795E26">ExecuteFormat</span><span style="color: #000000">(</span><span style="color: #0000FF">this</span><span style="color: #000000"> </span><span style="color: #267F99">DbConnection</span><span style="color: #000000"> </span><span style="color: #001080">connection</span><span style="color: #000000">, </span><span style="color: #267F99">FormattableString</span><span style="color: #000000"> </span><span style="color: #001080">command</span><span style="color: #000000">, </span><span style="color: #0000FF">object</span><span style="color: #000000"> </span><span style="color: #001080">parameters</span><span style="color: #000000"> = </span><span style="color: #0000FF">null</span><span style="color: #000000">);</span></span>
<span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000"> </span><span style="color: #795E26">ExecuteFormat</span><span style="color: #000000">(</span><span style="color: #267F99">FormattableString</span><span style="color: #000000"> </span><span style="color: #001080">command</span><span style="color: #000000">, </span><span style="color: #0000FF">object</span><span style="color: #000000"> </span><span style="color: #001080">parameters</span><span style="color: #000000"> = </span><span style="color: #0000FF">null</span><span style="color: #000000">);</span></span></code></pre></div><ul><li><p>Executes the SQL command without returning a value from the database in an interpolated (formattable) string and parses a formattable string for database parameters.<li><p>Extension returns the new <code>Norm</code> instance and instance method existing <code>Norm</code> instance.<li><p>Can have additional parameters where parameters are supplied as an anonymous object instance.<li><p>Example:</ul><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">p1</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">"first"</span><span style="color: #E6E6E6">; </span></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">p2</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">"second"</span><span style="color: #E6E6E6">;</span></span>
<span class=line><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">ExecuteFormat</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">$"insert into test values ({</span><span style="color: #9CDCFE">p1</span><span style="color: #CE9178">}, {</span><span style="color: #9CDCFE">p2</span><span style="color: #CE9178">})"</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">p1</span><span style="color: #000000"> = </span><span style="color: #A31515">"first"</span><span style="color: #000000">; </span></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">p2</span><span style="color: #000000"> = </span><span style="color: #A31515">"second"</span><span style="color: #000000">;</span></span>
<span class=line><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">ExecuteFormat</span><span style="color: #000000">(</span><span style="color: #A31515">$"insert into test values ({</span><span style="color: #001080">p1</span><span style="color: #A31515">}, {</span><span style="color: #001080">p2</span><span style="color: #A31515">})"</span><span style="color: #000000">);</span></span></code></pre></div><hr><h3 id=executeformatasync>ExecuteFormatAsync<a class="anchor bookmark-target"href=#executeformatasync><i class="bi bi-link-45deg"></i></a></h3><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">static</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">async</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">ValueTask</span><span style="color: #E6E6E6">&lt;</span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6">> </span><span style="color: #DCDCAA">ExecuteFormatAsync</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">this</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">DbConnection</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">FormattableString</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">command</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">object</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">parameters</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">null</span><span style="color: #E6E6E6">);</span></span>
<span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">async</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">ValueTask</span><span style="color: #E6E6E6">&lt;</span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6">> </span><span style="color: #DCDCAA">ExecuteFormatAsync</span><span style="color: #E6E6E6">(</span><span style="color: #4EC9B0">FormattableString</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">command</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">object</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">parameters</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">null</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">static</span><span style="color: #000000"> </span><span style="color: #0000FF">async</span><span style="color: #000000"> </span><span style="color: #267F99">ValueTask</span><span style="color: #000000">&lt;</span><span style="color: #267F99">Norm</span><span style="color: #000000">> </span><span style="color: #795E26">ExecuteFormatAsync</span><span style="color: #000000">(</span><span style="color: #0000FF">this</span><span style="color: #000000"> </span><span style="color: #267F99">DbConnection</span><span style="color: #000000"> </span><span style="color: #001080">connection</span><span style="color: #000000">, </span><span style="color: #267F99">FormattableString</span><span style="color: #000000"> </span><span style="color: #001080">command</span><span style="color: #000000">, </span><span style="color: #0000FF">object</span><span style="color: #000000"> </span><span style="color: #001080">parameters</span><span style="color: #000000"> = </span><span style="color: #0000FF">null</span><span style="color: #000000">);</span></span>
<span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">async</span><span style="color: #000000"> </span><span style="color: #267F99">ValueTask</span><span style="color: #000000">&lt;</span><span style="color: #267F99">Norm</span><span style="color: #000000">> </span><span style="color: #795E26">ExecuteFormatAsync</span><span style="color: #000000">(</span><span style="color: #267F99">FormattableString</span><span style="color: #000000"> </span><span style="color: #001080">command</span><span style="color: #000000">, </span><span style="color: #0000FF">object</span><span style="color: #000000"> </span><span style="color: #001080">parameters</span><span style="color: #000000"> = </span><span style="color: #0000FF">null</span><span style="color: #000000">);</span></span></code></pre></div><ul><li><p>Executes the SQL command without returning a value from the database in an interpolated (formattable) string and parses a formattable string for database parameters and returns a value task representing the asynchronous operation.<li><p>Value task returns the new <code>Norm</code> instance and instance method existing <code>Norm</code> instance.<li><p>Can have additional parameters where parameters are supplied as an anonymous object instance.<li><p>Example:</ul><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">p1</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">"first"</span><span style="color: #E6E6E6">; </span></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">p2</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">"second"</span><span style="color: #E6E6E6">;</span></span>
<span class=line><span style="color: #569CD6">await</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">ExecuteFormatAsync</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">$"insert into test values ({</span><span style="color: #9CDCFE">p1</span><span style="color: #CE9178">}, {</span><span style="color: #9CDCFE">p2</span><span style="color: #CE9178">})"</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">p1</span><span style="color: #000000"> = </span><span style="color: #A31515">"first"</span><span style="color: #000000">; </span></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">p2</span><span style="color: #000000"> = </span><span style="color: #A31515">"second"</span><span style="color: #000000">;</span></span>
<span class=line><span style="color: #0000FF">await</span><span style="color: #000000"> </span><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">ExecuteFormatAsync</span><span style="color: #000000">(</span><span style="color: #A31515">$"insert into test values ({</span><span style="color: #001080">p1</span><span style="color: #A31515">}, {</span><span style="color: #001080">p2</span><span style="color: #A31515">})"</span><span style="color: #000000">);</span></span></code></pre></div><hr><h3 id=getrecordsaffected>GetRecordsAffected<a class="anchor bookmark-target"href=#getrecordsaffected><i class="bi bi-link-45deg"></i></a></h3><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #6A9955">// Extension</span></span>
<span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">static</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">int</span><span style="color: #E6E6E6">? </span><span style="color: #DCDCAA">GetRecordsAffected</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">this</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">DbConnection</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">);</span></span>
<span class=line><span style="color: #6A9955">// Norm Instance Method</span></span>
<span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">int</span><span style="color: #E6E6E6">? </span><span style="color: #DCDCAA">GetRecordsAffected</span><span style="color: #E6E6E6">();</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #008000">// Extension</span></span>
<span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">static</span><span style="color: #000000"> </span><span style="color: #0000FF">int</span><span style="color: #000000">? </span><span style="color: #795E26">GetRecordsAffected</span><span style="color: #000000">(</span><span style="color: #0000FF">this</span><span style="color: #000000"> </span><span style="color: #267F99">DbConnection</span><span style="color: #000000"> </span><span style="color: #001080">connection</span><span style="color: #000000">);</span></span>
<span class=line><span style="color: #008000">// Norm Instance Method</span></span>
<span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">int</span><span style="color: #000000">? </span><span style="color: #795E26">GetRecordsAffected</span><span style="color: #000000">();</span></span></code></pre></div><ul><li><p>Returns the integer value returned from:<ul><li>The last <a href=https://learn.microsoft.com/en-us/dotnet/api/system.data.sqlclient.sqlcommand.executenonquery><code>ExecuteNonQuery()</code></a> execution, initiated by <code>Execute</code> call (or <code>ExecuteNonQueryAsync()</code> initiated by <code>ExecuteAsync</code>).<li>The last value of the <a href=https://learn.microsoft.com/en-us/dotnet/api/system.data.sqlclient.sqldatareader.recordsaffected><code>RecordsAffected</code></a> reader object property, that is initiated by <code>Read</code> or <code>ReadAsync</code> calls.</ul><li><p>The Result value is <code>NULL</code> if neither <code>Execute</code>, <code>ExecuteAsync</code>, <code>Read</code> or <code>ReadAsync</code> is called for the current call chain.<li><p>Example:</ul><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">rowsAffected</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Execute</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"insert into rows_affected_test values ('foo')"</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">GetRecordsAffected</span><span style="color: #E6E6E6">();</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">rowsAffected</span><span style="color: #000000"> = </span><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Execute</span><span style="color: #000000">(</span><span style="color: #A31515">"insert into rows_affected_test values ('foo')"</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">GetRecordsAffected</span><span style="color: #000000">();</span></span></code></pre></div><hr><h3 id=multiple>Multiple<a class="anchor bookmark-target"href=#multiple><i class="bi bi-link-45deg"></i></a></h3><h3 id=multipleasync>MultipleAsync<a class="anchor bookmark-target"href=#multipleasync><i class="bi bi-link-45deg"></i></a></h3><h3 id=multipleformat>MultipleFormat<a class="anchor bookmark-target"href=#multipleformat><i class="bi bi-link-45deg"></i></a></h3><h3 id=multipleformatasync>MultipleFormatAsync<a class="anchor bookmark-target"href=#multipleformatasync><i class="bi bi-link-45deg"></i></a></h3><ul><li><p>There are four connection extensions and four instance methods:<ul><li><code>Multiple</code><li><code>MultipleAsync</code><li><code>MultipleFormat</code><li><code>MultipleFormatAsync</code></ul><li><p>Each of these methods and extensions has one non-generic version and 13 generic versions.<li><p>They all create a disposable object that can be used to execute or read multiple commands in a batch.</ul><blockquote><p>Note: For more information on mapping system <a href=/norm.net/docs/reference/multiple/ >see multiple mappings section.</a></blockquote><hr><h3 id=norm>Norm<a class="anchor bookmark-target"href=#norm><i class="bi bi-link-45deg"></i></a></h3><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #6A9955">// Extension</span></span>
<span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">static</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">Norm</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">this</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">DbConnection</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #008000">// Extension</span></span>
<span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">static</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000"> </span><span style="color: #795E26">Norm</span><span style="color: #000000">(</span><span style="color: #0000FF">this</span><span style="color: #000000"> </span><span style="color: #267F99">DbConnection</span><span style="color: #000000"> </span><span style="color: #001080">connection</span><span style="color: #000000">);</span></span></code></pre></div><ul><li><p>Returns the new Norm instance.<li><p>There is no instance method.<li><p>Usage example:</ul><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">instance</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Norm</span><span style="color: #E6E6E6">();</span></span>
<span class=line><span style="color: #9CDCFE">instance</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"select * from rows_affected_test"</span><span style="color: #E6E6E6">).</span><span style="color: #DCDCAA">ToList</span><span style="color: #E6E6E6">();</span></span>
<span class=line><span style="color: #9CDCFE">rowsAffected</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">instance</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">GetRecordsAffected</span><span style="color: #E6E6E6">();</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">instance</span><span style="color: #000000"> = </span><span style="color: #001080">connection</span><span style="color: #000000">.</span><span style="color: #795E26">Norm</span><span style="color: #000000">();</span></span>
<span class=line><span style="color: #001080">instance</span><span style="color: #000000">.</span><span style="color: #795E26">Read</span><span style="color: #000000">(</span><span style="color: #A31515">"select * from rows_affected_test"</span><span style="color: #000000">).</span><span style="color: #795E26">ToList</span><span style="color: #000000">();</span></span>
<span class=line><span style="color: #001080">rowsAffected</span><span style="color: #000000"> = </span><span style="color: #001080">instance</span><span style="color: #000000">.</span><span style="color: #795E26">GetRecordsAffected</span><span style="color: #000000">();</span></span></code></pre></div><hr><h3 id=prepared>Prepared<a class="anchor bookmark-target"href=#prepared><i class="bi bi-link-45deg"></i></a></h3><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #6A9955">// Extension</span></span>
<span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">static</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">Prepared</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">this</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">DbConnection</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">);</span></span>
<span class=line><span style="color: #6A9955">// Norm Instance Method</span></span>
<span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">Prepared</span><span style="color: #E6E6E6">();</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #008000">// Extension</span></span>
<span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">static</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000"> </span><span style="color: #795E26">Prepared</span><span style="color: #000000">(</span><span style="color: #0000FF">this</span><span style="color: #000000"> </span><span style="color: #267F99">DbConnection</span><span style="color: #000000"> </span><span style="color: #001080">connection</span><span style="color: #000000">);</span></span>
<span class=line><span style="color: #008000">// Norm Instance Method</span></span>
<span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000"> </span><span style="color: #795E26">Prepared</span><span style="color: #000000">();</span></span></code></pre></div><ul><li><p>Sets the next command into a prepared (or compiled) mode.<li><p><a href=https://learn.microsoft.com/en-us/dotnet/api/system.data.common.dbcommand.prepare><code>DbCommand.Prepare</code> Method Reference</a><li><p>Example:</ul><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Execute prepared command</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Prepared</span><span style="color: #E6E6E6">() </span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Execute</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"update my_table set value = 1 where id = 1"</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Execute prepared command</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Prepared</span><span style="color: #000000">() </span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Execute</span><span style="color: #000000">(</span><span style="color: #A31515">"update my_table set value = 1 where id = 1"</span><span style="color: #000000">);</span></span></code></pre></div><ul><li>Note: to set all commands into a prepared (or compiled) mode - use the <code>Configure</code> method in your program startup:</ul><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Set global options in your startup </span></span>
<span class=line><span style="color: #6A9955">// to always execute in prepared mode (default is false).</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #9CDCFE">NormOptions</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Configure</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">options</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span></span>
<span class=line><span style="color: #E6E6E6">{</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">options</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Prepared</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">true</span><span style="color: #E6E6E6">;</span></span>
<span class=line><span style="color: #E6E6E6">});</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">// later in your code ...</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Execute prepared command</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Prepared</span><span style="color: #E6E6E6">() </span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Execute</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"update my_table set value = 1 where id = 1"</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Set global options in your startup </span></span>
<span class=line><span style="color: #008000">// to always execute in prepared mode (default is false).</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #001080">NormOptions</span><span style="color: #000000">.</span><span style="color: #795E26">Configure</span><span style="color: #000000">(</span><span style="color: #001080">options</span><span style="color: #000000"> =></span></span>
<span class=line><span style="color: #000000">{</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #001080">options</span><span style="color: #000000">.</span><span style="color: #001080">Prepared</span><span style="color: #000000"> = </span><span style="color: #0000FF">true</span><span style="color: #000000">;</span></span>
<span class=line><span style="color: #000000">});</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">// later in your code ...</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Execute prepared command</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Prepared</span><span style="color: #000000">() </span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Execute</span><span style="color: #000000">(</span><span style="color: #A31515">"update my_table set value = 1 where id = 1"</span><span style="color: #000000">);</span></span></code></pre></div><ul><li>Disclaimer: command preparation may vary on different provider implementations, and in some cases, it may be set as a connection string parameter. For example, see the <a href=https://www.npgsql.org/doc/prepare.html>prepared statements with PostgreSQL</a>.</ul><hr><h3 id=read>Read<a class="anchor bookmark-target"href=#read><i class="bi bi-link-45deg"></i></a></h3><h3 id=readasync>ReadAsync<a class="anchor bookmark-target"href=#readasync><i class="bi bi-link-45deg"></i></a></h3><h3 id=readformat>ReadFormat<a class="anchor bookmark-target"href=#readformat><i class="bi bi-link-45deg"></i></a></h3><h3 id=readformatasync>ReadFormatAsync<a class="anchor bookmark-target"href=#readformatasync><i class="bi bi-link-45deg"></i></a></h3><ul><li><p>There are four connection extensions and four instance methods:<ul><li><code>Read</code><li><code>ReadAsync</code><li><code>ReadFormat</code><li><code>ReadFormatAsync</code></ul><li><p>Each of these methods and extensions has one non-generic version and 13 generic versions.<li><p>They all implement a complex mapping system that enables you to map to anything from simple types to tuples and object instances.</ul><blockquote><p>Note: For more information on mapping system <a href=/norm.net/docs/reference/read/ >see read mappings section.</a></blockquote><hr><h3 id=withcancellationtoken>WithCancellationToken<a class="anchor bookmark-target"href=#withcancellationtoken><i class="bi bi-link-45deg"></i></a></h3><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #6A9955">// Extension</span></span>
<span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">static</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">WithCancellationToken</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">this</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">DbConnection</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">System</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">Threading</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">CancellationToken</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">cancellationToken</span><span style="color: #E6E6E6">);</span></span>
<span class=line><span style="color: #6A9955">// Norm Instance Method</span></span>
<span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">WithCancellationToken</span><span style="color: #E6E6E6">(</span><span style="color: #4EC9B0">System</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">Threading</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">CancellationToken</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">cancellationToken</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #008000">// Extension</span></span>
<span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">static</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000"> </span><span style="color: #795E26">WithCancellationToken</span><span style="color: #000000">(</span><span style="color: #0000FF">this</span><span style="color: #000000"> </span><span style="color: #267F99">DbConnection</span><span style="color: #000000"> </span><span style="color: #001080">connection</span><span style="color: #000000">, </span><span style="color: #267F99">System</span><span style="color: #000000">.</span><span style="color: #267F99">Threading</span><span style="color: #000000">.</span><span style="color: #267F99">CancellationToken</span><span style="color: #000000"> </span><span style="color: #001080">cancellationToken</span><span style="color: #000000">);</span></span>
<span class=line><span style="color: #008000">// Norm Instance Method</span></span>
<span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000"> </span><span style="color: #795E26">WithCancellationToken</span><span style="color: #000000">(</span><span style="color: #267F99">System</span><span style="color: #000000">.</span><span style="color: #267F99">Threading</span><span style="color: #000000">.</span><span style="color: #267F99">CancellationToken</span><span style="color: #000000"> </span><span style="color: #001080">cancellationToken</span><span style="color: #000000">);</span></span></code></pre></div><ul><li><p>Sets the cancelation token for the next command that can propagate the notification that operations should be canceled.<li><p>Example:</ul><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #6A9955">// create a new cancelation source</span></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">cancellationSource</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">CancellationTokenSource</span><span style="color: #E6E6E6">();</span></span>
<span class=line><span style="color: #9CDCFE">cancellationSource</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">CancelAfter</span><span style="color: #E6E6E6">(</span><span style="color: #B5CEA8">5000</span><span style="color: #E6E6E6">);</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Execute command and cancel after 500 milliseconds as defined by the cancelation source</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">WithCancellationToken</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">cancellationSource</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Token</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Execute</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"update my_table set value = 1 where id = 1"</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #008000">// create a new cancelation source</span></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">cancellationSource</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">CancellationTokenSource</span><span style="color: #000000">();</span></span>
<span class=line><span style="color: #001080">cancellationSource</span><span style="color: #000000">.</span><span style="color: #795E26">CancelAfter</span><span style="color: #000000">(</span><span style="color: #098658">5000</span><span style="color: #000000">);</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Execute command and cancel after 500 milliseconds as defined by the cancelation source</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">WithCancellationToken</span><span style="color: #000000">(</span><span style="color: #001080">cancellationSource</span><span style="color: #000000">.</span><span style="color: #001080">Token</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Execute</span><span style="color: #000000">(</span><span style="color: #A31515">"update my_table set value = 1 where id = 1"</span><span style="color: #000000">);</span></span></code></pre></div><hr><h3 id=withcommandbehavior>WithCommandBehavior<a class="anchor bookmark-target"href=#withcommandbehavior><i class="bi bi-link-45deg"></i></a></h3><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #6A9955">// Extension</span></span>
<span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">static</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">WithCommandBehavior</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">this</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">DbConnection</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">System</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">Data</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">CommandBehavior</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">behavior</span><span style="color: #E6E6E6">);</span></span>
<span class=line><span style="color: #6A9955">// Norm Instance Method</span></span>
<span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">WithCommandBehavior</span><span style="color: #E6E6E6">(</span><span style="color: #4EC9B0">System</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">Data</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">CommandBehavior</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">behavior</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #008000">// Extension</span></span>
<span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">static</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000"> </span><span style="color: #795E26">WithCommandBehavior</span><span style="color: #000000">(</span><span style="color: #0000FF">this</span><span style="color: #000000"> </span><span style="color: #267F99">DbConnection</span><span style="color: #000000"> </span><span style="color: #001080">connection</span><span style="color: #000000">, </span><span style="color: #267F99">System</span><span style="color: #000000">.</span><span style="color: #267F99">Data</span><span style="color: #000000">.</span><span style="color: #267F99">CommandBehavior</span><span style="color: #000000"> </span><span style="color: #001080">behavior</span><span style="color: #000000">);</span></span>
<span class=line><span style="color: #008000">// Norm Instance Method</span></span>
<span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000"> </span><span style="color: #795E26">WithCommandBehavior</span><span style="color: #000000">(</span><span style="color: #267F99">System</span><span style="color: #000000">.</span><span style="color: #267F99">Data</span><span style="color: #000000">.</span><span style="color: #267F99">CommandBehavior</span><span style="color: #000000"> </span><span style="color: #001080">behavior</span><span style="color: #000000">);</span></span></code></pre></div><ul><li><p>Sets the <a href=https://learn.microsoft.com/en-us/dotnet/api/system.data.commandbehavior>command behavior</a> on the next <a href=https://learn.microsoft.com/en-us/dotnet/api/system.data.sqlclient.sqlcommand.executereader#system-data-sqlclient-sqlcommand-executereader(system-data-commandbehavior)>reader execution</a> (by <code>Read</code> extension methods).<li><p>This provides a description of the results of the query and its effect on the database:</ul><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">namespace</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">System</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">Data</span></span>
<span class=line><span style="color: #E6E6E6">{</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #6A9955">// Summary:</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #6A9955">//     Provides a description of the results of the query and its effect on the database.</span></span>
<span class=line><span style="color: #E6E6E6">    [</span><span style="color: #4EC9B0">Flags</span><span style="color: #E6E6E6">]</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">enum</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">CommandBehavior</span></span>
<span class=line><span style="color: #E6E6E6">    {</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">// Summary:</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">//     The query may return multiple result sets. Execution of the query may affect</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">//     the database state. Default sets no System.Data.CommandBehavior flags, so calling</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">//     ExecuteReader(CommandBehavior.Default) is functionally equivalent to calling</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">//     ExecuteReader().</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #9CDCFE">Default</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #B5CEA8">0</span><span style="color: #E6E6E6">,</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">// Summary:</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">//     The query returns a single result set.</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #9CDCFE">SingleResult</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #B5CEA8">1</span><span style="color: #E6E6E6">,</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">// Summary:</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">//     The query returns column information only. When using System.Data.CommandBehavior.SchemaOnly,</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">//     the .NET Framework Data Provider for SQL Server precedes the statement being</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">//     executed with SET FMTONLY ON.</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #9CDCFE">SchemaOnly</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #B5CEA8">2</span><span style="color: #E6E6E6">,</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">// Summary:</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">//     The query returns column and primary key information. The provider appends extra</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">//     columns to the result set for existing primary key and timestamp columns.</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #9CDCFE">KeyInfo</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #B5CEA8">4</span><span style="color: #E6E6E6">,</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">// Summary:</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">//     The query is expected to return a single row of the first result set. Execution</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">//     of the query may affect the database state. Some .NET Framework data providers</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">//     may, but are not required to, use this information to optimize the performance</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">//     of the command. When you specify System.Data.CommandBehavior.SingleRow with the</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">//     System.Data.OleDb.OleDbCommand.ExecuteReader method of the System.Data.OleDb.OleDbCommand</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">//     object, the .NET Framework Data Provider for OLE DB performs binding using the</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">//     OLE DB IRow interface if it is available. Otherwise, it uses the IRowset interface.</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">//     If your SQL statement is expected to return only a single row, specifying System.Data.CommandBehavior.SingleRow</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">//     can also improve application performance. It is possible to specify SingleRow</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">//     when executing queries that are expected to return multiple result sets. In that</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">//     case, where both a multi-result set SQL query and single row are specified, the</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">//     result returned will contain only the first row of the first result set. The</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">//     other result sets of the query will not be returned.</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #9CDCFE">SingleRow</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #B5CEA8">8</span><span style="color: #E6E6E6">,</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">// Summary:</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">//     Provides a way for the DataReader to handle rows that contain columns with large</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">//     binary values. Rather than loading the entire row, SequentialAccess enables the</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">//     DataReader to load data as a stream. You can then use the GetBytes or GetChars</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">//     method to specify a byte location to start the read operation, and a limited</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">//     buffer size for the data being returned.</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #9CDCFE">SequentialAccess</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #B5CEA8">16</span><span style="color: #E6E6E6">,</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">// Summary:</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">//     When the command is executed, the associated Connection object is closed when</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">//     the associated DataReader object is closed.</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #9CDCFE">CloseConnection</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #B5CEA8">32</span></span>
<span class=line><span style="color: #E6E6E6">    }</span></span>
<span class=line><span style="color: #E6E6E6">}</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #0000FF">namespace</span><span style="color: #000000"> </span><span style="color: #267F99">System</span><span style="color: #000000">.</span><span style="color: #267F99">Data</span></span>
<span class=line><span style="color: #000000">{</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #008000">//</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #008000">// Summary:</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #008000">//     Provides a description of the results of the query and its effect on the database.</span></span>
<span class=line><span style="color: #000000">    [</span><span style="color: #267F99">Flags</span><span style="color: #000000">]</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">enum</span><span style="color: #000000"> </span><span style="color: #267F99">CommandBehavior</span></span>
<span class=line><span style="color: #000000">    {</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">//</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">// Summary:</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">//     The query may return multiple result sets. Execution of the query may affect</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">//     the database state. Default sets no System.Data.CommandBehavior flags, so calling</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">//     ExecuteReader(CommandBehavior.Default) is functionally equivalent to calling</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">//     ExecuteReader().</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #001080">Default</span><span style="color: #000000"> = </span><span style="color: #098658">0</span><span style="color: #000000">,</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">//</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">// Summary:</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">//     The query returns a single result set.</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #001080">SingleResult</span><span style="color: #000000"> = </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">//</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">// Summary:</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">//     The query returns column information only. When using System.Data.CommandBehavior.SchemaOnly,</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">//     the .NET Framework Data Provider for SQL Server precedes the statement being</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">//     executed with SET FMTONLY ON.</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #001080">SchemaOnly</span><span style="color: #000000"> = </span><span style="color: #098658">2</span><span style="color: #000000">,</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">//</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">// Summary:</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">//     The query returns column and primary key information. The provider appends extra</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">//     columns to the result set for existing primary key and timestamp columns.</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #001080">KeyInfo</span><span style="color: #000000"> = </span><span style="color: #098658">4</span><span style="color: #000000">,</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">//</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">// Summary:</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">//     The query is expected to return a single row of the first result set. Execution</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">//     of the query may affect the database state. Some .NET Framework data providers</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">//     may, but are not required to, use this information to optimize the performance</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">//     of the command. When you specify System.Data.CommandBehavior.SingleRow with the</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">//     System.Data.OleDb.OleDbCommand.ExecuteReader method of the System.Data.OleDb.OleDbCommand</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">//     object, the .NET Framework Data Provider for OLE DB performs binding using the</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">//     OLE DB IRow interface if it is available. Otherwise, it uses the IRowset interface.</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">//     If your SQL statement is expected to return only a single row, specifying System.Data.CommandBehavior.SingleRow</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">//     can also improve application performance. It is possible to specify SingleRow</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">//     when executing queries that are expected to return multiple result sets. In that</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">//     case, where both a multi-result set SQL query and single row are specified, the</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">//     result returned will contain only the first row of the first result set. The</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">//     other result sets of the query will not be returned.</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #001080">SingleRow</span><span style="color: #000000"> = </span><span style="color: #098658">8</span><span style="color: #000000">,</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">//</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">// Summary:</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">//     Provides a way for the DataReader to handle rows that contain columns with large</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">//     binary values. Rather than loading the entire row, SequentialAccess enables the</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">//     DataReader to load data as a stream. You can then use the GetBytes or GetChars</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">//     method to specify a byte location to start the read operation, and a limited</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">//     buffer size for the data being returned.</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #001080">SequentialAccess</span><span style="color: #000000"> = </span><span style="color: #098658">16</span><span style="color: #000000">,</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">//</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">// Summary:</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">//     When the command is executed, the associated Connection object is closed when</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">//     the associated DataReader object is closed.</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #001080">CloseConnection</span><span style="color: #000000"> = </span><span style="color: #098658">32</span></span>
<span class=line><span style="color: #000000">    }</span></span>
<span class=line><span style="color: #000000">}</span></span></code></pre></div><ul><li>Example:</ul><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Read single row result from a single result set and close the connection when done</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">result</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">WithCommandBehavior</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">CommandBehavior</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">CloseConnection</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">|</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">CommandBehavior</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">SingleResult</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">|</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">CommandBehavior</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">SingleRow</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;</span><span style="color: #569CD6">int</span><span style="color: #E6E6E6">>(</span><span style="color: #CE9178">"select count(*) from my_table"</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Read single row result from a single result set and close the connection when done</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">result</span><span style="color: #000000"> = </span><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">WithCommandBehavior</span><span style="color: #000000">(</span><span style="color: #001080">CommandBehavior</span><span style="color: #000000">.</span><span style="color: #001080">CloseConnection</span><span style="color: #000000"> | </span><span style="color: #001080">CommandBehavior</span><span style="color: #000000">.</span><span style="color: #001080">SingleResult</span><span style="color: #000000"> | </span><span style="color: #001080">CommandBehavior</span><span style="color: #000000">.</span><span style="color: #001080">SingleRow</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">int</span><span style="color: #000000">>(</span><span style="color: #A31515">"select count(*) from my_table"</span><span style="color: #000000">);</span></span></code></pre></div><hr><h3 id=withcommandcallback>WithCommandCallback<a class="anchor bookmark-target"href=#withcommandcallback><i class="bi bi-link-45deg"></i></a></h3><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #6A9955">// Extension</span></span>
<span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">static</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">WithCommandCallback</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">this</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">DbConnection</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">System</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">Action</span><span style="color: #E6E6E6">&lt;</span><span style="color: #4EC9B0">System</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">Data</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">Common</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">DbCommand</span><span style="color: #E6E6E6">> </span><span style="color: #9CDCFE">dbCommandCallback</span><span style="color: #E6E6E6">);</span></span>
<span class=line><span style="color: #6A9955">// Norm Instance Method</span></span>
<span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">WithCommandCallback</span><span style="color: #E6E6E6">(</span><span style="color: #4EC9B0">System</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">Action</span><span style="color: #E6E6E6">&lt;</span><span style="color: #4EC9B0">System</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">Data</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">Common</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">DbCommand</span><span style="color: #E6E6E6">> </span><span style="color: #9CDCFE">dbCommandCallback</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #008000">// Extension</span></span>
<span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">static</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000"> </span><span style="color: #795E26">WithCommandCallback</span><span style="color: #000000">(</span><span style="color: #0000FF">this</span><span style="color: #000000"> </span><span style="color: #267F99">DbConnection</span><span style="color: #000000"> </span><span style="color: #001080">connection</span><span style="color: #000000">, </span><span style="color: #267F99">System</span><span style="color: #000000">.</span><span style="color: #267F99">Action</span><span style="color: #000000">&lt;</span><span style="color: #267F99">System</span><span style="color: #000000">.</span><span style="color: #267F99">Data</span><span style="color: #000000">.</span><span style="color: #267F99">Common</span><span style="color: #000000">.</span><span style="color: #267F99">DbCommand</span><span style="color: #000000">> </span><span style="color: #001080">dbCommandCallback</span><span style="color: #000000">);</span></span>
<span class=line><span style="color: #008000">// Norm Instance Method</span></span>
<span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000"> </span><span style="color: #795E26">WithCommandCallback</span><span style="color: #000000">(</span><span style="color: #267F99">System</span><span style="color: #000000">.</span><span style="color: #267F99">Action</span><span style="color: #000000">&lt;</span><span style="color: #267F99">System</span><span style="color: #000000">.</span><span style="color: #267F99">Data</span><span style="color: #000000">.</span><span style="color: #267F99">Common</span><span style="color: #000000">.</span><span style="color: #267F99">DbCommand</span><span style="color: #000000">> </span><span style="color: #001080">dbCommandCallback</span><span style="color: #000000">);</span></span></code></pre></div><ul><li><p>Adds a <strong>callback function</strong> that will be executed when:<ul><li>After the <a href=https://learn.microsoft.com/en-us/dotnet/api/system.data.common.dbcommand><code>DbCommand</code></a> object has been created and initialized.<li>Before the command execution.</ul><li><p>The possible usage of this callback is to gain access to the <code>DbCommand</code> instance before execution to be able to change its properties.<li><p>Common usage of this callback is usually to log command text.<li><p>Example:</ul><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Read a single row and log the command text</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">result</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">WithCommandCallback</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">command</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">logger</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">LogInformation</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"SQL COMMAND: {0}"</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">command</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">CommandText</span><span style="color: #E6E6E6">))</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;</span><span style="color: #569CD6">int</span><span style="color: #E6E6E6">>(</span><span style="color: #CE9178">"select count(*) from my_table"</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Read a single row and log the command text</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">result</span><span style="color: #000000"> = </span><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">WithCommandCallback</span><span style="color: #000000">(</span><span style="color: #001080">command</span><span style="color: #000000"> => </span><span style="color: #001080">logger</span><span style="color: #000000">.</span><span style="color: #795E26">LogInformation</span><span style="color: #000000">(</span><span style="color: #A31515">"SQL COMMAND: {0}"</span><span style="color: #000000">, </span><span style="color: #001080">command</span><span style="color: #000000">.</span><span style="color: #001080">CommandText</span><span style="color: #000000">))</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">int</span><span style="color: #000000">>(</span><span style="color: #A31515">"select count(*) from my_table"</span><span style="color: #000000">);</span></span></code></pre></div><ul><li><p>This example will produce an info log with the following content: <code>SQL COMMAND: select count(*) from my_table</code>.<li><p>The common use of this callback is when we want to run some commands in a prepared mode:</ul><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">user</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">WithCommandCallback</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">command</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">command</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Prepare</span><span style="color: #E6E6E6">())</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">WithParameters</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">userId</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">date</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;</span><span style="color: #4EC9B0">User</span><span style="color: #E6E6E6">>(</span><span style="color: #CE9178">@"</span></span>
<span class=line><span style="color: #CE9178">        select u.* </span></span>
<span class=line><span style="color: #CE9178">        from users u, logs l </span></span>
<span class=line><span style="color: #CE9178">        where u.usrid = $1 and u.usrid = l.usrid and l.date = $2"</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Single</span><span style="color: #E6E6E6">();</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">user</span><span style="color: #000000"> = </span><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">WithCommandCallback</span><span style="color: #000000">(</span><span style="color: #001080">command</span><span style="color: #000000"> => </span><span style="color: #001080">command</span><span style="color: #000000">.</span><span style="color: #795E26">Prepare</span><span style="color: #000000">())</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">WithParameters</span><span style="color: #000000">(</span><span style="color: #001080">userId</span><span style="color: #000000">, </span><span style="color: #001080">date</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;</span><span style="color: #267F99">User</span><span style="color: #000000">>(</span><span style="color: #A31515">@"</span></span>
<span class=line><span style="color: #A31515">        select u.* </span></span>
<span class=line><span style="color: #A31515">        from users u, logs l </span></span>
<span class=line><span style="color: #A31515">        where u.usrid = $1 and u.usrid = l.usrid and l.date = $2"</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Single</span><span style="color: #000000">();</span></span></code></pre></div><ul><li>Note: this callback can be set for all commands - use the <code>Configure</code> method in your program startup:</ul><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Set global options in your startup </span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #9CDCFE">NormOptions</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Configure</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">options</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span></span>
<span class=line><span style="color: #E6E6E6">{</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">options</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">DbCommandCallback</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">command</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">logger</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">LogInformation</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"SQL COMMAND: {0}"</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">command</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">CommandText</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">});</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">// later in your code ...</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Read a single row and log the command text</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">result</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;</span><span style="color: #569CD6">int</span><span style="color: #E6E6E6">>(</span><span style="color: #CE9178">"select count(*) from my_table"</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Set global options in your startup </span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #001080">NormOptions</span><span style="color: #000000">.</span><span style="color: #795E26">Configure</span><span style="color: #000000">(</span><span style="color: #001080">options</span><span style="color: #000000"> =></span></span>
<span class=line><span style="color: #000000">{</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #001080">options</span><span style="color: #000000">.</span><span style="color: #001080">DbCommandCallback</span><span style="color: #000000"> = </span><span style="color: #001080">command</span><span style="color: #000000"> => </span><span style="color: #001080">logger</span><span style="color: #000000">.</span><span style="color: #795E26">LogInformation</span><span style="color: #000000">(</span><span style="color: #A31515">"SQL COMMAND: {0}"</span><span style="color: #000000">, </span><span style="color: #001080">command</span><span style="color: #000000">.</span><span style="color: #001080">CommandText</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">});</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">// later in your code ...</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Read a single row and log the command text</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">result</span><span style="color: #000000"> = </span><span style="color: #001080">connection</span><span style="color: #000000">.</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">int</span><span style="color: #000000">>(</span><span style="color: #A31515">"select count(*) from my_table"</span><span style="color: #000000">);</span></span></code></pre></div><ul><li>This will also produce an info log with the same content: <code>SQL COMMAND: select count(*) from my_table</code>.</ul><hr><h3 id=withcomment>WithComment<a class="anchor bookmark-target"href=#withcomment><i class="bi bi-link-45deg"></i></a></h3><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #6A9955">// Extension</span></span>
<span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">static</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">WithComment</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">this</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">DbConnection</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">comment</span><span style="color: #E6E6E6">);</span></span>
<span class=line><span style="color: #6A9955">// Norm Instance Method</span></span>
<span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">WithComment</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">string</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">comment</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #008000">// Extension</span></span>
<span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">static</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000"> </span><span style="color: #795E26">WithComment</span><span style="color: #000000">(</span><span style="color: #0000FF">this</span><span style="color: #000000"> </span><span style="color: #267F99">DbConnection</span><span style="color: #000000"> </span><span style="color: #001080">connection</span><span style="color: #000000">, </span><span style="color: #0000FF">string</span><span style="color: #000000"> </span><span style="color: #001080">comment</span><span style="color: #000000">);</span></span>
<span class=line><span style="color: #008000">// Norm Instance Method</span></span>
<span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000"> </span><span style="color: #795E26">WithComment</span><span style="color: #000000">(</span><span style="color: #0000FF">string</span><span style="color: #000000"> </span><span style="color: #001080">comment</span><span style="color: #000000">);</span></span></code></pre></div><ul><li><p>Sets the custom comment header for the next command. The content of the <code>comment</code> string will be added to the top of the <code>CommandText</code> as an SQL comment.<li><p>Example:</ul><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">result</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">WithComment</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"This is my comment"</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">WithCommandCallback</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">command</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">Console</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">WriteLine</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">command</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">CommandText</span><span style="color: #E6E6E6">))</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;</span><span style="color: #569CD6">int</span><span style="color: #E6E6E6">>(</span><span style="color: #CE9178">"select count(*) from my_table"</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">result</span><span style="color: #000000"> = </span><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">WithComment</span><span style="color: #000000">(</span><span style="color: #A31515">"This is my comment"</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">WithCommandCallback</span><span style="color: #000000">(</span><span style="color: #001080">command</span><span style="color: #000000"> => </span><span style="color: #001080">Console</span><span style="color: #000000">.</span><span style="color: #795E26">WriteLine</span><span style="color: #000000">(</span><span style="color: #001080">command</span><span style="color: #000000">.</span><span style="color: #001080">CommandText</span><span style="color: #000000">))</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">int</span><span style="color: #000000">>(</span><span style="color: #A31515">"select count(*) from my_table"</span><span style="color: #000000">);</span></span></code></pre></div><ul><li>This will print out the following console output:</ul><div class="code markdown"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #E6E6E6">/*</span></span>
<span class=line><span style="color: #E6E6E6">This is my comment</span></span>
<span class=line><span style="color: #E6E6E6">*/</span></span>
<span class=line><span style="color: #E6E6E6">select count(*) from my_table</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #000000">/*</span></span>
<span class=line><span style="color: #000000">This is my comment</span></span>
<span class=line><span style="color: #000000">*/</span></span>
<span class=line><span style="color: #000000">select count(*) from my_table</span></span></code></pre></div><hr><h3 id=withcommentcallerinfo>WithCommentCallerInfo<a class="anchor bookmark-target"href=#withcommentcallerinfo><i class="bi bi-link-45deg"></i></a></h3><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #6A9955">// Extension</span></span>
<span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">static</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">WithCommentCallerInfo</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">this</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">DbConnection</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">);</span></span>
<span class=line><span style="color: #6A9955">// Norm Instance Method</span></span>
<span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">WithCommentCallerInfo</span><span style="color: #E6E6E6">();</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #008000">// Extension</span></span>
<span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">static</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000"> </span><span style="color: #795E26">WithCommentCallerInfo</span><span style="color: #000000">(</span><span style="color: #0000FF">this</span><span style="color: #000000"> </span><span style="color: #267F99">DbConnection</span><span style="color: #000000"> </span><span style="color: #001080">connection</span><span style="color: #000000">);</span></span>
<span class=line><span style="color: #008000">// Norm Instance Method</span></span>
<span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000"> </span><span style="color: #795E26">WithCommentCallerInfo</span><span style="color: #000000">();</span></span></code></pre></div><ul><li><p>Sets the automatic custom comment header to the next command that will include caller information.<li><p>Caller information is compiler-generated metadata that includes:<ul><li><p><strong>Caller member name</strong>: a method or property name of the caller to the method.<li><p><strong>Caller file path</strong>: a full path of the source file that contains the caller at the compile time.<li><p><strong>Caller line number</strong>: a line number in the source file at which the method is called at the compile time.</ul><li><p>Example:</ul><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">result</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">WithCommentCallerInfo</span><span style="color: #E6E6E6">()</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">WithCommandCallback</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">command</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">Console</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">WriteLine</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">command</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">CommandText</span><span style="color: #E6E6E6">))</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;</span><span style="color: #569CD6">int</span><span style="color: #E6E6E6">>(</span><span style="color: #CE9178">"select count(*) from my_table"</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">result</span><span style="color: #000000"> = </span><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">WithCommentCallerInfo</span><span style="color: #000000">()</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">WithCommandCallback</span><span style="color: #000000">(</span><span style="color: #001080">command</span><span style="color: #000000"> => </span><span style="color: #001080">Console</span><span style="color: #000000">.</span><span style="color: #795E26">WriteLine</span><span style="color: #000000">(</span><span style="color: #001080">command</span><span style="color: #000000">.</span><span style="color: #001080">CommandText</span><span style="color: #000000">))</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">int</span><span style="color: #000000">>(</span><span style="color: #A31515">"select count(*) from my_table"</span><span style="color: #000000">);</span></span></code></pre></div><ul><li>If this example is executed in a method named <code>CallerInfoTest</code> that is located in a file <code>/home/MyProject/Examples.cs</code> at line 100 - this example will print out the following console output:</ul><div class="code markdown"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #E6E6E6">/*</span></span>
<span class=line><span style="color: #E6E6E6">at CallerInfoTest in /home/MyProject/Examples.cs#100</span></span>
<span class=line><span style="color: #E6E6E6">*/</span></span>
<span class=line><span style="color: #E6E6E6">select count(*) from my_table</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #000000">/*</span></span>
<span class=line><span style="color: #000000">at CallerInfoTest in /home/MyProject/Examples.cs#100</span></span>
<span class=line><span style="color: #000000">*/</span></span>
<span class=line><span style="color: #000000">select count(*) from my_table</span></span></code></pre></div><ul><li>Note: this option can be set for every command - use the <code>Configure</code> method in your program startup:</ul><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Set global options in your startup </span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #9CDCFE">NormOptions</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Configure</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">options</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span></span>
<span class=line><span style="color: #E6E6E6">{</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">options</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">CommandCommentHeader</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Enabled</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">true</span><span style="color: #E6E6E6">;</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">options</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">CommandCommentHeader</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">IncludeCallerInfo</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">true</span><span style="color: #E6E6E6">;</span></span>
<span class=line><span style="color: #E6E6E6">});</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">// later in your code ...</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Read the single row </span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">result</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;</span><span style="color: #569CD6">int</span><span style="color: #E6E6E6">>(</span><span style="color: #CE9178">"select count(*) from my_table"</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Set global options in your startup </span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #001080">NormOptions</span><span style="color: #000000">.</span><span style="color: #795E26">Configure</span><span style="color: #000000">(</span><span style="color: #001080">options</span><span style="color: #000000"> =></span></span>
<span class=line><span style="color: #000000">{</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #001080">options</span><span style="color: #000000">.</span><span style="color: #001080">CommandCommentHeader</span><span style="color: #000000">.</span><span style="color: #001080">Enabled</span><span style="color: #000000"> = </span><span style="color: #0000FF">true</span><span style="color: #000000">;</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #001080">options</span><span style="color: #000000">.</span><span style="color: #001080">CommandCommentHeader</span><span style="color: #000000">.</span><span style="color: #001080">IncludeCallerInfo</span><span style="color: #000000"> = </span><span style="color: #0000FF">true</span><span style="color: #000000">;</span></span>
<span class=line><span style="color: #000000">});</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">// later in your code ...</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Read the single row </span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">result</span><span style="color: #000000"> = </span><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">int</span><span style="color: #000000">>(</span><span style="color: #A31515">"select count(*) from my_table"</span><span style="color: #000000">);</span></span></code></pre></div><ul><li>This will include exact caller info (caller member, file path, and line number) in every command you create.</ul><hr><h3 id=withcommentparameters>WithCommentParameters<a class="anchor bookmark-target"href=#withcommentparameters><i class="bi bi-link-45deg"></i></a></h3><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #6A9955">// Extension</span></span>
<span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">static</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">WithCommentParameters</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">this</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">DbConnection</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">);</span></span>
<span class=line><span style="color: #6A9955">// Norm Instance Method</span></span>
<span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">WithCommentParameters</span><span style="color: #E6E6E6">();</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #008000">// Extension</span></span>
<span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">static</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000"> </span><span style="color: #795E26">WithCommentParameters</span><span style="color: #000000">(</span><span style="color: #0000FF">this</span><span style="color: #000000"> </span><span style="color: #267F99">DbConnection</span><span style="color: #000000"> </span><span style="color: #001080">connection</span><span style="color: #000000">);</span></span>
<span class=line><span style="color: #008000">// Norm Instance Method</span></span>
<span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000"> </span><span style="color: #795E26">WithCommentParameters</span><span style="color: #000000">();</span></span></code></pre></div><ul><li><p>Sets the option for the next command to include command parameters in the command header comment.<li><p>Example:</ul><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">result</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">WithCommentParameters</span><span style="color: #E6E6E6">()</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">WithCommandCallback</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">command</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">Console</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">WriteLine</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">command</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">CommandText</span><span style="color: #E6E6E6">))</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">WithParameters</span><span style="color: #E6E6E6">(</span><span style="color: #B5CEA8">1</span><span style="color: #E6E6E6">, </span><span style="color: #CE9178">"foo"</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">false</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">DateTime</span><span style="color: #E6E6E6">(</span><span style="color: #B5CEA8">2022</span><span style="color: #E6E6E6">, </span><span style="color: #B5CEA8">5</span><span style="color: #E6E6E6">, </span><span style="color: #B5CEA8">19</span><span style="color: #E6E6E6">))</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Execute</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"select @p1, @p2, @p3, @p4"</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">result</span><span style="color: #000000"> = </span><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">WithCommentParameters</span><span style="color: #000000">()</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">WithCommandCallback</span><span style="color: #000000">(</span><span style="color: #001080">command</span><span style="color: #000000"> => </span><span style="color: #001080">Console</span><span style="color: #000000">.</span><span style="color: #795E26">WriteLine</span><span style="color: #000000">(</span><span style="color: #001080">command</span><span style="color: #000000">.</span><span style="color: #001080">CommandText</span><span style="color: #000000">))</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">WithParameters</span><span style="color: #000000">(</span><span style="color: #098658">1</span><span style="color: #000000">, </span><span style="color: #A31515">"foo"</span><span style="color: #000000">, </span><span style="color: #0000FF">false</span><span style="color: #000000">, </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">DateTime</span><span style="color: #000000">(</span><span style="color: #098658">2022</span><span style="color: #000000">, </span><span style="color: #098658">5</span><span style="color: #000000">, </span><span style="color: #098658">19</span><span style="color: #000000">))</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Execute</span><span style="color: #000000">(</span><span style="color: #A31515">"select @p1, @p2, @p3, @p4"</span><span style="color: #000000">);</span></span></code></pre></div><ul><li>This will print out the following console output:</ul><div class="code markdown"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #E6E6E6">/*</span></span>
<span class=line><span style="color: #E6E6E6">@p1 int = 2</span></span>
<span class=line><span style="color: #E6E6E6">@p2 nvarchar = "bar"</span></span>
<span class=line><span style="color: #E6E6E6">@p3 bit = false"</span></span>
<span class=line><span style="color: #E6E6E6">@p4 datetime = "1977-05-19T00:00:00.0000000"</span></span>
<span class=line><span style="color: #E6E6E6">*/</span></span>
<span class=line><span style="color: #E6E6E6">select @p1, @p2, @p3, @p4</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #000000">/*</span></span>
<span class=line><span style="color: #000000">@p1 int = 2</span></span>
<span class=line><span style="color: #000000">@p2 nvarchar = "bar"</span></span>
<span class=line><span style="color: #000000">@p3 bit = false"</span></span>
<span class=line><span style="color: #000000">@p4 datetime = "1977-05-19T00:00:00.0000000"</span></span>
<span class=line><span style="color: #000000">*/</span></span>
<span class=line><span style="color: #000000">select @p1, @p2, @p3, @p4</span></span></code></pre></div><hr><h3 id=withcommentheader>WithCommentHeader<a class="anchor bookmark-target"href=#withcommentheader><i class="bi bi-link-45deg"></i></a></h3><ul><li>Sets the options for the next command to include command header comment with options set in method parameters.</ul><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #6A9955">// Extension</span></span>
<span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">static</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">WithCommentHeader</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">this</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">DbConnection</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">, </span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">comment</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">null</span><span style="color: #E6E6E6">, </span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #569CD6">bool</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">includeCommandAttributes</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">true</span><span style="color: #E6E6E6">, </span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #569CD6">bool</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">includeParameters</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">true</span><span style="color: #E6E6E6">, </span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #569CD6">bool</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">includeCallerInfo</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">true</span><span style="color: #E6E6E6">, </span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #569CD6">bool</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">includeTimestamp</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">false</span><span style="color: #E6E6E6">);</span></span>
<span class=line><span style="color: #6A9955">// Norm Instance Method</span></span>
<span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">WithCommentHeader</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">string</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">comment</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">null</span><span style="color: #E6E6E6">, </span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #569CD6">bool</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">includeCommandAttributes</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">true</span><span style="color: #E6E6E6">, </span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #569CD6">bool</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">includeParameters</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">true</span><span style="color: #E6E6E6">, </span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #569CD6">bool</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">includeCallerInfo</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">true</span><span style="color: #E6E6E6">, </span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #569CD6">bool</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">includeTimestamp</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">false</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #008000">// Extension</span></span>
<span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">static</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000"> </span><span style="color: #795E26">WithCommentHeader</span><span style="color: #000000">(</span><span style="color: #0000FF">this</span><span style="color: #000000"> </span><span style="color: #267F99">DbConnection</span><span style="color: #000000"> </span><span style="color: #001080">connection</span><span style="color: #000000">, </span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #0000FF">string</span><span style="color: #000000"> </span><span style="color: #001080">comment</span><span style="color: #000000"> = </span><span style="color: #0000FF">null</span><span style="color: #000000">, </span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #0000FF">bool</span><span style="color: #000000"> </span><span style="color: #001080">includeCommandAttributes</span><span style="color: #000000"> = </span><span style="color: #0000FF">true</span><span style="color: #000000">, </span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #0000FF">bool</span><span style="color: #000000"> </span><span style="color: #001080">includeParameters</span><span style="color: #000000"> = </span><span style="color: #0000FF">true</span><span style="color: #000000">, </span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #0000FF">bool</span><span style="color: #000000"> </span><span style="color: #001080">includeCallerInfo</span><span style="color: #000000"> = </span><span style="color: #0000FF">true</span><span style="color: #000000">, </span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #0000FF">bool</span><span style="color: #000000"> </span><span style="color: #001080">includeTimestamp</span><span style="color: #000000"> = </span><span style="color: #0000FF">false</span><span style="color: #000000">);</span></span>
<span class=line><span style="color: #008000">// Norm Instance Method</span></span>
<span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000"> </span><span style="color: #795E26">WithCommentHeader</span><span style="color: #000000">(</span><span style="color: #0000FF">string</span><span style="color: #000000"> </span><span style="color: #001080">comment</span><span style="color: #000000"> = </span><span style="color: #0000FF">null</span><span style="color: #000000">, </span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #0000FF">bool</span><span style="color: #000000"> </span><span style="color: #001080">includeCommandAttributes</span><span style="color: #000000"> = </span><span style="color: #0000FF">true</span><span style="color: #000000">, </span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #0000FF">bool</span><span style="color: #000000"> </span><span style="color: #001080">includeParameters</span><span style="color: #000000"> = </span><span style="color: #0000FF">true</span><span style="color: #000000">, </span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #0000FF">bool</span><span style="color: #000000"> </span><span style="color: #001080">includeCallerInfo</span><span style="color: #000000"> = </span><span style="color: #0000FF">true</span><span style="color: #000000">, </span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #0000FF">bool</span><span style="color: #000000"> </span><span style="color: #001080">includeTimestamp</span><span style="color: #000000"> = </span><span style="color: #0000FF">false</span><span style="color: #000000">);</span></span></code></pre></div><ul><li>Parameters:<ul><li><code>string comment = null</code> - sets the custom text comment header for the next command.<li><code>bool includeCommandAttributes = true</code> - includes command attributes, such as database provider, command type (text, procedure), and command timeout in the comment header for the next command.<li><code>bool includeParameters = true</code> - includes parameter names and values in the comment header for the next command.<li><code>bool includeCallerInfo = true</code> - includes caller info (member name, file path, and line number) in the comment header for the next command.<li><code>bool includeTimestamp = false</code> - includes a current timestamp in the comment header for the next command.</ul></ul><hr><h3 id=withparameters>WithParameters<a class="anchor bookmark-target"href=#withparameters><i class="bi bi-link-45deg"></i></a></h3><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #6A9955">// Extension</span></span>
<span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">static</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">WithParameters</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">this</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">DbConnection</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">params</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">object</span><span style="color: #E6E6E6">[] </span><span style="color: #9CDCFE">parameters</span><span style="color: #E6E6E6">);</span></span>
<span class=line><span style="color: #6A9955">// Norm Instance Method</span></span>
<span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">WithParameters</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">params</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">object</span><span style="color: #E6E6E6">[] </span><span style="color: #9CDCFE">parameters</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #008000">// Extension</span></span>
<span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">static</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000"> </span><span style="color: #795E26">WithParameters</span><span style="color: #000000">(</span><span style="color: #0000FF">this</span><span style="color: #000000"> </span><span style="color: #267F99">DbConnection</span><span style="color: #000000"> </span><span style="color: #001080">connection</span><span style="color: #000000">, </span><span style="color: #0000FF">params</span><span style="color: #000000"> </span><span style="color: #0000FF">object</span><span style="color: #000000">[] </span><span style="color: #001080">parameters</span><span style="color: #000000">);</span></span>
<span class=line><span style="color: #008000">// Norm Instance Method</span></span>
<span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000"> </span><span style="color: #795E26">WithParameters</span><span style="color: #000000">(</span><span style="color: #0000FF">params</span><span style="color: #000000"> </span><span style="color: #0000FF">object</span><span style="color: #000000">[] </span><span style="color: #001080">parameters</span><span style="color: #000000">);</span></span></code></pre></div><ul><li><p>This method can receive one or more arguments of the <code>object</code> type.<li><p>The parameter value can be either:<ul><li>Simple type (integers, strings, dates, etc.).<li>Object instances.<li>Two value tuples (value and database type).<li><a href=https://learn.microsoft.com/en-us/dotnet/api/system.data.common.dbparameter><code>DbParameter</code></a> instance.</ul><li><p>Depending on the parameter type, parameters can be set in different ways: positional, named, or mixed.</ul><blockquote><p>Note: For more information on working with parameters <a href=/norm.net/docs/reference/parameters/ >see working with parameters section.</a></blockquote><hr><h3 id=withreadercallback>WithReaderCallback<a class="anchor bookmark-target"href=#withreadercallback><i class="bi bi-link-45deg"></i></a></h3><ul><li>Sets the custom database reader callback function that will be executed on each database reader iteration step for every field:</ul><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #6A9955">// Extension</span></span>
<span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">static</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">WithReaderCallback</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">this</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">DbConnection</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">Func</span><span style="color: #E6E6E6">&lt;(</span><span style="color: #569CD6">string</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">Name</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">int</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">Ordinal</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">DbDataReader</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">Reader</span><span style="color: #E6E6E6">), </span><span style="color: #569CD6">object</span><span style="color: #E6E6E6">> </span><span style="color: #9CDCFE">readerCallback</span><span style="color: #E6E6E6">);</span></span>
<span class=line><span style="color: #6A9955">// Norm Instance Method</span></span>
<span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">WithReaderCallback</span><span style="color: #E6E6E6">(</span><span style="color: #4EC9B0">Func</span><span style="color: #E6E6E6">&lt;(</span><span style="color: #569CD6">string</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">Name</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">int</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">Ordinal</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">DbDataReader</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">Reader</span><span style="color: #E6E6E6">), </span><span style="color: #569CD6">object</span><span style="color: #E6E6E6">> </span><span style="color: #9CDCFE">readerCallback</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #008000">// Extension</span></span>
<span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">static</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000"> </span><span style="color: #795E26">WithReaderCallback</span><span style="color: #000000">(</span><span style="color: #0000FF">this</span><span style="color: #000000"> </span><span style="color: #267F99">DbConnection</span><span style="color: #000000"> </span><span style="color: #001080">connection</span><span style="color: #000000">, </span><span style="color: #267F99">Func</span><span style="color: #000000">&lt;(</span><span style="color: #0000FF">string</span><span style="color: #000000"> </span><span style="color: #001080">Name</span><span style="color: #000000">, </span><span style="color: #0000FF">int</span><span style="color: #000000"> </span><span style="color: #001080">Ordinal</span><span style="color: #000000">, </span><span style="color: #267F99">DbDataReader</span><span style="color: #000000"> </span><span style="color: #001080">Reader</span><span style="color: #000000">), </span><span style="color: #0000FF">object</span><span style="color: #000000">> </span><span style="color: #001080">readerCallback</span><span style="color: #000000">);</span></span>
<span class=line><span style="color: #008000">// Norm Instance Method</span></span>
<span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000"> </span><span style="color: #795E26">WithReaderCallback</span><span style="color: #000000">(</span><span style="color: #267F99">Func</span><span style="color: #000000">&lt;(</span><span style="color: #0000FF">string</span><span style="color: #000000"> </span><span style="color: #001080">Name</span><span style="color: #000000">, </span><span style="color: #0000FF">int</span><span style="color: #000000"> </span><span style="color: #001080">Ordinal</span><span style="color: #000000">, </span><span style="color: #267F99">DbDataReader</span><span style="color: #000000"> </span><span style="color: #001080">Reader</span><span style="color: #000000">), </span><span style="color: #0000FF">object</span><span style="color: #000000">> </span><span style="color: #001080">readerCallback</span><span style="color: #000000">);</span></span></code></pre></div><ul><li>The custom callback function will be called with one tuple value parameter with three values:<ul><li><code>string Name</code> - field name that is being read.<li><code>int Ordinal</code> - ordinal, zero-based position of the field that is being read.<li><code>DbDataReader Reader</code> - <a href=https://learn.microsoft.com/en-us/dotnet/api/system.data.common.dbdatareader><code>DbDataReader</code></a> instance.</ul></ul><p>The custom callback function should return an object value that will be used as a value in further object mapping.<ul><li><p>If the custom callback function returns a <code>null</code> value - it will fall back to default behavior (reading and mapping that value).<li><p>Return <a href=https://learn.microsoft.com/en-us/dotnet/api/system.dbnull><code>DBNull.Value</code></a> value to map to <code>null</code> value.<li><p>Examples:<li><p>The query returns two fields: <code>i</code> and <code>j</code>, with values 1, 2 and 3. The custom function that adds 1 to the column at the first position would look like this:</ul><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">result</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">WithReaderCallback</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">r</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span></span>
<span class=line><span style="color: #E6E6E6">    {</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #C586C0">if</span><span style="color: #E6E6E6"> (</span><span style="color: #9CDCFE">r</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Ordinal</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">==</span><span style="color: #E6E6E6"> </span><span style="color: #B5CEA8">0</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">        {</span></span>
<span class=line><span style="color: #E6E6E6">            </span><span style="color: #C586C0">return</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">r</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Reader</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">GetInt32</span><span style="color: #E6E6E6">(</span><span style="color: #B5CEA8">0</span><span style="color: #E6E6E6">) </span><span style="color: #D4D4D4">+</span><span style="color: #E6E6E6"> </span><span style="color: #B5CEA8">1</span><span style="color: #E6E6E6">;</span></span>
<span class=line><span style="color: #E6E6E6">        }</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #C586C0">return</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">null</span><span style="color: #E6E6E6">; </span><span style="color: #6A9955">// default behavior</span></span>
<span class=line><span style="color: #E6E6E6">    })</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;(</span><span style="color: #569CD6">int</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">i</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">int</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">j</span><span style="color: #E6E6E6">)>(</span><span style="color: #CE9178">@"</span></span>
<span class=line><span style="color: #CE9178">        select * from (values </span></span>
<span class=line><span style="color: #CE9178">            (1, 1),</span></span>
<span class=line><span style="color: #CE9178">            (2, 2),</span></span>
<span class=line><span style="color: #CE9178">            (3, 3)</span></span>
<span class=line><span style="color: #CE9178">        ) t(i, j)"</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">ToArray</span><span style="color: #E6E6E6">();</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">result</span><span style="color: #000000"> = </span><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">WithReaderCallback</span><span style="color: #000000">(</span><span style="color: #001080">r</span><span style="color: #000000"> =></span></span>
<span class=line><span style="color: #000000">    {</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">r</span><span style="color: #000000">.</span><span style="color: #001080">Ordinal</span><span style="color: #000000"> == </span><span style="color: #098658">0</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">        {</span></span>
<span class=line><span style="color: #000000">            </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">r</span><span style="color: #000000">.</span><span style="color: #001080">Reader</span><span style="color: #000000">.</span><span style="color: #795E26">GetInt32</span><span style="color: #000000">(</span><span style="color: #098658">0</span><span style="color: #000000">) + </span><span style="color: #098658">1</span><span style="color: #000000">;</span></span>
<span class=line><span style="color: #000000">        }</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #0000FF">null</span><span style="color: #000000">; </span><span style="color: #008000">// default behavior</span></span>
<span class=line><span style="color: #000000">    })</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;(</span><span style="color: #0000FF">int</span><span style="color: #000000"> </span><span style="color: #001080">i</span><span style="color: #000000">, </span><span style="color: #0000FF">int</span><span style="color: #000000"> </span><span style="color: #001080">j</span><span style="color: #000000">)>(</span><span style="color: #A31515">@"</span></span>
<span class=line><span style="color: #A31515">        select * from (values </span></span>
<span class=line><span style="color: #A31515">            (1, 1),</span></span>
<span class=line><span style="color: #A31515">            (2, 2),</span></span>
<span class=line><span style="color: #A31515">            (3, 3)</span></span>
<span class=line><span style="color: #A31515">        ) t(i, j)"</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">ToArray</span><span style="color: #000000">();</span></span></code></pre></div><ul><li>This can be simplified with expression function and switch expression, like this for example:</ul><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">result</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">WithReaderCallback</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">r</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">r</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Ordinal</span><span style="color: #E6E6E6"> </span><span style="color: #C586C0">switch</span></span>
<span class=line><span style="color: #E6E6E6">    {</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #B5CEA8">0</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">r</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Reader</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">GetInt32</span><span style="color: #E6E6E6">(</span><span style="color: #B5CEA8">0</span><span style="color: #E6E6E6">) </span><span style="color: #D4D4D4">+</span><span style="color: #E6E6E6"> </span><span style="color: #B5CEA8">1</span><span style="color: #E6E6E6">,</span></span>
<span class=line><span style="color: #E6E6E6">        _ </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">null</span><span style="color: #E6E6E6"> </span><span style="color: #6A9955">// default behavior</span></span>
<span class=line><span style="color: #E6E6E6">    })</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;(</span><span style="color: #569CD6">int</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">i</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">int</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">j</span><span style="color: #E6E6E6">)>(</span><span style="color: #CE9178">@"</span></span>
<span class=line><span style="color: #CE9178">        select * from (values </span></span>
<span class=line><span style="color: #CE9178">            (1, 1),</span></span>
<span class=line><span style="color: #CE9178">            (2, 2),</span></span>
<span class=line><span style="color: #CE9178">            (3, 3)</span></span>
<span class=line><span style="color: #CE9178">        ) t(i, j)"</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">ToArray</span><span style="color: #E6E6E6">();</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">result</span><span style="color: #000000"> = </span><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">WithReaderCallback</span><span style="color: #000000">(</span><span style="color: #001080">r</span><span style="color: #000000"> => </span><span style="color: #001080">r</span><span style="color: #000000">.</span><span style="color: #001080">Ordinal</span><span style="color: #000000"> </span><span style="color: #AF00DB">switch</span></span>
<span class=line><span style="color: #000000">    {</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #098658">0</span><span style="color: #000000"> => </span><span style="color: #001080">r</span><span style="color: #000000">.</span><span style="color: #001080">Reader</span><span style="color: #000000">.</span><span style="color: #795E26">GetInt32</span><span style="color: #000000">(</span><span style="color: #098658">0</span><span style="color: #000000">) + </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class=line><span style="color: #000000">        _ => </span><span style="color: #0000FF">null</span><span style="color: #000000"> </span><span style="color: #008000">// default behavior</span></span>
<span class=line><span style="color: #000000">    })</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;(</span><span style="color: #0000FF">int</span><span style="color: #000000"> </span><span style="color: #001080">i</span><span style="color: #000000">, </span><span style="color: #0000FF">int</span><span style="color: #000000"> </span><span style="color: #001080">j</span><span style="color: #000000">)>(</span><span style="color: #A31515">@"</span></span>
<span class=line><span style="color: #A31515">        select * from (values </span></span>
<span class=line><span style="color: #A31515">            (1, 1),</span></span>
<span class=line><span style="color: #A31515">            (2, 2),</span></span>
<span class=line><span style="color: #A31515">            (3, 3)</span></span>
<span class=line><span style="color: #A31515">        ) t(i, j)"</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">ToArray</span><span style="color: #000000">();</span></span></code></pre></div><ul><li>If we wanted, for example, just to return <code>null</code> in the first column if the value is 1, otherwise keep the original value, we can do this:</ul><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">result</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">WithReaderCallback</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">r</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">r</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Ordinal</span><span style="color: #E6E6E6"> </span><span style="color: #C586C0">switch</span></span>
<span class=line><span style="color: #E6E6E6">    {</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #B5CEA8">0</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">r</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Reader</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">GetInt32</span><span style="color: #E6E6E6">(</span><span style="color: #B5CEA8">0</span><span style="color: #E6E6E6">) </span><span style="color: #D4D4D4">==</span><span style="color: #E6E6E6"> </span><span style="color: #B5CEA8">1</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">?</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">DBNull</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Value</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">:</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">null</span><span style="color: #E6E6E6">, </span><span style="color: #6A9955">// DBNull.Value to set the value to null; otherwise, fallback to default behavior</span></span>
<span class=line><span style="color: #E6E6E6">        _ </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">null</span></span>
<span class=line><span style="color: #E6E6E6">    })</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;(</span><span style="color: #569CD6">int</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">i</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">int</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">j</span><span style="color: #E6E6E6">)>(</span><span style="color: #CE9178">@"</span></span>
<span class=line><span style="color: #CE9178">        select * from (values </span></span>
<span class=line><span style="color: #CE9178">            (1, 1),</span></span>
<span class=line><span style="color: #CE9178">            (2, 2),</span></span>
<span class=line><span style="color: #CE9178">            (3, 3)</span></span>
<span class=line><span style="color: #CE9178">        ) t(i, j)"</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">ToArray</span><span style="color: #E6E6E6">();</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">result</span><span style="color: #000000"> = </span><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">WithReaderCallback</span><span style="color: #000000">(</span><span style="color: #001080">r</span><span style="color: #000000"> => </span><span style="color: #001080">r</span><span style="color: #000000">.</span><span style="color: #001080">Ordinal</span><span style="color: #000000"> </span><span style="color: #AF00DB">switch</span></span>
<span class=line><span style="color: #000000">    {</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #098658">0</span><span style="color: #000000"> => </span><span style="color: #001080">r</span><span style="color: #000000">.</span><span style="color: #001080">Reader</span><span style="color: #000000">.</span><span style="color: #795E26">GetInt32</span><span style="color: #000000">(</span><span style="color: #098658">0</span><span style="color: #000000">) == </span><span style="color: #098658">1</span><span style="color: #000000"> ? </span><span style="color: #001080">DBNull</span><span style="color: #000000">.</span><span style="color: #001080">Value</span><span style="color: #000000"> : </span><span style="color: #0000FF">null</span><span style="color: #000000">, </span><span style="color: #008000">// DBNull.Value to set the value to null; otherwise, fallback to default behavior</span></span>
<span class=line><span style="color: #000000">        _ => </span><span style="color: #0000FF">null</span></span>
<span class=line><span style="color: #000000">    })</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;(</span><span style="color: #0000FF">int</span><span style="color: #000000"> </span><span style="color: #001080">i</span><span style="color: #000000">, </span><span style="color: #0000FF">int</span><span style="color: #000000"> </span><span style="color: #001080">j</span><span style="color: #000000">)>(</span><span style="color: #A31515">@"</span></span>
<span class=line><span style="color: #A31515">        select * from (values </span></span>
<span class=line><span style="color: #A31515">            (1, 1),</span></span>
<span class=line><span style="color: #A31515">            (2, 2),</span></span>
<span class=line><span style="color: #A31515">            (3, 3)</span></span>
<span class=line><span style="color: #A31515">        ) t(i, j)"</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">ToArray</span><span style="color: #000000">();</span></span></code></pre></div><ul><li><p>This technique is used to handle complex types and to implement complex mappings, otherwise not supported by the library.<li><p>Note: to set all database reads to execute a specific callback reader that will return custom values - use the <code>Configure</code> method in your program startup.<li><p>For example, every field that is the <code>JSON</code> database type can be converted to the <a href=https://learn.microsoft.com/en-us/dotnet/api/system.json.jsonobject><code>JsonObject</code></a> object with this configuration:</ul><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #6A9955">// Reader callback can be in an expression method instead of a lambda function</span></span>
<span class=line><span style="color: #569CD6">private</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">object</span><span style="color: #E6E6E6">? </span><span style="color: #DCDCAA">ReaderCallback</span><span style="color: #E6E6E6">((</span><span style="color: #569CD6">string</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">Name</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">int</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">Ordinal</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">DbDataReader</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">Reader</span><span style="color: #E6E6E6">) </span><span style="color: #9CDCFE">arg</span><span style="color: #E6E6E6">) </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #6A9955">// switch over the column type</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">arg</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Reader</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">GetDataTypeName</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">arg</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Ordinal</span><span style="color: #E6E6E6">) </span><span style="color: #C586C0">switch</span></span>
<span class=line><span style="color: #E6E6E6">{</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #6A9955">// if the column type is json, then convert it to JsonObject</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #CE9178">"json"</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">JsonNode</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Parse</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">arg</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Reader</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">GetString</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">arg</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Ordinal</span><span style="color: #E6E6E6">))</span><span style="color: #D4D4D4">?</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">AsObject</span><span style="color: #E6E6E6">(),</span></span>
<span class=line><span style="color: #E6E6E6">    _ </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">null</span><span style="color: #E6E6E6"> </span><span style="color: #6A9955">// default value</span></span>
<span class=line><span style="color: #E6E6E6">};</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">// Set the option in your startup code...</span></span>
<span class=line><span style="color: #9CDCFE">NormOptions</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Configure</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">options</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">options</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">DbReaderCallback</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">ReaderCallback</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #008000">// Reader callback can be in an expression method instead of a lambda function</span></span>
<span class=line><span style="color: #0000FF">private</span><span style="color: #000000"> </span><span style="color: #0000FF">object</span><span style="color: #000000">? </span><span style="color: #795E26">ReaderCallback</span><span style="color: #000000">((</span><span style="color: #0000FF">string</span><span style="color: #000000"> </span><span style="color: #001080">Name</span><span style="color: #000000">, </span><span style="color: #0000FF">int</span><span style="color: #000000"> </span><span style="color: #001080">Ordinal</span><span style="color: #000000">, </span><span style="color: #267F99">DbDataReader</span><span style="color: #000000"> </span><span style="color: #001080">Reader</span><span style="color: #000000">) </span><span style="color: #001080">arg</span><span style="color: #000000">) => </span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #008000">// switch over the column type</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #001080">arg</span><span style="color: #000000">.</span><span style="color: #001080">Reader</span><span style="color: #000000">.</span><span style="color: #795E26">GetDataTypeName</span><span style="color: #000000">(</span><span style="color: #001080">arg</span><span style="color: #000000">.</span><span style="color: #001080">Ordinal</span><span style="color: #000000">) </span><span style="color: #AF00DB">switch</span></span>
<span class=line><span style="color: #000000">{</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #008000">// if the column type is json, then convert it to JsonObject</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #A31515">"json"</span><span style="color: #000000"> => </span><span style="color: #001080">JsonNode</span><span style="color: #000000">.</span><span style="color: #795E26">Parse</span><span style="color: #000000">(</span><span style="color: #001080">arg</span><span style="color: #000000">.</span><span style="color: #001080">Reader</span><span style="color: #000000">.</span><span style="color: #795E26">GetString</span><span style="color: #000000">(</span><span style="color: #001080">arg</span><span style="color: #000000">.</span><span style="color: #001080">Ordinal</span><span style="color: #000000">))?.</span><span style="color: #795E26">AsObject</span><span style="color: #000000">(),</span></span>
<span class=line><span style="color: #000000">    _ => </span><span style="color: #0000FF">null</span><span style="color: #000000"> </span><span style="color: #008000">// default value</span></span>
<span class=line><span style="color: #000000">};</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">// Set the option in your startup code...</span></span>
<span class=line><span style="color: #001080">NormOptions</span><span style="color: #000000">.</span><span style="color: #795E26">Configure</span><span style="color: #000000">(</span><span style="color: #001080">options</span><span style="color: #000000"> => </span><span style="color: #001080">options</span><span style="color: #000000">.</span><span style="color: #001080">DbReaderCallback</span><span style="color: #000000"> = </span><span style="color: #001080">ReaderCallback</span><span style="color: #000000">);</span></span></code></pre></div><hr><h3 id=withtimeout>WithTimeout<a class="anchor bookmark-target"href=#withtimeout><i class="bi bi-link-45deg"></i></a></h3><ul><li>Sets the wait time in seconds for the connection commands before terminating the attempt to execute a command and generating an error:</ul><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #6A9955">// Extension</span></span>
<span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">static</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">WithTimeout</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">this</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">DbConnection</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">int</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">timeout</span><span style="color: #E6E6E6">);</span></span>
<span class=line><span style="color: #6A9955">// Norm Instance Method</span></span>
<span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">WithTimeout</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">int</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">timeout</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #008000">// Extension</span></span>
<span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">static</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000"> </span><span style="color: #795E26">WithTimeout</span><span style="color: #000000">(</span><span style="color: #0000FF">this</span><span style="color: #000000"> </span><span style="color: #267F99">DbConnection</span><span style="color: #000000"> </span><span style="color: #001080">connection</span><span style="color: #000000">, </span><span style="color: #0000FF">int</span><span style="color: #000000"> </span><span style="color: #001080">timeout</span><span style="color: #000000">);</span></span>
<span class=line><span style="color: #008000">// Norm Instance Method</span></span>
<span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000"> </span><span style="color: #795E26">WithTimeout</span><span style="color: #000000">(</span><span style="color: #0000FF">int</span><span style="color: #000000"> </span><span style="color: #001080">timeout</span><span style="color: #000000">);</span></span></code></pre></div><ul><li>For example, execute stored procedure <code>update_data</code> with the command timeout 60 seconds.</ul><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">AsProcedure</span><span style="color: #E6E6E6">()</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">WithTimeout</span><span style="color: #E6E6E6">(</span><span style="color: #B5CEA8">60</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Execute</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"update_data"</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">AsProcedure</span><span style="color: #000000">()</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">WithTimeout</span><span style="color: #000000">(</span><span style="color: #098658">60</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Execute</span><span style="color: #000000">(</span><span style="color: #A31515">"update_data"</span><span style="color: #000000">);</span></span></code></pre></div><hr><h3 id=withtransaction>WithTransaction<a class="anchor bookmark-target"href=#withtransaction><i class="bi bi-link-45deg"></i></a></h3><ul><li>Sets the transaction object for the current database command:</ul><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #6A9955">// Extension</span></span>
<span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">static</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">WithTransaction</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">this</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">DbConnection</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">DbTransaction</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">transaction</span><span style="color: #E6E6E6">);</span></span>
<span class=line><span style="color: #6A9955">// Norm Instance Method</span></span>
<span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">WithTransaction</span><span style="color: #E6E6E6">(</span><span style="color: #4EC9B0">DbTransaction</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">transaction</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #008000">// Extension</span></span>
<span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">static</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000"> </span><span style="color: #795E26">WithTransaction</span><span style="color: #000000">(</span><span style="color: #0000FF">this</span><span style="color: #000000"> </span><span style="color: #267F99">DbConnection</span><span style="color: #000000"> </span><span style="color: #001080">connection</span><span style="color: #000000">, </span><span style="color: #267F99">DbTransaction</span><span style="color: #000000"> </span><span style="color: #001080">transaction</span><span style="color: #000000">);</span></span>
<span class=line><span style="color: #008000">// Norm Instance Method</span></span>
<span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000"> </span><span style="color: #795E26">WithTransaction</span><span style="color: #000000">(</span><span style="color: #267F99">DbTransaction</span><span style="color: #000000"> </span><span style="color: #001080">transaction</span><span style="color: #000000">);</span></span></code></pre></div><p>Example:<div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">var</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">transaction</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">connection</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">BeginTransaction</span><span style="color: #E6E6E6">();</span></span>
<span class=line></span>
<span class=line><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">WithTransaction</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">transaction</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Execute</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"insert into transaction_test1 values (1),(2),(3);"</span><span style="color: #E6E6E6">);</span></span>
<span class=line></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">result1</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"select * from transaction_test1"</span><span style="color: #E6E6E6">).</span><span style="color: #DCDCAA">ToArray</span><span style="color: #E6E6E6">();</span></span>
<span class=line><span style="color: #9CDCFE">Assert</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Equal</span><span style="color: #E6E6E6">(</span><span style="color: #B5CEA8">3</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">result1</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Length</span><span style="color: #E6E6E6">);</span></span>
<span class=line></span>
<span class=line><span style="color: #9CDCFE">transaction</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Rollback</span><span style="color: #E6E6E6">();</span></span>
<span class=line></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">result2</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"select * from transaction_test1"</span><span style="color: #E6E6E6">).</span><span style="color: #DCDCAA">ToArray</span><span style="color: #E6E6E6">();</span></span>
<span class=line><span style="color: #9CDCFE">Assert</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Empty</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">result2</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">var</span><span style="color: #000000"> </span><span style="color: #267F99">transaction</span><span style="color: #000000"> = </span><span style="color: #267F99">connection</span><span style="color: #000000">.</span><span style="color: #267F99">BeginTransaction</span><span style="color: #000000">();</span></span>
<span class=line></span>
<span class=line><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">WithTransaction</span><span style="color: #000000">(</span><span style="color: #001080">transaction</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Execute</span><span style="color: #000000">(</span><span style="color: #A31515">"insert into transaction_test1 values (1),(2),(3);"</span><span style="color: #000000">);</span></span>
<span class=line></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">result1</span><span style="color: #000000"> = </span><span style="color: #001080">connection</span><span style="color: #000000">.</span><span style="color: #795E26">Read</span><span style="color: #000000">(</span><span style="color: #A31515">"select * from transaction_test1"</span><span style="color: #000000">).</span><span style="color: #795E26">ToArray</span><span style="color: #000000">();</span></span>
<span class=line><span style="color: #001080">Assert</span><span style="color: #000000">.</span><span style="color: #795E26">Equal</span><span style="color: #000000">(</span><span style="color: #098658">3</span><span style="color: #000000">, </span><span style="color: #001080">result1</span><span style="color: #000000">.</span><span style="color: #001080">Length</span><span style="color: #000000">);</span></span>
<span class=line></span>
<span class=line><span style="color: #001080">transaction</span><span style="color: #000000">.</span><span style="color: #795E26">Rollback</span><span style="color: #000000">();</span></span>
<span class=line></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">result2</span><span style="color: #000000"> = </span><span style="color: #001080">connection</span><span style="color: #000000">.</span><span style="color: #795E26">Read</span><span style="color: #000000">(</span><span style="color: #A31515">"select * from transaction_test1"</span><span style="color: #000000">).</span><span style="color: #795E26">ToArray</span><span style="color: #000000">();</span></span>
<span class=line><span style="color: #001080">Assert</span><span style="color: #000000">.</span><span style="color: #795E26">Empty</span><span style="color: #000000">(</span><span style="color: #001080">result2</span><span style="color: #000000">);</span></span></code></pre></div><hr><h3 id=withunknownresulttype>WithUnknownResultType<a class="anchor bookmark-target"href=#withunknownresulttype><i class="bi bi-link-45deg"></i></a></h3><blockquote><p><strong>PostgreSQL only feature</strong></blockquote><ul><li>Sets PostgreSQL results behavior by marking some or all results as unknown. The unknown result type is serialized as a raw string:</ul><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #6A9955">// Extension</span></span>
<span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">static</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">WithUnknownResultType</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">this</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">DbConnection</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">params</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">bool</span><span style="color: #E6E6E6">[] </span><span style="color: #9CDCFE">list</span><span style="color: #E6E6E6">);</span></span>
<span class=line><span style="color: #6A9955">// Norm Instance Method</span></span>
<span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">WithUnknownResultType</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">params</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">bool</span><span style="color: #E6E6E6">[] </span><span style="color: #9CDCFE">list</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #008000">// Extension</span></span>
<span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">static</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000"> </span><span style="color: #795E26">WithUnknownResultType</span><span style="color: #000000">(</span><span style="color: #0000FF">this</span><span style="color: #000000"> </span><span style="color: #267F99">DbConnection</span><span style="color: #000000"> </span><span style="color: #001080">connection</span><span style="color: #000000">, </span><span style="color: #0000FF">params</span><span style="color: #000000"> </span><span style="color: #0000FF">bool</span><span style="color: #000000">[] </span><span style="color: #001080">list</span><span style="color: #000000">);</span></span>
<span class=line><span style="color: #008000">// Norm Instance Method</span></span>
<span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000"> </span><span style="color: #795E26">WithUnknownResultType</span><span style="color: #000000">(</span><span style="color: #0000FF">params</span><span style="color: #000000"> </span><span style="color: #0000FF">bool</span><span style="color: #000000">[] </span><span style="color: #001080">list</span><span style="color: #000000">);</span></span></code></pre></div><ul><li><p>To set all results as unknown, call <code>WithUnknownResultType</code> without parameters.<li><p>For example, PostgreSQL query that returns text, boolean, date, numeric, and JSON fields.</ul><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> (</span><span style="color: #9CDCFE">@int</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">@bool</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">@date</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">@num</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">@json</span><span style="color: #E6E6E6">) </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">WithUnknownResultType</span><span style="color: #E6E6E6">()</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;</span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">>(</span><span style="color: #CE9178">"select 1::int, true::bool, '1977-05-19'::date, 3.14::numeric, '{</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">x</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">: </span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">y</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">}'::json"</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Single</span><span style="color: #E6E6E6">();</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> (</span><span style="color: #001080">@int</span><span style="color: #000000">, </span><span style="color: #001080">@bool</span><span style="color: #000000">, </span><span style="color: #001080">@date</span><span style="color: #000000">, </span><span style="color: #001080">@num</span><span style="color: #000000">, </span><span style="color: #001080">@json</span><span style="color: #000000">) = </span><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">WithUnknownResultType</span><span style="color: #000000">()</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">string</span><span style="color: #000000">, </span><span style="color: #0000FF">string</span><span style="color: #000000">, </span><span style="color: #0000FF">string</span><span style="color: #000000">, </span><span style="color: #0000FF">string</span><span style="color: #000000">, </span><span style="color: #0000FF">string</span><span style="color: #000000">>(</span><span style="color: #A31515">"select 1::int, true::bool, '1977-05-19'::date, 3.14::numeric, '{</span><span style="color: #EE0000">\"</span><span style="color: #A31515">x</span><span style="color: #EE0000">\"</span><span style="color: #A31515">: </span><span style="color: #EE0000">\"</span><span style="color: #A31515">y</span><span style="color: #EE0000">\"</span><span style="color: #A31515">}'::json"</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Single</span><span style="color: #000000">();</span></span></code></pre></div><ul><li>To set some results as unknown, call <code>WithUnknownResultType</code> and set the true value to the field position that needs to be marked as unknown:</ul><div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> (</span><span style="color: #9CDCFE">@int</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">@bool</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">@date</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">@num</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">@json</span><span style="color: #E6E6E6">) </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">WithUnknownResultType</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">true</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">false</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">true</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">false</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">true</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;</span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">bool</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">decimal</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">>(</span><span style="color: #CE9178">"select 1::int, true::bool, '1977-05-19'::date, 3.14::numeric, '{</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">x</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">: </span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">y</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">}'::json"</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Single</span><span style="color: #E6E6E6">();</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> (</span><span style="color: #001080">@int</span><span style="color: #000000">, </span><span style="color: #001080">@bool</span><span style="color: #000000">, </span><span style="color: #001080">@date</span><span style="color: #000000">, </span><span style="color: #001080">@num</span><span style="color: #000000">, </span><span style="color: #001080">@json</span><span style="color: #000000">) = </span><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">WithUnknownResultType</span><span style="color: #000000">(</span><span style="color: #0000FF">true</span><span style="color: #000000">, </span><span style="color: #0000FF">false</span><span style="color: #000000">, </span><span style="color: #0000FF">true</span><span style="color: #000000">, </span><span style="color: #0000FF">false</span><span style="color: #000000">, </span><span style="color: #0000FF">true</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">string</span><span style="color: #000000">, </span><span style="color: #0000FF">bool</span><span style="color: #000000">, </span><span style="color: #0000FF">string</span><span style="color: #000000">, </span><span style="color: #0000FF">decimal</span><span style="color: #000000">, </span><span style="color: #0000FF">string</span><span style="color: #000000">>(</span><span style="color: #A31515">"select 1::int, true::bool, '1977-05-19'::date, 3.14::numeric, '{</span><span style="color: #EE0000">\"</span><span style="color: #A31515">x</span><span style="color: #EE0000">\"</span><span style="color: #A31515">: </span><span style="color: #EE0000">\"</span><span style="color: #A31515">y</span><span style="color: #EE0000">\"</span><span style="color: #A31515">}'::json"</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Single</span><span style="color: #000000">();</span></span></code></pre></div><ul><li>Marking results as unknown is useful for handling exotic PostgreSQL types and custom domains, which the underlying data access provider does not know how to handle yet.</ul><div class="my-5 px-5 border-top links svelte-oyz6mf"><div><div class="link-title text-start svelte-oyz6mf">PREVIOUS</div><a class="btn btn-link text-start"href=/norm.net/docs/getting-started/basic-concepts/ >Basic Concepts</a></div><div><div class="link-title text-end svelte-oyz6mf">NEXT</div><a class="btn btn-link text-end"href=/norm.net/docs/reference/options/ >Options</a></div></div></div></div><div class="rightside svelte-1lpnwmm"><div class=svelte-1lpnwmm><ul class="navbar-nav sidenav svelte-1lpnwmm"><li class="nav-txt-divider text-muted svelte-1lpnwmm"><hr class=svelte-1lpnwmm><span class=svelte-1lpnwmm>on this page</span><hr class=svelte-1lpnwmm><li class="nav-item toc2 right svelte-1lpnwmm bookmark-nav"data-id=extensions-methods title="Extensions Methods"><a class="nav-link auto-close svelte-1lpnwmm bookmark-link"href=#extensions-methods>Extensions Methods</a><li class="nav-item toc3 right svelte-1lpnwmm bookmark-nav"data-id=as title=As><a class="nav-link auto-close svelte-1lpnwmm bookmark-link"href=#as>As</a><li class="nav-item toc3 right svelte-1lpnwmm bookmark-nav"data-id=asprocedure title=AsProcedure><a class="nav-link auto-close svelte-1lpnwmm bookmark-link"href=#asprocedure>AsProcedure</a><li class="nav-item toc3 right svelte-1lpnwmm bookmark-nav"data-id=astext title=AsText><a class="nav-link auto-close svelte-1lpnwmm bookmark-link"href=#astext>AsText</a><li class="nav-item toc3 right svelte-1lpnwmm bookmark-nav"data-id=execute title=Execute><a class="nav-link auto-close svelte-1lpnwmm bookmark-link"href=#execute>Execute</a><li class="nav-item toc3 right svelte-1lpnwmm bookmark-nav"data-id=executeasync title=ExecuteAsync><a class="nav-link auto-close svelte-1lpnwmm bookmark-link"href=#executeasync>ExecuteAsync</a><li class="nav-item toc3 right svelte-1lpnwmm bookmark-nav"data-id=executeformat title=ExecuteFormat><a class="nav-link auto-close svelte-1lpnwmm bookmark-link"href=#executeformat>ExecuteFormat</a><li class="nav-item toc3 right svelte-1lpnwmm bookmark-nav"data-id=executeformatasync title=ExecuteFormatAsync><a class="nav-link auto-close svelte-1lpnwmm bookmark-link"href=#executeformatasync>ExecuteFormatAsync</a><li class="nav-item toc3 right svelte-1lpnwmm bookmark-nav"data-id=getrecordsaffected title=GetRecordsAffected><a class="nav-link auto-close svelte-1lpnwmm bookmark-link"href=#getrecordsaffected>GetRecordsAffected</a><li class="nav-item toc3 right svelte-1lpnwmm bookmark-nav"data-id=multiple title=Multiple><a class="nav-link auto-close svelte-1lpnwmm bookmark-link"href=#multiple>Multiple</a><li class="nav-item toc3 right svelte-1lpnwmm bookmark-nav"data-id=multipleasync title=MultipleAsync><a class="nav-link auto-close svelte-1lpnwmm bookmark-link"href=#multipleasync>MultipleAsync</a><li class="nav-item toc3 right svelte-1lpnwmm bookmark-nav"data-id=multipleformat title=MultipleFormat><a class="nav-link auto-close svelte-1lpnwmm bookmark-link"href=#multipleformat>MultipleFormat</a><li class="nav-item toc3 right svelte-1lpnwmm bookmark-nav"data-id=multipleformatasync title=MultipleFormatAsync><a class="nav-link auto-close svelte-1lpnwmm bookmark-link"href=#multipleformatasync>MultipleFormatAsync</a><li class="nav-item toc3 right svelte-1lpnwmm bookmark-nav"data-id=norm title=Norm><a class="nav-link auto-close svelte-1lpnwmm bookmark-link"href=#norm>Norm</a><li class="nav-item toc3 right svelte-1lpnwmm bookmark-nav"data-id=prepared title=Prepared><a class="nav-link auto-close svelte-1lpnwmm bookmark-link"href=#prepared>Prepared</a><li class="nav-item toc3 right svelte-1lpnwmm bookmark-nav"data-id=read title=Read><a class="nav-link auto-close svelte-1lpnwmm bookmark-link"href=#read>Read</a><li class="nav-item toc3 right svelte-1lpnwmm bookmark-nav"data-id=readasync title=ReadAsync><a class="nav-link auto-close svelte-1lpnwmm bookmark-link"href=#readasync>ReadAsync</a><li class="nav-item toc3 right svelte-1lpnwmm bookmark-nav"data-id=readformat title=ReadFormat><a class="nav-link auto-close svelte-1lpnwmm bookmark-link"href=#readformat>ReadFormat</a><li class="nav-item toc3 right svelte-1lpnwmm bookmark-nav"data-id=readformatasync title=ReadFormatAsync><a class="nav-link auto-close svelte-1lpnwmm bookmark-link"href=#readformatasync>ReadFormatAsync</a><li class="nav-item toc3 right svelte-1lpnwmm bookmark-nav"data-id=withcancellationtoken title=WithCancellationToken><a class="nav-link auto-close svelte-1lpnwmm bookmark-link"href=#withcancellationtoken>WithCancellationToken</a><li class="nav-item toc3 right svelte-1lpnwmm bookmark-nav"data-id=withcommandbehavior title=WithCommandBehavior><a class="nav-link auto-close svelte-1lpnwmm bookmark-link"href=#withcommandbehavior>WithCommandBehavior</a><li class="nav-item toc3 right svelte-1lpnwmm bookmark-nav"data-id=withcommandcallback title=WithCommandCallback><a class="nav-link auto-close svelte-1lpnwmm bookmark-link"href=#withcommandcallback>WithCommandCallback</a><li class="nav-item toc3 right svelte-1lpnwmm bookmark-nav"data-id=withcomment title=WithComment><a class="nav-link auto-close svelte-1lpnwmm bookmark-link"href=#withcomment>WithComment</a><li class="nav-item toc3 right svelte-1lpnwmm bookmark-nav"data-id=withcommentcallerinfo title=WithCommentCallerInfo><a class="nav-link auto-close svelte-1lpnwmm bookmark-link"href=#withcommentcallerinfo>WithCommentCallerInfo</a><li class="nav-item toc3 right svelte-1lpnwmm bookmark-nav"data-id=withcommentparameters title=WithCommentParameters><a class="nav-link auto-close svelte-1lpnwmm bookmark-link"href=#withcommentparameters>WithCommentParameters</a><li class="nav-item toc3 right svelte-1lpnwmm bookmark-nav"data-id=withcommentheader title=WithCommentHeader><a class="nav-link auto-close svelte-1lpnwmm bookmark-link"href=#withcommentheader>WithCommentHeader</a><li class="nav-item toc3 right svelte-1lpnwmm bookmark-nav"data-id=withparameters title=WithParameters><a class="nav-link auto-close svelte-1lpnwmm bookmark-link"href=#withparameters>WithParameters</a><li class="nav-item toc3 right svelte-1lpnwmm bookmark-nav"data-id=withreadercallback title=WithReaderCallback><a class="nav-link auto-close svelte-1lpnwmm bookmark-link"href=#withreadercallback>WithReaderCallback</a><li class="nav-item toc3 right svelte-1lpnwmm bookmark-nav"data-id=withtimeout title=WithTimeout><a class="nav-link auto-close svelte-1lpnwmm bookmark-link"href=#withtimeout>WithTimeout</a><li class="nav-item toc3 right svelte-1lpnwmm bookmark-nav"data-id=withtransaction title=WithTransaction><a class="nav-link auto-close svelte-1lpnwmm bookmark-link"href=#withtransaction>WithTransaction</a><li class="nav-item toc3 right svelte-1lpnwmm bookmark-nav"data-id=withunknownresulttype title=WithUnknownResultType><a class="nav-link auto-close svelte-1lpnwmm bookmark-link"href=#withunknownresulttype>WithUnknownResultType</a><li><hr class=svelte-1lpnwmm><div class="navbar-nav sidenav"><div class="text-muted fs-_7rem mx-2">PREVIOUS</div><a class="btn btn-link btn-sm text-start"href=/norm.net/docs/getting-started/basic-concepts/ >Basic Concepts</a></div><div class="navbar-nav sidenav mt-3"><div class="text-muted fs-_7rem mx-2">NEXT</div><a class="btn btn-link btn-sm text-start"href=/norm.net/docs/reference/options/ >Options</a></div></ul></div></div></main><script>!function(){var i=document.querySelector("nav.navbar"),L=document.getElementsByTagName("main")[0],w=L.getElementsByClassName("sidebar")[0],E=L.getElementsByClassName("content")[0],a=document.querySelectorAll("div.code");function k(e,t){for(var n=2;n<arguments.length;n++)e.classList.remove(arguments[n]);e.classList.add(t)}var t=document.getElementsByTagName("html")[0],s=i.querySelector("#theme-btn"),o="theme";function n(e){var t=s.getElementsByTagName("svg");"dark"===e?(t[0].style.display="",t[1].style.display="none",s.getElementsByClassName("check")[0].classList.add("checked")):(t[0].style.display="none",t[1].style.display="",s.getElementsByClassName("check")[0].classList.remove("checked"));for(var n=0;n<a.length;n++){var i=a[n];"dark"===e?(i.children[1].style.display="inherit",i.children[2].style.display="none"):"light"===e&&(i.children[1].style.display="none",i.children[2].style.display="inherit")}window._theme&&window._theme(e)}function r(e,t){var n=e.currentTarget;if(!n.classList.contains("bi-check")){for(var i="",a=0;a<n.classList.length;a++)if(n.classList[a].startsWith("bi-")){i=n.classList[a];break}n.classList.remove(i),n.classList.add("spinner-border-sm"),n.classList.add("spinner-border");e=bootstrap.Tooltip.getInstance(n);e&&(e.setContent({".tooltip-inner":"Copying..."}),e.show()),t(n,function(){var e;n.classList.remove(i),n.classList.remove("spinner-border-sm"),n.classList.remove("spinner-border"),n.classList.add("bi-check"),bootstrap&&(e=bootstrap.Tooltip.getInstance(n))&&(e.setContent({".tooltip-inner":"Copied!"}),e.show()),setTimeout(function(){var e;n.classList.add(i),n.classList.remove("bi-check"),bootstrap&&(e=bootstrap.Tooltip.getInstance(n))&&e.setContent({".tooltip-inner":n.dataset.bsTitle})},2e3)})}}function e(e){r(e,function(e,t){navigator.clipboard.writeText(e.parentElement.nextSibling.innerText),t()})}function l(e){r(e,function(e,t){var n=localStorage.getItem(o);e="dark"===n?e.parentElement.parentElement.children[1]:e.parentElement.parentElement.children[2],setTimeout(function(){html2canvas(e).then(e=>{e.toBlob(e=>navigator.clipboard.write([new ClipboardItem({"image/png":e})])),t()})},0)})}s.addEventListener("click",()=>{var e="dark"===localStorage.getItem(o)?"light":"dark";localStorage.setItem(o,e),n(t.dataset.bsTheme=e)}),n(localStorage.getItem(o)),s.children[0].classList.remove("hidden");for(var c=0;c<a.length;c++)a[c].getElementsByClassName("copy-code")[0].addEventListener("click",e),a[c].getElementsByClassName("photo-code")[0].addEventListener("click",l);for(var d,T=function(){var s,a,o;if(L.children[2]&&"none"!=L.children[2].style.display)return s=L.children[1].children[0].querySelectorAll("[id]"),a=void 0,this.initNavs=function(e){o=e.querySelectorAll("li.bookmark-nav");for(var t=0;t<s.length;t++){for(var n=s[t].id,i=null,a=0;a<o.length;a++)if(o[a].dataset.id==n){i=o[a];break}s[t].nav=i}setTimeout(function(){for(var e=0;e<s.length;e++){var t=s[e];if(r(t).visible&&t.nav)return void t.nav.classList.add("active")}},1e3),l()},L.children[1].addEventListener("scroll",l),this;function r(e){var e=e.getBoundingClientRect(),t=Math.max(document.documentElement.clientHeight,window.innerHeight),n=0<e.top&&!(e.bottom<0||0<=e.top-t)||e.top<0&&e.bottom>t,i=!1;return{visible:n,above:i=n?i:e.bottom<t}}function l(){if(o&&o.length){for(var e=0;e<o.length;e++)o[e].classList.remove("active");for(var t=void 0,e=0;e<s.length;e++){const i=s[e];var n=r(i);if(!n.visible&&n.above&&(t=i.nav),n.visible&&i.nav&&!i.nav.classList.contains("active"))return i.nav.classList.add("active"),a&&clearTimeout(a),void(a=setTimeout(function(){i.nav.scrollIntoView({behavior:"smooth"}),a=void 0},250))}t&&!t.classList.contains("active")&&(t.classList.add("active"),a&&clearTimeout(a),a=setTimeout(function(){t.scrollIntoView({behavior:"smooth"}),a=void 0},250))}}}(),h=function(){var r,l=i.querySelector("#nav-btn"),c=w&&w.firstChild.getElementsByTagName("button")[0],d=480,h="200px",v="0.25fr",m=730,u=535,g=L.children[0].children[0].children[1],b=L.children[2]&&L.children[2].children[0].children[0],e="sidebar-pinned",p=null==localStorage.getItem(e)||"true"==localStorage.getItem(e),y=!1,f=!1;function t(){window._onresize&&window._onresize();var e=window.outerWidth||window.innerWidth,t=e<d,n=t?y?"100%":"0":p?""+h:"0",i=`grid-template-columns: ${n} 1fr`,a=t&&y?"width: 100%":"0"!=n?"":"display: none",s=t&&y?"display: none":"",o=t?y?"sidebar-show":"sidebar-hide":p?"sidebar-show":"sidebar-hide",n="0"==n;L.children[2]&&(v&&m&&u&&(n&&e<u||!n&&e<m?f||(g.innerHTML=r+b.innerHTML,T.initNavs(g),f=!0):f&&(g.innerHTML=r,T.initNavs(b),f=!1)),!v||t||f?(i+=";",L.children[2].style.display="none"):(i+=` ${v};`,L.children[2].style.display="")),k(l,!t&&p||t&&y?"rotate":"rotate-back","rotate","rotate-back"),L.style=w?i:"display: grid;",w&&k(w,o,"sidebar-show","sidebar-hide"),w&&(w.firstChild.style=a),c&&(c.style.display=t?"":"none"),E.style=s}function n(){window.outerWidth<d?y=!y:p=!p,localStorage.setItem(e,p.toString()),t()}return v&&m&&u&&b&&(r=g.innerHTML,T.initNavs(b)),l.addEventListener("click",n),c&&c.addEventListener("click",()=>{y=!1,t()}),(window.onresize=t)(),this.closeSidebar=function(){window.outerWidth<d&&y&&n()},this}(),v=document.getElementsByClassName("auto-close"),m=0;m<v.length;m++)v[m].addEventListener("click",function(e){h.closeSidebar()});location.hash&&(d=document.getElementById(location.hash.replace("#","")))&&d.scrollIntoView()}();</script><script src=/bootstrap.bundle.min.js></script><script>!function(){for(var t=document.querySelectorAll('[data-bs-toggle="tooltip"]'),e=0;e<t.length;e++)new bootstrap.Tooltip(t[e]);var o=document.getElementsByClassName("accordion-item");if(o.length)for(e=0;e<o.length;e++){var l=o[e];l.querySelectorAll("[href='"+document.location.pathname+"']").length&&l.firstChild.click()}}();</script><script src=/html2canvas.min.js></script><script async defer src=https://buttons.github.io/buttons.js></script><script async data-id=101435862 src=//static.getclicky.com/js></script>