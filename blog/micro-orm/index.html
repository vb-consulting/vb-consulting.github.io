<!DOCTYPE html><html lang=en><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>What is Micro ORM?</title><meta name=description content="What is Micro ORM?"><link href=https://vb-consulting.github.io//blog/micro-orm/ rel=canonical><meta name=keywords content="c#, dotnet, .net, .net core, orm, database, software, development, software-development, software-architecture, architecture"><link rel=stylesheet href=/_elderjs/assets/svelte-0bb39b05.css media=all><style></style><link href=/style.css?1702198802556 rel=stylesheet><script>!function(){var e="theme",t=localStorage.getItem(e);t||(t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",localStorage.setItem(e,t)),document.getElementsByTagName("html")[0].dataset.bsTheme=t}();</script><body class="d-flex flex-column h-100"><header id=header><nav class="navbar navbar-expand-md navbar-dark fixed-top py-0 py-md-0 svelte-13wa5zp"><div class="container-fluid flex-nowrap svelte-13wa5zp"><div class="d-flex svelte-13wa5zp"><button id=nav-btn type=button class="d-flex btn btn-sm logo animate-rotate svelte-13wa5zp"><i class=material-icons-outlined>menu</i></button></div><div class="d-flex right svelte-13wa5zp"><a class="nav-link my-auto me-2 svelte-13wa5zp"href=https://github.com/vb-consulting/blog/ ><i class=bi-github></i></a> <a class="github-button svelte-13wa5zp"href=https://github.com/vb-consulting/blog/ data-color-scheme="no-preference: light_high_contrast; light: light_high_contrast; dark: light_high_contrast;"data-icon=octicon-star data-show-count=true aria-label="Star vb-consulting/blog/ on GitHub"></a><div class="vr text-white my-auto svelte-13wa5zp"></div><button id=theme-btn type=button aria-pressed=true aria-label=theme class=svelte-13wa5zp><span class="check hidden svelte-13wa5zp"><span class="icon svelte-13wa5zp"><svg xmlns=http://www.w3.org/2000/svg width=32 height=32 viewBox="0 0 24 24"class=svelte-13wa5zp><path fill=currentColor d="M12 21q-3.775 0-6.388-2.613T3 12q0-3.45 2.25-5.988T11 3.05q.625-.075.975.45t-.025 1.1q-.425.65-.638 1.375T11.1 7.5q0 2.25 1.575 3.825T16.5 12.9q.775 0 1.538-.225t1.362-.625q.525-.35 1.075-.037t.475.987q-.35 3.45-2.937 5.725T12 21Zm0-2q2.2 0 3.95-1.213t2.55-3.162q-.5.125-1 .2t-1 .075q-3.075 0-5.238-2.163T9.1 7.5q0-.5.075-1t.2-1q-1.95.8-3.163 2.55T5 12q0 2.9 2.05 4.95T12 19Zm-.25-6.75Z"></path></svg> <svg xmlns=http://www.w3.org/2000/svg width=32 height=32 viewBox="0 0 24 24"class=svelte-13wa5zp><g fill=none stroke-linecap=round stroke-linejoin=round stroke-width=2><path d="M0 0h24v24H0z"></path><path fill=currentColor d="M12 19a1 1 0 0 1 .993.883L13 20v1a1 1 0 0 1-1.993.117L11 21v-1a1 1 0 0 1 1-1zm6.313-2.09l.094.083l.7.7a1 1 0 0 1-1.32 1.497l-.094-.083l-.7-.7a1 1 0 0 1 1.218-1.567l.102.07zm-11.306.083a1 1 0 0 1 .083 1.32l-.083.094l-.7.7a1 1 0 0 1-1.497-1.32l.083-.094l.7-.7a1 1 0 0 1 1.414 0zM4 11a1 1 0 0 1 .117 1.993L4 13H3a1 1 0 0 1-.117-1.993L3 11h1zm17 0a1 1 0 0 1 .117 1.993L21 13h-1a1 1 0 0 1-.117-1.993L20 11h1zM6.213 4.81l.094.083l.7.7a1 1 0 0 1-1.32 1.497l-.094-.083l-.7-.7A1 1 0 0 1 6.11 4.74l.102.07zm12.894.083a1 1 0 0 1 .083 1.32l-.083.094l-.7.7a1 1 0 0 1-1.497-1.32l.083-.094l.7-.7a1 1 0 0 1 1.414 0zM12 2a1 1 0 0 1 .993.883L13 3v1a1 1 0 0 1-1.993.117L11 4V3a1 1 0 0 1 1-1zm0 5a5 5 0 1 1-4.995 5.217L7 12l.005-.217A5 5 0 0 1 12 7z"></path></g></svg></span></span></button></div></div></nav></header><main class=svelte-2kl70j><div class="sidebar sidebar-hide svelte-2kl70j"><div class=svelte-2kl70j><ul class="navbar-nav sidenav accordion svelte-2kl70j"><li class="accordion-item svelte-2kl70j"title=VB-Consulting><button class="accordion-header accordion-button collapsed svelte-2kl70j text-uppercase"href=/ type=button data-bs-toggle=collapse data-bs-target=#accordion-vb-consulting aria-expanded=false aria-controls=accordion-vb-consulting>VB-Consulting</button><div id=accordion-vb-consulting class="accordion-collapse collapse"><div class="accordion-body svelte-2kl70j"><ul class=navbar-nav><li class="nav-item svelte-2kl70j"data-id=""title=Home><a class="nav-link svelte-2kl70j text-uppercase"href=/ >Home</a><li class="nav-divider svelte-2kl70j"><hr class=svelte-2kl70j><li class="nav-item toc2 svelte-2kl70j"data-id=""title=RazorSvelte><a class="nav-link svelte-2kl70j text-uppercase"href=/razorsvelte/ >RazorSvelte</a><li class="nav-item toc2 svelte-2kl70j"data-id=""title=PgRoutiner><a class="nav-link svelte-2kl70j text-uppercase"href=/pgroutiner/ >PgRoutiner</a><li class="nav-item toc2 svelte-2kl70j"data-id=""title=XUnit.Npgsql><a class="nav-link svelte-2kl70j text-uppercase"href=/xunit.npgsql/ >XUnit.Npgsql</a><li class="nav-item toc2 svelte-2kl70j"data-id=""title="PostrgeSQL Schema Tools"><a class="nav-link svelte-2kl70j text-uppercase"href=/pg_schema_tools/ >PostrgeSQL Schema Tools</a></ul></div></div><li class="nav-txt-divider text-muted svelte-2kl70j"><hr class=svelte-2kl70j><span class=svelte-2kl70j>norm.net</span><hr class=svelte-2kl70j><li class="nav-item toc2 svelte-2kl70j"data-id=""title=Norm.Net><a class="nav-link svelte-2kl70j text-uppercase"href=/norm.net/ >Norm.Net</a><li class="nav-item toc2 svelte-2kl70j"data-id=""title="example project"><a class="nav-link svelte-2kl70j text-uppercase"href=/norm.net/example/ >example project</a><li class="nav-item toc2 svelte-2kl70j"data-id=""title=benchmarks><a class="nav-link svelte-2kl70j text-uppercase"href=/norm.net/benchmarks/ >benchmarks</a><li class="nav-item toc2 svelte-2kl70j"data-id=""title=changelog><a class="nav-link svelte-2kl70j text-uppercase"href=/norm.net/changelog/ >changelog</a><li class="accordion-item toc2 svelte-2kl70j"title=docs><button class="accordion-header accordion-button collapsed svelte-2kl70j lr-arrow text-uppercase"type=button data-bs-toggle=collapse data-bs-target=#accordion-docs aria-expanded=false aria-controls=accordion-docs><i class="bi bi-file-earmark-text svelte-2kl70j"></i> docs</button><div id=accordion-docs class="accordion-collapse collapse"><div class="accordion-body svelte-2kl70j"><ul class=navbar-nav><li class="nav-txt-divider text-muted svelte-2kl70j"><hr class=svelte-2kl70j><span class=svelte-2kl70j>getting started</span><hr class=svelte-2kl70j><li class="nav-item svelte-2kl70j"data-id=""title=Introduction><a class="nav-link svelte-2kl70j lr-arrow text-uppercase"href=/norm.net/docs/getting-started/introduction/ ><i class="bi bi-file-text svelte-2kl70j"></i> Introduction</a><li class="nav-item svelte-2kl70j"data-id=""title=Installation><a class="nav-link svelte-2kl70j lr-arrow text-uppercase"href=/norm.net/docs/getting-started/installation/ ><i class="bi bi-file-text svelte-2kl70j"></i> Installation</a><li class="nav-item svelte-2kl70j"data-id=""title="First Use"><a class="nav-link svelte-2kl70j lr-arrow text-uppercase"href=/norm.net/docs/getting-started/first-use/ ><i class="bi bi-file-text svelte-2kl70j"></i> First Use</a><li class="nav-item svelte-2kl70j"data-id=""title="Basic Concepts"><a class="nav-link svelte-2kl70j lr-arrow text-uppercase"href=/norm.net/docs/getting-started/basic-concepts/ ><i class="bi bi-file-text svelte-2kl70j"></i> Basic Concepts</a><li class="nav-txt-divider text-muted svelte-2kl70j"><hr class=svelte-2kl70j><span class=svelte-2kl70j>reference</span><hr class=svelte-2kl70j><li class="nav-item svelte-2kl70j"data-id=""title=Methods><a class="nav-link svelte-2kl70j lr-arrow text-uppercase"href=/norm.net/docs/reference/methods/ ><i class="bi bi-file-text svelte-2kl70j"></i> Methods</a><li class="nav-item svelte-2kl70j"data-id=""title=Options><a class="nav-link svelte-2kl70j lr-arrow text-uppercase"href=/norm.net/docs/reference/options/ ><i class="bi bi-file-text svelte-2kl70j"></i> Options</a><li class="nav-item svelte-2kl70j"data-id=""title=Parameters><a class="nav-link svelte-2kl70j lr-arrow text-uppercase"href=/norm.net/docs/reference/parameters/ ><i class="bi bi-file-text svelte-2kl70j"></i> Parameters</a><li class="nav-item svelte-2kl70j"data-id=""title="Read Mappings"><a class="nav-link svelte-2kl70j lr-arrow text-uppercase"href=/norm.net/docs/reference/read/ ><i class="bi bi-file-text svelte-2kl70j"></i> Read Mappings</a><li class="nav-item svelte-2kl70j"data-id=""title="Multiple Mappings"><a class="nav-link svelte-2kl70j lr-arrow text-uppercase"href=/norm.net/docs/reference/multiple/ ><i class="bi bi-file-text svelte-2kl70j"></i> Multiple Mappings</a></ul></div></div></ul></div></div><div class="content svelte-2kl70j"><div class="banner svelte-1tvrd79"style="background-image: url(/biakovo-banner.jpg);"></div><div class="container-sm main-content svelte-1tvrd79 bannered"><div><span class="badge rounded-pill text-bg-secondary">general</span><span class="badge rounded-pill text-bg-secondary">software-development</span><span class="badge rounded-pill text-bg-secondary">orm</span></div><h1 id=what-is-micro-orm>What is Micro ORM?</h1><div class=post-meta><div class=post-pic data-bs-toggle=tooltip data-bs-html=true title="Floki is a developer dog."style="background-image: url(/floki.jpeg)"></div><div><div class=post-author>floki</div><div class=post-date>May 19, 2023</div></div></div><p>In software development, we all know very well what an ORM is - an object-relational mapping (ORM, O/RM), or O/R mapping tool is usually a <strong>tool or a library</strong> that implements a two-way (bi-directional) mappings:<ol><li><p><code>DB -> APP</code>: From the database to the database client (your application). Or to be more specific: from query results - to application memory structures.<li><p><code>APP -> DB</code>: From the database client (your application) to the database. Or to be more specific: query constructs in your application language (such as C# Linq) - to query that your database understands such as SQL.</ol><p>The best-known and most widely used ORM in the .NET ecosystem is, of course, the Microsoft Entity Framework, which is, of course, the full-blown ORM that implements wo-way (bi-directional) mappings.<p>On the other hand, the micro ORM means it's just a lightweight mapper that <strong>maps only one way and one way only</strong> - from the database to the database client (your application memory structures).<p>Micro ORM is a term invented and popularized by Dapper, the best-known micro ORM built by Stackoverflow.<p>In practice, that means that when using micro ORM - all SQL has to be in a raw string command (a raw SQL). For example:<div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">class</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Film</span></span>
<span class=line><span style="color: #E6E6E6">{</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">int</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">FilmId</span><span style="color: #E6E6E6"> { </span><span style="color: #569CD6">get</span><span style="color: #E6E6E6">; </span><span style="color: #569CD6">set</span><span style="color: #E6E6E6">; }</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">Title</span><span style="color: #E6E6E6"> { </span><span style="color: #569CD6">get</span><span style="color: #E6E6E6">; </span><span style="color: #569CD6">set</span><span style="color: #E6E6E6">; }</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">int</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">ReleaseYear</span><span style="color: #E6E6E6"> { </span><span style="color: #569CD6">get</span><span style="color: #E6E6E6">; </span><span style="color: #569CD6">set</span><span style="color: #E6E6E6">; }</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">decimal</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">RentalRate</span><span style="color: #E6E6E6"> { </span><span style="color: #569CD6">get</span><span style="color: #E6E6E6">; </span><span style="color: #569CD6">set</span><span style="color: #E6E6E6">; }</span></span>
<span class=line><span style="color: #E6E6E6">}</span></span>
<span class=line></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">film</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;</span><span style="color: #4EC9B0">Film</span><span style="color: #E6E6E6">>(</span><span style="color: #CE9178">@"</span></span>
<span class=line><span style="color: #CE9178">        select </span></span>
<span class=line><span style="color: #CE9178">            film_id, title, release_year, rental_rate </span></span>
<span class=line><span style="color: #CE9178">        from</span></span>
<span class=line><span style="color: #CE9178">            film</span></span>
<span class=line><span style="color: #CE9178">        where</span></span>
<span class=line><span style="color: #CE9178">            film_id = @id"</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">id</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Single</span><span style="color: #E6E6E6">();</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #267F99">Film</span></span>
<span class=line><span style="color: #000000">{</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">int</span><span style="color: #000000"> </span><span style="color: #001080">FilmId</span><span style="color: #000000"> { </span><span style="color: #0000FF">get</span><span style="color: #000000">; </span><span style="color: #0000FF">set</span><span style="color: #000000">; }</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">string</span><span style="color: #000000"> </span><span style="color: #001080">Title</span><span style="color: #000000"> { </span><span style="color: #0000FF">get</span><span style="color: #000000">; </span><span style="color: #0000FF">set</span><span style="color: #000000">; }</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">int</span><span style="color: #000000"> </span><span style="color: #001080">ReleaseYear</span><span style="color: #000000"> { </span><span style="color: #0000FF">get</span><span style="color: #000000">; </span><span style="color: #0000FF">set</span><span style="color: #000000">; }</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">decimal</span><span style="color: #000000"> </span><span style="color: #001080">RentalRate</span><span style="color: #000000"> { </span><span style="color: #0000FF">get</span><span style="color: #000000">; </span><span style="color: #0000FF">set</span><span style="color: #000000">; }</span></span>
<span class=line><span style="color: #000000">}</span></span>
<span class=line></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">film</span><span style="color: #000000"> = </span><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;</span><span style="color: #267F99">Film</span><span style="color: #000000">>(</span><span style="color: #A31515">@"</span></span>
<span class=line><span style="color: #A31515">        select </span></span>
<span class=line><span style="color: #A31515">            film_id, title, release_year, rental_rate </span></span>
<span class=line><span style="color: #A31515">        from</span></span>
<span class=line><span style="color: #A31515">            film</span></span>
<span class=line><span style="color: #A31515">        where</span></span>
<span class=line><span style="color: #A31515">            film_id = @id"</span><span style="color: #000000">, </span><span style="color: #001080">id</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Single</span><span style="color: #000000">();</span></span></code></pre></div><p>In this example we can see that:<ul><li>SQL command is contained in a string, usually hand-written.<li>Query results are mapped to a database client (program) memory structure - a class named <code>Film</code>.</ul><p>Now, why we would want to do that?<h2 id=reasons>Reasons</h2><p>Some people, well, obviously, prefer this approach. Here are some reasons:<h3 id=1-language-and-productivity>1) Language and Productivity</h3><p>This may be a surprise to some, but SQL is a <strong>higher-level language</strong> than anything used as a database client (your program).<p>In the example above <code>C#</code> is listed as an example of the third generation (3GL) language and <code>SQL</code> is listed as an example of the fourth generation (4GL) language, according to the Wikipedia article on programming language generations [<a href=https://en.wikipedia.org/wiki/Programming_language_generations>source</a>].<p>So, letting your 3GL language write your 4GL language at the runtime - would be like writing a C code that generates a C++ at the runtime. Or assembly code that generates a C code at the runtime. <strong>It makes no sense.</strong><p>Sure, for simple CRUD (create, read, update and delete) examples, like the one above, it may very well make sense. But, SQL in general is a very strange language. It takes little time to learn and almost a lifetime to master.<p>That translates into the following realities:<p>Database professionals properly trained with SQL - are often <strong>many times more productive</strong> with SQL than anything ORM libraries can come up with.<p>Even with simple CRUD commands like in that example above (with the help of modern tools).<p>The fact is that SQL is internationally standardized by the International Organization for Standardization (ISO) [<a href=https://en.wikipedia.org/wiki/ISO/IEC_9075>source</a>]. Sure, there are different providers with different interpretations of the same standard, which translates into different dialects of the same standard, but nothing even close to widely different approaches to different ORM libraries where nothing close to standard exists.<p>Secondly, an even more important fact - is that SQL is a <strong>declarative language.</strong> You are supposed to simply declare <strong>what</strong> is it that you want from your data, and the RDBMS engine (your database) should figure out <strong>how</strong> for you. There is a strong emphasis on what, rather than how.<p>In practice, that means that are supposed to focus on what they need to get out of their data (a business logic), while the engine abstracts unimportant details such as operating systems, devices and even algorithms. You declare your intent with data and the engine will figure out the best and most optimized algorithm. If you ever wondered what is the execution plan for your queries, well, that is it, it's your engine finding out the optimal algorithm for your intent. It doesn't mean it's perfect, but it's good enough. And that's the element of fifth-generation languages (5GL), not even fourth. Quote: "A fifth-generation programming language (5GL) is a high-level programming language based on problem-solving using constraints given to the program, rather than using an algorithm written by a programmer". [<a href=https://en.wikipedia.org/wiki/Fifth-generation_programming_language>source</a>].<p>On the other hand, programming languages that are used as database clients (your program <code>C#</code>) are lower languages that are imperative and functional, where functions are implicitly coded in every step required to solve a problem. That translates directly to <strong>productivity</strong>.<p>If still not convinced, I highly recommend checking out this tech-talk presentation that clearly demonstrates a dramatic difference in productivity. [<a href="https://www.youtube.com/watch?v=wTPGW1PNy_Y&ab_channel=Devoxx">link</a>]<p>Another consequence of this discrepancy (sometimes referred to as impedance mismatch [<a href=https://en.wikipedia.org/wiki/Object%E2%80%93relational_impedance_mismatch>source</a>]) is the fact that imperative language constructs implemented by the ORM library - can not be translated to SQL at all. And, that means that the only way to implement the desired feature is to <strong>download a portion of data to the database client</strong> and perform the desired operation there with implicitly coded functions. And, that means moving processing away from where data is stored and that means a performance impact (as well as productivity).<p>So, that brings me to the second point:<h3 id=2-performances>2) Performances</h3><p>Modern ORM libraries that implement dynamic SQL query/command generation (as part of two-way mapping) can impact application performance in many different ways. Sometimes those impacts can be subtle and sometimes even dramatic, but that usually depends on the amount of data being processed.<p>They usually fall into two major categories:<h4 id=1-technical-limitations-of-the-library>1) Technical limitations of the library</h4><p>There's already a performance penalty to start with. Since all commands and queries have to be generated by the library, that generation is not free.<p>However, that is a miniscule impact and the latest versions of Microsoft Entity Framework are trying to solve this overhead with a concept called compiled queries, where that performance penalty is moved to compile time. [<a href=https://learn.microsoft.com/en-us/dotnet/framework/data/adonet/ef/language-reference/compiled-queries-linq-to-entities>source</a>].<p>I already described above how it is indeed possible to have a situation where a command or query can not be translated to SQL at all. And, therefore, the only way to implement the desired feature is to download a portion of data to the database client and perform the desired operation there (on the client).<p>A good example of how that reality has traditionally impacted performances are implementation of the so-called <strong>active record pattern</strong> and the update or delete operation using that pattern.<p>In the Wikipedia article (<a href=https://en.wikipedia.org/wiki/Active_record_pattern>source</a>) this criticism isn't even mentioned, but, here is what happens:<ul><li>Download the desired record and map the result into the memory instance.<li>Execute an update or delete command for that record.</ul><p>So, there are two commands in two steps, first is select, and the second is update or delete, which will utilize the network to issue a database call twice (latency time, bandwidth time twice) and will scan the same table twice.<p>As opposed to simple commands <code>update my_table set value = @new where id = @id</code> or <code>delete my_table where id = @id</code> which will do those things only once.<p>Again the latest versions of Microsoft Entity Framework are trying to solve this overhead new API's. (<a href=https://learn.microsoft.com/en-us/ef/core/saving/execute-insert-update-delete>source</a>). It took them only 15 years from the first version, better later than never. And, Microsoft Entity Framework is the only full-blown ORM that I've seen that even addressed this issue, but someone may correct me on this.<p>Fine, Microsoft Entity Framework has got this active record performance thing. But...<ul><li>How about updating or deleting records in a table as a result of another query?<li>How about updating or deleting records in a table as a result of a hierarchical query on the same table to avoid reference errors in the self-referencing table?<li>How about different window analytical functions?<li>How about grouping sets, data rollups and cubes with totals and subtotals?<li>How about lateral joins where you can join on a subquery?<li>How about distinct on a specific set from expression?<li>How about filtering on aggregate function?</ul><p>To be fair, many of these different concepts are just analytical functionalities, and that doesn't mean that the new API won't be introduced in the future to address these things and concepts. It only took them 15 years to properly address the active record perfomance issue.<p>In the meanwhile, in order to avoid the raw SQL (which is what many developers tend to do), the only way to implement these issues is to download a portion (often a large portion) and perform processing out of the database which inevitably leads to a) The performance degradation which increases as data volume increases. b) A big amount of code that needs to be written, tested and maintained.<p>But wait, that is not all.<p>Modern SQL systems are very much capable of executing analytical scripts and returning some analytical results.<p>Complex data processing often requires processing in steps and saving results in intermediary stores for future steps such as temporary tables and table variables for example.<p>A good example would be a hypothetical scenario where something like this:<ol><li>First step - fetch the data from tables and apply filtering.<li>Save results into the intermediary store for later use.<li>Use that intermediary store to calculate some analytics and statistics.<li>Use that intermediary store to generate a data view, like a page for example.<li>Return both datasets together.</ol><p>All of these are possible with modern SQL and yes, temporary tables are a) very fast and cheap and can used as variables and b) part of international SQL ISO standard (<a href=https://en.wikibooks.org/wiki/Structured_Query_Language/Temporary_Table>source</a>).<p>I cannot even begin to imagine how would some ORM would even try to implement something like this. Theoretically, it could be done in 5 steps, with 5 subsequent database calls, while the script is still one database call (consisting of multiple steps) and it will always be faster no matter what.<h4 id=2-human-factor>2) Human factor</h4><p>Besides all of these technical limitations mentioned above, there is always, always a human factor.<p>For instance, the N+1 antipattern is a well-documented and dreaded problem that can dramatically impact performance. Essentially, a situation where the ORM library (or developer) executes a select query and for each record in results creates and executes another one. So that makes N+1 in total queries (instead of just one).<p>If you look it up, there are countless blogs and articles on how to avoid N+1 pitfalls and errors with the Microsoft Entity Framework for example. So it's safe to say, it's a common problem that is sometimes unintentional and sometimes even from lack of experience.<p>It appears that ORMs make CRUD operation painfully simple and easy, but also N+1 bottleneck simple and easy, which is even more painful. Literally.<p>Another common issue is so-called over-selecting. Instead of returning exactly what your program needs, the tendency is to return an entire width of the records, which results in downloading many times more data from the database server into the database client. Yes, every time you do a select from your program and fetch some data, you are downloading from the database server (except when using SQLite of course). So, instead of downloading a couple of kilobytes program downloads a couple of megabytes. Instead of downloading a couple of megabytes, the program downloads a couple of gigabytes... So the issue?<p>From my experience, these mistakes happen quite often, even with decades of experience. And then many developers tend to treat the database as just another memory construct, which leads to serious performance degradations.<h2 id=but-is-it-really-necessary>But, is it really necessary?</h2><p>So, the micro ORM approach is necessary after all, as we can see.<p>But is the library itself necessary?<p>Although I developed <a href=https://vb-consulting.github.io/norm.net/ >Norm micro ORM</a> for my project needs I must admit I rarely ever use it.<p>Why?<p>This may be a personal preference, but manual mapping isn't that hard at all, at least, in my experience.<p>There are a couple of useful extensions I usually use, and it may look as simple as this:<div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">static</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">class</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Extensions</span></span>
<span class=line><span style="color: #E6E6E6">{</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #569CD6">private</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">static</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">void</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">AddParameters</span><span style="color: #E6E6E6">(</span><span style="color: #4EC9B0">DbCommand</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">cmd</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">object</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">parameters</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    {</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #C586C0">foreach</span><span style="color: #E6E6E6"> (</span><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">prop</span><span style="color: #E6E6E6"> </span><span style="color: #C586C0">in</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">parameters</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">GetType</span><span style="color: #E6E6E6">().</span><span style="color: #DCDCAA">GetProperties</span><span style="color: #E6E6E6">())</span></span>
<span class=line><span style="color: #E6E6E6">        {</span></span>
<span class=line><span style="color: #E6E6E6">            </span><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">param</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">cmd</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">CreateParameter</span><span style="color: #E6E6E6">();</span></span>
<span class=line><span style="color: #E6E6E6">            </span><span style="color: #9CDCFE">param</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">ParameterName</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">prop</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Name</span><span style="color: #E6E6E6">;</span></span>
<span class=line><span style="color: #E6E6E6">            </span><span style="color: #9CDCFE">param</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Value</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">prop</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">GetValue</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">parameters</span><span style="color: #E6E6E6">) </span><span style="color: #D4D4D4">??</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">DBNull</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Value</span><span style="color: #E6E6E6">;</span></span>
<span class=line><span style="color: #E6E6E6">            </span><span style="color: #9CDCFE">cmd</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Parameters</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Add</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">param</span><span style="color: #E6E6E6">);</span></span>
<span class=line><span style="color: #E6E6E6">        }</span></span>
<span class=line><span style="color: #E6E6E6">    }</span></span>
<span class=line><span style="color: #E6E6E6">    </span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #6A9955">// single values into tuples 4 tuples</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">static</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">IEnumerable</span><span style="color: #E6E6E6">&lt;(</span><span style="color: #4EC9B0">T1</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">T2</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">T3</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">T4</span><span style="color: #E6E6E6">)> </span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;</span><span style="color: #4EC9B0">T1</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">T2</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">T3</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">T4</span><span style="color: #E6E6E6">>(</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #569CD6">this</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">DbConnection</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">, </span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">command</span><span style="color: #E6E6E6">, </span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #569CD6">object</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">parameters</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">null</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    {</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">cmd</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">CreateCommand</span><span style="color: #E6E6E6">();</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #9CDCFE">cmd</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">CommandText</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">command</span><span style="color: #E6E6E6">;</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #C586C0">if</span><span style="color: #E6E6E6"> (</span><span style="color: #9CDCFE">parameters</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">!=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">null</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">        {</span></span>
<span class=line><span style="color: #E6E6E6">            </span><span style="color: #DCDCAA">AddParameters</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">cmd</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">parameters</span><span style="color: #E6E6E6">);</span></span>
<span class=line><span style="color: #E6E6E6">        }</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">reader</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">cmd</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">ExecuteReader</span><span style="color: #E6E6E6">();</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #C586C0">while</span><span style="color: #E6E6E6"> (</span><span style="color: #9CDCFE">reader</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">())</span></span>
<span class=line><span style="color: #E6E6E6">        {</span></span>
<span class=line><span style="color: #E6E6E6">            </span><span style="color: #C586C0">yield</span><span style="color: #E6E6E6"> </span><span style="color: #C586C0">return</span><span style="color: #E6E6E6"> (</span></span>
<span class=line><span style="color: #E6E6E6">                </span><span style="color: #9CDCFE">reader</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">GetFieldValue</span><span style="color: #E6E6E6">&lt;</span><span style="color: #4EC9B0">T1</span><span style="color: #E6E6E6">>(</span><span style="color: #B5CEA8">0</span><span style="color: #E6E6E6">),</span></span>
<span class=line><span style="color: #E6E6E6">                </span><span style="color: #9CDCFE">reader</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">GetFieldValue</span><span style="color: #E6E6E6">&lt;</span><span style="color: #4EC9B0">T2</span><span style="color: #E6E6E6">>(</span><span style="color: #B5CEA8">1</span><span style="color: #E6E6E6">),</span></span>
<span class=line><span style="color: #E6E6E6">                </span><span style="color: #9CDCFE">reader</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">GetFieldValue</span><span style="color: #E6E6E6">&lt;</span><span style="color: #4EC9B0">T3</span><span style="color: #E6E6E6">>(</span><span style="color: #B5CEA8">2</span><span style="color: #E6E6E6">),</span></span>
<span class=line><span style="color: #E6E6E6">                </span><span style="color: #9CDCFE">reader</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">GetFieldValue</span><span style="color: #E6E6E6">&lt;</span><span style="color: #4EC9B0">T4</span><span style="color: #E6E6E6">>(</span><span style="color: #B5CEA8">3</span><span style="color: #E6E6E6">));</span></span>
<span class=line><span style="color: #E6E6E6">        }</span></span>
<span class=line><span style="color: #E6E6E6">    }</span></span>
<span class=line></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #6A9955">// custom reader callback values into tuples</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">static</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">IEnumerable</span><span style="color: #E6E6E6">&lt;</span><span style="color: #4EC9B0">T</span><span style="color: #E6E6E6">> </span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;</span><span style="color: #4EC9B0">T</span><span style="color: #E6E6E6">>(</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #569CD6">this</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">DbConnection</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">, </span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">command</span><span style="color: #E6E6E6">, </span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #4EC9B0">Func</span><span style="color: #E6E6E6">&lt;</span><span style="color: #4EC9B0">DbDataReader</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">T</span><span style="color: #E6E6E6">> </span><span style="color: #9CDCFE">callback</span><span style="color: #E6E6E6">, </span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #569CD6">object</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">parameters</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">null</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    {</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">cmd</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">CreateCommand</span><span style="color: #E6E6E6">();</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #9CDCFE">cmd</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">CommandText</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">command</span><span style="color: #E6E6E6">;</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #C586C0">if</span><span style="color: #E6E6E6"> (</span><span style="color: #9CDCFE">parameters</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">!=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">null</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">        {</span></span>
<span class=line><span style="color: #E6E6E6">            </span><span style="color: #DCDCAA">AddParameters</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">cmd</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">parameters</span><span style="color: #E6E6E6">);</span></span>
<span class=line><span style="color: #E6E6E6">        }</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">reader</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">cmd</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">ExecuteReader</span><span style="color: #E6E6E6">();</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #C586C0">while</span><span style="color: #E6E6E6"> (</span><span style="color: #9CDCFE">reader</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">())</span></span>
<span class=line><span style="color: #E6E6E6">        {</span></span>
<span class=line><span style="color: #E6E6E6">            </span><span style="color: #C586C0">yield</span><span style="color: #E6E6E6"> </span><span style="color: #C586C0">return</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">callback</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">reader</span><span style="color: #E6E6E6">);</span></span>
<span class=line><span style="color: #E6E6E6">        }</span></span>
<span class=line><span style="color: #E6E6E6">    }</span></span>
<span class=line></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #6A9955">// etc</span></span>
<span class=line><span style="color: #E6E6E6">}</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">static</span><span style="color: #000000"> </span><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #267F99">Extensions</span></span>
<span class=line><span style="color: #000000">{</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #0000FF">private</span><span style="color: #000000"> </span><span style="color: #0000FF">static</span><span style="color: #000000"> </span><span style="color: #0000FF">void</span><span style="color: #000000"> </span><span style="color: #795E26">AddParameters</span><span style="color: #000000">(</span><span style="color: #267F99">DbCommand</span><span style="color: #000000"> </span><span style="color: #001080">cmd</span><span style="color: #000000">, </span><span style="color: #0000FF">object</span><span style="color: #000000"> </span><span style="color: #001080">parameters</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    {</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #AF00DB">foreach</span><span style="color: #000000"> (</span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">prop</span><span style="color: #000000"> </span><span style="color: #AF00DB">in</span><span style="color: #000000"> </span><span style="color: #001080">parameters</span><span style="color: #000000">.</span><span style="color: #795E26">GetType</span><span style="color: #000000">().</span><span style="color: #795E26">GetProperties</span><span style="color: #000000">())</span></span>
<span class=line><span style="color: #000000">        {</span></span>
<span class=line><span style="color: #000000">            </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">param</span><span style="color: #000000"> = </span><span style="color: #001080">cmd</span><span style="color: #000000">.</span><span style="color: #795E26">CreateParameter</span><span style="color: #000000">();</span></span>
<span class=line><span style="color: #000000">            </span><span style="color: #001080">param</span><span style="color: #000000">.</span><span style="color: #001080">ParameterName</span><span style="color: #000000"> = </span><span style="color: #001080">prop</span><span style="color: #000000">.</span><span style="color: #001080">Name</span><span style="color: #000000">;</span></span>
<span class=line><span style="color: #000000">            </span><span style="color: #001080">param</span><span style="color: #000000">.</span><span style="color: #001080">Value</span><span style="color: #000000"> = </span><span style="color: #001080">prop</span><span style="color: #000000">.</span><span style="color: #795E26">GetValue</span><span style="color: #000000">(</span><span style="color: #001080">parameters</span><span style="color: #000000">) ?? </span><span style="color: #001080">DBNull</span><span style="color: #000000">.</span><span style="color: #001080">Value</span><span style="color: #000000">;</span></span>
<span class=line><span style="color: #000000">            </span><span style="color: #001080">cmd</span><span style="color: #000000">.</span><span style="color: #001080">Parameters</span><span style="color: #000000">.</span><span style="color: #795E26">Add</span><span style="color: #000000">(</span><span style="color: #001080">param</span><span style="color: #000000">);</span></span>
<span class=line><span style="color: #000000">        }</span></span>
<span class=line><span style="color: #000000">    }</span></span>
<span class=line><span style="color: #000000">    </span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #008000">// single values into tuples 4 tuples</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">static</span><span style="color: #000000"> </span><span style="color: #267F99">IEnumerable</span><span style="color: #000000">&lt;(</span><span style="color: #267F99">T1</span><span style="color: #000000">, </span><span style="color: #267F99">T2</span><span style="color: #000000">, </span><span style="color: #267F99">T3</span><span style="color: #000000">, </span><span style="color: #267F99">T4</span><span style="color: #000000">)> </span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;</span><span style="color: #267F99">T1</span><span style="color: #000000">, </span><span style="color: #267F99">T2</span><span style="color: #000000">, </span><span style="color: #267F99">T3</span><span style="color: #000000">, </span><span style="color: #267F99">T4</span><span style="color: #000000">>(</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #0000FF">this</span><span style="color: #000000"> </span><span style="color: #267F99">DbConnection</span><span style="color: #000000"> </span><span style="color: #001080">connection</span><span style="color: #000000">, </span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #0000FF">string</span><span style="color: #000000"> </span><span style="color: #001080">command</span><span style="color: #000000">, </span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #0000FF">object</span><span style="color: #000000"> </span><span style="color: #001080">parameters</span><span style="color: #000000"> = </span><span style="color: #0000FF">null</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    {</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">cmd</span><span style="color: #000000"> = </span><span style="color: #001080">connection</span><span style="color: #000000">.</span><span style="color: #795E26">CreateCommand</span><span style="color: #000000">();</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #001080">cmd</span><span style="color: #000000">.</span><span style="color: #001080">CommandText</span><span style="color: #000000"> = </span><span style="color: #001080">command</span><span style="color: #000000">;</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">parameters</span><span style="color: #000000"> != </span><span style="color: #0000FF">null</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">        {</span></span>
<span class=line><span style="color: #000000">            </span><span style="color: #795E26">AddParameters</span><span style="color: #000000">(</span><span style="color: #001080">cmd</span><span style="color: #000000">, </span><span style="color: #001080">parameters</span><span style="color: #000000">);</span></span>
<span class=line><span style="color: #000000">        }</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">reader</span><span style="color: #000000"> = </span><span style="color: #001080">cmd</span><span style="color: #000000">.</span><span style="color: #795E26">ExecuteReader</span><span style="color: #000000">();</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #AF00DB">while</span><span style="color: #000000"> (</span><span style="color: #001080">reader</span><span style="color: #000000">.</span><span style="color: #795E26">Read</span><span style="color: #000000">())</span></span>
<span class=line><span style="color: #000000">        {</span></span>
<span class=line><span style="color: #000000">            </span><span style="color: #AF00DB">yield</span><span style="color: #000000"> </span><span style="color: #AF00DB">return</span><span style="color: #000000"> (</span></span>
<span class=line><span style="color: #000000">                </span><span style="color: #001080">reader</span><span style="color: #000000">.</span><span style="color: #795E26">GetFieldValue</span><span style="color: #000000">&lt;</span><span style="color: #267F99">T1</span><span style="color: #000000">>(</span><span style="color: #098658">0</span><span style="color: #000000">),</span></span>
<span class=line><span style="color: #000000">                </span><span style="color: #001080">reader</span><span style="color: #000000">.</span><span style="color: #795E26">GetFieldValue</span><span style="color: #000000">&lt;</span><span style="color: #267F99">T2</span><span style="color: #000000">>(</span><span style="color: #098658">1</span><span style="color: #000000">),</span></span>
<span class=line><span style="color: #000000">                </span><span style="color: #001080">reader</span><span style="color: #000000">.</span><span style="color: #795E26">GetFieldValue</span><span style="color: #000000">&lt;</span><span style="color: #267F99">T3</span><span style="color: #000000">>(</span><span style="color: #098658">2</span><span style="color: #000000">),</span></span>
<span class=line><span style="color: #000000">                </span><span style="color: #001080">reader</span><span style="color: #000000">.</span><span style="color: #795E26">GetFieldValue</span><span style="color: #000000">&lt;</span><span style="color: #267F99">T4</span><span style="color: #000000">>(</span><span style="color: #098658">3</span><span style="color: #000000">));</span></span>
<span class=line><span style="color: #000000">        }</span></span>
<span class=line><span style="color: #000000">    }</span></span>
<span class=line></span>
<span class=line><span style="color: #000000">    </span><span style="color: #008000">// custom reader callback values into tuples</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">static</span><span style="color: #000000"> </span><span style="color: #267F99">IEnumerable</span><span style="color: #000000">&lt;</span><span style="color: #267F99">T</span><span style="color: #000000">> </span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;</span><span style="color: #267F99">T</span><span style="color: #000000">>(</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #0000FF">this</span><span style="color: #000000"> </span><span style="color: #267F99">DbConnection</span><span style="color: #000000"> </span><span style="color: #001080">connection</span><span style="color: #000000">, </span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #0000FF">string</span><span style="color: #000000"> </span><span style="color: #001080">command</span><span style="color: #000000">, </span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #267F99">Func</span><span style="color: #000000">&lt;</span><span style="color: #267F99">DbDataReader</span><span style="color: #000000">, </span><span style="color: #267F99">T</span><span style="color: #000000">> </span><span style="color: #001080">callback</span><span style="color: #000000">, </span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #0000FF">object</span><span style="color: #000000"> </span><span style="color: #001080">parameters</span><span style="color: #000000"> = </span><span style="color: #0000FF">null</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    {</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">cmd</span><span style="color: #000000"> = </span><span style="color: #001080">connection</span><span style="color: #000000">.</span><span style="color: #795E26">CreateCommand</span><span style="color: #000000">();</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #001080">cmd</span><span style="color: #000000">.</span><span style="color: #001080">CommandText</span><span style="color: #000000"> = </span><span style="color: #001080">command</span><span style="color: #000000">;</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">parameters</span><span style="color: #000000"> != </span><span style="color: #0000FF">null</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">        {</span></span>
<span class=line><span style="color: #000000">            </span><span style="color: #795E26">AddParameters</span><span style="color: #000000">(</span><span style="color: #001080">cmd</span><span style="color: #000000">, </span><span style="color: #001080">parameters</span><span style="color: #000000">);</span></span>
<span class=line><span style="color: #000000">        }</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">reader</span><span style="color: #000000"> = </span><span style="color: #001080">cmd</span><span style="color: #000000">.</span><span style="color: #795E26">ExecuteReader</span><span style="color: #000000">();</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #AF00DB">while</span><span style="color: #000000"> (</span><span style="color: #001080">reader</span><span style="color: #000000">.</span><span style="color: #795E26">Read</span><span style="color: #000000">())</span></span>
<span class=line><span style="color: #000000">        {</span></span>
<span class=line><span style="color: #000000">            </span><span style="color: #AF00DB">yield</span><span style="color: #000000"> </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #795E26">callback</span><span style="color: #000000">(</span><span style="color: #001080">reader</span><span style="color: #000000">);</span></span>
<span class=line><span style="color: #000000">        }</span></span>
<span class=line><span style="color: #000000">    }</span></span>
<span class=line></span>
<span class=line><span style="color: #000000">    </span><span style="color: #008000">// etc</span></span>
<span class=line><span style="color: #000000">}</span></span></code></pre></div><p>This may vary on project needs, but the typical usage may look something like this:<div class="code csharp"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">class</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Film</span></span>
<span class=line><span style="color: #E6E6E6">{</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">int</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">FilmId</span><span style="color: #E6E6E6"> { </span><span style="color: #569CD6">get</span><span style="color: #E6E6E6">; </span><span style="color: #569CD6">set</span><span style="color: #E6E6E6">; }</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">Title</span><span style="color: #E6E6E6"> { </span><span style="color: #569CD6">get</span><span style="color: #E6E6E6">; </span><span style="color: #569CD6">set</span><span style="color: #E6E6E6">; }</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">int</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">ReleaseYear</span><span style="color: #E6E6E6"> { </span><span style="color: #569CD6">get</span><span style="color: #E6E6E6">; </span><span style="color: #569CD6">set</span><span style="color: #E6E6E6">; }</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">decimal</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">RentalRate</span><span style="color: #E6E6E6"> { </span><span style="color: #569CD6">get</span><span style="color: #E6E6E6">; </span><span style="color: #569CD6">set</span><span style="color: #E6E6E6">; }</span></span>
<span class=line><span style="color: #E6E6E6">}</span></span>
<span class=line></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">film1</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;</span><span style="color: #569CD6">int</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">int</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">decimal</span><span style="color: #E6E6E6">>(</span><span style="color: #CE9178">@"</span></span>
<span class=line><span style="color: #CE9178">        select </span></span>
<span class=line><span style="color: #CE9178">            film_id, title, release_year, rental_rate </span></span>
<span class=line><span style="color: #CE9178">        from</span></span>
<span class=line><span style="color: #CE9178">            film</span></span>
<span class=line><span style="color: #CE9178">        where</span></span>
<span class=line><span style="color: #CE9178">            film_id = @id"</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> { </span><span style="color: #9CDCFE">id</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #B5CEA8">999</span><span style="color: #E6E6E6"> })</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Select</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">t</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Film</span></span>
<span class=line><span style="color: #E6E6E6">    {</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #9CDCFE">FilmId</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">t</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Item1</span><span style="color: #E6E6E6">,</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #9CDCFE">Title</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">t</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Item2</span><span style="color: #E6E6E6">,</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #9CDCFE">ReleaseYear</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">t</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Item3</span><span style="color: #E6E6E6">,</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #9CDCFE">RentalRate</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">t</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Item4</span></span>
<span class=line><span style="color: #E6E6E6">    })</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Single</span><span style="color: #E6E6E6">();</span></span>
<span class=line></span>
<span class=line><span style="color: #DCDCAA">WriteLine</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">film1</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Title</span><span style="color: #E6E6E6">);</span></span>
<span class=line></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">film2</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;</span><span style="color: #4EC9B0">Film</span><span style="color: #E6E6E6">>(</span><span style="color: #CE9178">@"</span></span>
<span class=line><span style="color: #CE9178">        select </span></span>
<span class=line><span style="color: #CE9178">            film_id, title, release_year, rental_rate </span></span>
<span class=line><span style="color: #CE9178">        from</span></span>
<span class=line><span style="color: #CE9178">            film</span></span>
<span class=line><span style="color: #CE9178">        where</span></span>
<span class=line><span style="color: #CE9178">            film_id = @id"</span><span style="color: #E6E6E6">,</span></span>
<span class=line><span style="color: #E6E6E6">       </span><span style="color: #9CDCFE">r</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Film</span></span>
<span class=line><span style="color: #E6E6E6">       {</span></span>
<span class=line><span style="color: #E6E6E6">           </span><span style="color: #9CDCFE">FilmId</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> (</span><span style="color: #569CD6">int</span><span style="color: #E6E6E6">)</span><span style="color: #9CDCFE">r</span><span style="color: #E6E6E6">[</span><span style="color: #CE9178">"film_id"</span><span style="color: #E6E6E6">],</span></span>
<span class=line><span style="color: #E6E6E6">           </span><span style="color: #9CDCFE">Title</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> (</span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">)</span><span style="color: #9CDCFE">r</span><span style="color: #E6E6E6">[</span><span style="color: #CE9178">"title"</span><span style="color: #E6E6E6">],</span></span>
<span class=line><span style="color: #E6E6E6">           </span><span style="color: #9CDCFE">ReleaseYear</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> (</span><span style="color: #569CD6">int</span><span style="color: #E6E6E6">)</span><span style="color: #9CDCFE">r</span><span style="color: #E6E6E6">[</span><span style="color: #CE9178">"release_year"</span><span style="color: #E6E6E6">],</span></span>
<span class=line><span style="color: #E6E6E6">           </span><span style="color: #9CDCFE">RentalRate</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> (</span><span style="color: #569CD6">decimal</span><span style="color: #E6E6E6">)</span><span style="color: #9CDCFE">r</span><span style="color: #E6E6E6">[</span><span style="color: #CE9178">"rental_rate"</span><span style="color: #E6E6E6">]</span></span>
<span class=line><span style="color: #E6E6E6">       },</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> { </span><span style="color: #9CDCFE">id</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #B5CEA8">999</span><span style="color: #E6E6E6"> })</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Single</span><span style="color: #E6E6E6">();</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #267F99">Film</span></span>
<span class=line><span style="color: #000000">{</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">int</span><span style="color: #000000"> </span><span style="color: #001080">FilmId</span><span style="color: #000000"> { </span><span style="color: #0000FF">get</span><span style="color: #000000">; </span><span style="color: #0000FF">set</span><span style="color: #000000">; }</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">string</span><span style="color: #000000"> </span><span style="color: #001080">Title</span><span style="color: #000000"> { </span><span style="color: #0000FF">get</span><span style="color: #000000">; </span><span style="color: #0000FF">set</span><span style="color: #000000">; }</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">int</span><span style="color: #000000"> </span><span style="color: #001080">ReleaseYear</span><span style="color: #000000"> { </span><span style="color: #0000FF">get</span><span style="color: #000000">; </span><span style="color: #0000FF">set</span><span style="color: #000000">; }</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">decimal</span><span style="color: #000000"> </span><span style="color: #001080">RentalRate</span><span style="color: #000000"> { </span><span style="color: #0000FF">get</span><span style="color: #000000">; </span><span style="color: #0000FF">set</span><span style="color: #000000">; }</span></span>
<span class=line><span style="color: #000000">}</span></span>
<span class=line></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">film1</span><span style="color: #000000"> = </span><span style="color: #001080">connection</span><span style="color: #000000">.</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">int</span><span style="color: #000000">, </span><span style="color: #0000FF">string</span><span style="color: #000000">, </span><span style="color: #0000FF">int</span><span style="color: #000000">, </span><span style="color: #0000FF">decimal</span><span style="color: #000000">>(</span><span style="color: #A31515">@"</span></span>
<span class=line><span style="color: #A31515">        select </span></span>
<span class=line><span style="color: #A31515">            film_id, title, release_year, rental_rate </span></span>
<span class=line><span style="color: #A31515">        from</span></span>
<span class=line><span style="color: #A31515">            film</span></span>
<span class=line><span style="color: #A31515">        where</span></span>
<span class=line><span style="color: #A31515">            film_id = @id"</span><span style="color: #000000">, </span><span style="color: #0000FF">new</span><span style="color: #000000"> { </span><span style="color: #001080">id</span><span style="color: #000000"> = </span><span style="color: #098658">999</span><span style="color: #000000"> })</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Select</span><span style="color: #000000">(</span><span style="color: #001080">t</span><span style="color: #000000"> => </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">Film</span></span>
<span class=line><span style="color: #000000">    {</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #001080">FilmId</span><span style="color: #000000"> = </span><span style="color: #001080">t</span><span style="color: #000000">.</span><span style="color: #001080">Item1</span><span style="color: #000000">,</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #001080">Title</span><span style="color: #000000"> = </span><span style="color: #001080">t</span><span style="color: #000000">.</span><span style="color: #001080">Item2</span><span style="color: #000000">,</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #001080">ReleaseYear</span><span style="color: #000000"> = </span><span style="color: #001080">t</span><span style="color: #000000">.</span><span style="color: #001080">Item3</span><span style="color: #000000">,</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #001080">RentalRate</span><span style="color: #000000"> = </span><span style="color: #001080">t</span><span style="color: #000000">.</span><span style="color: #001080">Item4</span></span>
<span class=line><span style="color: #000000">    })</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Single</span><span style="color: #000000">();</span></span>
<span class=line></span>
<span class=line><span style="color: #795E26">WriteLine</span><span style="color: #000000">(</span><span style="color: #001080">film1</span><span style="color: #000000">.</span><span style="color: #001080">Title</span><span style="color: #000000">);</span></span>
<span class=line></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">film2</span><span style="color: #000000"> = </span><span style="color: #001080">connection</span><span style="color: #000000">.</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;</span><span style="color: #267F99">Film</span><span style="color: #000000">>(</span><span style="color: #A31515">@"</span></span>
<span class=line><span style="color: #A31515">        select </span></span>
<span class=line><span style="color: #A31515">            film_id, title, release_year, rental_rate </span></span>
<span class=line><span style="color: #A31515">        from</span></span>
<span class=line><span style="color: #A31515">            film</span></span>
<span class=line><span style="color: #A31515">        where</span></span>
<span class=line><span style="color: #A31515">            film_id = @id"</span><span style="color: #000000">,</span></span>
<span class=line><span style="color: #000000">       </span><span style="color: #001080">r</span><span style="color: #000000"> => </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">Film</span></span>
<span class=line><span style="color: #000000">       {</span></span>
<span class=line><span style="color: #000000">           </span><span style="color: #001080">FilmId</span><span style="color: #000000"> = (</span><span style="color: #0000FF">int</span><span style="color: #000000">)</span><span style="color: #001080">r</span><span style="color: #000000">[</span><span style="color: #A31515">"film_id"</span><span style="color: #000000">],</span></span>
<span class=line><span style="color: #000000">           </span><span style="color: #001080">Title</span><span style="color: #000000"> = (</span><span style="color: #0000FF">string</span><span style="color: #000000">)</span><span style="color: #001080">r</span><span style="color: #000000">[</span><span style="color: #A31515">"title"</span><span style="color: #000000">],</span></span>
<span class=line><span style="color: #000000">           </span><span style="color: #001080">ReleaseYear</span><span style="color: #000000"> = (</span><span style="color: #0000FF">int</span><span style="color: #000000">)</span><span style="color: #001080">r</span><span style="color: #000000">[</span><span style="color: #A31515">"release_year"</span><span style="color: #000000">],</span></span>
<span class=line><span style="color: #000000">           </span><span style="color: #001080">RentalRate</span><span style="color: #000000"> = (</span><span style="color: #0000FF">decimal</span><span style="color: #000000">)</span><span style="color: #001080">r</span><span style="color: #000000">[</span><span style="color: #A31515">"rental_rate"</span><span style="color: #000000">]</span></span>
<span class=line><span style="color: #000000">       },</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #0000FF">new</span><span style="color: #000000"> { </span><span style="color: #001080">id</span><span style="color: #000000"> = </span><span style="color: #098658">999</span><span style="color: #000000"> })</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Single</span><span style="color: #000000">();</span></span></code></pre></div><p>To be clear, the code above is just an example. Real-world code could include more overloads, perhaps execute methods, some null checking, etc, but, the principle is the same.<p>And, yes, this is the manual mapping. And yes, this is my preference these days.<p>With modern tools such as the Copilot, it is absurdly simple and easy to write and maintain.<p>If that is not your cup of tea, take a look a <a href=https://vb-consulting.github.io/norm.net/benchmarks/ >performance benchmarks</a> on this website between various micro ORM libraries and approaches.<p>The question is, are even Micro ORM necessary?<p>I'd say it depends on the developer's skill level.<h2 id=conclusion>Conclusion</h2><p>SQL is a strange language. Very Easy to get started and a lifetime to master.<p>It's very important to master your toolset and choose the right tools for the job.<p>With this article, I tried to explain what exactly is Micro ORM and to demonstrate why is still very much necessary for modern software development.<p>And with advances in modern tooling, I ask the question - can we do it even without the help of micro ORM mappings?<p>Thank you for reading.</div></div><div class="rightside svelte-2kl70j"><div class=svelte-2kl70j><ul class="navbar-nav sidenav svelte-2kl70j"><li class="nav-txt-divider text-muted svelte-2kl70j"><hr class=svelte-2kl70j><span class=svelte-2kl70j>on this page</span><hr class=svelte-2kl70j><li class="nav-item toc1 right svelte-2kl70j bookmark-nav"data-id=what-is-micro-orm title="What is Micro ORM?"><a class="nav-link auto-close svelte-2kl70j bookmark-link"href=#what-is-micro-orm>What is Micro ORM?</a><li class="nav-item toc2 right svelte-2kl70j bookmark-nav"data-id=reasons title=Reasons><a class="nav-link auto-close svelte-2kl70j bookmark-link"href=#reasons>Reasons</a><li class="nav-item toc3 right svelte-2kl70j bookmark-nav"data-id=1-language-and-productivity title="1) Language and Productivity"><a class="nav-link auto-close svelte-2kl70j bookmark-link"href=#1-language-and-productivity>1) Language and Productivity</a><li class="nav-item toc3 right svelte-2kl70j bookmark-nav"data-id=2-performances title="2) Performances"><a class="nav-link auto-close svelte-2kl70j bookmark-link"href=#2-performances>2) Performances</a><li class="nav-item toc4 right svelte-2kl70j bookmark-nav"data-id=1-technical-limitations-of-the-library title="1) Technical limitations of the library"><a class="nav-link auto-close svelte-2kl70j bookmark-link"href=#1-technical-limitations-of-the-library>1) Technical limitations of the library</a><li class="nav-item toc4 right svelte-2kl70j bookmark-nav"data-id=2-human-factor title="2) Human factor"><a class="nav-link auto-close svelte-2kl70j bookmark-link"href=#2-human-factor>2) Human factor</a><li class="nav-item toc2 mt-2 right svelte-2kl70j bookmark-nav"data-id=but-is-it-really-necessary title="But, is it really necessary?"><a class="nav-link auto-close svelte-2kl70j bookmark-link"href=#but-is-it-really-necessary>But, is it really necessary?</a><li class="nav-item toc2 right svelte-2kl70j bookmark-nav"data-id=conclusion title=Conclusion><a class="nav-link auto-close svelte-2kl70j bookmark-link"href=#conclusion>Conclusion</a></ul></div></div></main><script>!function(){var i=document.querySelector("nav.navbar"),f=document.getElementsByTagName("main")[0],L=f.getElementsByClassName("sidebar")[0],w=f.getElementsByClassName("content")[0],s=document.querySelectorAll("div.code");function k(e,t){for(var n=2;n<arguments.length;n++)e.classList.remove(arguments[n]);e.classList.add(t)}var t=document.getElementsByTagName("html")[0],a=i.querySelector("#theme-btn"),o="theme";function n(e){var t=a.getElementsByTagName("svg");"dark"===e?(t[0].style.display="",t[1].style.display="none",a.getElementsByClassName("check")[0].classList.add("checked")):(t[0].style.display="none",t[1].style.display="",a.getElementsByClassName("check")[0].classList.remove("checked"));for(var n=0;n<s.length;n++){var i=s[n];"dark"===e?(i.children[1].style.display="inherit",i.children[2].style.display="none"):"light"===e&&(i.children[1].style.display="none",i.children[2].style.display="inherit")}window._theme&&window._theme(e)}function r(e,t){var n=e.currentTarget;if(!n.classList.contains("bi-check")){for(var i="",s=0;s<n.classList.length;s++)if(n.classList[s].startsWith("bi-")){i=n.classList[s];break}n.classList.remove(i),n.classList.add("spinner-border-sm"),n.classList.add("spinner-border");e=bootstrap.Tooltip.getInstance(n);e&&(e.setContent({".tooltip-inner":"Copying..."}),e.show()),t(n,function(){var e;n.classList.remove(i),n.classList.remove("spinner-border-sm"),n.classList.remove("spinner-border"),n.classList.add("bi-check"),bootstrap&&(e=bootstrap.Tooltip.getInstance(n))&&(e.setContent({".tooltip-inner":"Copied!"}),e.show()),setTimeout(function(){var e;n.classList.add(i),n.classList.remove("bi-check"),bootstrap&&(e=bootstrap.Tooltip.getInstance(n))&&e.setContent({".tooltip-inner":n.dataset.bsTitle})},2e3)})}}function e(e){r(e,function(e,t){navigator.clipboard.writeText(e.parentElement.nextSibling.innerText),t()})}function l(e){r(e,function(e,t){var n=localStorage.getItem(o);e="dark"===n?e.parentElement.parentElement.children[1]:e.parentElement.parentElement.children[2],setTimeout(function(){html2canvas(e).then(e=>{e.toBlob(e=>navigator.clipboard.write([new ClipboardItem({"image/png":e})])),t()})},0)})}a.addEventListener("click",()=>{var e="dark"===localStorage.getItem(o)?"light":"dark";localStorage.setItem(o,e),n(t.dataset.bsTheme=e)}),n(localStorage.getItem(o)),a.children[0].classList.remove("hidden");for(var c=0;c<s.length;c++)s[c].getElementsByClassName("copy-code")[0].addEventListener("click",e),s[c].getElementsByClassName("photo-code")[0].addEventListener("click",l);for(var d,E=function(){var a,s,o;if(f.children[2]&&"none"!=f.children[2].style.display)return a=f.children[1].children[0].querySelectorAll("[id]"),s=void 0,this.initNavs=function(e){o=e.querySelectorAll("li.bookmark-nav");for(var t=0;t<a.length;t++){for(var n=a[t].id,i=null,s=0;s<o.length;s++)if(o[s].dataset.id==n){i=o[s];break}a[t].nav=i}setTimeout(function(){for(var e=0;e<a.length;e++){var t=a[e];if(r(t).visible&&t.nav)return void t.nav.classList.add("active")}},1e3),l()},f.children[1].addEventListener("scroll",l),this;function r(e){var e=e.getBoundingClientRect(),t=Math.max(document.documentElement.clientHeight,window.innerHeight),n=0<e.top&&!(e.bottom<0||0<=e.top-t)||e.top<0&&e.bottom>t,i=!1;return{visible:n,above:i=n?i:e.bottom<t}}function l(){if(o&&o.length){for(var e=0;e<o.length;e++)o[e].classList.remove("active");for(var t=void 0,e=0;e<a.length;e++){const i=a[e];var n=r(i);if(!n.visible&&n.above&&(t=i.nav),n.visible&&i.nav&&!i.nav.classList.contains("active"))return i.nav.classList.add("active"),s&&clearTimeout(s),void(s=setTimeout(function(){i.nav.scrollIntoView({behavior:"smooth"}),s=void 0},250))}t&&!t.classList.contains("active")&&(t.classList.add("active"),s&&clearTimeout(s),s=setTimeout(function(){t.scrollIntoView({behavior:"smooth"}),s=void 0},250))}}}(),h=function(){var r,l=i.querySelector("#nav-btn"),c=480,d="200px",h="0.25fr",v=730,m=535,u=f.children[0].children[0].children[0],g=f.children[2]&&f.children[2].children[0].children[0],e="sidebar-pinned",b=null==localStorage.getItem(e)||"true"==localStorage.getItem(e),p=!1,y=!1;function t(){window._onresize&&window._onresize();var e=window.outerWidth||window.innerWidth,t=e<c,n=t?p?"100%":"0":b?""+d:"0",i=`grid-template-columns: ${n} 1fr`,s=t&&p?"width: 100%":"0"!=n?"":"display: none",a=t&&p?"display: none":"",o=t?p?"sidebar-show":"sidebar-hide":b?"sidebar-show":"sidebar-hide",n="0"==n;f.children[2]&&(h&&v&&m&&(n&&e<m||!n&&e<v?y||(u.innerHTML=r+g.innerHTML,E.initNavs(u),y=!0):y&&(u.innerHTML=r,E.initNavs(g),y=!1)),!h||t||y?(i+=";",f.children[2].style.display="none"):(i+=` ${h};`,f.children[2].style.display="")),k(l,!t&&b||t&&p?"rotate":"rotate-back","rotate","rotate-back"),b?l.classList.add("text-shadow"):l.classList.remove("text-shadow"),f.style=L?i:"display: grid;",L&&k(L,o,"sidebar-show","sidebar-hide"),L&&(L.firstChild.style=s),w.style=a}function n(){window.outerWidth<c?p=!p:b=!b,localStorage.setItem(e,b.toString()),t(),b?l.classList.add("text-shadow"):l.classList.remove("text-shadow")}return h&&v&&m&&g&&(r=u.innerHTML,E.initNavs(g)),l.addEventListener("click",n),(window.onresize=t)(),this.closeSidebar=function(){window.outerWidth<c&&p&&n()},this}(),v=document.getElementsByClassName("auto-close"),m=0;m<v.length;m++)v[m].addEventListener("click",function(e){h.closeSidebar()});location.hash&&(d=document.getElementById(location.hash.replace("#","")))&&d.scrollIntoView()}();</script><script src=/bootstrap.bundle.min.js></script><script>!function(){for(var t=document.querySelectorAll('[data-bs-toggle="tooltip"]'),e=0;e<t.length;e++)new bootstrap.Tooltip(t[e]);var o=document.getElementsByClassName("accordion-item");if(o.length)for(e=0;e<o.length;e++){var l=o[e];l.querySelectorAll("[href='"+document.location.pathname+"']").length&&l.firstChild.click()}}();</script><script src=/html2canvas.min.js></script><script async defer src=https://buttons.github.io/buttons.js></script><script async data-id=101435862 src=//static.getclicky.com/js></script>