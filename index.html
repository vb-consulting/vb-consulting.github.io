<!DOCTYPE html><html lang=en><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Norm.NET Data Access</title><meta name=description content="Norm.net High Performance Micro ORM Data Access for .NET"><meta name=keywords content="net, dotnet, c#, csharp, netcore, orm, microorm, database-mapper, mapper, data, sql"><link href=https://norm-dot-net.netlify.app// rel=canonical><link rel=stylesheet href=/_elderjs/assets/svelte-b33752b3.css media=all><style></style><link href=/style.css?1698753192699 rel=stylesheet><script>!function(){var e="theme",t=localStorage.getItem(e);t||(t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",localStorage.setItem(e,t)),document.getElementsByTagName("html")[0].dataset.bsTheme=t}();</script><body class="d-flex flex-column h-100"><header id=header><nav class="navbar navbar-expand-md navbar-dark fixed-top py-0 py-md-0 svelte-1qdmkpb"><div class="container-fluid flex-nowrap svelte-1qdmkpb"><div class="d-flex svelte-1qdmkpb"><button id=nav-btn type=button class="d-flex btn btn-sm logo animate-rotate svelte-1qdmkpb"><i class=material-icons-outlined>menu</i></button> <a class="my-auto ms-3 svelte-1qdmkpb"href=https://norm-dot-net.netlify.app/ >NORM.NET <span style="display: block;position: absolute;top: 27px;font-size: 9px;color: #b09350;">web under consturction</span></a><div class="vr text-white my-auto svelte-1qdmkpb"></div><a class="my-auto svelte-1qdmkpb"href=https://norm-dot-net.netlify.app/docs/1-introduction/ id=docs><i class="bi bi-file-text"></i> <span class=svelte-1qdmkpb>Docs</span></a> <a class="my-auto ms-3 svelte-1qdmkpb"href=https://norm-dot-net.netlify.app/blog/ id=blog><i class="bi bi-journal-text"></i> <span class=svelte-1qdmkpb>Blog</span></a></div><div class="d-flex right svelte-1qdmkpb"><a class="nav-link my-auto me-2 svelte-1qdmkpb"href=https://github.com/vb-consulting/Norm.net/ ><i class=bi-github></i></a> <a class="github-button svelte-1qdmkpb"href=https://github.com/vb-consulting/Norm.net data-color-scheme="no-preference: light_high_contrast; light: light_high_contrast; dark: light_high_contrast;"data-icon=octicon-star data-show-count=true aria-label="Star vb-consulting/Norm.net on GitHub"></a><div class="vr text-white my-auto svelte-1qdmkpb"></div><button id=theme-btn type=button aria-pressed=true aria-label=theme class=svelte-1qdmkpb><span class="check hidden svelte-1qdmkpb"><span class="icon svelte-1qdmkpb"><svg xmlns=http://www.w3.org/2000/svg width=32 height=32 viewBox="0 0 24 24"class=svelte-1qdmkpb><path fill=currentColor d="M12 21q-3.775 0-6.388-2.613T3 12q0-3.45 2.25-5.988T11 3.05q.625-.075.975.45t-.025 1.1q-.425.65-.638 1.375T11.1 7.5q0 2.25 1.575 3.825T16.5 12.9q.775 0 1.538-.225t1.362-.625q.525-.35 1.075-.037t.475.987q-.35 3.45-2.937 5.725T12 21Zm0-2q2.2 0 3.95-1.213t2.55-3.162q-.5.125-1 .2t-1 .075q-3.075 0-5.238-2.163T9.1 7.5q0-.5.075-1t.2-1q-1.95.8-3.163 2.55T5 12q0 2.9 2.05 4.95T12 19Zm-.25-6.75Z"></path></svg> <svg xmlns=http://www.w3.org/2000/svg width=32 height=32 viewBox="0 0 24 24"class=svelte-1qdmkpb><g fill=none stroke-linecap=round stroke-linejoin=round stroke-width=2><path d="M0 0h24v24H0z"></path><path fill=currentColor d="M12 19a1 1 0 0 1 .993.883L13 20v1a1 1 0 0 1-1.993.117L11 21v-1a1 1 0 0 1 1-1zm6.313-2.09l.094.083l.7.7a1 1 0 0 1-1.32 1.497l-.094-.083l-.7-.7a1 1 0 0 1 1.218-1.567l.102.07zm-11.306.083a1 1 0 0 1 .083 1.32l-.083.094l-.7.7a1 1 0 0 1-1.497-1.32l.083-.094l.7-.7a1 1 0 0 1 1.414 0zM4 11a1 1 0 0 1 .117 1.993L4 13H3a1 1 0 0 1-.117-1.993L3 11h1zm17 0a1 1 0 0 1 .117 1.993L21 13h-1a1 1 0 0 1-.117-1.993L20 11h1zM6.213 4.81l.094.083l.7.7a1 1 0 0 1-1.32 1.497l-.094-.083l-.7-.7A1 1 0 0 1 6.11 4.74l.102.07zm12.894.083a1 1 0 0 1 .083 1.32l-.083.094l-.7.7a1 1 0 0 1-1.497-1.32l.083-.094l.7-.7a1 1 0 0 1 1.414 0zM12 2a1 1 0 0 1 .993.883L13 3v1a1 1 0 0 1-1.993.117L11 4V3a1 1 0 0 1 1-1zm0 5a5 5 0 1 1-4.995 5.217L7 12l.005-.217A5 5 0 0 1 12 7z"></path></g></svg></span></span></button></div></div></nav></header><main class=svelte-1qdmkpb><div class="sidebar sidebar-hide svelte-1qdmkpb"><div class=svelte-1qdmkpb><button type=button class="btn btn-sm close-sidebar svelte-1qdmkpb"style="display: none;"><i class=material-icons-outlined>close</i></button><ul class="navbar-nav sidenav accordion svelte-1qdmkpb"><li class="nav-divider svelte-1qdmkpb"><hr class=svelte-1qdmkpb><li class="nav-item svelte-1qdmkpb"data-id=""title=changelog><a class="nav-link svelte-1qdmkpb lr-arrow text-uppercase"href=/changelog/ ><i class="bi bi-archive svelte-1qdmkpb"></i> changelog</a><li class="accordion-item svelte-1qdmkpb"title=docs><button class="accordion-header accordion-button collapsed svelte-1qdmkpb lr-arrow text-uppercase"type=button data-bs-toggle=collapse data-bs-target=#accordion-docs aria-expanded=false aria-controls=accordion-docs><i class="bi bi-file-earmark-text svelte-1qdmkpb"></i> docs</button><div id=accordion-docs class="accordion-collapse collapse svelte-1qdmkpb"><div class="accordion-body svelte-1qdmkpb"><ul class=navbar-nav><li class="nav-txt-divider text-muted svelte-1qdmkpb"><hr class=svelte-1qdmkpb><span class=svelte-1qdmkpb>getting started</span><hr class=svelte-1qdmkpb><li class="nav-item svelte-1qdmkpb"data-id=""title=Introduction><a class="nav-link svelte-1qdmkpb lr-arrow text-uppercase"href=/docs/getting-started/introduction/ ><i class="bi bi-file-text svelte-1qdmkpb"></i> Introduction</a><li class="nav-item svelte-1qdmkpb"data-id=""title=Installation><a class="nav-link svelte-1qdmkpb lr-arrow text-uppercase"href=/docs/getting-started/installation/ ><i class="bi bi-file-text svelte-1qdmkpb"></i> Installation</a><li class="nav-item svelte-1qdmkpb"data-id=""title="First Use"><a class="nav-link svelte-1qdmkpb lr-arrow text-uppercase"href=/docs/getting-started/first-use/ ><i class="bi bi-file-text svelte-1qdmkpb"></i> First Use</a><li class="nav-item svelte-1qdmkpb"data-id=""title="Basic Concepts"><a class="nav-link svelte-1qdmkpb lr-arrow text-uppercase"href=/docs/getting-started/basic-concepts/ ><i class="bi bi-file-text svelte-1qdmkpb"></i> Basic Concepts</a><li class="nav-txt-divider text-muted svelte-1qdmkpb"><hr class=svelte-1qdmkpb><span class=svelte-1qdmkpb>fundamentals</span><hr class=svelte-1qdmkpb><li class="nav-item svelte-1qdmkpb"data-id=""title="Read Method"><a class="nav-link svelte-1qdmkpb lr-arrow text-uppercase"href=/docs/fundamentals/read-method/ ><i class="bi bi-file-text svelte-1qdmkpb"></i> Read Method</a><li class="nav-item svelte-1qdmkpb"data-id=""title="Non-Generic Read"><a class="nav-link svelte-1qdmkpb lr-arrow text-uppercase"href=/docs/fundamentals/non-generic-read/ ><i class="bi bi-file-text svelte-1qdmkpb"></i> Non-Generic Read</a><li class="nav-item svelte-1qdmkpb"data-id=""title="Read Mappings"><a class="nav-link svelte-1qdmkpb lr-arrow text-uppercase"href=/docs/fundamentals/read-mappings/ ><i class="bi bi-file-text svelte-1qdmkpb"></i> Read Mappings</a><li class="nav-txt-divider text-muted svelte-1qdmkpb"><hr class=svelte-1qdmkpb><span class=svelte-1qdmkpb>reference</span><hr class=svelte-1qdmkpb><li class="nav-item svelte-1qdmkpb"data-id=""title="Extensions Methods"><a class="nav-link svelte-1qdmkpb lr-arrow text-uppercase"href=/docs/reference/extension-methods/ ><i class="bi bi-file-text svelte-1qdmkpb"></i> Extensions Methods</a><li class="nav-item svelte-1qdmkpb"data-id=""title=Options><a class="nav-link svelte-1qdmkpb lr-arrow text-uppercase"href=/docs/reference/options/ ><i class="bi bi-file-text svelte-1qdmkpb"></i> Options</a><li class="nav-item svelte-1qdmkpb"data-id=""title=Parameters><a class="nav-link svelte-1qdmkpb lr-arrow text-uppercase"href=/docs/reference/parameters/ ><i class="bi bi-file-text svelte-1qdmkpb"></i> Parameters</a></ul></div></div><li class="nav-divider svelte-1qdmkpb"><hr class=svelte-1qdmkpb><li class="nav-item svelte-1qdmkpb"data-id=""title=Blog><a class="nav-link svelte-1qdmkpb lr-arrow text-uppercase"href=/blog/ ><i class="bi bi-journal-text svelte-1qdmkpb"></i> Blog</a></ul></div></div><div class="content svelte-1qdmkpb"><div class="content container-xxl bd-gutter mx-auto main-content svelte-qb600q"><h1 class="text-center mb-3 svelte-qb600q">Norm.NET Micro ORM</h1><div class="container-sm text-muted mx-auto text-center lead mb-3 svelte-qb600q"><h2 class=fs-1_25rem>Norm.NET Micro ORM is a one-way lightweight object-relational mapping library. <i class="tbl-info bi-info-circle fs-1rem"data-bs-toggle=tooltip data-bs-title="Unlike full-blown ORM tools, micro-ORM libraries and tools implement only one-way object-relational mapping - from the database to your application. That means database queries are written manually by the developer as they should be."></i></h2><h3 class=fs-1rem>A set of DbConnection extensions that will map your query results into .NET/C# anything.</h3></div><div class="container-sm lead mb-4 mt-5 text-center fs-1rem svelte-qb600q"><div class="row row-cols-auto justify-content-center"><div class=col><a href=#installation class="rl-arrow bookmark-link text-uppercase"><span>Installation</span> <i class="bi bi-box-arrow-in-down"></i></a></div><div class=col><a href=#compatibility class="rl-arrow bookmark-link text-uppercase"><span>compatibility</span> <i class="bi bi-card-checklist"></i></a></div><div class=col><a href=#perfomances class="rl-arrow bookmark-link text-uppercase"><span>perfomances</span> <i class="bi bi-speedometer"></i></a></div></div></div><div class="container lead mb-4 text-center svelte-qb600q"><div class="row row-cols-auto justify-content-center"><div class=col><div class="main-list svelte-qb600q"><div class=svelte-qb600q><a href=#tuples class="rl-arrow bookmark-link text-uppercase"><span>name and value tuples</span> <i class="bi bi-hash"></i></a></div><div class=svelte-qb600q><a href=#instances class="rl-arrow bookmark-link text-uppercase"><span>classes and record instances</span> <i class="bi bi-hash"></i></a></div><div class=svelte-qb600q><a href=#values class="rl-arrow bookmark-link text-uppercase"><span>deconstructed tuple values</span> <i class="bi bi-hash"></i></a></div><div class=svelte-qb600q><a href=#named-tuples class="rl-arrow bookmark-link text-uppercase"><span>named tuples</span> <i class="bi bi-hash"></i></a></div><div class=svelte-qb600q><a href=#prototype-instances class="rl-arrow bookmark-link text-uppercase"><span>prototype instances</span> <i class="bi bi-hash"></i></a></div></div></div><div class=col><div class="main-list svelte-qb600q"><div class=svelte-qb600q><a href=#async-streaming class="rl-arrow bookmark-link text-uppercase"><span>Asynchronous streaming</span> <i class="bi bi-hash"></i></a></div><div class=svelte-qb600q><a href=#multiple class="rl-arrow bookmark-link text-uppercase"><span>multiple queries</span> <i class="bi bi-hash"></i></a></div><div class=svelte-qb600q><a href=#nested-mapping class="rl-arrow bookmark-link text-uppercase"><span>nested mapping</span> <i class="bi bi-hash"></i></a></div><div class=svelte-qb600q><a href=#nullable-instances class="rl-arrow bookmark-link text-uppercase"><span>Nullable instances</span> <i class="bi bi-hash"></i></a></div><div class=svelte-qb600q><a href=#enums-and-arrays class="rl-arrow bookmark-link text-uppercase"><span>Complex types</span> <i class="bi bi-hash"></i></a></div></div></div><div class=col><div class="main-list svelte-qb600q"><div class=svelte-qb600q><a href=#prepared class="rl-arrow bookmark-link text-uppercase"><span>prepared mode</span> <i class="bi bi-hash"></i></a></div><div class=svelte-qb600q><a href=#postgres-optimizations class="rl-arrow bookmark-link text-uppercase"><span>PostgreSQL optimizations</span> <i class="bi bi-hash"></i></a></div><div class=svelte-qb600q><a href=#reader-callback class="rl-arrow bookmark-link text-uppercase"><span>low-level data reader</span> <i class="bi bi-hash"></i></a></div><div class=svelte-qb600q><a href=#custom-mapping class="rl-arrow bookmark-link text-uppercase"><span>Custom mapping</span> <i class="bi bi-hash"></i></a></div><div class=svelte-qb600q><a href=#logging class="rl-arrow bookmark-link text-uppercase"><span>Logging and analytics</span> <i class="bi bi-hash"></i></a></div></div></div></div></div><div class="install container d-flex flex-column align-items-center mb-4 svelte-qb600q"id=installation><div class="lead text-center text-uppercase svelte-qb600q"><a href=#installation class="bookmark-target svelte-qb600q"><i class="bi bi-link-45deg"></i></a> Installation</div><ul class="nav nav-tabs justify-content-center border-bottom border-bottom mb-3"role=tablist><li class=nav-item role=presentation><button class="nav-link active"data-bs-toggle=tab data-bs-target=#netcli-tab-pane type=button role=tab aria-controls=netcli-tab-pane aria-selected=true>.NET CLI</button><li class=nav-item role=presentation><button class=nav-link data-bs-toggle=tab data-bs-target=#packagemanager-tab-pane type=button role=tab aria-controls=netcli-tab-pane aria-selected=true>Package Manager</button><li class=nav-item role=presentation><button class=nav-link data-bs-toggle=tab data-bs-target=#packagereference-tab-pane type=button role=tab aria-controls=netcli-tab-pane aria-selected=true>Package Reference</button><li class=nav-item role=presentation><button class=nav-link data-bs-toggle=tab data-bs-target=#scriptinteractive-tab-pane type=button role=tab aria-controls=netcli-tab-pane aria-selected=true>Script & Interactive</button></ul><div class=tab-content><div class="tab-pane fade show active"id=netcli-tab-pane role=tabpanel aria-labelledby=netcli-tab tabindex=0><div class=one-liner><div class="code bash mx-auto"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #E6E6E6">dotnet add package Norm.net --version 5.3.8</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #000000">dotnet add package Norm.net --version 5.3.8</span></span></code></pre></div></div></div><div class="tab-pane fade"id=packagemanager-tab-pane role=tabpanel aria-labelledby=netcli-tab tabindex=0><div class=one-liner><div class="code powershell mx-auto"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #DCDCAA">NuGet\Install-Package</span><span style="color: #E6E6E6"> Norm.net </span><span style="color: #D4D4D4">-</span><span style="color: #E6E6E6">Version </span><span style="color: #B5CEA8">5.3</span><span style="color: #E6E6E6">.</span><span style="color: #B5CEA8">8</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #795E26">NuGet\Install-Package</span><span style="color: #000000"> Norm.net -Version </span><span style="color: #098658">5.3</span><span style="color: #000000">.</span><span style="color: #098658">8</span></span></code></pre></div></div></div><div class="tab-pane fade"id=packagereference-tab-pane role=tabpanel aria-labelledby=netcli-tab tabindex=0><div class=one-liner><div class="code xml mx-auto"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #808080">&lt;</span><span style="color: #569CD6">PackageReference</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">Include</span><span style="color: #E6E6E6">=</span><span style="color: #CE9178">"Norm.net"</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">Version</span><span style="color: #E6E6E6">=</span><span style="color: #CE9178">"5.3.8"</span><span style="color: #E6E6E6"> </span><span style="color: #808080">/></span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #800000">&lt;PackageReference</span><span style="color: #000000"> </span><span style="color: #FF0000">Include</span><span style="color: #000000">=</span><span style="color: #0000FF">"Norm.net"</span><span style="color: #000000"> </span><span style="color: #FF0000">Version</span><span style="color: #000000">=</span><span style="color: #0000FF">"5.3.8"</span><span style="color: #000000"> </span><span style="color: #800000">/></span></span></code></pre></div></div></div><div class="tab-pane fade"id=scriptinteractive-tab-pane role=tabpanel aria-labelledby=netcli-tab tabindex=0><div class=one-liner><div class="code yaml mx-auto"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #6A9955">#r "nuget: Norm.net, 5.3.8"</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #008000">#r "nuget: Norm.net, 5.3.8"</span></span></code></pre></div></div></div></div></div><div class="compatibility container d-flex flex-column align-items-center mb-4 svelte-qb600q"id=compatibility><div class="lead text-center text-uppercase svelte-qb600q"><a href=#compatibility class="bookmark-target svelte-qb600q"><i class="bi bi-link-45deg"></i></a> Compatibility</div><ul class="nav nav-tabs justify-content-center border-bottom border-bottom mb-3"role=tablist><li class=nav-item role=presentation><button class="nav-link active"data-bs-toggle=tab data-bs-target=#netstandard-tab-pane type=button role=tab aria-controls=netcli-tab-pane aria-selected=true>.NET Standard</button><li class=nav-item role=presentation><button class=nav-link data-bs-toggle=tab data-bs-target=#net-tab-pane type=button role=tab aria-controls=netcli-tab-pane aria-selected=true>.NET</button><li class=nav-item role=presentation><button class=nav-link data-bs-toggle=tab data-bs-target=#netcore-tab-pane type=button role=tab aria-controls=netcli-tab-pane aria-selected=true>.NET Core</button><li class=nav-item role=presentation><button class=nav-link data-bs-toggle=tab data-bs-target=#mono-tab-pane type=button role=tab aria-controls=netcli-tab-pane aria-selected=true>Mono</button><li class=nav-item role=presentation><button class=nav-link data-bs-toggle=tab data-bs-target=#tizen-tab-pane type=button role=tab aria-controls=netcli-tab-pane aria-selected=true>Tizen</button><li class=nav-item role=presentation><button class=nav-link data-bs-toggle=tab data-bs-target=#xamarin-tab-pane type=button role=tab aria-controls=netcli-tab-pane aria-selected=true>Xamarin</button></ul><div class=tab-content><div class="tab-pane fade text-center show active"id=netstandard-tab-pane role=tabpanel aria-labelledby=netcli-tab tabindex=0><span class="pill fw-bolder svelte-qb600q">netstandard2.1</span></div><div class="tab-pane fade text-center"id=net-tab-pane role=tabpanel aria-labelledby=netcli-tab tabindex=0><span class="pill svelte-qb600q">net5.0</span> <span class="pill svelte-qb600q">net5.0-windows</span> <span class="pill svelte-qb600q">net6.0</span> <span class="pill svelte-qb600q">net6.0-android</span> <span class="pill svelte-qb600q">net6.0-ios</span> <span class="pill svelte-qb600q">net6.0-maccatalyst</span> <span class="pill svelte-qb600q">net6.0-macos</span> <span class="pill svelte-qb600q">net6.0-tvos</span> <span class="pill svelte-qb600q">net6.0-windows</span> <span class="pill svelte-qb600q">net7.0</span> <span class="pill svelte-qb600q">net7.0-android</span> <span class="pill svelte-qb600q">net7.0-ios</span> <span class="pill svelte-qb600q">net7.0-maccatalyst</span> <span class="pill svelte-qb600q">net7.0-macos</span> <span class="pill svelte-qb600q">net7.0-tvos</span> <span class="pill svelte-qb600q">net7.0-windows</span></div><div class="tab-pane fade text-center"id=netcore-tab-pane role=tabpanel aria-labelledby=netcli-tab tabindex=0><span class="pill svelte-qb600q">netcoreapp3.0</span> <span class="pill svelte-qb600q">netcoreapp3.1</span></div><div class="tab-pane fade text-center"id=mono-tab-pane role=tabpanel aria-labelledby=netcli-tab tabindex=0><span class="pill svelte-qb600q">monoandroid</span> <span class="pill svelte-qb600q">monomac</span> <span class="pill svelte-qb600q">monotouch</span></div><div class="tab-pane fade text-center"id=tizen-tab-pane role=tabpanel aria-labelledby=netcli-tab tabindex=0><span class="pill svelte-qb600q">tizen60</span></div><div class="tab-pane fade text-center"id=xamarin-tab-pane role=tabpanel aria-labelledby=netcli-tab tabindex=0><span class="pill svelte-qb600q">xamarinios</span> <span class="pill svelte-qb600q">xamarinmac</span> <span class="pill svelte-qb600q">xamarintvos</span> <span class="pill svelte-qb600q">xamarinwatchos</span></div></div></div><div class="perfs container d-flex flex-column align-items-center mb-4 svelte-qb600q"id=perfomances><div class="lead text-center text-uppercase svelte-qb600q"><a href=#perfomances class="bookmark-target svelte-qb600q"><i class="bi bi-link-45deg"></i></a> Perfomances</div><ul class="nav nav-tabs justify-content-center border-bottom border-bottom mb-3"role=tablist><li class=nav-item role=presentation><button class="nav-link active"data-bs-toggle=tab data-bs-target=#round1-tab-pane type=button role=tab aria-controls=netcli-tab-pane aria-selected=true>Round 1</button><li class=nav-item role=presentation><button class=nav-link data-bs-toggle=tab data-bs-target=#round2-tab-pane type=button role=tab aria-controls=netcli-tab-pane aria-selected=true>Round 2</button><li class=nav-item role=presentation><button class=nav-link data-bs-toggle=tab data-bs-target=#round3-tab-pane type=button role=tab aria-controls=netcli-tab-pane aria-selected=true>Round 3</button></ul><div class=tab-content><div class="tab-pane fade show active"id=round1-tab-pane role=tabpanel aria-labelledby=netcli-tab tabindex=0><ul class="nav nav-tabs justify-content-center border-bottom border-bottom mb-3"role=tablist><li class=nav-item role=presentation><button class=nav-link data-bs-toggle=tab data-bs-target=#round110records-tab-pane type=button role=tab aria-controls=netcli-tab-pane aria-selected=true>10 Records</button><li class=nav-item role=presentation><button class=nav-link data-bs-toggle=tab data-bs-target=#round11000records-tab-pane type=button role=tab aria-controls=netcli-tab-pane aria-selected=true>1000 Records</button><li class=nav-item role=presentation><button class=nav-link data-bs-toggle=tab data-bs-target=#round110000records-tab-pane type=button role=tab aria-controls=netcli-tab-pane aria-selected=true>10000 Records</button><li class=nav-item role=presentation><button class="nav-link active"data-bs-toggle=tab data-bs-target=#round1100000records-tab-pane type=button role=tab aria-controls=netcli-tab-pane aria-selected=true>100000 Records</button></ul><div class=tab-content><div class="tab-pane fade"id=round110records-tab-pane role=tabpanel aria-labelledby=netcli-tab tabindex=0><table class="table table-sm table-responsive table-hover"><thead><tr><th scope=col>Library (method)<th scope=col class=text-end>Mean μs<th scope=col class=text-end style="width: 70px;">Ratio<th scope=col class=text-end>Allocated KB<th scope=col class=text-end>Allocated Ratio<tbody class=table-group-divider><tr class=fw-bolder><th scope=row>Dapper (instances)<i class="tbl-info bi-info-circle"data-bs-toggle=tooltip data-bs-title="Dapper mapping is baseline for bechmarks"></i><td>641.0<td>1.00<td>6.16<td>1.00<tr><th scope=row>Norm (instances) <a href=#instances class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>577.0<td>0.91<td>10.54<td>1.71<tr><th scope=row>Norm (tuple values) <a href=#values class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>501.4<td>0.79<td>3.86<td>0.63<tr><th scope=row>Norm (named tuples) <a href=#tuples class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>544.3<td>0.85<td>10.97<td>1.78<tr><th scope=row>Norm (anonymous inst.) <a href=#prototype-instances class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>555.6<td>0.87<td>11.75<td>1.91<tr><th scope=row>Norm (tuple array) <a href=#tuples class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>529.9<td>0.83<td>9.25<td>1.50<tr><th scope=row>Command Reader<i class="tbl-info bi-info-circle"data-bs-toggle=tooltip data-bs-title="No ORM at all - Raw Command Reader "></i><td>476.2<td>0.75<td>4.85<td>0.79</table></div><div class="tab-pane fade"id=round11000records-tab-pane role=tabpanel aria-labelledby=netcli-tab tabindex=0><table class="table table-sm table-responsive table-hover"><thead><tr><th scope=col>Library (method)<th scope=col class=text-end>Mean μs<th scope=col class=text-end style="width: 70px;">Ratio<th scope=col class=text-end>Allocated KB<th scope=col class=text-end>Allocated Ratio<tbody class=table-group-divider><tr class=fw-bolder><th scope=row>Dapper (instances)<i class="tbl-info bi-info-circle"data-bs-toggle=tooltip data-bs-title="Dapper mapping is baseline for bechmarks"></i><td>9,481.1<td>1.00<td>429.59<td>1.00<tr><th scope=row>Norm (instances) <a href=#instances class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>10,015.8<td>1.06<td>596.12<td>1.39<tr><th scope=row>Norm (tuple values) <a href=#values class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>7,831.5<td>0.83<td>210.66<td>0.49<tr><th scope=row>Norm (named tuples) <a href=#tuples class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>9,729.5<td>1.03<td>851.85<td>1.98<tr><th scope=row>Norm (anonymous inst.) <a href=#prototype-instances class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>10,962.6<td>1.16<td>798.39<td>1.86<tr><th scope=row>Norm (tuple array) <a href=#tuples class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>9,238.0<td>0.98<td>687.38<td>1.60<tr><th scope=row>Command Reader<i class="tbl-info bi-info-circle"data-bs-toggle=tooltip data-bs-title="No ORM at all - Raw Command Reader "></i><td>7,073.2<td>0.75<td>297.17<td>0.69</table></div><div class="tab-pane fade"id=round110000records-tab-pane role=tabpanel aria-labelledby=netcli-tab tabindex=0><table class="table table-sm table-responsive table-hover"><thead><tr><th scope=col>Library (method)<th scope=col class=text-end>Mean μs<th scope=col class=text-end style="width: 70px;">Ratio<th scope=col class=text-end>Allocated KB<th scope=col class=text-end>Allocated Ratio<tbody class=table-group-divider><tr class=fw-bolder><th scope=row>Dapper (instances)<i class="tbl-info bi-info-circle"data-bs-toggle=tooltip data-bs-title="Dapper mapping is baseline for bechmarks"></i><td>98,556.0<td>1.00<td>4401.79<td>1.00<tr><th scope=row>Norm (instances) <a href=#instances class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>87,786.3<td>0.90<td>5947.24<td>1.35<tr><th scope=row>Norm (tuple values) <a href=#values class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>67,468.6<td>0.69<td>2112.82<td>0.48<tr><th scope=row>Norm (named tuples) <a href=#tuples class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>93,381.0<td>0.96<td>8529.79<td>1.94<tr><th scope=row>Norm (anonymous inst.) <a href=#prototype-instances class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>93,337.8<td>0.96<td>7975.97<td>1.81<tr><th scope=row>Norm (tuple array) <a href=#tuples class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>82,010.6<td>0.84<td>6875.08<td>1.56<tr><th scope=row>Command Reader<i class="tbl-info bi-info-circle"data-bs-toggle=tooltip data-bs-title="No ORM at all - Raw Command Reader "></i><td>59,882.2<td>0.61<td>2974.58<td>0.68</table></div><div class="tab-pane fade show active"id=round1100000records-tab-pane role=tabpanel aria-labelledby=netcli-tab tabindex=0><table class="table table-sm table-responsive table-hover"><thead><tr><th scope=col>Library (method)<th scope=col class=text-end>Mean μs<th scope=col class=text-end style="width: 70px;">Ratio<th scope=col class=text-end>Allocated KB<th scope=col class=text-end>Allocated Ratio<tbody class=table-group-divider><tr class=fw-bolder><th scope=row>Dapper (instances)<i class="tbl-info bi-info-circle"data-bs-toggle=tooltip data-bs-title="Dapper mapping is baseline for bechmarks"></i><td>856,169.1<td>1.00<td>44159.67<td>1.00<tr><th scope=row>Norm (instances) <a href=#instances class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>809,771.2<td>0.96<td>60081.74<td>1.36<tr><th scope=row>Norm (tuple values) <a href=#values class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>613,410.2<td>0.72<td>21804.02<td>0.49<tr><th scope=row>Norm (named tuples) <a href=#tuples class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>786,101.7<td>0.93<td>85860.40<td>1.94<tr><th scope=row>Norm (anonymous inst.) <a href=#prototype-instances class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>843,125.0<td>0.99<td>80392.98<td>1.82<tr><th scope=row>Norm (tuple array) <a href=#tuples class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>769,056.2<td>0.90<td>69573.90<td>1.58<tr><th scope=row>Command Reader<i class="tbl-info bi-info-circle"data-bs-toggle=tooltip data-bs-title="No ORM at all - Raw Command Reader "></i><td>549,415.1<td>0.65<td>30390.88<td>0.69</table></div></div><div class="text-center fs-smaller"><a href=https://github.com/vb-consulting/Norm.net/blob/master/performance-tests.md#round-1-2023-05-26-dapper--20123-norm-534 class=rl-arrow><i class=bi-github></i> Round 1 perfomance test details <i class="bi bi-arrow-right-circle"></i></a></div></div><div class="tab-pane fade"id=round2-tab-pane role=tabpanel aria-labelledby=netcli-tab tabindex=0><ul class="nav nav-tabs justify-content-center border-bottom border-bottom mb-3"role=tablist><li class=nav-item role=presentation><button class=nav-link data-bs-toggle=tab data-bs-target=#round210records-tab-pane type=button role=tab aria-controls=netcli-tab-pane aria-selected=true>10 Records</button><li class=nav-item role=presentation><button class=nav-link data-bs-toggle=tab data-bs-target=#round21000records-tab-pane type=button role=tab aria-controls=netcli-tab-pane aria-selected=true>1000 Records</button><li class=nav-item role=presentation><button class=nav-link data-bs-toggle=tab data-bs-target=#round210000records-tab-pane type=button role=tab aria-controls=netcli-tab-pane aria-selected=true>10000 Records</button><li class=nav-item role=presentation><button class="nav-link active"data-bs-toggle=tab data-bs-target=#round2100000records-tab-pane type=button role=tab aria-controls=netcli-tab-pane aria-selected=true>100000 Records</button></ul><div class=tab-content><div class="tab-pane fade"id=round210records-tab-pane role=tabpanel aria-labelledby=netcli-tab tabindex=0><table class="table table-sm table-responsive table-hover"><thead><tr><th scope=col>Library (method)<th scope=col class=text-end>Mean μs<th scope=col class=text-end style="width: 70px;">Ratio<th scope=col class=text-end>Allocated KB<th scope=col class=text-end>Allocated Ratio<tbody class=table-group-divider><tr class=fw-bolder><th scope=row>Dapper (instances)<i class="tbl-info bi-info-circle"data-bs-toggle=tooltip data-bs-title="Dapper mapping is baseline for bechmarks"></i><td>652.2<td>1.00<td>6.16<td>1.00<tr><th scope=row>Norm (instances) <a href=#instances class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>596.5<td>0.92<td>10.54<td>1.71<tr><th scope=row>Norm (tuple values) <a href=#values class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>509.1<td>0.79<td>3.86<td>0.63<tr><th scope=row>Norm (named tuples) <a href=#tuples class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>574.3<td>0.89<td>10.97<td>1.78<tr><th scope=row>Norm (anonymous inst.) <a href=#prototype-instances class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>578.6<td>0.89<td>11.75<td>1.91<tr><th scope=row>Norm (tuple array) <a href=#tuples class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>562.0<td>0.86<td>9.25<td>1.50<tr><th scope=row>Command Reader<i class="tbl-info bi-info-circle"data-bs-toggle=tooltip data-bs-title="No ORM at all - Raw Command Reader "></i><td>503.6<td>0.78<td>4.85<td>0.79</table></div><div class="tab-pane fade"id=round21000records-tab-pane role=tabpanel aria-labelledby=netcli-tab tabindex=0><table class="table table-sm table-responsive table-hover"><thead><tr><th scope=col>Library (method)<th scope=col class=text-end>Mean μs<th scope=col class=text-end style="width: 70px;">Ratio<th scope=col class=text-end>Allocated KB<th scope=col class=text-end>Allocated Ratio<tbody class=table-group-divider><tr class=fw-bolder><th scope=row>Dapper (instances)<i class="tbl-info bi-info-circle"data-bs-toggle=tooltip data-bs-title="Dapper mapping is baseline for bechmarks"></i><td>9,487.9<td>1.00<td>429.48<td>1.00<tr><th scope=row>Norm (instances) <a href=#instances class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>9,572.3<td>1.01<td>596.48<td>1.39<tr><th scope=row>Norm (tuple values) <a href=#values class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>7,694.4<td>0.82<td>210.91<td>0.49<tr><th scope=row>Norm (named tuples) <a href=#tuples class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>9,770.4<td>1.04<td>851.91<td>1.98<tr><th scope=row>Norm (anonymous inst.) <a href=#prototype-instances class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>10,322.4<td>1.09<td>798.45<td>1.86<tr><th scope=row>Norm (tuple array) <a href=#tuples class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>9,049.2<td>0.96<td>687.82<td>1.60<tr><th scope=row>Command Reader<i class="tbl-info bi-info-circle"data-bs-toggle=tooltip data-bs-title="No ORM at all - Raw Command Reader "></i><td>7,069.8<td>0.75<td>297.20<td>0.69</table></div><div class="tab-pane fade"id=round210000records-tab-pane role=tabpanel aria-labelledby=netcli-tab tabindex=0><table class="table table-sm table-responsive table-hover"><thead><tr><th scope=col>Library (method)<th scope=col class=text-end>Mean μs<th scope=col class=text-end style="width: 70px;">Ratio<th scope=col class=text-end>Allocated KB<th scope=col class=text-end>Allocated Ratio<tbody class=table-group-divider><tr class=fw-bolder><th scope=row>Dapper (instances)<i class="tbl-info bi-info-circle"data-bs-toggle=tooltip data-bs-title="Dapper mapping is baseline for bechmarks"></i><td>96,005.9<td>1.00<td>4396.14<td>1.00<tr><th scope=row>Norm (instances) <a href=#instances class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>90,050.4<td>0.95<td>5946.28<td>1.35<tr><th scope=row>Norm (tuple values) <a href=#values class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>66,944.3<td>0.70<td>2111.01<td>0.48<tr><th scope=row>Norm (named tuples) <a href=#tuples class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>90,411.7<td>0.95<td>8521.24<td>1.94<tr><th scope=row>Norm (anonymous inst.) <a href=#prototype-instances class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>93,663.2<td>0.98<td>7973.71<td>1.81<tr><th scope=row>Norm (tuple array) <a href=#tuples class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>82,703.0<td>0.87<td>6878.21<td>1.56<tr><th scope=row>Command Reader<i class="tbl-info bi-info-circle"data-bs-toggle=tooltip data-bs-title="No ORM at all - Raw Command Reader "></i><td>58,618.7<td>0.62<td>2978.54<td>0.68</table></div><div class="tab-pane fade show active"id=round2100000records-tab-pane role=tabpanel aria-labelledby=netcli-tab tabindex=0><table class="table table-sm table-responsive table-hover"><thead><tr><th scope=col>Library (method)<th scope=col class=text-end>Mean μs<th scope=col class=text-end style="width: 70px;">Ratio<th scope=col class=text-end>Allocated KB<th scope=col class=text-end>Allocated Ratio<tbody class=table-group-divider><tr class=fw-bolder><th scope=row>Dapper (instances)<i class="tbl-info bi-info-circle"data-bs-toggle=tooltip data-bs-title="Dapper mapping is baseline for bechmarks"></i><td>855,875.6<td>1.00<td>44161.48<td>1.00<tr><th scope=row>Norm (instances) <a href=#instances class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>849,417.4<td>1.00<td>60140.14<td>1.36<tr><th scope=row>Norm (tuple values) <a href=#values class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>671,862.2<td>0.79<td>21892.61<td>0.50<tr><th scope=row>Norm (named tuples) <a href=#tuples class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>839,390.2<td>0.99<td>85860.58<td>1.94<tr><th scope=row>Norm (anonymous inst.) <a href=#prototype-instances class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>890,519.7<td>1.05<td>80393.70<td>1.82<tr><th scope=row>Norm (tuple array) <a href=#tuples class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>772,461.5<td>0.91<td>69486.05<td>1.57<tr><th scope=row>Command Reader<i class="tbl-info bi-info-circle"data-bs-toggle=tooltip data-bs-title="No ORM at all - Raw Command Reader "></i><td>542,140.1<td>0.64<td>30450.87<td>0.69</table></div></div><div class="text-center fs-smaller"><a href=https://github.com/vb-consulting/Norm.net/blob/master/performance-tests.md#round-2-2023-05-26-dapper--20123-norm-534 class=rl-arrow><i class=bi-github></i> Round 2 perfomance test details <i class="bi bi-arrow-right-circle"></i></a></div></div><div class="tab-pane fade"id=round3-tab-pane role=tabpanel aria-labelledby=netcli-tab tabindex=0><ul class="nav nav-tabs justify-content-center border-bottom border-bottom mb-3"role=tablist><li class=nav-item role=presentation><button class=nav-link data-bs-toggle=tab data-bs-target=#round310records-tab-pane type=button role=tab aria-controls=netcli-tab-pane aria-selected=true>10 Records</button><li class=nav-item role=presentation><button class=nav-link data-bs-toggle=tab data-bs-target=#round31000records-tab-pane type=button role=tab aria-controls=netcli-tab-pane aria-selected=true>1000 Records</button><li class=nav-item role=presentation><button class=nav-link data-bs-toggle=tab data-bs-target=#round310000records-tab-pane type=button role=tab aria-controls=netcli-tab-pane aria-selected=true>10000 Records</button><li class=nav-item role=presentation><button class="nav-link active"data-bs-toggle=tab data-bs-target=#round3100000records-tab-pane type=button role=tab aria-controls=netcli-tab-pane aria-selected=true>100000 Records</button></ul><div class=tab-content><div class="tab-pane fade"id=round310records-tab-pane role=tabpanel aria-labelledby=netcli-tab tabindex=0><table class="table table-sm table-responsive table-hover"><thead><tr><th scope=col>Library (method)<th scope=col class=text-end>Mean μs<th scope=col class=text-end style="width: 70px;">Ratio<th scope=col class=text-end>Allocated KB<th scope=col class=text-end>Allocated Ratio<tbody class=table-group-divider><tr class=fw-bolder><th scope=row>Dapper (instances)<i class="tbl-info bi-info-circle"data-bs-toggle=tooltip data-bs-title="Dapper mapping is baseline for bechmarks"></i><td>657.6<td>1.00<td>6.16<td>1.00<tr><th scope=row>Norm (instances) <a href=#instances class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>592.9<td>0.91<td>10.54<td>1.71<tr><th scope=row>Norm (tuple values) <a href=#values class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>534.1<td>0.82<td>3.86<td>0.63<tr><th scope=row>Norm (named tuples) <a href=#tuples class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>557.8<td>0.85<td>10.97<td>1.78<tr><th scope=row>Norm (anonymous inst.) <a href=#prototype-instances class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>567.5<td>0.87<td>11.75<td>1.91<tr><th scope=row>Norm (tuple array) <a href=#tuples class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>532.6<td>0.81<td>9.25<td>1.50<tr><th scope=row>Command Reader<i class="tbl-info bi-info-circle"data-bs-toggle=tooltip data-bs-title="No ORM at all - Raw Command Reader "></i><td>487.4<td>0.74<td>4.85<td>0.79</table></div><div class="tab-pane fade"id=round31000records-tab-pane role=tabpanel aria-labelledby=netcli-tab tabindex=0><table class="table table-sm table-responsive table-hover"><thead><tr><th scope=col>Library (method)<th scope=col class=text-end>Mean μs<th scope=col class=text-end style="width: 70px;">Ratio<th scope=col class=text-end>Allocated KB<th scope=col class=text-end>Allocated Ratio<tbody class=table-group-divider><tr class=fw-bolder><th scope=row>Dapper (instances)<i class="tbl-info bi-info-circle"data-bs-toggle=tooltip data-bs-title="Dapper mapping is baseline for bechmarks"></i><td>9,182.0<td>1.00<td>429.93<td>1.00<tr><th scope=row>Norm (instances) <a href=#instances class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>10,281.4<td>1.12<td>596.13<td>1.39<tr><th scope=row>Norm (tuple values) <a href=#values class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>7,949.1<td>0.87<td>210.62<td>0.49<tr><th scope=row>Norm (named tuples) <a href=#tuples class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>10,065.2<td>1.10<td>851.78<td>1.98<tr><th scope=row>Norm (anonymous inst.) <a href=#prototype-instances class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>10,835.0<td>1.18<td>798.45<td>1.86<tr><th scope=row>Norm (tuple array) <a href=#tuples class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>9,075.5<td>0.99<td>687.77<td>1.60<tr><th scope=row>Command Reader<i class="tbl-info bi-info-circle"data-bs-toggle=tooltip data-bs-title="No ORM at all - Raw Command Reader "></i><td>7,160.0<td>0.78<td>296.91<td>0.69</table></div><div class="tab-pane fade"id=round310000records-tab-pane role=tabpanel aria-labelledby=netcli-tab tabindex=0><table class="table table-sm table-responsive table-hover"><thead><tr><th scope=col>Library (method)<th scope=col class=text-end>Mean μs<th scope=col class=text-end style="width: 70px;">Ratio<th scope=col class=text-end>Allocated KB<th scope=col class=text-end>Allocated Ratio<tbody class=table-group-divider><tr class=fw-bolder><th scope=row>Dapper (instances)<i class="tbl-info bi-info-circle"data-bs-toggle=tooltip data-bs-title="Dapper mapping is baseline for bechmarks"></i><td>100,807.0<td>1.00<td>4409.99<td>1.00<tr><th scope=row>Norm (instances) <a href=#instances class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>89,898.2<td>0.90<td>5940.22<td>1.35<tr><th scope=row>Norm (tuple values) <a href=#values class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>67,782.6<td>0.67<td>2110.33<td>0.48<tr><th scope=row>Norm (named tuples) <a href=#tuples class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>90,459.5<td>0.90<td>8525.76<td>1.93<tr><th scope=row>Norm (anonymous inst.) <a href=#prototype-instances class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>94,617.6<td>0.94<td>7978.30<td>1.81<tr><th scope=row>Norm (tuple array) <a href=#tuples class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>81,967.2<td>0.82<td>6889.58<td>1.56<tr><th scope=row>Command Reader<i class="tbl-info bi-info-circle"data-bs-toggle=tooltip data-bs-title="No ORM at all - Raw Command Reader "></i><td>59,975.5<td>0.60<td>2974.03<td>0.67</table></div><div class="tab-pane fade show active"id=round3100000records-tab-pane role=tabpanel aria-labelledby=netcli-tab tabindex=0><table class="table table-sm table-responsive table-hover"><thead><tr><th scope=col>Library (method)<th scope=col class=text-end>Mean μs<th scope=col class=text-end style="width: 70px;">Ratio<th scope=col class=text-end>Allocated KB<th scope=col class=text-end>Allocated Ratio<tbody class=table-group-divider><tr class=fw-bolder><th scope=row>Dapper (instances)<i class="tbl-info bi-info-circle"data-bs-toggle=tooltip data-bs-title="Dapper mapping is baseline for bechmarks"></i><td>888,816.8<td>1.00<td>44228.84<td>1.00<tr><th scope=row>Norm (instances) <a href=#instances class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>846,063.6<td>0.96<td>60114.80<td>1.36<tr><th scope=row>Norm (tuple values) <a href=#values class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>640,229.8<td>0.73<td>21797.20<td>0.49<tr><th scope=row>Norm (named tuples) <a href=#tuples class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>837,526.2<td>0.95<td>85914.66<td>1.94<tr><th scope=row>Norm (anonymous inst.) <a href=#prototype-instances class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>904,078.1<td>1.02<td>80470.78<td>1.82<tr><th scope=row>Norm (tuple array) <a href=#tuples class=rl-arrow data-bs-toggle=tooltip data-bs-title="See examples"><i class="bi bi-hash"></i></a><td>784,239.5<td>0.89<td>69458.74<td>1.57<tr><th scope=row>Command Reader<i class="tbl-info bi-info-circle"data-bs-toggle=tooltip data-bs-title="No ORM at all - Raw Command Reader "></i><td>612,265.7<td>0.68<td>30473.35<td>0.69</table></div></div><div class="text-center fs-smaller"><a href=https://github.com/vb-consulting/Norm.net/blob/master/performance-tests.md#round-3-2023-06-22-dapper--20123-norm-534 class=rl-arrow><i class=bi-github></i> Round 3 perfomance test details <i class="bi bi-arrow-right-circle"></i></a></div></div></div></div><div class="tuples mb-4 container d-flex flex-column align-items-center svelte-ryutlp"id=tuples><div class="lead text-center svelte-ryutlp"><a href=#tuples class="bookmark-target svelte-ryutlp"><i class="bi bi-link-45deg"></i></a> Build database tuples iterator</div><div class="subtitle mb-3 mt-1 mx-auto"style="max-width: 552px;">You can read an array of name and value tuples <code>(string name, value object)</code> - for each record, where the <u>name is the field name</u>, and the <u>value is, well, the value</u> of that record.<br><br>Use LINQ expressions to build appropriate data structures such as dictionaries directly from your database and with minimum iterations.</div><div class="code csharp mx-auto"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">System</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">Linq</span><span style="color: #E6E6E6">;</span></span>
<span class=line><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6">;</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Creates enumerable of name and value tuples array.</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Database is NOT read until resulting enumeration is iterated.</span></span>
<span class=line><span style="color: #6A9955">// name is the column name, and value is the column value.</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #4EC9B0">IEnumerable</span><span style="color: #E6E6E6">&lt;(</span><span style="color: #569CD6">string</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">name</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">value</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">object</span><span style="color: #E6E6E6">)[]> </span><span style="color: #9CDCFE">enumeration</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"select id, name from table"</span><span style="color: #E6E6E6">);</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Creates list of name and value tuples array.</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Database is read on `ToList` iteration.</span></span>
<span class=line><span style="color: #6A9955">// name is the column name, and value is the column value.</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #4EC9B0">List</span><span style="color: #E6E6E6">&lt;(</span><span style="color: #569CD6">string</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">name</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">object</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">value</span><span style="color: #E6E6E6">)[]> </span><span style="color: #9CDCFE">tuples</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"select id, name from table"</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">ToList</span><span style="color: #E6E6E6">();</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Creates list of name and value dictionaries.</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Database is read on `ToList` iteration.</span></span>
<span class=line><span style="color: #6A9955">// Dictionary keys are column names, values are column values.</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #4EC9B0">List</span><span style="color: #E6E6E6">&lt;</span><span style="color: #4EC9B0">Dictionary</span><span style="color: #E6E6E6">&lt;</span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">object</span><span style="color: #E6E6E6">>> </span><span style="color: #9CDCFE">list1</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"select id, name from table"</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Select</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">tuples</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #9CDCFE">tuples</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">ToDictionary</span><span style="color: #E6E6E6">(</span></span>
<span class=line><span style="color: #E6E6E6">                </span><span style="color: #9CDCFE">tuple</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">tuple</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">name</span><span style="color: #E6E6E6">, </span></span>
<span class=line><span style="color: #E6E6E6">                </span><span style="color: #9CDCFE">tuple</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">tuple</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">value</span><span style="color: #E6E6E6">))</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">ToList</span><span style="color: #E6E6E6">();</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Creates dictionary where: </span></span>
<span class=line><span style="color: #6A9955">// - The key is the first column value.</span></span>
<span class=line><span style="color: #6A9955">// - The value is the last column value.</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Database is read on `ToDictionary` iteration.</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #4EC9B0">Dictionary</span><span style="color: #E6E6E6">&lt;</span><span style="color: #569CD6">int</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">> </span><span style="color: #9CDCFE">dict1</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"select id, name from table"</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">ToDictionary</span><span style="color: #E6E6E6">(</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #9CDCFE">tuples</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> (</span><span style="color: #569CD6">int</span><span style="color: #E6E6E6">)</span><span style="color: #9CDCFE">tuples</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">First</span><span style="color: #E6E6E6">().</span><span style="color: #9CDCFE">value</span><span style="color: #E6E6E6">, </span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #9CDCFE">tuples</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">tuples</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Last</span><span style="color: #E6E6E6">().</span><span style="color: #9CDCFE">value</span><span style="color: #D4D4D4">?</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">ToString</span><span style="color: #E6E6E6">());</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">System</span><span style="color: #000000">.</span><span style="color: #267F99">Linq</span><span style="color: #000000">;</span></span>
<span class=line><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000">;</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Creates enumerable of name and value tuples array.</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Database is NOT read until resulting enumeration is iterated.</span></span>
<span class=line><span style="color: #008000">// name is the column name, and value is the column value.</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #267F99">IEnumerable</span><span style="color: #000000">&lt;(</span><span style="color: #0000FF">string</span><span style="color: #000000"> </span><span style="color: #001080">name</span><span style="color: #000000">, </span><span style="color: #267F99">value</span><span style="color: #000000"> </span><span style="color: #001080">object</span><span style="color: #000000">)[]> </span><span style="color: #001080">enumeration</span><span style="color: #000000"> = </span><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Read</span><span style="color: #000000">(</span><span style="color: #A31515">"select id, name from table"</span><span style="color: #000000">);</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Creates list of name and value tuples array.</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Database is read on `ToList` iteration.</span></span>
<span class=line><span style="color: #008000">// name is the column name, and value is the column value.</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #267F99">List</span><span style="color: #000000">&lt;(</span><span style="color: #0000FF">string</span><span style="color: #000000"> </span><span style="color: #001080">name</span><span style="color: #000000">, </span><span style="color: #0000FF">object</span><span style="color: #000000"> </span><span style="color: #001080">value</span><span style="color: #000000">)[]> </span><span style="color: #001080">tuples</span><span style="color: #000000"> = </span><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Read</span><span style="color: #000000">(</span><span style="color: #A31515">"select id, name from table"</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">ToList</span><span style="color: #000000">();</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Creates list of name and value dictionaries.</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Database is read on `ToList` iteration.</span></span>
<span class=line><span style="color: #008000">// Dictionary keys are column names, values are column values.</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #267F99">List</span><span style="color: #000000">&lt;</span><span style="color: #267F99">Dictionary</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">string</span><span style="color: #000000">, </span><span style="color: #0000FF">object</span><span style="color: #000000">>> </span><span style="color: #001080">list1</span><span style="color: #000000"> = </span><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Read</span><span style="color: #000000">(</span><span style="color: #A31515">"select id, name from table"</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Select</span><span style="color: #000000">(</span><span style="color: #001080">tuples</span><span style="color: #000000"> => </span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #001080">tuples</span><span style="color: #000000">.</span><span style="color: #795E26">ToDictionary</span><span style="color: #000000">(</span></span>
<span class=line><span style="color: #000000">                </span><span style="color: #001080">tuple</span><span style="color: #000000"> => </span><span style="color: #001080">tuple</span><span style="color: #000000">.</span><span style="color: #001080">name</span><span style="color: #000000">, </span></span>
<span class=line><span style="color: #000000">                </span><span style="color: #001080">tuple</span><span style="color: #000000"> => </span><span style="color: #001080">tuple</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000">))</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">ToList</span><span style="color: #000000">();</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Creates dictionary where: </span></span>
<span class=line><span style="color: #008000">// - The key is the first column value.</span></span>
<span class=line><span style="color: #008000">// - The value is the last column value.</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Database is read on `ToDictionary` iteration.</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #267F99">Dictionary</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">int</span><span style="color: #000000">, </span><span style="color: #0000FF">string</span><span style="color: #000000">> </span><span style="color: #001080">dict1</span><span style="color: #000000"> = </span><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Read</span><span style="color: #000000">(</span><span style="color: #A31515">"select id, name from table"</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">ToDictionary</span><span style="color: #000000">(</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #001080">tuples</span><span style="color: #000000"> => (</span><span style="color: #0000FF">int</span><span style="color: #000000">)</span><span style="color: #001080">tuples</span><span style="color: #000000">.</span><span style="color: #795E26">First</span><span style="color: #000000">().</span><span style="color: #001080">value</span><span style="color: #000000">, </span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #001080">tuples</span><span style="color: #000000"> => </span><span style="color: #001080">tuples</span><span style="color: #000000">.</span><span style="color: #795E26">Last</span><span style="color: #000000">().</span><span style="color: #001080">value</span><span style="color: #000000">?.</span><span style="color: #795E26">ToString</span><span style="color: #000000">());</span></span></code></pre></div></div><div class="instances mb-4 container d-flex flex-column align-items-center svelte-ryutlp"id=instances><div class="lead text-center svelte-ryutlp"><a href=#instances class="bookmark-target svelte-ryutlp"><i class="bi bi-link-45deg"></i></a> Up to 12 class/record instances from the same command</div><div class="subtitle mb-3 mt-1 mx-auto"style="max-width: 592px;">You can map a maximum of 12 <u>classes, records, or dynamic instances</u> from the same query result.<br><br>Mapping is done <u>by the field name</u> (<u>snake case</u> is the default name mapping method) - and from left to right for multiple instance mappings.</div><div class="code csharp mx-auto"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">System</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">Linq</span><span style="color: #E6E6E6">;</span></span>
<span class=line><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6">;</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Single instance mapping by name.</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">result1</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;</span><span style="color: #4EC9B0">Class1</span><span style="color: #E6E6E6">>(</span><span style="color: #9CDCFE">query</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Single</span><span style="color: #E6E6E6">();</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Two instances mapping by name.</span></span>
<span class=line><span style="color: #6A9955">// Read method yields a tuple that can be deconstructed.</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> (</span><span style="color: #9CDCFE">result1</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">result2</span><span style="color: #E6E6E6">) </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;</span><span style="color: #4EC9B0">Class1</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">Class2</span><span style="color: #E6E6E6">>(</span><span style="color: #9CDCFE">query</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Single</span><span style="color: #E6E6E6">();</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Two class instances and one dynamic instance mapping by name.</span></span>
<span class=line><span style="color: #6A9955">// Read method yields a tuple that can be deconstructed.</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> (</span><span style="color: #9CDCFE">result1</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">result2</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">result3</span><span style="color: #E6E6E6">) </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;</span><span style="color: #4EC9B0">Class1</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">Class2</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">dynamic</span><span style="color: #E6E6E6">>(</span><span style="color: #9CDCFE">query</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Single</span><span style="color: #E6E6E6">();</span></span>
<span class=line></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Six instances mapping by name.</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> (</span><span style="color: #9CDCFE">result1</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">result2</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">result3</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">result4</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">result5</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">result6</span><span style="color: #E6E6E6">) </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;</span><span style="color: #4EC9B0">Class1</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">Class2</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">Class3</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">Class4</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">Class5</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">Class6</span><span style="color: #E6E6E6">>(</span><span style="color: #9CDCFE">query</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Single</span><span style="color: #E6E6E6">();</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// ... up to twelve (12) instances max.</span></span>
<span class=line><span style="color: #6A9955">//</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">System</span><span style="color: #000000">.</span><span style="color: #267F99">Linq</span><span style="color: #000000">;</span></span>
<span class=line><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000">;</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Single instance mapping by name.</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">result1</span><span style="color: #000000"> = </span><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;</span><span style="color: #267F99">Class1</span><span style="color: #000000">>(</span><span style="color: #001080">query</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Single</span><span style="color: #000000">();</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Two instances mapping by name.</span></span>
<span class=line><span style="color: #008000">// Read method yields a tuple that can be deconstructed.</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> (</span><span style="color: #001080">result1</span><span style="color: #000000">, </span><span style="color: #001080">result2</span><span style="color: #000000">) = </span><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;</span><span style="color: #267F99">Class1</span><span style="color: #000000">, </span><span style="color: #267F99">Class2</span><span style="color: #000000">>(</span><span style="color: #001080">query</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Single</span><span style="color: #000000">();</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Two class instances and one dynamic instance mapping by name.</span></span>
<span class=line><span style="color: #008000">// Read method yields a tuple that can be deconstructed.</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> (</span><span style="color: #001080">result1</span><span style="color: #000000">, </span><span style="color: #001080">result2</span><span style="color: #000000">, </span><span style="color: #001080">result3</span><span style="color: #000000">) = </span><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;</span><span style="color: #267F99">Class1</span><span style="color: #000000">, </span><span style="color: #267F99">Class2</span><span style="color: #000000">, </span><span style="color: #0000FF">dynamic</span><span style="color: #000000">>(</span><span style="color: #001080">query</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Single</span><span style="color: #000000">();</span></span>
<span class=line></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Six instances mapping by name.</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> (</span><span style="color: #001080">result1</span><span style="color: #000000">, </span><span style="color: #001080">result2</span><span style="color: #000000">, </span><span style="color: #001080">result3</span><span style="color: #000000">, </span><span style="color: #001080">result4</span><span style="color: #000000">, </span><span style="color: #001080">result5</span><span style="color: #000000">, </span><span style="color: #001080">result6</span><span style="color: #000000">) = </span><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;</span><span style="color: #267F99">Class1</span><span style="color: #000000">, </span><span style="color: #267F99">Class2</span><span style="color: #000000">, </span><span style="color: #267F99">Class3</span><span style="color: #000000">, </span><span style="color: #267F99">Class4</span><span style="color: #000000">, </span><span style="color: #267F99">Class5</span><span style="color: #000000">, </span><span style="color: #267F99">Class6</span><span style="color: #000000">>(</span><span style="color: #001080">query</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Single</span><span style="color: #000000">();</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// ... up to twelve (12) instances max.</span></span>
<span class=line><span style="color: #008000">//</span></span></code></pre></div></div><div class="values mb-4 container d-flex flex-column align-items-center svelte-ryutlp"id=values><div class="lead text-center svelte-ryutlp"><a href=#values class="bookmark-target svelte-ryutlp"><i class="bi bi-link-45deg"></i></a> Map to deconstructed tuple values</div><div class="subtitle mb-3 mt-1 mx-auto"style="max-width: 574px;">Instead of classes or records, you can map to multiple, simple single-value value types (such as <u>integers, strings, dates, GUIDs, booleans, etc</u>). In this case, mapping is done by position.<br><br>The resulting structure will be an unnamed tuple that can be deconstructed to the same simple value variable values. See examples bellow:</div><div class="code csharp mx-auto"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">System</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">Linq</span><span style="color: #E6E6E6">;</span></span>
<span class=line><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6">;</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Single value.</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">id</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;</span><span style="color: #569CD6">int</span><span style="color: #E6E6E6">>(</span><span style="color: #CE9178">"select id from table"</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Single</span><span style="color: #E6E6E6">();</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Two values mapping by position.</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> (</span><span style="color: #9CDCFE">id</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">value</span><span style="color: #E6E6E6">) </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;</span><span style="color: #569CD6">int</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">>(</span><span style="color: #CE9178">"select id, value from table"</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Single</span><span style="color: #E6E6E6">();</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Iterating over three values mapped by position.</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #C586C0">foreach</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> (</span><span style="color: #9CDCFE">id</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">foo</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">bar</span><span style="color: #E6E6E6">) </span><span style="color: #C586C0">in</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;</span><span style="color: #569CD6">int</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">>(</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #CE9178">"select id, foo, bar from table"</span><span style="color: #E6E6E6">))</span></span>
<span class=line><span style="color: #E6E6E6">{</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #6A9955">//...</span></span>
<span class=line><span style="color: #E6E6E6">}</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Six value mapping by position.</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> (</span><span style="color: #9CDCFE">value1</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">value2</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">value3</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">value4</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">value5</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">value6</span><span style="color: #E6E6E6">) </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;</span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">>(</span><span style="color: #CE9178">@"</span></span>
<span class=line><span style="color: #CE9178">        select value1, value2, value3, value4, value5, value6</span></span>
<span class=line><span style="color: #CE9178">        from table</span></span>
<span class=line><span style="color: #CE9178">    "</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Single</span><span style="color: #E6E6E6">();</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// ... up to twelve (12) values max.</span></span>
<span class=line><span style="color: #6A9955">//</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">System</span><span style="color: #000000">.</span><span style="color: #267F99">Linq</span><span style="color: #000000">;</span></span>
<span class=line><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000">;</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Single value.</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">id</span><span style="color: #000000"> = </span><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">int</span><span style="color: #000000">>(</span><span style="color: #A31515">"select id from table"</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Single</span><span style="color: #000000">();</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Two values mapping by position.</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> (</span><span style="color: #001080">id</span><span style="color: #000000">, </span><span style="color: #001080">value</span><span style="color: #000000">) = </span><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">int</span><span style="color: #000000">, </span><span style="color: #0000FF">string</span><span style="color: #000000">>(</span><span style="color: #A31515">"select id, value from table"</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Single</span><span style="color: #000000">();</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Iterating over three values mapped by position.</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #AF00DB">foreach</span><span style="color: #000000">(</span><span style="color: #0000FF">var</span><span style="color: #000000"> (</span><span style="color: #001080">id</span><span style="color: #000000">, </span><span style="color: #001080">foo</span><span style="color: #000000">, </span><span style="color: #001080">bar</span><span style="color: #000000">) </span><span style="color: #AF00DB">in</span><span style="color: #000000"> </span><span style="color: #001080">connection</span><span style="color: #000000">.</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">int</span><span style="color: #000000">, </span><span style="color: #0000FF">string</span><span style="color: #000000">, </span><span style="color: #0000FF">string</span><span style="color: #000000">>(</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #A31515">"select id, foo, bar from table"</span><span style="color: #000000">))</span></span>
<span class=line><span style="color: #000000">{</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #008000">//...</span></span>
<span class=line><span style="color: #000000">}</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Six value mapping by position.</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> (</span><span style="color: #001080">value1</span><span style="color: #000000">, </span><span style="color: #001080">value2</span><span style="color: #000000">, </span><span style="color: #001080">value3</span><span style="color: #000000">, </span><span style="color: #001080">value4</span><span style="color: #000000">, </span><span style="color: #001080">value5</span><span style="color: #000000">, </span><span style="color: #001080">value6</span><span style="color: #000000">) = </span><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">string</span><span style="color: #000000">, </span><span style="color: #0000FF">string</span><span style="color: #000000">, </span><span style="color: #0000FF">string</span><span style="color: #000000">, </span><span style="color: #0000FF">string</span><span style="color: #000000">, </span><span style="color: #0000FF">string</span><span style="color: #000000">, </span><span style="color: #0000FF">string</span><span style="color: #000000">>(</span><span style="color: #A31515">@"</span></span>
<span class=line><span style="color: #A31515">        select value1, value2, value3, value4, value5, value6</span></span>
<span class=line><span style="color: #A31515">        from table</span></span>
<span class=line><span style="color: #A31515">    "</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Single</span><span style="color: #000000">();</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// ... up to twelve (12) values max.</span></span>
<span class=line><span style="color: #008000">//</span></span></code></pre></div></div><div class="named-tuples mb-4 container d-flex flex-column align-items-center svelte-ryutlp"id=named-tuples><div class="lead text-center svelte-ryutlp"><a href=#named-tuples class="bookmark-target svelte-ryutlp"><i class="bi bi-link-45deg"></i></a> Map to named tuples or multiple named tuples</div><div class="subtitle mb-3 mt-1 mx-auto"style="max-width: 570px;">You can also give meaningful names to your unnamed tuples by using <u>named tuples</u>. Just provide a <u>named tuple type</u> as a generic parameter and map your database values by position.<br><br>You can also map to multiple named tuple types in a single command, up to 12 named tuples maximum.</div><div class="code csharp mx-auto"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">System</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">Linq</span><span style="color: #E6E6E6">;</span></span>
<span class=line><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6">;</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// You can also map to named tuples and give names to the columns.</span></span>
<span class=line><span style="color: #6A9955">// Two value mapping by position.</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">result</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;(</span><span style="color: #569CD6">int</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">id</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">name</span><span style="color: #E6E6E6">)>(</span><span style="color: #CE9178">"select id, value from table"</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Single</span><span style="color: #E6E6E6">();</span></span>
<span class=line></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">id</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">result</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">id</span><span style="color: #E6E6E6">;</span></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">name</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">result</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">name</span><span style="color: #E6E6E6">;</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Iterating over named tuples mapped by position.</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">query</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">"select id, foo, bar from table"</span><span style="color: #E6E6E6">;</span></span>
<span class=line><span style="color: #C586C0">foreach</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">item</span><span style="color: #E6E6E6"> </span><span style="color: #C586C0">in</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;(</span><span style="color: #569CD6">int</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">id</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">foo</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">bar</span><span style="color: #E6E6E6">)>(</span><span style="color: #9CDCFE">query</span><span style="color: #E6E6E6">))</span></span>
<span class=line><span style="color: #E6E6E6">{</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #DCDCAA">WriteLine</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">$"id: {</span><span style="color: #9CDCFE">item</span><span style="color: #CE9178">.</span><span style="color: #9CDCFE">id</span><span style="color: #CE9178">}, foo: {</span><span style="color: #9CDCFE">item</span><span style="color: #CE9178">.</span><span style="color: #9CDCFE">foo</span><span style="color: #CE9178">}, bar: {</span><span style="color: #9CDCFE">item</span><span style="color: #CE9178">.</span><span style="color: #9CDCFE">bar</span><span style="color: #CE9178">}"</span><span style="color: #E6E6E6">);</span></span>
<span class=line><span style="color: #E6E6E6">}</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Declaring tuple alias type (C# 12 or higher only). </span></span>
<span class=line><span style="color: #6A9955">// Mapping by position.</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">TableTuple</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> (</span><span style="color: #569CD6">int</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">id</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">name</span><span style="color: #E6E6E6">);</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//...</span></span>
<span class=line></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">query</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">"select id, foo, bar from table"</span><span style="color: #E6E6E6">;</span></span>
<span class=line><span style="color: #C586C0">foreach</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">item</span><span style="color: #E6E6E6"> </span><span style="color: #C586C0">in</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;</span><span style="color: #4EC9B0">TableTuple</span><span style="color: #E6E6E6">>(</span><span style="color: #9CDCFE">query</span><span style="color: #E6E6E6">))</span></span>
<span class=line><span style="color: #E6E6E6">{</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #DCDCAA">WriteLine</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">$"id: {</span><span style="color: #9CDCFE">item</span><span style="color: #CE9178">.</span><span style="color: #9CDCFE">id</span><span style="color: #CE9178">}, foo: {</span><span style="color: #9CDCFE">item</span><span style="color: #CE9178">.</span><span style="color: #9CDCFE">foo</span><span style="color: #CE9178">}, bar: {</span><span style="color: #9CDCFE">item</span><span style="color: #CE9178">.</span><span style="color: #9CDCFE">bar</span><span style="color: #CE9178">}"</span><span style="color: #E6E6E6">);</span></span>
<span class=line><span style="color: #E6E6E6">}</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Mapping two named tuples by position.</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">query</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">"select t1.*, t2.* from t1 join t2 using (id)"</span><span style="color: #E6E6E6">;</span></span>
<span class=line><span style="color: #C586C0">foreach</span><span style="color: #E6E6E6"> (</span><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> (</span><span style="color: #9CDCFE">t1</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">t2</span><span style="color: #E6E6E6">) </span><span style="color: #C586C0">in</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Read</span><span style="color: #D4D4D4">&lt;</span></span>
<span class=line><span style="color: #E6E6E6">    (</span><span style="color: #9CDCFE">int</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">id</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">string</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">name</span><span style="color: #E6E6E6">), </span></span>
<span class=line><span style="color: #E6E6E6">    (</span><span style="color: #9CDCFE">int</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">id</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">string</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">name</span><span style="color: #E6E6E6">)</span><span style="color: #D4D4D4">></span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">query</span><span style="color: #E6E6E6">))</span></span>
<span class=line><span style="color: #E6E6E6">{</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #DCDCAA">WriteLine</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">$"t1 - id: {</span><span style="color: #9CDCFE">t1</span><span style="color: #CE9178">.</span><span style="color: #9CDCFE">id</span><span style="color: #CE9178">}, name: {</span><span style="color: #9CDCFE">t1</span><span style="color: #CE9178">.</span><span style="color: #9CDCFE">name</span><span style="color: #CE9178">})</span><span style="color: #F44747">;</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #DCDCAA">WriteLine</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">$"t2 - id: {</span><span style="color: #9CDCFE">t1</span><span style="color: #CE9178">.</span><span style="color: #9CDCFE">id</span><span style="color: #CE9178">}, name: {</span><span style="color: #9CDCFE">t1</span><span style="color: #CE9178">.</span><span style="color: #9CDCFE">name</span><span style="color: #CE9178">})</span><span style="color: #F44747">;</span></span>
<span class=line><span style="color: #E6E6E6">}</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// ... up to twelve (12) named tuples max.</span></span>
<span class=line><span style="color: #6A9955">//</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">System</span><span style="color: #000000">.</span><span style="color: #267F99">Linq</span><span style="color: #000000">;</span></span>
<span class=line><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000">;</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// You can also map to named tuples and give names to the columns.</span></span>
<span class=line><span style="color: #008000">// Two value mapping by position.</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">result</span><span style="color: #000000"> = </span><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;(</span><span style="color: #0000FF">int</span><span style="color: #000000"> </span><span style="color: #001080">id</span><span style="color: #000000">, </span><span style="color: #0000FF">string</span><span style="color: #000000"> </span><span style="color: #001080">name</span><span style="color: #000000">)>(</span><span style="color: #A31515">"select id, value from table"</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Single</span><span style="color: #000000">();</span></span>
<span class=line></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">id</span><span style="color: #000000"> = </span><span style="color: #001080">result</span><span style="color: #000000">.</span><span style="color: #001080">id</span><span style="color: #000000">;</span></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">name</span><span style="color: #000000"> = </span><span style="color: #001080">result</span><span style="color: #000000">.</span><span style="color: #001080">name</span><span style="color: #000000">;</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Iterating over named tuples mapped by position.</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">query</span><span style="color: #000000"> = </span><span style="color: #A31515">"select id, foo, bar from table"</span><span style="color: #000000">;</span></span>
<span class=line><span style="color: #AF00DB">foreach</span><span style="color: #000000">(</span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">item</span><span style="color: #000000"> </span><span style="color: #AF00DB">in</span><span style="color: #000000"> </span><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;(</span><span style="color: #0000FF">int</span><span style="color: #000000"> </span><span style="color: #001080">id</span><span style="color: #000000">, </span><span style="color: #0000FF">string</span><span style="color: #000000"> </span><span style="color: #001080">foo</span><span style="color: #000000">, </span><span style="color: #0000FF">string</span><span style="color: #000000"> </span><span style="color: #001080">bar</span><span style="color: #000000">)>(</span><span style="color: #001080">query</span><span style="color: #000000">))</span></span>
<span class=line><span style="color: #000000">{</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #795E26">WriteLine</span><span style="color: #000000">(</span><span style="color: #A31515">$"id: {</span><span style="color: #001080">item</span><span style="color: #A31515">.</span><span style="color: #001080">id</span><span style="color: #A31515">}, foo: {</span><span style="color: #001080">item</span><span style="color: #A31515">.</span><span style="color: #001080">foo</span><span style="color: #A31515">}, bar: {</span><span style="color: #001080">item</span><span style="color: #A31515">.</span><span style="color: #001080">bar</span><span style="color: #A31515">}"</span><span style="color: #000000">);</span></span>
<span class=line><span style="color: #000000">}</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Declaring tuple alias type (C# 12 or higher only). </span></span>
<span class=line><span style="color: #008000">// Mapping by position.</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">TableTuple</span><span style="color: #000000"> = (</span><span style="color: #0000FF">int</span><span style="color: #000000"> </span><span style="color: #001080">id</span><span style="color: #000000">, </span><span style="color: #0000FF">string</span><span style="color: #000000"> </span><span style="color: #001080">name</span><span style="color: #000000">);</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//...</span></span>
<span class=line></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">query</span><span style="color: #000000"> = </span><span style="color: #A31515">"select id, foo, bar from table"</span><span style="color: #000000">;</span></span>
<span class=line><span style="color: #AF00DB">foreach</span><span style="color: #000000">(</span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">item</span><span style="color: #000000"> </span><span style="color: #AF00DB">in</span><span style="color: #000000"> </span><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;</span><span style="color: #267F99">TableTuple</span><span style="color: #000000">>(</span><span style="color: #001080">query</span><span style="color: #000000">))</span></span>
<span class=line><span style="color: #000000">{</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #795E26">WriteLine</span><span style="color: #000000">(</span><span style="color: #A31515">$"id: {</span><span style="color: #001080">item</span><span style="color: #A31515">.</span><span style="color: #001080">id</span><span style="color: #A31515">}, foo: {</span><span style="color: #001080">item</span><span style="color: #A31515">.</span><span style="color: #001080">foo</span><span style="color: #A31515">}, bar: {</span><span style="color: #001080">item</span><span style="color: #A31515">.</span><span style="color: #001080">bar</span><span style="color: #A31515">}"</span><span style="color: #000000">);</span></span>
<span class=line><span style="color: #000000">}</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Mapping two named tuples by position.</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">query</span><span style="color: #000000"> = </span><span style="color: #A31515">"select t1.*, t2.* from t1 join t2 using (id)"</span><span style="color: #000000">;</span></span>
<span class=line><span style="color: #AF00DB">foreach</span><span style="color: #000000"> (</span><span style="color: #0000FF">var</span><span style="color: #000000"> (</span><span style="color: #001080">t1</span><span style="color: #000000">, </span><span style="color: #001080">t2</span><span style="color: #000000">) </span><span style="color: #AF00DB">in</span><span style="color: #000000"> </span><span style="color: #001080">connection</span><span style="color: #000000">.</span><span style="color: #001080">Read</span><span style="color: #000000">&lt;</span></span>
<span class=line><span style="color: #000000">    (</span><span style="color: #001080">int</span><span style="color: #000000"> </span><span style="color: #001080">id</span><span style="color: #000000">, </span><span style="color: #001080">string</span><span style="color: #000000"> </span><span style="color: #001080">name</span><span style="color: #000000">), </span></span>
<span class=line><span style="color: #000000">    (</span><span style="color: #001080">int</span><span style="color: #000000"> </span><span style="color: #001080">id</span><span style="color: #000000">, </span><span style="color: #001080">string</span><span style="color: #000000"> </span><span style="color: #001080">name</span><span style="color: #000000">)>(</span><span style="color: #001080">query</span><span style="color: #000000">))</span></span>
<span class=line><span style="color: #000000">{</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #795E26">WriteLine</span><span style="color: #000000">(</span><span style="color: #A31515">$"t1 - id: {</span><span style="color: #001080">t1</span><span style="color: #A31515">.</span><span style="color: #001080">id</span><span style="color: #A31515">}, name: {</span><span style="color: #001080">t1</span><span style="color: #A31515">.</span><span style="color: #001080">name</span><span style="color: #A31515">})</span><span style="color: #CD3131">;</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #795E26">WriteLine</span><span style="color: #000000">(</span><span style="color: #A31515">$"t2 - id: {</span><span style="color: #001080">t1</span><span style="color: #A31515">.</span><span style="color: #001080">id</span><span style="color: #A31515">}, name: {</span><span style="color: #001080">t1</span><span style="color: #A31515">.</span><span style="color: #001080">name</span><span style="color: #A31515">})</span><span style="color: #CD3131">;</span></span>
<span class=line><span style="color: #000000">}</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// ... up to twelve (12) named tuples max.</span></span>
<span class=line><span style="color: #008000">//</span></span></code></pre></div></div><div class="prototype-instances mb-4 container d-flex flex-column align-items-center svelte-ryutlp"id=prototype-instances><div class="lead text-center svelte-ryutlp"><a href=#prototype-instances class="bookmark-target svelte-ryutlp"><i class="bi bi-link-45deg"></i></a> Map to prototypes and anonymous instances</div><div class="subtitle mb-3 mt-1 mx-auto"style="max-width: 516px;">If you use a non-generic version of the <code>Read</code> method, you can provide a <u>prototype instance as a first parameter</u>.<br><br>In that case, Norm will use that prototype to construct resulting instances.<br><br>That prototype could also be an <u>anonymous type</u> - initilaized with default values as in examples bellow:</div><div class="code csharp mx-auto"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">System</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">Linq</span><span style="color: #E6E6E6">;</span></span>
<span class=line><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6">;</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// You can use existing instances as a bluprint for mapping.</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #569CD6">class</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Class1</span></span>
<span class=line><span style="color: #E6E6E6">{</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">int</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">Id</span><span style="color: #E6E6E6"> { </span><span style="color: #569CD6">get</span><span style="color: #E6E6E6">; </span><span style="color: #569CD6">set</span><span style="color: #E6E6E6">; }</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">Name</span><span style="color: #E6E6E6"> { </span><span style="color: #569CD6">get</span><span style="color: #E6E6E6">; </span><span style="color: #569CD6">set</span><span style="color: #E6E6E6">; }</span></span>
<span class=line><span style="color: #E6E6E6">}</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">// </span></span>
<span class=line><span style="color: #6A9955">// Maps existing instances of Class1 to </span></span>
<span class=line><span style="color: #6A9955">// new instances of the same type by name.</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">instance1</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Class1</span><span style="color: #E6E6E6">();</span></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">result1</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">instance1</span><span style="color: #E6E6E6">, </span><span style="color: #CE9178">"select 1 as id, 'foo' as name"</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Single</span><span style="color: #E6E6E6">();</span></span>
<span class=line></span>
<span class=line><span style="color: #9CDCFE">Assert</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Equal</span><span style="color: #E6E6E6">(</span><span style="color: #B5CEA8">1</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">result1</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Id</span><span style="color: #E6E6E6">);</span></span>
<span class=line><span style="color: #9CDCFE">Assert</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Equal</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"foo"</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">result1</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Name</span><span style="color: #E6E6E6">);</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// You can use anonymous instances prototype </span></span>
<span class=line><span style="color: #6A9955">// to map to anonymous instances.</span></span>
<span class=line><span style="color: #6A9955">// Also by name.</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">result1</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">(</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> {</span><span style="color: #9CDCFE">id</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">default</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">int</span><span style="color: #E6E6E6">), </span><span style="color: #9CDCFE">name</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">default</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">)}, </span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #CE9178">"select 1 as id, 'foo' as name"</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Single</span><span style="color: #E6E6E6">();</span></span>
<span class=line></span>
<span class=line><span style="color: #9CDCFE">Assert</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Equal</span><span style="color: #E6E6E6">(</span><span style="color: #B5CEA8">1</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">result1</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Id</span><span style="color: #E6E6E6">);</span></span>
<span class=line><span style="color: #9CDCFE">Assert</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Equal</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"foo"</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">result1</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Name</span><span style="color: #E6E6E6">);</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Iterate anonymous instances mapped by name.</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #C586C0">foreach</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">item</span><span style="color: #E6E6E6"> </span><span style="color: #C586C0">in</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">new</span></span>
<span class=line><span style="color: #E6E6E6">{</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">first</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">default</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">int</span><span style="color: #E6E6E6">),</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">bar</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">default</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">),</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">day</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">default</span><span style="color: #E6E6E6">(</span><span style="color: #4EC9B0">DateTime</span><span style="color: #E6E6E6">?),</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">@bool</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">default</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">bool</span><span style="color: #E6E6E6">?),</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">myString</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">default</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">),</span></span>
<span class=line><span style="color: #E6E6E6">}, </span><span style="color: #CE9178">@"</span></span>
<span class=line><span style="color: #CE9178">    select * from (</span></span>
<span class=line><span style="color: #CE9178">        values </span></span>
<span class=line><span style="color: #CE9178">        (1, 'foo1', '1977-05-19'::date, true, null),</span></span>
<span class=line><span style="color: #CE9178">        (2, 'foo2', '1978-05-19'::date, false, 'bar2'),</span></span>
<span class=line><span style="color: #CE9178">        (3, 'foo3', null::date, null, 'bar3')</span></span>
<span class=line><span style="color: #CE9178">    ) t(first, bar, day, bool, my_string)</span></span>
<span class=line><span style="color: #CE9178">"</span><span style="color: #E6E6E6">))</span></span>
<span class=line><span style="color: #E6E6E6">{</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #DCDCAA">WriteLine</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"{0}, {1}, {2}, {3}, {4}"</span><span style="color: #E6E6E6">,</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #9CDCFE">item</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">first</span><span style="color: #E6E6E6">, </span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #9CDCFE">item</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">bar</span><span style="color: #E6E6E6">, </span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #9CDCFE">item</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">day</span><span style="color: #E6E6E6">, </span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #9CDCFE">item</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">@bool</span><span style="color: #E6E6E6">, </span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #9CDCFE">item</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">myString</span><span style="color: #E6E6E6">);</span></span>
<span class=line><span style="color: #E6E6E6">}</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">System</span><span style="color: #000000">.</span><span style="color: #267F99">Linq</span><span style="color: #000000">;</span></span>
<span class=line><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000">;</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// You can use existing instances as a bluprint for mapping.</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #267F99">Class1</span></span>
<span class=line><span style="color: #000000">{</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">int</span><span style="color: #000000"> </span><span style="color: #001080">Id</span><span style="color: #000000"> { </span><span style="color: #0000FF">get</span><span style="color: #000000">; </span><span style="color: #0000FF">set</span><span style="color: #000000">; }</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">string</span><span style="color: #000000"> </span><span style="color: #001080">Name</span><span style="color: #000000"> { </span><span style="color: #0000FF">get</span><span style="color: #000000">; </span><span style="color: #0000FF">set</span><span style="color: #000000">; }</span></span>
<span class=line><span style="color: #000000">}</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">// </span></span>
<span class=line><span style="color: #008000">// Maps existing instances of Class1 to </span></span>
<span class=line><span style="color: #008000">// new instances of the same type by name.</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">instance1</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">Class1</span><span style="color: #000000">();</span></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">result1</span><span style="color: #000000"> = </span><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Read</span><span style="color: #000000">(</span><span style="color: #001080">instance1</span><span style="color: #000000">, </span><span style="color: #A31515">"select 1 as id, 'foo' as name"</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Single</span><span style="color: #000000">();</span></span>
<span class=line></span>
<span class=line><span style="color: #001080">Assert</span><span style="color: #000000">.</span><span style="color: #795E26">Equal</span><span style="color: #000000">(</span><span style="color: #098658">1</span><span style="color: #000000">, </span><span style="color: #001080">result1</span><span style="color: #000000">.</span><span style="color: #001080">Id</span><span style="color: #000000">);</span></span>
<span class=line><span style="color: #001080">Assert</span><span style="color: #000000">.</span><span style="color: #795E26">Equal</span><span style="color: #000000">(</span><span style="color: #A31515">"foo"</span><span style="color: #000000">, </span><span style="color: #001080">result1</span><span style="color: #000000">.</span><span style="color: #001080">Name</span><span style="color: #000000">);</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// You can use anonymous instances prototype </span></span>
<span class=line><span style="color: #008000">// to map to anonymous instances.</span></span>
<span class=line><span style="color: #008000">// Also by name.</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">result1</span><span style="color: #000000"> = </span><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Read</span><span style="color: #000000">(</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #0000FF">new</span><span style="color: #000000"> {</span><span style="color: #001080">id</span><span style="color: #000000"> = </span><span style="color: #0000FF">default</span><span style="color: #000000">(</span><span style="color: #0000FF">int</span><span style="color: #000000">), </span><span style="color: #001080">name</span><span style="color: #000000"> = </span><span style="color: #0000FF">default</span><span style="color: #000000">(</span><span style="color: #0000FF">string</span><span style="color: #000000">)}, </span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #A31515">"select 1 as id, 'foo' as name"</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Single</span><span style="color: #000000">();</span></span>
<span class=line></span>
<span class=line><span style="color: #001080">Assert</span><span style="color: #000000">.</span><span style="color: #795E26">Equal</span><span style="color: #000000">(</span><span style="color: #098658">1</span><span style="color: #000000">, </span><span style="color: #001080">result1</span><span style="color: #000000">.</span><span style="color: #001080">Id</span><span style="color: #000000">);</span></span>
<span class=line><span style="color: #001080">Assert</span><span style="color: #000000">.</span><span style="color: #795E26">Equal</span><span style="color: #000000">(</span><span style="color: #A31515">"foo"</span><span style="color: #000000">, </span><span style="color: #001080">result1</span><span style="color: #000000">.</span><span style="color: #001080">Name</span><span style="color: #000000">);</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Iterate anonymous instances mapped by name.</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #AF00DB">foreach</span><span style="color: #000000">(</span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">item</span><span style="color: #000000"> </span><span style="color: #AF00DB">in</span><span style="color: #000000"> </span><span style="color: #001080">connection</span><span style="color: #000000">.</span><span style="color: #795E26">Read</span><span style="color: #000000">(</span><span style="color: #0000FF">new</span></span>
<span class=line><span style="color: #000000">{</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #001080">first</span><span style="color: #000000"> = </span><span style="color: #0000FF">default</span><span style="color: #000000">(</span><span style="color: #0000FF">int</span><span style="color: #000000">),</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #001080">bar</span><span style="color: #000000"> = </span><span style="color: #0000FF">default</span><span style="color: #000000">(</span><span style="color: #0000FF">string</span><span style="color: #000000">),</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #001080">day</span><span style="color: #000000"> = </span><span style="color: #0000FF">default</span><span style="color: #000000">(</span><span style="color: #267F99">DateTime</span><span style="color: #000000">?),</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #001080">@bool</span><span style="color: #000000"> = </span><span style="color: #0000FF">default</span><span style="color: #000000">(</span><span style="color: #0000FF">bool</span><span style="color: #000000">?),</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #001080">myString</span><span style="color: #000000"> = </span><span style="color: #0000FF">default</span><span style="color: #000000">(</span><span style="color: #0000FF">string</span><span style="color: #000000">),</span></span>
<span class=line><span style="color: #000000">}, </span><span style="color: #A31515">@"</span></span>
<span class=line><span style="color: #A31515">    select * from (</span></span>
<span class=line><span style="color: #A31515">        values </span></span>
<span class=line><span style="color: #A31515">        (1, 'foo1', '1977-05-19'::date, true, null),</span></span>
<span class=line><span style="color: #A31515">        (2, 'foo2', '1978-05-19'::date, false, 'bar2'),</span></span>
<span class=line><span style="color: #A31515">        (3, 'foo3', null::date, null, 'bar3')</span></span>
<span class=line><span style="color: #A31515">    ) t(first, bar, day, bool, my_string)</span></span>
<span class=line><span style="color: #A31515">"</span><span style="color: #000000">))</span></span>
<span class=line><span style="color: #000000">{</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #795E26">WriteLine</span><span style="color: #000000">(</span><span style="color: #A31515">"{0}, {1}, {2}, {3}, {4}"</span><span style="color: #000000">,</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #001080">item</span><span style="color: #000000">.</span><span style="color: #001080">first</span><span style="color: #000000">, </span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #001080">item</span><span style="color: #000000">.</span><span style="color: #001080">bar</span><span style="color: #000000">, </span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #001080">item</span><span style="color: #000000">.</span><span style="color: #001080">day</span><span style="color: #000000">, </span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #001080">item</span><span style="color: #000000">.</span><span style="color: #001080">@bool</span><span style="color: #000000">, </span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #001080">item</span><span style="color: #000000">.</span><span style="color: #001080">myString</span><span style="color: #000000">);</span></span>
<span class=line><span style="color: #000000">}</span></span></code></pre></div></div><div class="async-streaming mb-4 container d-flex flex-column align-items-center svelte-ryutlp"id=async-streaming><div class="lead text-center svelte-ryutlp"><a href=#async-streaming class="bookmark-target svelte-ryutlp"><i class="bi bi-link-45deg"></i></a> Asynchronous streaming directly from the database</div><div class="subtitle mb-3 mt-1 mx-auto"style="max-width: 551px;">Take advantage of the new <code>IAsyncEnumerable</code> type and asynchronous streaming directly from your database.<br><br>All asynchronous methods in Norm will return the <code>IAsyncEnumerable</code> type, so you can take async code to the next level by leveraging <code>System.Linq.Async</code>.</div><div class="code csharp mx-auto"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6">;</span></span>
<span class=line></span>
<span class=line><span style="color: #569CD6">const</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">query</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #CE9178">"select id, name, foo, bar from my_streaming_table"</span><span style="color: #E6E6E6">;</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Asynchronously stream values directly from database</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #4EC9B0">await</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">foreach</span><span style="color: #E6E6E6">(var (</span><span style="color: #4EC9B0">id</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">name</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">foo</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">bar</span><span style="color: #E6E6E6">) </span><span style="color: #9CDCFE">in</span><span style="color: #E6E6E6"> </span></span>
<span class=line><span style="color: #E6E6E6">    connection.ReadAsync&lt;int, string, string, string>(query))</span></span>
<span class=line><span style="color: #E6E6E6">{</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #6A9955">//...</span></span>
<span class=line><span style="color: #E6E6E6">}</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Asynchronously stream named tuples directly from database</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #4EC9B0">await</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">foreach</span><span style="color: #E6E6E6">(</span><span style="color: #4EC9B0">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">item</span><span style="color: #E6E6E6"> in </span></span>
<span class=line><span style="color: #E6E6E6">    connection.ReadAsync&lt;(</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #569CD6">int</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">id</span><span style="color: #E6E6E6">, </span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">name</span><span style="color: #E6E6E6">, </span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">foo</span><span style="color: #E6E6E6">, </span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">bar</span><span style="color: #E6E6E6">)>(query))</span></span>
<span class=line><span style="color: #E6E6E6">{</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #6A9955">//...</span></span>
<span class=line><span style="color: #E6E6E6">}</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Asynchronously stream to one or more </span></span>
<span class=line><span style="color: #6A9955">// class instances directly from database</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #569CD6">class</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Class1</span></span>
<span class=line><span style="color: #E6E6E6">{</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">int</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">Id</span><span style="color: #E6E6E6"> { </span><span style="color: #569CD6">get</span><span style="color: #E6E6E6">; </span><span style="color: #569CD6">set</span><span style="color: #E6E6E6">; }</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">Name</span><span style="color: #E6E6E6"> { </span><span style="color: #569CD6">get</span><span style="color: #E6E6E6">; </span><span style="color: #569CD6">set</span><span style="color: #E6E6E6">; }</span></span>
<span class=line><span style="color: #E6E6E6">}</span></span>
<span class=line></span>
<span class=line><span style="color: #569CD6">class</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Class2</span></span>
<span class=line><span style="color: #E6E6E6">{</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">int</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">Foo</span><span style="color: #E6E6E6"> { </span><span style="color: #569CD6">get</span><span style="color: #E6E6E6">; </span><span style="color: #569CD6">set</span><span style="color: #E6E6E6">; }</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">Bar</span><span style="color: #E6E6E6"> { </span><span style="color: #569CD6">get</span><span style="color: #E6E6E6">; </span><span style="color: #569CD6">set</span><span style="color: #E6E6E6">; }</span></span>
<span class=line><span style="color: #E6E6E6">}</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">// Single class (id and name)</span></span>
<span class=line><span style="color: #4EC9B0">await</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">foreach</span><span style="color: #E6E6E6">(</span><span style="color: #4EC9B0">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">item</span><span style="color: #E6E6E6"> in </span></span>
<span class=line><span style="color: #E6E6E6">    connection.ReadAsync&lt;Class1>(query))</span></span>
<span class=line><span style="color: #E6E6E6">{</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #6A9955">//...</span></span>
<span class=line><span style="color: #E6E6E6">}</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">// Two classes </span></span>
<span class=line><span style="color: #6A9955">// class1: id and name</span></span>
<span class=line><span style="color: #6A9955">// class2: foo and bar (up to 12 max)</span></span>
<span class=line><span style="color: #4EC9B0">await</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">foreach</span><span style="color: #E6E6E6">(var (</span><span style="color: #4EC9B0">r1</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">r2</span><span style="color: #E6E6E6">) </span><span style="color: #9CDCFE">in</span><span style="color: #E6E6E6"> </span></span>
<span class=line><span style="color: #E6E6E6">    connection.ReadAsync&lt;Class1, Class2>(query))</span></span>
<span class=line><span style="color: #E6E6E6">{</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #6A9955">//...</span></span>
<span class=line><span style="color: #E6E6E6">}</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">// One normal class (id and name) and one dynamic (up to 12 max)</span></span>
<span class=line><span style="color: #4EC9B0">await</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">foreach</span><span style="color: #E6E6E6">(var (</span><span style="color: #4EC9B0">x</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">y</span><span style="color: #E6E6E6">) </span><span style="color: #9CDCFE">in</span><span style="color: #E6E6E6"> </span></span>
<span class=line><span style="color: #E6E6E6">    connection.ReadAsync&lt;Class1, dynamic>(query))</span></span>
<span class=line><span style="color: #E6E6E6">{</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #6A9955">//...</span></span>
<span class=line><span style="color: #E6E6E6">}</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000">;</span></span>
<span class=line></span>
<span class=line><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0000FF">string</span><span style="color: #000000"> </span><span style="color: #001080">query</span><span style="color: #000000"> = </span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #A31515">"select id, name, foo, bar from my_streaming_table"</span><span style="color: #000000">;</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Asynchronously stream values directly from database</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #267F99">await</span><span style="color: #000000"> </span><span style="color: #795E26">foreach</span><span style="color: #000000">(var (</span><span style="color: #267F99">id</span><span style="color: #000000">, </span><span style="color: #267F99">name</span><span style="color: #000000">, </span><span style="color: #267F99">foo</span><span style="color: #000000">, </span><span style="color: #267F99">bar</span><span style="color: #000000">) </span><span style="color: #001080">in</span><span style="color: #000000"> </span></span>
<span class=line><span style="color: #000000">    connection.ReadAsync&lt;int, string, string, string>(query))</span></span>
<span class=line><span style="color: #000000">{</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #008000">//...</span></span>
<span class=line><span style="color: #000000">}</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Asynchronously stream named tuples directly from database</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #267F99">await</span><span style="color: #000000"> </span><span style="color: #795E26">foreach</span><span style="color: #000000">(</span><span style="color: #267F99">var</span><span style="color: #000000"> </span><span style="color: #001080">item</span><span style="color: #000000"> in </span></span>
<span class=line><span style="color: #000000">    connection.ReadAsync&lt;(</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #0000FF">int</span><span style="color: #000000"> </span><span style="color: #001080">id</span><span style="color: #000000">, </span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #0000FF">string</span><span style="color: #000000"> </span><span style="color: #001080">name</span><span style="color: #000000">, </span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #0000FF">string</span><span style="color: #000000"> </span><span style="color: #001080">foo</span><span style="color: #000000">, </span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #0000FF">string</span><span style="color: #000000"> </span><span style="color: #001080">bar</span><span style="color: #000000">)>(query))</span></span>
<span class=line><span style="color: #000000">{</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #008000">//...</span></span>
<span class=line><span style="color: #000000">}</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Asynchronously stream to one or more </span></span>
<span class=line><span style="color: #008000">// class instances directly from database</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #267F99">Class1</span></span>
<span class=line><span style="color: #000000">{</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">int</span><span style="color: #000000"> </span><span style="color: #001080">Id</span><span style="color: #000000"> { </span><span style="color: #0000FF">get</span><span style="color: #000000">; </span><span style="color: #0000FF">set</span><span style="color: #000000">; }</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">string</span><span style="color: #000000"> </span><span style="color: #001080">Name</span><span style="color: #000000"> { </span><span style="color: #0000FF">get</span><span style="color: #000000">; </span><span style="color: #0000FF">set</span><span style="color: #000000">; }</span></span>
<span class=line><span style="color: #000000">}</span></span>
<span class=line></span>
<span class=line><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #267F99">Class2</span></span>
<span class=line><span style="color: #000000">{</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">int</span><span style="color: #000000"> </span><span style="color: #001080">Foo</span><span style="color: #000000"> { </span><span style="color: #0000FF">get</span><span style="color: #000000">; </span><span style="color: #0000FF">set</span><span style="color: #000000">; }</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">string</span><span style="color: #000000"> </span><span style="color: #001080">Bar</span><span style="color: #000000"> { </span><span style="color: #0000FF">get</span><span style="color: #000000">; </span><span style="color: #0000FF">set</span><span style="color: #000000">; }</span></span>
<span class=line><span style="color: #000000">}</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">// Single class (id and name)</span></span>
<span class=line><span style="color: #267F99">await</span><span style="color: #000000"> </span><span style="color: #795E26">foreach</span><span style="color: #000000">(</span><span style="color: #267F99">var</span><span style="color: #000000"> </span><span style="color: #001080">item</span><span style="color: #000000"> in </span></span>
<span class=line><span style="color: #000000">    connection.ReadAsync&lt;Class1>(query))</span></span>
<span class=line><span style="color: #000000">{</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #008000">//...</span></span>
<span class=line><span style="color: #000000">}</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">// Two classes </span></span>
<span class=line><span style="color: #008000">// class1: id and name</span></span>
<span class=line><span style="color: #008000">// class2: foo and bar (up to 12 max)</span></span>
<span class=line><span style="color: #267F99">await</span><span style="color: #000000"> </span><span style="color: #795E26">foreach</span><span style="color: #000000">(var (</span><span style="color: #267F99">r1</span><span style="color: #000000">, </span><span style="color: #267F99">r2</span><span style="color: #000000">) </span><span style="color: #001080">in</span><span style="color: #000000"> </span></span>
<span class=line><span style="color: #000000">    connection.ReadAsync&lt;Class1, Class2>(query))</span></span>
<span class=line><span style="color: #000000">{</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #008000">//...</span></span>
<span class=line><span style="color: #000000">}</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">// One normal class (id and name) and one dynamic (up to 12 max)</span></span>
<span class=line><span style="color: #267F99">await</span><span style="color: #000000"> </span><span style="color: #795E26">foreach</span><span style="color: #000000">(var (</span><span style="color: #267F99">x</span><span style="color: #000000">, </span><span style="color: #267F99">y</span><span style="color: #000000">) </span><span style="color: #001080">in</span><span style="color: #000000"> </span></span>
<span class=line><span style="color: #000000">    connection.ReadAsync&lt;Class1, dynamic>(query))</span></span>
<span class=line><span style="color: #000000">{</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #008000">//...</span></span>
<span class=line><span style="color: #000000">}</span></span></code></pre></div></div><div class="multiple mb-4 container d-flex flex-column align-items-center svelte-ryutlp"id=multiple><div class="lead text-center svelte-ryutlp"><a href=#multiple class="bookmark-target svelte-ryutlp"><i class="bi bi-link-45deg"></i></a> Map from multiple queries</div><div class="subtitle mb-3 mt-1 mx-auto"style="max-width: 556px;">You can map from multiple queries by using the <code>Multiple</code> method.<br><br>When mapping from multiple queries, all the same rules apply as when mapping from a single query.</div><div class="code csharp mx-auto"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">System</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">Linq</span><span style="color: #E6E6E6">;</span></span>
<span class=line><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6">;</span></span>
<span class=line></span>
<span class=line><span style="color: #569CD6">const</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">Queires</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">@"</span></span>
<span class=line><span style="color: #CE9178">select 1 as id1, 'foo1' as foo1, 'bar1' as bar1;    // query 1</span></span>
<span class=line><span style="color: #CE9178">select 2 as id2, 'foo2' as foo2, 'bar2' as bar2;    // query 2"</span><span style="color: #E6E6E6">;</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// declare two record types - Record1 and Record2</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">record</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Record1</span><span style="color: #E6E6E6">(int Id1, string Foo1, string Bar1);</span></span>
<span class=line><span style="color: #E6E6E6">public record Record2(int Id2, string Foo2, string Bar2);</span></span>
<span class=line></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Use Multiple method to create a disposable mutiple read object.</span></span>
<span class=line><span style="color: #6A9955">// Move to next result set with Next method.</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #E6E6E6">using var multiple = connection.Multiple(Queires);</span></span>
<span class=line></span>
<span class=line><span style="color: #E6E6E6">var result1 = multiple</span></span>
<span class=line><span style="color: #E6E6E6">    .Read&lt;</span><span style="color: #4EC9B0">Record1</span><span style="color: #E6E6E6">>()</span></span>
<span class=line><span style="color: #E6E6E6">    .Single();</span></span>
<span class=line></span>
<span class=line><span style="color: #E6E6E6">multiple.Next();</span></span>
<span class=line></span>
<span class=line><span style="color: #E6E6E6">var result2 = multiple</span></span>
<span class=line><span style="color: #E6E6E6">    .Read&lt;</span><span style="color: #4EC9B0">Record2</span><span style="color: #E6E6E6">>()</span></span>
<span class=line><span style="color: #E6E6E6">    .Single();</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Same mapping rules apply as in regular Read methods.</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #E6E6E6">using var multiple = connection.Multiple(Queires);</span></span>
<span class=line></span>
<span class=line><span style="color: #E6E6E6">var result1 = multiple</span></span>
<span class=line><span style="color: #E6E6E6">    .Read&lt;(</span><span style="color: #4EC9B0">int</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Id1</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">string</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Foo1</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">string</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Bar1</span><span style="color: #E6E6E6">)>()</span></span>
<span class=line><span style="color: #E6E6E6">    .Single();</span></span>
<span class=line></span>
<span class=line><span style="color: #E6E6E6">multiple.Next();</span></span>
<span class=line></span>
<span class=line><span style="color: #E6E6E6">var result2 = multiple</span></span>
<span class=line><span style="color: #E6E6E6">    .Read&lt;(</span><span style="color: #4EC9B0">int</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Id2</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">string</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Foo2</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">string</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Bar2</span><span style="color: #E6E6E6">)>()</span></span>
<span class=line><span style="color: #E6E6E6">    .Single();</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">System</span><span style="color: #000000">.</span><span style="color: #267F99">Linq</span><span style="color: #000000">;</span></span>
<span class=line><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000">;</span></span>
<span class=line></span>
<span class=line><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0000FF">string</span><span style="color: #000000"> </span><span style="color: #001080">Queires</span><span style="color: #000000"> = </span><span style="color: #A31515">@"</span></span>
<span class=line><span style="color: #A31515">select 1 as id1, 'foo1' as foo1, 'bar1' as bar1;    // query 1</span></span>
<span class=line><span style="color: #A31515">select 2 as id2, 'foo2' as foo2, 'bar2' as bar2;    // query 2"</span><span style="color: #000000">;</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// declare two record types - Record1 and Record2</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">record</span><span style="color: #000000"> </span><span style="color: #267F99">Record1</span><span style="color: #000000">(int Id1, string Foo1, string Bar1);</span></span>
<span class=line><span style="color: #000000">public record Record2(int Id2, string Foo2, string Bar2);</span></span>
<span class=line></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Use Multiple method to create a disposable mutiple read object.</span></span>
<span class=line><span style="color: #008000">// Move to next result set with Next method.</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #000000">using var multiple = connection.Multiple(Queires);</span></span>
<span class=line></span>
<span class=line><span style="color: #000000">var result1 = multiple</span></span>
<span class=line><span style="color: #000000">    .Read&lt;</span><span style="color: #267F99">Record1</span><span style="color: #000000">>()</span></span>
<span class=line><span style="color: #000000">    .Single();</span></span>
<span class=line></span>
<span class=line><span style="color: #000000">multiple.Next();</span></span>
<span class=line></span>
<span class=line><span style="color: #000000">var result2 = multiple</span></span>
<span class=line><span style="color: #000000">    .Read&lt;</span><span style="color: #267F99">Record2</span><span style="color: #000000">>()</span></span>
<span class=line><span style="color: #000000">    .Single();</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Same mapping rules apply as in regular Read methods.</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #000000">using var multiple = connection.Multiple(Queires);</span></span>
<span class=line></span>
<span class=line><span style="color: #000000">var result1 = multiple</span></span>
<span class=line><span style="color: #000000">    .Read&lt;(</span><span style="color: #267F99">int</span><span style="color: #000000"> </span><span style="color: #267F99">Id1</span><span style="color: #000000">, </span><span style="color: #267F99">string</span><span style="color: #000000"> </span><span style="color: #267F99">Foo1</span><span style="color: #000000">, </span><span style="color: #267F99">string</span><span style="color: #000000"> </span><span style="color: #267F99">Bar1</span><span style="color: #000000">)>()</span></span>
<span class=line><span style="color: #000000">    .Single();</span></span>
<span class=line></span>
<span class=line><span style="color: #000000">multiple.Next();</span></span>
<span class=line></span>
<span class=line><span style="color: #000000">var result2 = multiple</span></span>
<span class=line><span style="color: #000000">    .Read&lt;(</span><span style="color: #267F99">int</span><span style="color: #000000"> </span><span style="color: #267F99">Id2</span><span style="color: #000000">, </span><span style="color: #267F99">string</span><span style="color: #000000"> </span><span style="color: #267F99">Foo2</span><span style="color: #000000">, </span><span style="color: #267F99">string</span><span style="color: #000000"> </span><span style="color: #267F99">Bar2</span><span style="color: #000000">)>()</span></span>
<span class=line><span style="color: #000000">    .Single();</span></span></code></pre></div></div><div class="nested-mapping mb-4 container d-flex flex-column align-items-center svelte-ryutlp"id=nested-mapping><div class="lead text-center svelte-ryutlp"><a href=#nested-mapping class="bookmark-target svelte-ryutlp"><i class="bi bi-link-45deg"></i></a> Use nested mapping to build complex object map</div><div class="subtitle mb-3 mt-1 mx-auto"style="max-width: 558px;">With Norm, building nested object maps is easy.<br><br>You can use the combination of <u>tuple destructions and LINQ expressions</u> to build complex object maps with nested objects from your database. See example bellow:</div><div class="code csharp mx-auto"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">System</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">Linq</span><span style="color: #E6E6E6">;</span></span>
<span class=line><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6">;</span></span>
<span class=line></span>
<span class=line><span style="color: #569CD6">const</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">query</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">@"</span></span>
<span class=line><span style="color: #CE9178">    select shop.*, account.*</span></span>
<span class=line><span style="color: #CE9178">    from shop </span></span>
<span class=line><span style="color: #CE9178">    join account on shop.id = account.shop_id"</span><span style="color: #E6E6E6">;</span></span>
<span class=line><span style="color: #6A9955">/*</span></span>
<span class=line><span style="color: #6A9955">"id"    "name"  "id"    "name"      "address"   "shop_id"</span></span>
<span class=line><span style="color: #6A9955">---------------------------------------------------------</span></span>
<span class=line><span style="color: #6A9955">1       "shop1" 3       "account3"  "addr3"     1</span></span>
<span class=line><span style="color: #6A9955">1       "shop1" 2       "account2"  "addr2"     1</span></span>
<span class=line><span style="color: #6A9955">1       "shop1" 1       "account1"  "addr1"     1</span></span>
<span class=line><span style="color: #6A9955">2       "shop2" 5       "account5"  "addr5"     2</span></span>
<span class=line><span style="color: #6A9955">2       "shop2" 4       "account4"  "addr4"     2</span></span>
<span class=line><span style="color: #6A9955">*/</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Each Shop instance will have a list of related Accounts.</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">class</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Shop</span></span>
<span class=line><span style="color: #E6E6E6">{</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">int</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">Id</span><span style="color: #E6E6E6"> { </span><span style="color: #569CD6">get</span><span style="color: #E6E6E6">; </span><span style="color: #569CD6">set</span><span style="color: #E6E6E6">; }</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">Name</span><span style="color: #E6E6E6"> { </span><span style="color: #569CD6">get</span><span style="color: #E6E6E6">; </span><span style="color: #569CD6">set</span><span style="color: #E6E6E6">; }</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">IList</span><span style="color: #E6E6E6">&lt;</span><span style="color: #4EC9B0">Account</span><span style="color: #E6E6E6">> </span><span style="color: #9CDCFE">Accounts</span><span style="color: #E6E6E6"> { </span><span style="color: #569CD6">get</span><span style="color: #E6E6E6">; </span><span style="color: #569CD6">set</span><span style="color: #E6E6E6">; }</span></span>
<span class=line><span style="color: #E6E6E6">}</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Each Account instance will have a reference to its parent Shop.</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">class</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Account</span></span>
<span class=line><span style="color: #E6E6E6">{</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">int</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">Id</span><span style="color: #E6E6E6"> { </span><span style="color: #569CD6">get</span><span style="color: #E6E6E6">; </span><span style="color: #569CD6">set</span><span style="color: #E6E6E6">; }</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">Name</span><span style="color: #E6E6E6"> { </span><span style="color: #569CD6">get</span><span style="color: #E6E6E6">; </span><span style="color: #569CD6">set</span><span style="color: #E6E6E6">; }</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">Address</span><span style="color: #E6E6E6"> { </span><span style="color: #569CD6">get</span><span style="color: #E6E6E6">; </span><span style="color: #569CD6">set</span><span style="color: #E6E6E6">; }</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">int</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">ShopId</span><span style="color: #E6E6E6"> { </span><span style="color: #569CD6">get</span><span style="color: #E6E6E6">; </span><span style="color: #569CD6">set</span><span style="color: #E6E6E6">; }</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Shop</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">Shop</span><span style="color: #E6E6E6"> { </span><span style="color: #569CD6">get</span><span style="color: #E6E6E6">; </span><span style="color: #569CD6">set</span><span style="color: #E6E6E6">; }</span></span>
<span class=line><span style="color: #E6E6E6">}</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Build a list of Shops with list of related Accounts where </span></span>
<span class=line><span style="color: #6A9955">// each Account has a reference to its parent Shop</span></span>
<span class=line><span style="color: #6A9955">// using GroupBy and Select LINQ methods for nested mappings.</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">shops</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;</span><span style="color: #4EC9B0">Shop</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">Account</span><span style="color: #E6E6E6">>(</span><span style="color: #9CDCFE">query</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">GroupBy</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">item</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">item</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Item1</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Id</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Select</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">group</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span></span>
<span class=line><span style="color: #E6E6E6">    {</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">shop</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">group</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">First</span><span style="color: #E6E6E6">().</span><span style="color: #9CDCFE">Item1</span><span style="color: #E6E6E6">;</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #9CDCFE">shop</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Accounts</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">group</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Select</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">item</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span></span>
<span class=line><span style="color: #E6E6E6">        {</span></span>
<span class=line><span style="color: #E6E6E6">            </span><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">account</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">item</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Item2</span><span style="color: #E6E6E6">;</span></span>
<span class=line><span style="color: #E6E6E6">            </span><span style="color: #9CDCFE">account</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Shop</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">shop</span><span style="color: #E6E6E6">;</span></span>
<span class=line><span style="color: #E6E6E6">            </span><span style="color: #C586C0">return</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">account</span><span style="color: #E6E6E6">;</span></span>
<span class=line><span style="color: #E6E6E6">        }).</span><span style="color: #DCDCAA">ToList</span><span style="color: #E6E6E6">();</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #C586C0">return</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">shop</span><span style="color: #E6E6E6">;</span></span>
<span class=line><span style="color: #E6E6E6">    })</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">ToList</span><span style="color: #E6E6E6">();</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">System</span><span style="color: #000000">.</span><span style="color: #267F99">Linq</span><span style="color: #000000">;</span></span>
<span class=line><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000">;</span></span>
<span class=line></span>
<span class=line><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0000FF">string</span><span style="color: #000000"> </span><span style="color: #001080">query</span><span style="color: #000000"> = </span><span style="color: #A31515">@"</span></span>
<span class=line><span style="color: #A31515">    select shop.*, account.*</span></span>
<span class=line><span style="color: #A31515">    from shop </span></span>
<span class=line><span style="color: #A31515">    join account on shop.id = account.shop_id"</span><span style="color: #000000">;</span></span>
<span class=line><span style="color: #008000">/*</span></span>
<span class=line><span style="color: #008000">"id"    "name"  "id"    "name"      "address"   "shop_id"</span></span>
<span class=line><span style="color: #008000">---------------------------------------------------------</span></span>
<span class=line><span style="color: #008000">1       "shop1" 3       "account3"  "addr3"     1</span></span>
<span class=line><span style="color: #008000">1       "shop1" 2       "account2"  "addr2"     1</span></span>
<span class=line><span style="color: #008000">1       "shop1" 1       "account1"  "addr1"     1</span></span>
<span class=line><span style="color: #008000">2       "shop2" 5       "account5"  "addr5"     2</span></span>
<span class=line><span style="color: #008000">2       "shop2" 4       "account4"  "addr4"     2</span></span>
<span class=line><span style="color: #008000">*/</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Each Shop instance will have a list of related Accounts.</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #267F99">Shop</span></span>
<span class=line><span style="color: #000000">{</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">int</span><span style="color: #000000"> </span><span style="color: #001080">Id</span><span style="color: #000000"> { </span><span style="color: #0000FF">get</span><span style="color: #000000">; </span><span style="color: #0000FF">set</span><span style="color: #000000">; }</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">string</span><span style="color: #000000"> </span><span style="color: #001080">Name</span><span style="color: #000000"> { </span><span style="color: #0000FF">get</span><span style="color: #000000">; </span><span style="color: #0000FF">set</span><span style="color: #000000">; }</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #267F99">IList</span><span style="color: #000000">&lt;</span><span style="color: #267F99">Account</span><span style="color: #000000">> </span><span style="color: #001080">Accounts</span><span style="color: #000000"> { </span><span style="color: #0000FF">get</span><span style="color: #000000">; </span><span style="color: #0000FF">set</span><span style="color: #000000">; }</span></span>
<span class=line><span style="color: #000000">}</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Each Account instance will have a reference to its parent Shop.</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #267F99">Account</span></span>
<span class=line><span style="color: #000000">{</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">int</span><span style="color: #000000"> </span><span style="color: #001080">Id</span><span style="color: #000000"> { </span><span style="color: #0000FF">get</span><span style="color: #000000">; </span><span style="color: #0000FF">set</span><span style="color: #000000">; }</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">string</span><span style="color: #000000"> </span><span style="color: #001080">Name</span><span style="color: #000000"> { </span><span style="color: #0000FF">get</span><span style="color: #000000">; </span><span style="color: #0000FF">set</span><span style="color: #000000">; }</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">string</span><span style="color: #000000"> </span><span style="color: #001080">Address</span><span style="color: #000000"> { </span><span style="color: #0000FF">get</span><span style="color: #000000">; </span><span style="color: #0000FF">set</span><span style="color: #000000">; }</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">int</span><span style="color: #000000"> </span><span style="color: #001080">ShopId</span><span style="color: #000000"> { </span><span style="color: #0000FF">get</span><span style="color: #000000">; </span><span style="color: #0000FF">set</span><span style="color: #000000">; }</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #267F99">Shop</span><span style="color: #000000"> </span><span style="color: #001080">Shop</span><span style="color: #000000"> { </span><span style="color: #0000FF">get</span><span style="color: #000000">; </span><span style="color: #0000FF">set</span><span style="color: #000000">; }</span></span>
<span class=line><span style="color: #000000">}</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Build a list of Shops with list of related Accounts where </span></span>
<span class=line><span style="color: #008000">// each Account has a reference to its parent Shop</span></span>
<span class=line><span style="color: #008000">// using GroupBy and Select LINQ methods for nested mappings.</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">shops</span><span style="color: #000000"> = </span><span style="color: #001080">connection</span><span style="color: #000000">.</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;</span><span style="color: #267F99">Shop</span><span style="color: #000000">, </span><span style="color: #267F99">Account</span><span style="color: #000000">>(</span><span style="color: #001080">query</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">GroupBy</span><span style="color: #000000">(</span><span style="color: #001080">item</span><span style="color: #000000"> => </span><span style="color: #001080">item</span><span style="color: #000000">.</span><span style="color: #001080">Item1</span><span style="color: #000000">.</span><span style="color: #001080">Id</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Select</span><span style="color: #000000">(</span><span style="color: #001080">group</span><span style="color: #000000"> =></span></span>
<span class=line><span style="color: #000000">    {</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">shop</span><span style="color: #000000"> = </span><span style="color: #001080">group</span><span style="color: #000000">.</span><span style="color: #795E26">First</span><span style="color: #000000">().</span><span style="color: #001080">Item1</span><span style="color: #000000">;</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #001080">shop</span><span style="color: #000000">.</span><span style="color: #001080">Accounts</span><span style="color: #000000"> = </span><span style="color: #001080">group</span><span style="color: #000000">.</span><span style="color: #795E26">Select</span><span style="color: #000000">(</span><span style="color: #001080">item</span><span style="color: #000000"> =></span></span>
<span class=line><span style="color: #000000">        {</span></span>
<span class=line><span style="color: #000000">            </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">account</span><span style="color: #000000"> = </span><span style="color: #001080">item</span><span style="color: #000000">.</span><span style="color: #001080">Item2</span><span style="color: #000000">;</span></span>
<span class=line><span style="color: #000000">            </span><span style="color: #001080">account</span><span style="color: #000000">.</span><span style="color: #001080">Shop</span><span style="color: #000000"> = </span><span style="color: #001080">shop</span><span style="color: #000000">;</span></span>
<span class=line><span style="color: #000000">            </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">account</span><span style="color: #000000">;</span></span>
<span class=line><span style="color: #000000">        }).</span><span style="color: #795E26">ToList</span><span style="color: #000000">();</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">shop</span><span style="color: #000000">;</span></span>
<span class=line><span style="color: #000000">    })</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">ToList</span><span style="color: #000000">();</span></span></code></pre></div></div><div class="nullable-instances mb-4 container d-flex flex-column align-items-center svelte-ryutlp"id=nullable-instances><div class="lead text-center svelte-ryutlp"><a href=#nullable-instances class="bookmark-target svelte-ryutlp"><i class="bi bi-link-45deg"></i></a> Nullable instances behavior</div><div class="subtitle mb-3 mt-1 mx-auto"style="max-width: 522px;">You can configure Norm to return <code>NULL</code> values for instances that have all mapped properties <code>NULL</code>.<br><br>This is useful when mapping the result of left outer joins, where you want to get <code>NULL</code> values when joins doesn't match.</div><div class="code csharp mx-auto"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">System</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">Linq</span><span style="color: #E6E6E6">;</span></span>
<span class=line><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6">;</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Set mapping behavior to nullable instances in your startup.</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// If instance has all properties or fields null, </span></span>
<span class=line><span style="color: #6A9955">// that instance will be null by default.</span></span>
<span class=line><span style="color: #6A9955">// </span></span>
<span class=line><span style="color: #9CDCFE">NormOptions</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Configure</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">options</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span></span>
<span class=line><span style="color: #E6E6E6">{</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">options</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">NullableInstances</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">true</span><span style="color: #E6E6E6">;</span></span>
<span class=line><span style="color: #E6E6E6">});</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Get the shop and account instance by shop id = 1</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> (</span><span style="color: #9CDCFE">shop</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">account</span><span style="color: #E6E6E6">) </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;</span><span style="color: #4EC9B0">Shop</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">Account</span><span style="color: #E6E6E6">>(</span><span style="color: #CE9178">@"</span></span>
<span class=line><span style="color: #CE9178">        select </span></span>
<span class=line><span style="color: #CE9178">            shop.*, account.*</span></span>
<span class=line><span style="color: #CE9178">        from shop </span></span>
<span class=line><span style="color: #CE9178">        left outer join account </span></span>
<span class=line><span style="color: #CE9178">            on shop.id = account.shop_id</span></span>
<span class=line><span style="color: #CE9178">        where </span></span>
<span class=line><span style="color: #CE9178">            shop.id = @id"</span><span style="color: #E6E6E6">, </span><span style="color: #B5CEA8">1</span><span style="color: #E6E6E6">) </span><span style="color: #6A9955">// id = 1</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Single</span><span style="color: #E6E6E6">();</span></span>
<span class=line><span style="color: #E6E6E6">    </span></span>
<span class=line><span style="color: #6A9955">// For @id = 1, this is the result:</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">/*</span></span>
<span class=line><span style="color: #6A9955">"id"    "name"  "id"    "name"  "address"   "shop_id"</span></span>
<span class=line><span style="color: #6A9955">-----------------------------------------------------</span></span>
<span class=line><span style="color: #6A9955">1       "shop1" NULL    NULL    NULL        NULL</span></span>
<span class=line><span style="color: #6A9955">*/</span></span>
<span class=line></span>
<span class=line><span style="color: #9CDCFE">Assert</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">NotNull</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">shop</span><span style="color: #E6E6E6">); </span><span style="color: #6A9955">// shop is not null</span></span>
<span class=line><span style="color: #9CDCFE">Assert</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Null</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">account</span><span style="color: #E6E6E6">); </span><span style="color: #6A9955">// account is null</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">System</span><span style="color: #000000">.</span><span style="color: #267F99">Linq</span><span style="color: #000000">;</span></span>
<span class=line><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000">;</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Set mapping behavior to nullable instances in your startup.</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// If instance has all properties or fields null, </span></span>
<span class=line><span style="color: #008000">// that instance will be null by default.</span></span>
<span class=line><span style="color: #008000">// </span></span>
<span class=line><span style="color: #001080">NormOptions</span><span style="color: #000000">.</span><span style="color: #795E26">Configure</span><span style="color: #000000">(</span><span style="color: #001080">options</span><span style="color: #000000"> =></span></span>
<span class=line><span style="color: #000000">{</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #001080">options</span><span style="color: #000000">.</span><span style="color: #001080">NullableInstances</span><span style="color: #000000"> = </span><span style="color: #0000FF">true</span><span style="color: #000000">;</span></span>
<span class=line><span style="color: #000000">});</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Get the shop and account instance by shop id = 1</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> (</span><span style="color: #001080">shop</span><span style="color: #000000">, </span><span style="color: #001080">account</span><span style="color: #000000">) = </span><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;</span><span style="color: #267F99">Shop</span><span style="color: #000000">, </span><span style="color: #267F99">Account</span><span style="color: #000000">>(</span><span style="color: #A31515">@"</span></span>
<span class=line><span style="color: #A31515">        select </span></span>
<span class=line><span style="color: #A31515">            shop.*, account.*</span></span>
<span class=line><span style="color: #A31515">        from shop </span></span>
<span class=line><span style="color: #A31515">        left outer join account </span></span>
<span class=line><span style="color: #A31515">            on shop.id = account.shop_id</span></span>
<span class=line><span style="color: #A31515">        where </span></span>
<span class=line><span style="color: #A31515">            shop.id = @id"</span><span style="color: #000000">, </span><span style="color: #098658">1</span><span style="color: #000000">) </span><span style="color: #008000">// id = 1</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Single</span><span style="color: #000000">();</span></span>
<span class=line><span style="color: #000000">    </span></span>
<span class=line><span style="color: #008000">// For @id = 1, this is the result:</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">/*</span></span>
<span class=line><span style="color: #008000">"id"    "name"  "id"    "name"  "address"   "shop_id"</span></span>
<span class=line><span style="color: #008000">-----------------------------------------------------</span></span>
<span class=line><span style="color: #008000">1       "shop1" NULL    NULL    NULL        NULL</span></span>
<span class=line><span style="color: #008000">*/</span></span>
<span class=line></span>
<span class=line><span style="color: #001080">Assert</span><span style="color: #000000">.</span><span style="color: #795E26">NotNull</span><span style="color: #000000">(</span><span style="color: #001080">shop</span><span style="color: #000000">); </span><span style="color: #008000">// shop is not null</span></span>
<span class=line><span style="color: #001080">Assert</span><span style="color: #000000">.</span><span style="color: #795E26">Null</span><span style="color: #000000">(</span><span style="color: #001080">account</span><span style="color: #000000">); </span><span style="color: #008000">// account is null</span></span></code></pre></div></div><div class="enums-and-arrays mb-4 container d-flex flex-column align-items-center svelte-ryutlp"id=enums-and-arrays><div class="lead text-center svelte-ryutlp"><a href=#enums-and-arrays class="bookmark-target svelte-ryutlp"><i class="bi bi-link-45deg"></i></a> Map to complex types like enums or arrays</div><div class="subtitle mb-3 mt-1 mx-auto"style="max-width: 565px;">You can map to complicated types like enums or arrays. Nullable or non-nullable enums are supported.<br><br>Enums can be mapped from either string or integer values.</div><div class="code csharp mx-auto"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">System</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">Linq</span><span style="color: #E6E6E6">;</span></span>
<span class=line><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6">;</span></span>
<span class=line></span>
<span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">enum</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">TestEnum</span><span style="color: #E6E6E6"> { </span><span style="color: #9CDCFE">Value1</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">Value2</span><span style="color: #E6E6E6"> }</span></span>
<span class=line></span>
<span class=line><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">class</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">TestEnumClass</span><span style="color: #E6E6E6"> </span></span>
<span class=line><span style="color: #E6E6E6">{</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">TestEnum</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">FromText</span><span style="color: #E6E6E6"> { </span><span style="color: #569CD6">get</span><span style="color: #E6E6E6">; </span><span style="color: #569CD6">set</span><span style="color: #E6E6E6">; }</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">TestEnum</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">FromInt</span><span style="color: #E6E6E6">{ </span><span style="color: #569CD6">get</span><span style="color: #E6E6E6">; </span><span style="color: #569CD6">set</span><span style="color: #E6E6E6">; }</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #6A9955">// PostgerSQL only</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">TestEnum</span><span style="color: #E6E6E6">[] </span><span style="color: #9CDCFE">ArrayFromText</span><span style="color: #E6E6E6"> { </span><span style="color: #569CD6">get</span><span style="color: #E6E6E6">; </span><span style="color: #569CD6">set</span><span style="color: #E6E6E6">; }</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #6A9955">// PostgerSQL only</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">TestEnum</span><span style="color: #E6E6E6">[] </span><span style="color: #9CDCFE">ArrayFromInt</span><span style="color: #E6E6E6"> { </span><span style="color: #569CD6">get</span><span style="color: #E6E6E6">; </span><span style="color: #569CD6">set</span><span style="color: #E6E6E6">; }</span></span>
<span class=line><span style="color: #E6E6E6">}</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Map Enum types from text or from integer columns in the database.</span></span>
<span class=line><span style="color: #6A9955">// Null values are also supported.</span></span>
<span class=line><span style="color: #6A9955">// You can also map arrays of enums (PostgreSQL only).</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">instances</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;</span><span style="color: #4EC9B0">TestEnumClass</span><span style="color: #E6E6E6">>(</span><span style="color: #CE9178">@"</span></span>
<span class=line><span style="color: #CE9178">    select </span></span>
<span class=line><span style="color: #CE9178">        from_text, </span></span>
<span class=line><span style="color: #CE9178">        from_int,</span></span>
<span class=line><span style="color: #CE9178">        ARRAY['Value1', 'Value2'] as array_from_text,</span></span>
<span class=line><span style="color: #CE9178">        ARRAY[0, 1] as array_from_int</span></span>
<span class=line><span style="color: #CE9178">    from (</span></span>
<span class=line><span style="color: #CE9178">    values </span></span>
<span class=line><span style="color: #CE9178">        ('Value1', 0),</span></span>
<span class=line><span style="color: #CE9178">        ('Value2', 1)</span></span>
<span class=line><span style="color: #CE9178">    ) t(from_text, from_int,)"</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">ToArray</span><span style="color: #E6E6E6">();</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">// first row</span></span>
<span class=line><span style="color: #9CDCFE">Assert</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Equal</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">TestEnum</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Value1</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">instances</span><span style="color: #E6E6E6">[</span><span style="color: #B5CEA8">0</span><span style="color: #E6E6E6">].</span><span style="color: #9CDCFE">FromText</span><span style="color: #E6E6E6">);</span></span>
<span class=line><span style="color: #9CDCFE">Assert</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Equal</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">TestEnum</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Value1</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">instances</span><span style="color: #E6E6E6">[</span><span style="color: #B5CEA8">0</span><span style="color: #E6E6E6">].</span><span style="color: #9CDCFE">FromInt</span><span style="color: #E6E6E6">);</span></span>
<span class=line><span style="color: #6A9955">// second row</span></span>
<span class=line><span style="color: #9CDCFE">Assert</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Equal</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">TestEnum</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Value2</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">instances</span><span style="color: #E6E6E6">[</span><span style="color: #B5CEA8">1</span><span style="color: #E6E6E6">].</span><span style="color: #9CDCFE">FromText</span><span style="color: #E6E6E6">);</span></span>
<span class=line><span style="color: #9CDCFE">Assert</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Equal</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">TestEnum</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Value2</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">instances</span><span style="color: #E6E6E6">[</span><span style="color: #B5CEA8">1</span><span style="color: #E6E6E6">].</span><span style="color: #9CDCFE">FromInt</span><span style="color: #E6E6E6">);</span></span>
<span class=line><span style="color: #6A9955">// arrays (PostgreSQL only)</span></span>
<span class=line><span style="color: #9CDCFE">Assert</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Equal</span><span style="color: #E6E6E6">(</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #569CD6">new</span><span style="color: #E6E6E6">[] { </span><span style="color: #9CDCFE">TestEnum</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Value1</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">TestEnum</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Value2</span><span style="color: #E6E6E6"> }, </span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">instances</span><span style="color: #E6E6E6">[</span><span style="color: #B5CEA8">0</span><span style="color: #E6E6E6">].</span><span style="color: #9CDCFE">ArrayFromText</span><span style="color: #E6E6E6">);</span></span>
<span class=line><span style="color: #9CDCFE">Assert</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Equal</span><span style="color: #E6E6E6">(</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #569CD6">new</span><span style="color: #E6E6E6">[] { </span><span style="color: #9CDCFE">TestEnum</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Value1</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">TestEnum</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Value2</span><span style="color: #E6E6E6"> }, </span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">instances</span><span style="color: #E6E6E6">[</span><span style="color: #B5CEA8">0</span><span style="color: #E6E6E6">].</span><span style="color: #9CDCFE">ArrayFromInt</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">System</span><span style="color: #000000">.</span><span style="color: #267F99">Linq</span><span style="color: #000000">;</span></span>
<span class=line><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000">;</span></span>
<span class=line></span>
<span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">enum</span><span style="color: #000000"> </span><span style="color: #267F99">TestEnum</span><span style="color: #000000"> { </span><span style="color: #001080">Value1</span><span style="color: #000000">, </span><span style="color: #001080">Value2</span><span style="color: #000000"> }</span></span>
<span class=line></span>
<span class=line><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #267F99">TestEnumClass</span><span style="color: #000000"> </span></span>
<span class=line><span style="color: #000000">{</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #267F99">TestEnum</span><span style="color: #000000"> </span><span style="color: #001080">FromText</span><span style="color: #000000"> { </span><span style="color: #0000FF">get</span><span style="color: #000000">; </span><span style="color: #0000FF">set</span><span style="color: #000000">; }</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #267F99">TestEnum</span><span style="color: #000000"> </span><span style="color: #001080">FromInt</span><span style="color: #000000">{ </span><span style="color: #0000FF">get</span><span style="color: #000000">; </span><span style="color: #0000FF">set</span><span style="color: #000000">; }</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #008000">// PostgerSQL only</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #267F99">TestEnum</span><span style="color: #000000">[] </span><span style="color: #001080">ArrayFromText</span><span style="color: #000000"> { </span><span style="color: #0000FF">get</span><span style="color: #000000">; </span><span style="color: #0000FF">set</span><span style="color: #000000">; }</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #008000">// PostgerSQL only</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #267F99">TestEnum</span><span style="color: #000000">[] </span><span style="color: #001080">ArrayFromInt</span><span style="color: #000000"> { </span><span style="color: #0000FF">get</span><span style="color: #000000">; </span><span style="color: #0000FF">set</span><span style="color: #000000">; }</span></span>
<span class=line><span style="color: #000000">}</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Map Enum types from text or from integer columns in the database.</span></span>
<span class=line><span style="color: #008000">// Null values are also supported.</span></span>
<span class=line><span style="color: #008000">// You can also map arrays of enums (PostgreSQL only).</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">instances</span><span style="color: #000000"> = </span><span style="color: #001080">connection</span><span style="color: #000000">.</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;</span><span style="color: #267F99">TestEnumClass</span><span style="color: #000000">>(</span><span style="color: #A31515">@"</span></span>
<span class=line><span style="color: #A31515">    select </span></span>
<span class=line><span style="color: #A31515">        from_text, </span></span>
<span class=line><span style="color: #A31515">        from_int,</span></span>
<span class=line><span style="color: #A31515">        ARRAY['Value1', 'Value2'] as array_from_text,</span></span>
<span class=line><span style="color: #A31515">        ARRAY[0, 1] as array_from_int</span></span>
<span class=line><span style="color: #A31515">    from (</span></span>
<span class=line><span style="color: #A31515">    values </span></span>
<span class=line><span style="color: #A31515">        ('Value1', 0),</span></span>
<span class=line><span style="color: #A31515">        ('Value2', 1)</span></span>
<span class=line><span style="color: #A31515">    ) t(from_text, from_int,)"</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">ToArray</span><span style="color: #000000">();</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">// first row</span></span>
<span class=line><span style="color: #001080">Assert</span><span style="color: #000000">.</span><span style="color: #795E26">Equal</span><span style="color: #000000">(</span><span style="color: #001080">TestEnum</span><span style="color: #000000">.</span><span style="color: #001080">Value1</span><span style="color: #000000">, </span><span style="color: #001080">instances</span><span style="color: #000000">[</span><span style="color: #098658">0</span><span style="color: #000000">].</span><span style="color: #001080">FromText</span><span style="color: #000000">);</span></span>
<span class=line><span style="color: #001080">Assert</span><span style="color: #000000">.</span><span style="color: #795E26">Equal</span><span style="color: #000000">(</span><span style="color: #001080">TestEnum</span><span style="color: #000000">.</span><span style="color: #001080">Value1</span><span style="color: #000000">, </span><span style="color: #001080">instances</span><span style="color: #000000">[</span><span style="color: #098658">0</span><span style="color: #000000">].</span><span style="color: #001080">FromInt</span><span style="color: #000000">);</span></span>
<span class=line><span style="color: #008000">// second row</span></span>
<span class=line><span style="color: #001080">Assert</span><span style="color: #000000">.</span><span style="color: #795E26">Equal</span><span style="color: #000000">(</span><span style="color: #001080">TestEnum</span><span style="color: #000000">.</span><span style="color: #001080">Value2</span><span style="color: #000000">, </span><span style="color: #001080">instances</span><span style="color: #000000">[</span><span style="color: #098658">1</span><span style="color: #000000">].</span><span style="color: #001080">FromText</span><span style="color: #000000">);</span></span>
<span class=line><span style="color: #001080">Assert</span><span style="color: #000000">.</span><span style="color: #795E26">Equal</span><span style="color: #000000">(</span><span style="color: #001080">TestEnum</span><span style="color: #000000">.</span><span style="color: #001080">Value2</span><span style="color: #000000">, </span><span style="color: #001080">instances</span><span style="color: #000000">[</span><span style="color: #098658">1</span><span style="color: #000000">].</span><span style="color: #001080">FromInt</span><span style="color: #000000">);</span></span>
<span class=line><span style="color: #008000">// arrays (PostgreSQL only)</span></span>
<span class=line><span style="color: #001080">Assert</span><span style="color: #000000">.</span><span style="color: #795E26">Equal</span><span style="color: #000000">(</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #0000FF">new</span><span style="color: #000000">[] { </span><span style="color: #001080">TestEnum</span><span style="color: #000000">.</span><span style="color: #001080">Value1</span><span style="color: #000000">, </span><span style="color: #001080">TestEnum</span><span style="color: #000000">.</span><span style="color: #001080">Value2</span><span style="color: #000000"> }, </span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #001080">instances</span><span style="color: #000000">[</span><span style="color: #098658">0</span><span style="color: #000000">].</span><span style="color: #001080">ArrayFromText</span><span style="color: #000000">);</span></span>
<span class=line><span style="color: #001080">Assert</span><span style="color: #000000">.</span><span style="color: #795E26">Equal</span><span style="color: #000000">(</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #0000FF">new</span><span style="color: #000000">[] { </span><span style="color: #001080">TestEnum</span><span style="color: #000000">.</span><span style="color: #001080">Value1</span><span style="color: #000000">, </span><span style="color: #001080">TestEnum</span><span style="color: #000000">.</span><span style="color: #001080">Value2</span><span style="color: #000000"> }, </span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #001080">instances</span><span style="color: #000000">[</span><span style="color: #098658">0</span><span style="color: #000000">].</span><span style="color: #001080">ArrayFromInt</span><span style="color: #000000">);</span></span></code></pre></div></div><div class="prepared mb-4 container d-flex flex-column align-items-center svelte-ryutlp"id=prepared><div class="lead text-center svelte-ryutlp"><a href=#prepared class="bookmark-target svelte-ryutlp"><i class="bi bi-link-45deg"></i></a> Run your statement in a prepared mode</div><div class="subtitle mb-3 mt-1 mx-auto"style="max-width: 522px;">If you need to run some or all commands in a prepared mode, you can do that by using the <code>Prepared</code> method.<br><br>Prepared mode is useful for PostgreSQL databases because explicit command preparation is <a href=https://www.npgsql.org/doc/prepare.html#automatic-preparation>recommended for better performance.</a></div><div class="code csharp mx-auto"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">System</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">Linq</span><span style="color: #E6E6E6">;</span></span>
<span class=line><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6">;</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Following query will be executed in prepared mode.</span></span>
<span class=line><span style="color: #6A9955">// Any Read, ReadAsync, Execute or ExecuteAsync method </span></span>
<span class=line><span style="color: #6A9955">// after Prepared() will be executed in prepared mode.</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> (</span><span style="color: #9CDCFE">p1</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">p2</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">p3</span><span style="color: #E6E6E6">) </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Prepared</span><span style="color: #E6E6E6">()</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">WithParameters</span><span style="color: #E6E6E6">(</span><span style="color: #B5CEA8">1</span><span style="color: #E6E6E6">, </span><span style="color: #B5CEA8">2</span><span style="color: #E6E6E6">, </span><span style="color: #B5CEA8">3</span><span style="color: #E6E6E6">) </span><span style="color: #6A9955">// parameters are positional</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;</span><span style="color: #569CD6">int</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">int</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">int</span><span style="color: #E6E6E6">>(</span><span style="color: #CE9178">"select @p1, @p2, @p3"</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Single</span><span style="color: #E6E6E6">();</span></span>
<span class=line></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Set global options in your startup </span></span>
<span class=line><span style="color: #6A9955">// to always execute in prepared mode (default is false).</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #9CDCFE">NormOptions</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Configure</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">options</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span></span>
<span class=line><span style="color: #E6E6E6">{</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">options</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Prepared</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">true</span><span style="color: #E6E6E6">;</span></span>
<span class=line><span style="color: #E6E6E6">});</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">// No need to call Prepared() anymore, every call is prepared.</span></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> (</span><span style="color: #9CDCFE">p1</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">p2</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">p3</span><span style="color: #E6E6E6">) </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">WithParameters</span><span style="color: #E6E6E6">(</span><span style="color: #B5CEA8">1</span><span style="color: #E6E6E6">, </span><span style="color: #B5CEA8">2</span><span style="color: #E6E6E6">, </span><span style="color: #B5CEA8">3</span><span style="color: #E6E6E6">) </span><span style="color: #6A9955">// parameters are positional</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;</span><span style="color: #569CD6">int</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">int</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">int</span><span style="color: #E6E6E6">>(</span><span style="color: #CE9178">"select @p1, @p2, @p3"</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Single</span><span style="color: #E6E6E6">();</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">System</span><span style="color: #000000">.</span><span style="color: #267F99">Linq</span><span style="color: #000000">;</span></span>
<span class=line><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000">;</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Following query will be executed in prepared mode.</span></span>
<span class=line><span style="color: #008000">// Any Read, ReadAsync, Execute or ExecuteAsync method </span></span>
<span class=line><span style="color: #008000">// after Prepared() will be executed in prepared mode.</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> (</span><span style="color: #001080">p1</span><span style="color: #000000">, </span><span style="color: #001080">p2</span><span style="color: #000000">, </span><span style="color: #001080">p3</span><span style="color: #000000">) = </span><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Prepared</span><span style="color: #000000">()</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">WithParameters</span><span style="color: #000000">(</span><span style="color: #098658">1</span><span style="color: #000000">, </span><span style="color: #098658">2</span><span style="color: #000000">, </span><span style="color: #098658">3</span><span style="color: #000000">) </span><span style="color: #008000">// parameters are positional</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">int</span><span style="color: #000000">, </span><span style="color: #0000FF">int</span><span style="color: #000000">, </span><span style="color: #0000FF">int</span><span style="color: #000000">>(</span><span style="color: #A31515">"select @p1, @p2, @p3"</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Single</span><span style="color: #000000">();</span></span>
<span class=line></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Set global options in your startup </span></span>
<span class=line><span style="color: #008000">// to always execute in prepared mode (default is false).</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #001080">NormOptions</span><span style="color: #000000">.</span><span style="color: #795E26">Configure</span><span style="color: #000000">(</span><span style="color: #001080">options</span><span style="color: #000000"> =></span></span>
<span class=line><span style="color: #000000">{</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #001080">options</span><span style="color: #000000">.</span><span style="color: #001080">Prepared</span><span style="color: #000000"> = </span><span style="color: #0000FF">true</span><span style="color: #000000">;</span></span>
<span class=line><span style="color: #000000">});</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">// No need to call Prepared() anymore, every call is prepared.</span></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> (</span><span style="color: #001080">p1</span><span style="color: #000000">, </span><span style="color: #001080">p2</span><span style="color: #000000">, </span><span style="color: #001080">p3</span><span style="color: #000000">) = </span><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">WithParameters</span><span style="color: #000000">(</span><span style="color: #098658">1</span><span style="color: #000000">, </span><span style="color: #098658">2</span><span style="color: #000000">, </span><span style="color: #098658">3</span><span style="color: #000000">) </span><span style="color: #008000">// parameters are positional</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">int</span><span style="color: #000000">, </span><span style="color: #0000FF">int</span><span style="color: #000000">, </span><span style="color: #0000FF">int</span><span style="color: #000000">>(</span><span style="color: #A31515">"select @p1, @p2, @p3"</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Single</span><span style="color: #000000">();</span></span></code></pre></div></div><div class="postgres-optimizations mb-4 container d-flex flex-column align-items-center svelte-ryutlp"id=postgres-optimizations><div class="lead text-center svelte-ryutlp"><a href=#postgres-optimizations class="bookmark-target svelte-ryutlp"><i class="bi bi-link-45deg"></i></a> Take advantage of specific PostgreSQL optimizations</div><div class="subtitle mb-3 mt-1 mx-auto"style="max-width: 641px;">Norm has several built-in support for PostgreSQL-specific optimizations. You can even say it was made for PostgreSQL (although it works with other databases as well).<br><br>For example, you can use specific PostgreSQL paremeters format and disable Npgsql query rewriting. See <a href=https://www.roji.org/parameters-batching-and-sql-rewriting#parameters>this article.</a><br><br>You can also skip Npgsql parsing type parsing and use <a href=https://www.npgsql.org/doc/api/Npgsql.NpgsqlCommand.html#Npgsql_NpgsqlCommand_AllResultTypesAreUnknown>direct PostgreSQL text format</a> instead.</div><div class="code csharp mx-auto"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">System</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">Linq</span><span style="color: #E6E6E6">;</span></span>
<span class=line><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6">;</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// When using PostgreSQL, you can use PostgreSQL paremeter format.</span></span>
<span class=line><span style="color: #6A9955">// This will allow Npgsql to skip query rewriting.</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> (</span><span style="color: #9CDCFE">s</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">i</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">b</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">d</span><span style="color: #E6E6E6">) </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #6A9955">// parameters are positional</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">WithParameters</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"str"</span><span style="color: #E6E6E6">, </span><span style="color: #B5CEA8">999</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">true</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">DateTime</span><span style="color: #E6E6E6">(</span><span style="color: #B5CEA8">1977</span><span style="color: #E6E6E6">, </span><span style="color: #B5CEA8">5</span><span style="color: #E6E6E6">, </span><span style="color: #B5CEA8">19</span><span style="color: #E6E6E6">))</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;</span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">int</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">bool</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">DateTime</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">>(</span><span style="color: #CE9178">"select $1, $2, $3, $4"</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Single</span><span style="color: #E6E6E6">();</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// You can globally disable query rewriting by setting </span></span>
<span class=line><span style="color: #6A9955">// NpgsqlEnableSqlRewriting to false in your startup.</span></span>
<span class=line><span style="color: #6A9955">// This will ensure that all queries are intact by underlying Npgsql driver </span></span>
<span class=line><span style="color: #6A9955">// (skips query rewriting). </span></span>
<span class=line><span style="color: #6A9955">// In that case, PostgreSQL paremeter format is required always.</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #9CDCFE">NormOptions</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Configure</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">options</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span></span>
<span class=line><span style="color: #E6E6E6">{</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">options</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">NpgsqlEnableSqlRewriting</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">false</span><span style="color: #E6E6E6">;</span></span>
<span class=line><span style="color: #E6E6E6">});</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Marks all of the query result columns as unknown.</span></span>
<span class=line><span style="color: #6A9955">// Unknown result columns are requested from PostgreSQL in text format, </span></span>
<span class=line><span style="color: #6A9955">// and Npgsql makes no attempt to parse them (accessible as strings).</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// This is useful when you want to avoid the overhead of parsing </span></span>
<span class=line><span style="color: #6A9955">// or you want to fetch some exotic type from PostgreSQL.</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Note: you can write your own parser with `WithReaderCallback` method.</span></span>
<span class=line><span style="color: #6A9955">// </span></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> (</span><span style="color: #9CDCFE">s</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">i</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">b</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">d</span><span style="color: #E6E6E6">) </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">WithUnknownResultType</span><span style="color: #E6E6E6">()</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">WithParameters</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"str"</span><span style="color: #E6E6E6">, </span><span style="color: #B5CEA8">999</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">true</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">DateTime</span><span style="color: #E6E6E6">(</span><span style="color: #B5CEA8">1977</span><span style="color: #E6E6E6">, </span><span style="color: #B5CEA8">5</span><span style="color: #E6E6E6">, </span><span style="color: #B5CEA8">19</span><span style="color: #E6E6E6">))</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;</span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">>(</span><span style="color: #CE9178">"select $1, $2, $3, $4"</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Single</span><span style="color: #E6E6E6">();</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Marks all of the query result columns as unknown, except first one.</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> (</span><span style="color: #9CDCFE">s</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">i</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">b</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">d</span><span style="color: #E6E6E6">) </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">WithUnknownResultType</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">false</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">true</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">true</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">true</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">WithParameters</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"str"</span><span style="color: #E6E6E6">, </span><span style="color: #B5CEA8">999</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">true</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">DateTime</span><span style="color: #E6E6E6">(</span><span style="color: #B5CEA8">1977</span><span style="color: #E6E6E6">, </span><span style="color: #B5CEA8">5</span><span style="color: #E6E6E6">, </span><span style="color: #B5CEA8">19</span><span style="color: #E6E6E6">))</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;</span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">>(</span><span style="color: #CE9178">"select $1, $2, $3, $4"</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Single</span><span style="color: #E6E6E6">();</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">System</span><span style="color: #000000">.</span><span style="color: #267F99">Linq</span><span style="color: #000000">;</span></span>
<span class=line><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000">;</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// When using PostgreSQL, you can use PostgreSQL paremeter format.</span></span>
<span class=line><span style="color: #008000">// This will allow Npgsql to skip query rewriting.</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> (</span><span style="color: #001080">s</span><span style="color: #000000">, </span><span style="color: #001080">i</span><span style="color: #000000">, </span><span style="color: #001080">b</span><span style="color: #000000">, </span><span style="color: #001080">d</span><span style="color: #000000">) = </span><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #008000">// parameters are positional</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">WithParameters</span><span style="color: #000000">(</span><span style="color: #A31515">"str"</span><span style="color: #000000">, </span><span style="color: #098658">999</span><span style="color: #000000">, </span><span style="color: #0000FF">true</span><span style="color: #000000">, </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">DateTime</span><span style="color: #000000">(</span><span style="color: #098658">1977</span><span style="color: #000000">, </span><span style="color: #098658">5</span><span style="color: #000000">, </span><span style="color: #098658">19</span><span style="color: #000000">))</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">string</span><span style="color: #000000">, </span><span style="color: #0000FF">int</span><span style="color: #000000">, </span><span style="color: #0000FF">bool</span><span style="color: #000000">, </span><span style="color: #267F99">DateTime</span><span style="color: #000000">, </span><span style="color: #0000FF">string</span><span style="color: #000000">>(</span><span style="color: #A31515">"select $1, $2, $3, $4"</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Single</span><span style="color: #000000">();</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// You can globally disable query rewriting by setting </span></span>
<span class=line><span style="color: #008000">// NpgsqlEnableSqlRewriting to false in your startup.</span></span>
<span class=line><span style="color: #008000">// This will ensure that all queries are intact by underlying Npgsql driver </span></span>
<span class=line><span style="color: #008000">// (skips query rewriting). </span></span>
<span class=line><span style="color: #008000">// In that case, PostgreSQL paremeter format is required always.</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #001080">NormOptions</span><span style="color: #000000">.</span><span style="color: #795E26">Configure</span><span style="color: #000000">(</span><span style="color: #001080">options</span><span style="color: #000000"> =></span></span>
<span class=line><span style="color: #000000">{</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #001080">options</span><span style="color: #000000">.</span><span style="color: #001080">NpgsqlEnableSqlRewriting</span><span style="color: #000000"> = </span><span style="color: #0000FF">false</span><span style="color: #000000">;</span></span>
<span class=line><span style="color: #000000">});</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Marks all of the query result columns as unknown.</span></span>
<span class=line><span style="color: #008000">// Unknown result columns are requested from PostgreSQL in text format, </span></span>
<span class=line><span style="color: #008000">// and Npgsql makes no attempt to parse them (accessible as strings).</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// This is useful when you want to avoid the overhead of parsing </span></span>
<span class=line><span style="color: #008000">// or you want to fetch some exotic type from PostgreSQL.</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Note: you can write your own parser with `WithReaderCallback` method.</span></span>
<span class=line><span style="color: #008000">// </span></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> (</span><span style="color: #001080">s</span><span style="color: #000000">, </span><span style="color: #001080">i</span><span style="color: #000000">, </span><span style="color: #001080">b</span><span style="color: #000000">, </span><span style="color: #001080">d</span><span style="color: #000000">) = </span><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">WithUnknownResultType</span><span style="color: #000000">()</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">WithParameters</span><span style="color: #000000">(</span><span style="color: #A31515">"str"</span><span style="color: #000000">, </span><span style="color: #098658">999</span><span style="color: #000000">, </span><span style="color: #0000FF">true</span><span style="color: #000000">, </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">DateTime</span><span style="color: #000000">(</span><span style="color: #098658">1977</span><span style="color: #000000">, </span><span style="color: #098658">5</span><span style="color: #000000">, </span><span style="color: #098658">19</span><span style="color: #000000">))</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">string</span><span style="color: #000000">, </span><span style="color: #0000FF">string</span><span style="color: #000000">, </span><span style="color: #0000FF">string</span><span style="color: #000000">, </span><span style="color: #0000FF">string</span><span style="color: #000000">, </span><span style="color: #0000FF">string</span><span style="color: #000000">>(</span><span style="color: #A31515">"select $1, $2, $3, $4"</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Single</span><span style="color: #000000">();</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Marks all of the query result columns as unknown, except first one.</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> (</span><span style="color: #001080">s</span><span style="color: #000000">, </span><span style="color: #001080">i</span><span style="color: #000000">, </span><span style="color: #001080">b</span><span style="color: #000000">, </span><span style="color: #001080">d</span><span style="color: #000000">) = </span><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">WithUnknownResultType</span><span style="color: #000000">(</span><span style="color: #0000FF">false</span><span style="color: #000000">, </span><span style="color: #0000FF">true</span><span style="color: #000000">, </span><span style="color: #0000FF">true</span><span style="color: #000000">, </span><span style="color: #0000FF">true</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">WithParameters</span><span style="color: #000000">(</span><span style="color: #A31515">"str"</span><span style="color: #000000">, </span><span style="color: #098658">999</span><span style="color: #000000">, </span><span style="color: #0000FF">true</span><span style="color: #000000">, </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">DateTime</span><span style="color: #000000">(</span><span style="color: #098658">1977</span><span style="color: #000000">, </span><span style="color: #098658">5</span><span style="color: #000000">, </span><span style="color: #098658">19</span><span style="color: #000000">))</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">string</span><span style="color: #000000">, </span><span style="color: #0000FF">string</span><span style="color: #000000">, </span><span style="color: #0000FF">string</span><span style="color: #000000">, </span><span style="color: #0000FF">string</span><span style="color: #000000">, </span><span style="color: #0000FF">string</span><span style="color: #000000">>(</span><span style="color: #A31515">"select $1, $2, $3, $4"</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Single</span><span style="color: #000000">();</span></span></code></pre></div></div><div class="reader-callback mb-4 container d-flex flex-column align-items-center svelte-ryutlp"id=reader-callback><div class="lead text-center svelte-ryutlp"><a href=#reader-callback class="bookmark-target svelte-ryutlp"><i class="bi bi-link-45deg"></i></a> Access to low-level data reader</div><div class="subtitle mb-3 mt-1 mx-auto"style="max-width: 688px;">You can gain access to the low-level data reader object (type <code>DbDataReader</code>) - created for every query command. Reader callback accepts returning values and passes them down to the default mapper.<br>This provides the ability to do some interesting stuff, like:<br>- Do some custom mapping.<br>- Return alternative values.<br>- Create complex objects with different reader values, etc.<br><br>The following example shows how to return a value incremented by 1 a) for all columns at the first position and b) for all columns with the name "i".</div><div class="code csharp mx-auto"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">System</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">Linq</span><span style="color: #E6E6E6">;</span></span>
<span class=line><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6">;</span></span>
<span class=line></span>
<span class=line><span style="color: #569CD6">const</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">query</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">@"</span></span>
<span class=line><span style="color: #CE9178">        select * from (values </span></span>
<span class=line><span style="color: #CE9178">            (1, 1),</span></span>
<span class=line><span style="color: #CE9178">            (2, 2),</span></span>
<span class=line><span style="color: #CE9178">            (3, 3)</span></span>
<span class=line><span style="color: #CE9178">        ) t(i, j)"</span><span style="color: #E6E6E6">;</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// You can gain access to the underlying DbDataReader by </span></span>
<span class=line><span style="color: #6A9955">// using the WithReaderCallback method.</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// This method allows you to perform any custom processing on the DbDataReader.</span></span>
<span class=line><span style="color: #6A9955">// Return null to indicate that the default value should be used.</span></span>
<span class=line><span style="color: #6A9955">// If you need to return a literal null value, return `DBNull.Value`.</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// This example will i and j tuple, where i value is incremented by 1.</span></span>
<span class=line><span style="color: #6A9955">// </span></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">result</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">WithReaderCallback</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">r</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">r</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Ordinal</span><span style="color: #E6E6E6"> </span><span style="color: #C586C0">switch</span></span>
<span class=line><span style="color: #E6E6E6">    {</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #B5CEA8">0</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">r</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Reader</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">GetInt32</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">r</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Ordinal</span><span style="color: #E6E6E6">) </span><span style="color: #D4D4D4">+</span><span style="color: #E6E6E6"> </span><span style="color: #B5CEA8">1</span><span style="color: #E6E6E6">,</span></span>
<span class=line><span style="color: #E6E6E6">        _ </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">null</span><span style="color: #E6E6E6"> </span><span style="color: #6A9955">// default value</span></span>
<span class=line><span style="color: #E6E6E6">    })</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;(</span><span style="color: #569CD6">int</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">i</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">int</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">j</span><span style="color: #E6E6E6">)>(</span><span style="color: #9CDCFE">query</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">ToArray</span><span style="color: #E6E6E6">();</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// You can also use the column name instead of the ordinal position.</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">result</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">WithReaderCallback</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">arg</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">arg</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Name</span><span style="color: #E6E6E6"> </span><span style="color: #C586C0">switch</span></span>
<span class=line><span style="color: #E6E6E6">    {</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #CE9178">"i"</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">arg</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Reader</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">GetInt32</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">arg</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Ordinal</span><span style="color: #E6E6E6">) </span><span style="color: #D4D4D4">+</span><span style="color: #E6E6E6"> </span><span style="color: #B5CEA8">1</span><span style="color: #E6E6E6">,</span></span>
<span class=line><span style="color: #E6E6E6">        _ </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">null</span><span style="color: #E6E6E6"> </span><span style="color: #6A9955">// default value</span></span>
<span class=line><span style="color: #E6E6E6">    })</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;(</span><span style="color: #569CD6">int</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">i</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">int</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">j</span><span style="color: #E6E6E6">)>(</span><span style="color: #9CDCFE">query</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">ToArray</span><span style="color: #E6E6E6">();</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// You can also declare a method that implements the reader callback</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #569CD6">private</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">object</span><span style="color: #E6E6E6">? </span><span style="color: #DCDCAA">ReaderCallback</span><span style="color: #E6E6E6">((</span><span style="color: #569CD6">string</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">Name</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">int</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">Ordinal</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">DbDataReader</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">Reader</span><span style="color: #E6E6E6">) </span><span style="color: #9CDCFE">arg</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">{</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #C586C0">return</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">arg</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">arg</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Name</span><span style="color: #E6E6E6"> </span><span style="color: #C586C0">switch</span></span>
<span class=line><span style="color: #E6E6E6">    {</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #CE9178">"i"</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">arg</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Reader</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">GetInt32</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">arg</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Ordinal</span><span style="color: #E6E6E6">) </span><span style="color: #D4D4D4">+</span><span style="color: #E6E6E6"> </span><span style="color: #B5CEA8">1</span><span style="color: #E6E6E6">,</span></span>
<span class=line><span style="color: #E6E6E6">        _ </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">null</span><span style="color: #E6E6E6"> </span><span style="color: #6A9955">// default value</span></span>
<span class=line><span style="color: #E6E6E6">    }</span></span>
<span class=line><span style="color: #E6E6E6">}</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">// map reader callback to method</span></span>
<span class=line><span style="color: #9CDCFE">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">result</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">WithReaderCallback</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">ReaderCallback</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #6A9955">// map to anonymous type by name</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> { </span><span style="color: #9CDCFE">i</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">default</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">int</span><span style="color: #E6E6E6">), </span><span style="color: #9CDCFE">j</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">default</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">int</span><span style="color: #E6E6E6">) }, </span><span style="color: #9CDCFE">query</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">ToArray</span><span style="color: #E6E6E6">();</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">System</span><span style="color: #000000">.</span><span style="color: #267F99">Linq</span><span style="color: #000000">;</span></span>
<span class=line><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000">;</span></span>
<span class=line></span>
<span class=line><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0000FF">string</span><span style="color: #000000"> </span><span style="color: #001080">query</span><span style="color: #000000"> = </span><span style="color: #A31515">@"</span></span>
<span class=line><span style="color: #A31515">        select * from (values </span></span>
<span class=line><span style="color: #A31515">            (1, 1),</span></span>
<span class=line><span style="color: #A31515">            (2, 2),</span></span>
<span class=line><span style="color: #A31515">            (3, 3)</span></span>
<span class=line><span style="color: #A31515">        ) t(i, j)"</span><span style="color: #000000">;</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// You can gain access to the underlying DbDataReader by </span></span>
<span class=line><span style="color: #008000">// using the WithReaderCallback method.</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// This method allows you to perform any custom processing on the DbDataReader.</span></span>
<span class=line><span style="color: #008000">// Return null to indicate that the default value should be used.</span></span>
<span class=line><span style="color: #008000">// If you need to return a literal null value, return `DBNull.Value`.</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// This example will i and j tuple, where i value is incremented by 1.</span></span>
<span class=line><span style="color: #008000">// </span></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">result</span><span style="color: #000000"> = </span><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">WithReaderCallback</span><span style="color: #000000">(</span><span style="color: #001080">r</span><span style="color: #000000"> => </span><span style="color: #001080">r</span><span style="color: #000000">.</span><span style="color: #001080">Ordinal</span><span style="color: #000000"> </span><span style="color: #AF00DB">switch</span></span>
<span class=line><span style="color: #000000">    {</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #098658">0</span><span style="color: #000000"> => </span><span style="color: #001080">r</span><span style="color: #000000">.</span><span style="color: #001080">Reader</span><span style="color: #000000">.</span><span style="color: #795E26">GetInt32</span><span style="color: #000000">(</span><span style="color: #001080">r</span><span style="color: #000000">.</span><span style="color: #001080">Ordinal</span><span style="color: #000000">) + </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class=line><span style="color: #000000">        _ => </span><span style="color: #0000FF">null</span><span style="color: #000000"> </span><span style="color: #008000">// default value</span></span>
<span class=line><span style="color: #000000">    })</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;(</span><span style="color: #0000FF">int</span><span style="color: #000000"> </span><span style="color: #001080">i</span><span style="color: #000000">, </span><span style="color: #0000FF">int</span><span style="color: #000000"> </span><span style="color: #001080">j</span><span style="color: #000000">)>(</span><span style="color: #001080">query</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">ToArray</span><span style="color: #000000">();</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// You can also use the column name instead of the ordinal position.</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">result</span><span style="color: #000000"> = </span><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">WithReaderCallback</span><span style="color: #000000">(</span><span style="color: #001080">arg</span><span style="color: #000000"> => </span><span style="color: #001080">arg</span><span style="color: #000000">.</span><span style="color: #001080">Name</span><span style="color: #000000"> </span><span style="color: #AF00DB">switch</span></span>
<span class=line><span style="color: #000000">    {</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #A31515">"i"</span><span style="color: #000000"> => </span><span style="color: #001080">arg</span><span style="color: #000000">.</span><span style="color: #001080">Reader</span><span style="color: #000000">.</span><span style="color: #795E26">GetInt32</span><span style="color: #000000">(</span><span style="color: #001080">arg</span><span style="color: #000000">.</span><span style="color: #001080">Ordinal</span><span style="color: #000000">) + </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class=line><span style="color: #000000">        _ => </span><span style="color: #0000FF">null</span><span style="color: #000000"> </span><span style="color: #008000">// default value</span></span>
<span class=line><span style="color: #000000">    })</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;(</span><span style="color: #0000FF">int</span><span style="color: #000000"> </span><span style="color: #001080">i</span><span style="color: #000000">, </span><span style="color: #0000FF">int</span><span style="color: #000000"> </span><span style="color: #001080">j</span><span style="color: #000000">)>(</span><span style="color: #001080">query</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">ToArray</span><span style="color: #000000">();</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// You can also declare a method that implements the reader callback</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #0000FF">private</span><span style="color: #000000"> </span><span style="color: #0000FF">object</span><span style="color: #000000">? </span><span style="color: #795E26">ReaderCallback</span><span style="color: #000000">((</span><span style="color: #0000FF">string</span><span style="color: #000000"> </span><span style="color: #001080">Name</span><span style="color: #000000">, </span><span style="color: #0000FF">int</span><span style="color: #000000"> </span><span style="color: #001080">Ordinal</span><span style="color: #000000">, </span><span style="color: #267F99">DbDataReader</span><span style="color: #000000"> </span><span style="color: #001080">Reader</span><span style="color: #000000">) </span><span style="color: #001080">arg</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">{</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">arg</span><span style="color: #000000"> => </span><span style="color: #001080">arg</span><span style="color: #000000">.</span><span style="color: #001080">Name</span><span style="color: #000000"> </span><span style="color: #AF00DB">switch</span></span>
<span class=line><span style="color: #000000">    {</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #A31515">"i"</span><span style="color: #000000"> => </span><span style="color: #001080">arg</span><span style="color: #000000">.</span><span style="color: #001080">Reader</span><span style="color: #000000">.</span><span style="color: #795E26">GetInt32</span><span style="color: #000000">(</span><span style="color: #001080">arg</span><span style="color: #000000">.</span><span style="color: #001080">Ordinal</span><span style="color: #000000">) + </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class=line><span style="color: #000000">        _ => </span><span style="color: #0000FF">null</span><span style="color: #000000"> </span><span style="color: #008000">// default value</span></span>
<span class=line><span style="color: #000000">    }</span></span>
<span class=line><span style="color: #000000">}</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">// map reader callback to method</span></span>
<span class=line><span style="color: #001080">var</span><span style="color: #000000"> </span><span style="color: #001080">result</span><span style="color: #000000"> = </span><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">WithReaderCallback</span><span style="color: #000000">(</span><span style="color: #001080">ReaderCallback</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #008000">// map to anonymous type by name</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Read</span><span style="color: #000000">(</span><span style="color: #0000FF">new</span><span style="color: #000000"> { </span><span style="color: #001080">i</span><span style="color: #000000"> = </span><span style="color: #0000FF">default</span><span style="color: #000000">(</span><span style="color: #0000FF">int</span><span style="color: #000000">), </span><span style="color: #001080">j</span><span style="color: #000000"> = </span><span style="color: #0000FF">default</span><span style="color: #000000">(</span><span style="color: #0000FF">int</span><span style="color: #000000">) }, </span><span style="color: #001080">query</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">ToArray</span><span style="color: #000000">();</span></span></code></pre></div></div><div class="custom-mapping mb-4 container d-flex flex-column align-items-center svelte-ryutlp"id=custom-mapping><div class="lead text-center svelte-ryutlp"><a href=#custom-mapping class="bookmark-target svelte-ryutlp"><i class="bi bi-link-45deg"></i></a> Implement your own custom mapping for entire application</div><div class="subtitle mb-3 mt-1 mx-auto"style="max-width: 717px;">You can configure a global reader callback that will be used for all queries in your application.<br><br>This is useful when you want to implement your custom mapping for the entire application.<br>For example, I want all database type <code>json</code> to be mapped to <code>JsonObject</code> type always.<br><br>Here is how to do that:</div><div class="code csharp mx-auto"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">System</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">Linq</span><span style="color: #E6E6E6">;</span></span>
<span class=line><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">System</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">Text</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">Json</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">Nodes</span><span style="color: #E6E6E6">;</span></span>
<span class=line><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6">;</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// You can also set a global reader callback</span></span>
<span class=line><span style="color: #6A9955">// that will be executed for every query in the application.</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// This is a great way to implement custom type mapping.</span></span>
<span class=line><span style="color: #6A9955">// Here is an example of how to map all database `json` types to `JsonObject`</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">// Reader callback can be in a expression method instead of a lambda function</span></span>
<span class=line><span style="color: #569CD6">private</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">object</span><span style="color: #E6E6E6">? </span><span style="color: #DCDCAA">ReaderCallback</span><span style="color: #E6E6E6">((</span><span style="color: #569CD6">string</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">Name</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">int</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">Ordinal</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">DbDataReader</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">Reader</span><span style="color: #E6E6E6">) </span><span style="color: #9CDCFE">arg</span><span style="color: #E6E6E6">) </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #6A9955">// switch over the column type</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">arg</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Reader</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">GetDataTypeName</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">arg</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Ordinal</span><span style="color: #E6E6E6">) </span><span style="color: #C586C0">switch</span></span>
<span class=line><span style="color: #E6E6E6">{</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #6A9955">// if the column type is json, then convert it to JsonObject</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #CE9178">"json"</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">JsonNode</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Parse</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">arg</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Reader</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">GetString</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">arg</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Ordinal</span><span style="color: #E6E6E6">))</span><span style="color: #D4D4D4">?</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">AsObject</span><span style="color: #E6E6E6">(),</span></span>
<span class=line><span style="color: #E6E6E6">    _ </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">null</span><span style="color: #E6E6E6"> </span><span style="color: #6A9955">// default value</span></span>
<span class=line><span style="color: #E6E6E6">};</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">// Set the option in the your startup code...</span></span>
<span class=line><span style="color: #9CDCFE">NormOptions</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Configure</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">options</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">options</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">DbReaderCallback</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">ReaderCallback</span><span style="color: #E6E6E6">);</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">// example class (I is string and J is JsonObject)</span></span>
<span class=line><span style="color: #569CD6">private</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">class</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">JsonTest</span></span>
<span class=line><span style="color: #E6E6E6">{</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">I</span><span style="color: #E6E6E6"> { </span><span style="color: #569CD6">get</span><span style="color: #E6E6E6">; </span><span style="color: #569CD6">set</span><span style="color: #E6E6E6">; }</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">JsonObject</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">J</span><span style="color: #E6E6E6"> { </span><span style="color: #569CD6">get</span><span style="color: #E6E6E6">; </span><span style="color: #569CD6">set</span><span style="color: #E6E6E6">; }</span></span>
<span class=line><span style="color: #E6E6E6">}</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">// example query</span></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">result</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;</span><span style="color: #4EC9B0">JsonTest</span><span style="color: #E6E6E6">>(</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #6A9955">// column i is a text and column j is a json</span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #CE9178">"select '{</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">a</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">: 1}'::text as i, '{</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">a</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">: 1}'::json as j"</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Single</span><span style="color: #E6E6E6">();</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">// assertion</span></span>
<span class=line><span style="color: #9CDCFE">Assert</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">IsType</span><span style="color: #E6E6E6">&lt;</span><span style="color: #4EC9B0">JsonObject</span><span style="color: #E6E6E6">>(</span><span style="color: #9CDCFE">result</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">J</span><span style="color: #E6E6E6">); </span><span style="color: #6A9955">// property J is JsonObject</span></span>
<span class=line><span style="color: #9CDCFE">Assert</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Equal</span><span style="color: #E6E6E6">(</span><span style="color: #B5CEA8">1</span><span style="color: #E6E6E6">, (</span><span style="color: #569CD6">int</span><span style="color: #E6E6E6">)</span><span style="color: #9CDCFE">result</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">J</span><span style="color: #E6E6E6">[</span><span style="color: #CE9178">"a"</span><span style="color: #E6E6E6">]); </span><span style="color: #6A9955">// property J has a property "a" with value 1</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">System</span><span style="color: #000000">.</span><span style="color: #267F99">Linq</span><span style="color: #000000">;</span></span>
<span class=line><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">System</span><span style="color: #000000">.</span><span style="color: #267F99">Text</span><span style="color: #000000">.</span><span style="color: #267F99">Json</span><span style="color: #000000">.</span><span style="color: #267F99">Nodes</span><span style="color: #000000">;</span></span>
<span class=line><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000">;</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// You can also set a global reader callback</span></span>
<span class=line><span style="color: #008000">// that will be executed for every query in the application.</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// This is a great way to implement custom type mapping.</span></span>
<span class=line><span style="color: #008000">// Here is an example of how to map all database `json` types to `JsonObject`</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">// Reader callback can be in a expression method instead of a lambda function</span></span>
<span class=line><span style="color: #0000FF">private</span><span style="color: #000000"> </span><span style="color: #0000FF">object</span><span style="color: #000000">? </span><span style="color: #795E26">ReaderCallback</span><span style="color: #000000">((</span><span style="color: #0000FF">string</span><span style="color: #000000"> </span><span style="color: #001080">Name</span><span style="color: #000000">, </span><span style="color: #0000FF">int</span><span style="color: #000000"> </span><span style="color: #001080">Ordinal</span><span style="color: #000000">, </span><span style="color: #267F99">DbDataReader</span><span style="color: #000000"> </span><span style="color: #001080">Reader</span><span style="color: #000000">) </span><span style="color: #001080">arg</span><span style="color: #000000">) => </span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #008000">// switch over the column type</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #001080">arg</span><span style="color: #000000">.</span><span style="color: #001080">Reader</span><span style="color: #000000">.</span><span style="color: #795E26">GetDataTypeName</span><span style="color: #000000">(</span><span style="color: #001080">arg</span><span style="color: #000000">.</span><span style="color: #001080">Ordinal</span><span style="color: #000000">) </span><span style="color: #AF00DB">switch</span></span>
<span class=line><span style="color: #000000">{</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #008000">// if the column type is json, then convert it to JsonObject</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #A31515">"json"</span><span style="color: #000000"> => </span><span style="color: #001080">JsonNode</span><span style="color: #000000">.</span><span style="color: #795E26">Parse</span><span style="color: #000000">(</span><span style="color: #001080">arg</span><span style="color: #000000">.</span><span style="color: #001080">Reader</span><span style="color: #000000">.</span><span style="color: #795E26">GetString</span><span style="color: #000000">(</span><span style="color: #001080">arg</span><span style="color: #000000">.</span><span style="color: #001080">Ordinal</span><span style="color: #000000">))?.</span><span style="color: #795E26">AsObject</span><span style="color: #000000">(),</span></span>
<span class=line><span style="color: #000000">    _ => </span><span style="color: #0000FF">null</span><span style="color: #000000"> </span><span style="color: #008000">// default value</span></span>
<span class=line><span style="color: #000000">};</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">// Set the option in the your startup code...</span></span>
<span class=line><span style="color: #001080">NormOptions</span><span style="color: #000000">.</span><span style="color: #795E26">Configure</span><span style="color: #000000">(</span><span style="color: #001080">options</span><span style="color: #000000"> => </span><span style="color: #001080">options</span><span style="color: #000000">.</span><span style="color: #001080">DbReaderCallback</span><span style="color: #000000"> = </span><span style="color: #001080">ReaderCallback</span><span style="color: #000000">);</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">// example class (I is string and J is JsonObject)</span></span>
<span class=line><span style="color: #0000FF">private</span><span style="color: #000000"> </span><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #267F99">JsonTest</span></span>
<span class=line><span style="color: #000000">{</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">string</span><span style="color: #000000"> </span><span style="color: #001080">I</span><span style="color: #000000"> { </span><span style="color: #0000FF">get</span><span style="color: #000000">; </span><span style="color: #0000FF">set</span><span style="color: #000000">; }</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #267F99">JsonObject</span><span style="color: #000000"> </span><span style="color: #001080">J</span><span style="color: #000000"> { </span><span style="color: #0000FF">get</span><span style="color: #000000">; </span><span style="color: #0000FF">set</span><span style="color: #000000">; }</span></span>
<span class=line><span style="color: #000000">}</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">// example query</span></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">result</span><span style="color: #000000"> = </span><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;</span><span style="color: #267F99">JsonTest</span><span style="color: #000000">>(</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #008000">// column i is a text and column j is a json</span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #A31515">"select '{</span><span style="color: #EE0000">\"</span><span style="color: #A31515">a</span><span style="color: #EE0000">\"</span><span style="color: #A31515">: 1}'::text as i, '{</span><span style="color: #EE0000">\"</span><span style="color: #A31515">a</span><span style="color: #EE0000">\"</span><span style="color: #A31515">: 1}'::json as j"</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Single</span><span style="color: #000000">();</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">// assertion</span></span>
<span class=line><span style="color: #001080">Assert</span><span style="color: #000000">.</span><span style="color: #795E26">IsType</span><span style="color: #000000">&lt;</span><span style="color: #267F99">JsonObject</span><span style="color: #000000">>(</span><span style="color: #001080">result</span><span style="color: #000000">.</span><span style="color: #001080">J</span><span style="color: #000000">); </span><span style="color: #008000">// property J is JsonObject</span></span>
<span class=line><span style="color: #001080">Assert</span><span style="color: #000000">.</span><span style="color: #795E26">Equal</span><span style="color: #000000">(</span><span style="color: #098658">1</span><span style="color: #000000">, (</span><span style="color: #0000FF">int</span><span style="color: #000000">)</span><span style="color: #001080">result</span><span style="color: #000000">.</span><span style="color: #001080">J</span><span style="color: #000000">[</span><span style="color: #A31515">"a"</span><span style="color: #000000">]); </span><span style="color: #008000">// property J has a property "a" with value 1</span></span></code></pre></div></div><div class="logging mb-4 container d-flex flex-column align-items-center svelte-ryutlp"id=logging><div class="lead text-center svelte-ryutlp"><a href=#logging class="bookmark-target svelte-ryutlp"><i class="bi bi-link-45deg"></i></a> Logging and analytics</div><div class="subtitle mb-3 mt-1 mx-auto"style="max-width: 644px;">Besides access to the data reader, you can gain access to the <code>DbCommand</code> object also, for all commands created by Norm.<br><br>By using global command callback, you can implement logging and analytics for all queries in your application, see the example below.<br><br>To improve application analytics, you can configure Norm to automatically add a comment header to every command text that can contain the following information:<br>- Command type and timeout.<br>- Exact source file name and line number (from compiler metadata).<br>- Parameter names and values.<br><br>This information will not only be visible when you log commands, but it will also be visible in your database administration tools such as Activity Monitor for SQL Server or pg_stat_activity on PostgreSQL which can be very useful for database administrators.</div><div class="code csharp mx-auto"><div class=toolbar><div class="copy-code bi-clipboard"data-bs-toggle=tooltip data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera"data-bs-toggle=tooltip data-bs-title="Copy code image to clipboard"></div></div><pre class=shiki style="background-color: #222222"><code class=code-highlight><span class=line><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">System</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">Linq</span><span style="color: #E6E6E6">;</span></span>
<span class=line><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6">;</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Set global handler in your startup </span></span>
<span class=line><span style="color: #6A9955">// for each DbCommand.created by Norm.</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// You can use this to log every query executed with Norm in your application.</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #9CDCFE">NormOptions</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Configure</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">options</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">options</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">DbCommandCallback</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">command</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #9CDCFE">logger</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">LogInformation</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">command</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">CommandText</span><span style="color: #E6E6E6">));</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">// ... later in your application</span></span>
<span class=line></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">result</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;</span><span style="color: #4EC9B0">FooBar</span><span style="color: #E6E6E6">>(</span><span style="color: #CE9178">@"select foo, bar from foo_bar where id = @id"</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">id</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">ToArray</span><span style="color: #E6E6E6">();</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Console output:</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// info: Application.Logger[0]</span></span>
<span class=line><span style="color: #6A9955">//       select foo, bar from foo_bar where id = @id</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Configure Norm to include comment header in each query </span></span>
<span class=line><span style="color: #6A9955">// that will include one or more entries like:</span></span>
<span class=line><span style="color: #6A9955">// - Comand type (Text, StoredProcedure, TableDirect) and timeout.</span></span>
<span class=line><span style="color: #6A9955">// - Method name and source file path from compiler metadata.</span></span>
<span class=line><span style="color: #6A9955">// - Parameter values.</span></span>
<span class=line><span style="color: #6A9955">// - Custom comments.</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Example:</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #9CDCFE">NormOptions</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Configure</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">options</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span></span>
<span class=line><span style="color: #E6E6E6">{</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">options</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">CommandCommentHeader</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Enabled</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">true</span><span style="color: #E6E6E6">;</span></span>
<span class=line><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">options</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">DbCommandCallback</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">command</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6">  </span></span>
<span class=line><span style="color: #E6E6E6">        </span><span style="color: #9CDCFE">logger</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">LogInformation</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">command</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">CommandText</span><span style="color: #E6E6E6">);</span></span>
<span class=line><span style="color: #E6E6E6">});</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">// ... later in your application</span></span>
<span class=line></span>
<span class=line><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">result</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;</span><span style="color: #4EC9B0">FooBar</span><span style="color: #E6E6E6">>(</span><span style="color: #CE9178">@"select foo, bar from foo_bar where id = @id"</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">id</span><span style="color: #E6E6E6">)</span></span>
<span class=line><span style="color: #E6E6E6">    .</span><span style="color: #DCDCAA">ToArray</span><span style="color: #E6E6E6">();</span></span>
<span class=line></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// Console output:</span></span>
<span class=line><span style="color: #6A9955">//</span></span>
<span class=line><span style="color: #6A9955">// info: Application.Logger[0]</span></span>
<span class=line><span style="color: #6A9955">//       /*</span></span>
<span class=line><span style="color: #6A9955">// Sql Text Command. Timeout: 30 seconds.</span></span>
<span class=line><span style="color: #6A9955">// at GetData in /home/user/project/MyModule.cs#10</span></span>
<span class=line><span style="color: #6A9955">// @id = 1</span></span>
<span class=line><span style="color: #6A9955">// */</span></span>
<span class=line><span style="color: #6A9955">// select foo, bar from foo_bar where id = @id</span></span>
<span class=line><span style="color: #6A9955">//</span></span></code></pre><pre class=shiki style="background-color: #FFFFFF"><code class=code-highlight><span class=line><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">System</span><span style="color: #000000">.</span><span style="color: #267F99">Linq</span><span style="color: #000000">;</span></span>
<span class=line><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000">;</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Set global handler in your startup </span></span>
<span class=line><span style="color: #008000">// for each DbCommand.created by Norm.</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// You can use this to log every query executed with Norm in your application.</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #001080">NormOptions</span><span style="color: #000000">.</span><span style="color: #795E26">Configure</span><span style="color: #000000">(</span><span style="color: #001080">options</span><span style="color: #000000"> => </span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #001080">options</span><span style="color: #000000">.</span><span style="color: #001080">DbCommandCallback</span><span style="color: #000000"> = </span><span style="color: #001080">command</span><span style="color: #000000"> => </span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #001080">logger</span><span style="color: #000000">.</span><span style="color: #795E26">LogInformation</span><span style="color: #000000">(</span><span style="color: #001080">command</span><span style="color: #000000">.</span><span style="color: #001080">CommandText</span><span style="color: #000000">));</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">// ... later in your application</span></span>
<span class=line></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">result</span><span style="color: #000000"> = </span><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;</span><span style="color: #267F99">FooBar</span><span style="color: #000000">>(</span><span style="color: #A31515">@"select foo, bar from foo_bar where id = @id"</span><span style="color: #000000">, </span><span style="color: #001080">id</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">ToArray</span><span style="color: #000000">();</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Console output:</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// info: Application.Logger[0]</span></span>
<span class=line><span style="color: #008000">//       select foo, bar from foo_bar where id = @id</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Configure Norm to include comment header in each query </span></span>
<span class=line><span style="color: #008000">// that will include one or more entries like:</span></span>
<span class=line><span style="color: #008000">// - Comand type (Text, StoredProcedure, TableDirect) and timeout.</span></span>
<span class=line><span style="color: #008000">// - Method name and source file path from compiler metadata.</span></span>
<span class=line><span style="color: #008000">// - Parameter values.</span></span>
<span class=line><span style="color: #008000">// - Custom comments.</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Example:</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #001080">NormOptions</span><span style="color: #000000">.</span><span style="color: #795E26">Configure</span><span style="color: #000000">(</span><span style="color: #001080">options</span><span style="color: #000000"> => </span></span>
<span class=line><span style="color: #000000">{</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #001080">options</span><span style="color: #000000">.</span><span style="color: #001080">CommandCommentHeader</span><span style="color: #000000">.</span><span style="color: #001080">Enabled</span><span style="color: #000000"> = </span><span style="color: #0000FF">true</span><span style="color: #000000">;</span></span>
<span class=line><span style="color: #000000">    </span><span style="color: #001080">options</span><span style="color: #000000">.</span><span style="color: #001080">DbCommandCallback</span><span style="color: #000000"> = </span><span style="color: #001080">command</span><span style="color: #000000"> =>  </span></span>
<span class=line><span style="color: #000000">        </span><span style="color: #001080">logger</span><span style="color: #000000">.</span><span style="color: #795E26">LogInformation</span><span style="color: #000000">(</span><span style="color: #001080">command</span><span style="color: #000000">.</span><span style="color: #001080">CommandText</span><span style="color: #000000">);</span></span>
<span class=line><span style="color: #000000">});</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">// ... later in your application</span></span>
<span class=line></span>
<span class=line><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">result</span><span style="color: #000000"> = </span><span style="color: #001080">connection</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;</span><span style="color: #267F99">FooBar</span><span style="color: #000000">>(</span><span style="color: #A31515">@"select foo, bar from foo_bar where id = @id"</span><span style="color: #000000">, </span><span style="color: #001080">id</span><span style="color: #000000">)</span></span>
<span class=line><span style="color: #000000">    .</span><span style="color: #795E26">ToArray</span><span style="color: #000000">();</span></span>
<span class=line></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// Console output:</span></span>
<span class=line><span style="color: #008000">//</span></span>
<span class=line><span style="color: #008000">// info: Application.Logger[0]</span></span>
<span class=line><span style="color: #008000">//       /*</span></span>
<span class=line><span style="color: #008000">// Sql Text Command. Timeout: 30 seconds.</span></span>
<span class=line><span style="color: #008000">// at GetData in /home/user/project/MyModule.cs#10</span></span>
<span class=line><span style="color: #008000">// @id = 1</span></span>
<span class=line><span style="color: #008000">// */</span></span>
<span class=line><span style="color: #008000">// select foo, bar from foo_bar where id = @id</span></span>
<span class=line><span style="color: #008000">//</span></span></code></pre></div></div></div><div class=mb-5></div><footer class="py-5 px-5 container svelte-1nj15r2"><div class=row><div class="col svelte-1nj15r2"><a class="btn-link rl-arrow svelte-1nj15r2"target=_blank href=https://github.com/vb-consulting/Norm.net>Repository <i class="bi bi-github"></i></a> <a class="btn-link rl-arrow svelte-1nj15r2"target=_blank href=https://github.com/vb-consulting/Norm.net/issues>Issues <i class="bi bi-github"></i></a> <a class="btn-link rl-arrow svelte-1nj15r2"target=_blank href=https://github.com/vb-consulting/Norm.net/discussions>Discussions <i class="bi bi-github"></i></a><div class=text-muted>© VB-Software & VB-Consulting 2023</div></div></div></footer></div><div class="rightside svelte-1qdmkpb"><div class=svelte-1qdmkpb><ul class="navbar-nav sidenav svelte-1qdmkpb"><li class="nav-txt-divider text-muted svelte-1qdmkpb"><hr class=svelte-1qdmkpb><span class=svelte-1qdmkpb>on this page</span><hr class=svelte-1qdmkpb><li class="nav-item right svelte-1qdmkpb bookmark-nav"data-id=installation title=installation><a class="nav-link auto-close svelte-1qdmkpb text-uppercase bookmark-link"href=#installation>installation</a><li class="nav-item right svelte-1qdmkpb bookmark-nav"data-id=compatibility title=compatibility><a class="nav-link auto-close svelte-1qdmkpb text-uppercase bookmark-link"href=#compatibility>compatibility</a><li class="nav-item right svelte-1qdmkpb bookmark-nav"data-id=perfomances title=perfomances><a class="nav-link auto-close svelte-1qdmkpb text-uppercase bookmark-link"href=#perfomances>perfomances</a><li class="nav-txt-divider text-muted svelte-1qdmkpb"><hr class=svelte-1qdmkpb><span class=svelte-1qdmkpb>examples</span><hr class=svelte-1qdmkpb><li class="nav-item right svelte-1qdmkpb bookmark-nav"data-id=tuples title="Name and value tuples"><a class="nav-link auto-close svelte-1qdmkpb text-uppercase bookmark-link"href=#tuples>Name and value tuples</a><li class="nav-item right svelte-1qdmkpb bookmark-nav"data-id=instances title=Instances><a class="nav-link auto-close svelte-1qdmkpb text-uppercase bookmark-link"href=#instances>Instances</a><li class="nav-item right svelte-1qdmkpb bookmark-nav"data-id=values title="Tuple values"><a class="nav-link auto-close svelte-1qdmkpb text-uppercase bookmark-link"href=#values>Tuple values</a><li class="nav-item right svelte-1qdmkpb bookmark-nav"data-id=named-tuples title="Named tuples"><a class="nav-link auto-close svelte-1qdmkpb text-uppercase bookmark-link"href=#named-tuples>Named tuples</a><li class="nav-item right svelte-1qdmkpb bookmark-nav"data-id=prototype-instances title="prototype instances"><a class="nav-link auto-close svelte-1qdmkpb text-uppercase bookmark-link"href=#prototype-instances>prototype instances</a><li class="nav-item right svelte-1qdmkpb bookmark-nav"data-id=async-streaming title="Asynchronous streaming"><a class="nav-link auto-close svelte-1qdmkpb text-uppercase bookmark-link"href=#async-streaming>Asynchronous streaming</a><li class="nav-item right svelte-1qdmkpb bookmark-nav"data-id=multiple title="Multiple queries"><a class="nav-link auto-close svelte-1qdmkpb text-uppercase bookmark-link"href=#multiple>Multiple queries</a><li class="nav-item right svelte-1qdmkpb bookmark-nav"data-id=nested-mapping title="Nested mapping"><a class="nav-link auto-close svelte-1qdmkpb text-uppercase bookmark-link"href=#nested-mapping>Nested mapping</a><li class="nav-item right svelte-1qdmkpb bookmark-nav"data-id=nullable-instances title="Nullable instances"><a class="nav-link auto-close svelte-1qdmkpb text-uppercase bookmark-link"href=#nullable-instances>Nullable instances</a><li class="nav-item right svelte-1qdmkpb bookmark-nav"data-id=enums-and-arrays title="Complex types"><a class="nav-link auto-close svelte-1qdmkpb text-uppercase bookmark-link"href=#enums-and-arrays>Complex types</a><li class="nav-item right svelte-1qdmkpb bookmark-nav"data-id=prepared title="Prepared mode"><a class="nav-link auto-close svelte-1qdmkpb text-uppercase bookmark-link"href=#prepared>Prepared mode</a><li class="nav-item right svelte-1qdmkpb bookmark-nav"data-id=postgres-optimizations title="PostgreSQL optimizations"><a class="nav-link auto-close svelte-1qdmkpb text-uppercase bookmark-link"href=#postgres-optimizations>PostgreSQL optimizations</a><li class="nav-item right svelte-1qdmkpb bookmark-nav"data-id=reader-callback title="Low-level data reader"><a class="nav-link auto-close svelte-1qdmkpb text-uppercase bookmark-link"href=#reader-callback>Low-level data reader</a><li class="nav-item right svelte-1qdmkpb bookmark-nav"data-id=custom-mapping title="Custom mapping"><a class="nav-link auto-close svelte-1qdmkpb text-uppercase bookmark-link"href=#custom-mapping>Custom mapping</a><li class="nav-item right svelte-1qdmkpb bookmark-nav"data-id=logging title="Logging and analytics"><a class="nav-link auto-close svelte-1qdmkpb text-uppercase bookmark-link"href=#logging>Logging and analytics</a></ul></div></div></main><script>!function(){var i=document.querySelector("nav.navbar"),L=document.getElementsByTagName("main")[0],E=L.getElementsByClassName("sidebar")[0],k=L.getElementsByClassName("content")[0],a=document.querySelectorAll("div.code");function w(e,t){for(var n=2;n<arguments.length;n++)e.classList.remove(arguments[n]);e.classList.add(t)}var t=document.getElementsByTagName("html")[0],s=i.querySelector("#theme-btn"),o="theme";function n(e){var t=s.getElementsByTagName("svg");"dark"===e?(t[0].style.display="",t[1].style.display="none",s.getElementsByClassName("check")[0].classList.add("checked")):(t[0].style.display="none",t[1].style.display="",s.getElementsByClassName("check")[0].classList.remove("checked"));for(var n=0;n<a.length;n++){var i=a[n];"dark"===e?(i.children[1].style.display="inherit",i.children[2].style.display="none"):"light"===e&&(i.children[1].style.display="none",i.children[2].style.display="inherit")}}function l(e,t){var n=e.currentTarget;if(!n.classList.contains("bi-check")){for(var i="",a=0;a<n.classList.length;a++)if(n.classList[a].startsWith("bi-")){i=n.classList[a];break}n.classList.remove(i),n.classList.add("spinner-border-sm"),n.classList.add("spinner-border");e=bootstrap.Tooltip.getInstance(n);e&&(e.setContent({".tooltip-inner":"Copying..."}),e.show()),t(n,function(){var e;n.classList.remove(i),n.classList.remove("spinner-border-sm"),n.classList.remove("spinner-border"),n.classList.add("bi-check"),bootstrap&&(e=bootstrap.Tooltip.getInstance(n))&&(e.setContent({".tooltip-inner":"Copied!"}),e.show()),setTimeout(function(){var e;n.classList.add(i),n.classList.remove("bi-check"),bootstrap&&(e=bootstrap.Tooltip.getInstance(n))&&e.setContent({".tooltip-inner":n.dataset.bsTitle})},2e3)})}}function e(e){l(e,function(e,t){navigator.clipboard.writeText(e.parentElement.nextSibling.innerText),t()})}function r(e){l(e,function(e,t){var n=localStorage.getItem(o);e="dark"===n?e.parentElement.parentElement.children[1]:e.parentElement.parentElement.children[2],setTimeout(function(){html2canvas(e).then(e=>{e.toBlob(e=>navigator.clipboard.write([new ClipboardItem({"image/png":e})])),t()})},0)})}s.addEventListener("click",()=>{var e="dark"===localStorage.getItem(o)?"light":"dark";localStorage.setItem(o,e),n(t.dataset.bsTheme=e)}),n(localStorage.getItem(o)),s.children[0].classList.remove("hidden");for(var c=0;c<a.length;c++)a[c].getElementsByClassName("copy-code")[0].addEventListener("click",e),a[c].getElementsByClassName("photo-code")[0].addEventListener("click",r);for(var d,T=function(){var s,a,o;if("none"!=L.children[2].style.display)return s=L.children[1].children[0].querySelectorAll("[id]"),a=void 0,this.initNavs=function(e){o=e.querySelectorAll("li.bookmark-nav");for(var t=0;t<s.length;t++){for(var n=s[t].id,i=null,a=0;a<o.length;a++)if(o[a].dataset.id==n){i=o[a];break}s[t].nav=i}setTimeout(function(){for(var e=0;e<s.length;e++){var t=s[e];if(l(t).visible&&t.nav)return void t.nav.classList.add("active")}},1e3),r()},L.children[1].addEventListener("scroll",r),this;function l(e){var e=e.getBoundingClientRect(),t=Math.max(document.documentElement.clientHeight,window.innerHeight),n=0<e.top&&!(e.bottom<0||0<=e.top-t)||e.top<0&&e.bottom>t,i=!1;return{visible:n,above:i=n?i:e.bottom<t}}function r(){if(o&&o.length){for(var e=0;e<o.length;e++)o[e].classList.remove("active");for(var t=void 0,e=0;e<s.length;e++){const i=s[e];var n=l(i);if(!n.visible&&n.above&&(t=i.nav),n.visible&&i.nav&&!i.nav.classList.contains("active"))return i.nav.classList.add("active"),a&&clearTimeout(a),void(a=setTimeout(function(){i.nav.scrollIntoView({behavior:"smooth"}),a=void 0},250))}t&&!t.classList.contains("active")&&(t.classList.add("active"),a&&clearTimeout(a),a=setTimeout(function(){t.scrollIntoView({behavior:"smooth"}),a=void 0},250))}}}(),v=function(){var l,r=i.querySelector("#nav-btn"),c=E.firstChild.getElementsByTagName("button")[0],d=480,v="200px",h="0.25fr",m=730,u=535,g=L.children[0].children[0].children[1],b=L.children[2].children[0].children[0],e="sidebar-pinned",p=null==localStorage.getItem(e)||"true"==localStorage.getItem(e),y=!1,f=!1;function t(){var e=window.outerWidth||window.innerWidth,t=e<d,n=t?y?"100%":"0":p?""+v:"0",i=`grid-template-columns: ${n} 1fr`,a=t&&y?"width: 100%":"0"!=n?"":"display: none",s=t&&y?"display: none":"",o=t?y?"sidebar-show":"sidebar-hide":p?"sidebar-show":"sidebar-hide",n="0"==n;h&&m&&u&&(n&&e<u||!n&&e<m?f||(g.innerHTML=l+b.innerHTML,T.initNavs(g),f=!0):f&&(g.innerHTML=l,T.initNavs(b),f=!1)),!h||t||f?(i+=";",L.children[2].style.display="none"):(i+=` ${h};`,L.children[2].style.display=""),w(r,!t&&p||t&&y?"rotate":"rotate-back","rotate","rotate-back"),L.style=i,w(E,o,"sidebar-show","sidebar-hide"),E.firstChild.style=a,c.style.display=t?"":"none",k.style=s}function n(){window.outerWidth<d?y=!y:p=!p,localStorage.setItem(e,p.toString()),t()}return h&&m&&u&&(l=g.innerHTML,T.initNavs(b)),r.addEventListener("click",n),c.addEventListener("click",()=>{y=!1,t()}),(window.onresize=t)(),this.closeSidebar=function(){window.outerWidth<d&&y&&n()},this}(),h=document.getElementsByClassName("auto-close"),m=0;m<h.length;m++)h[m].addEventListener("click",function(e){v.closeSidebar()});location.hash&&(d=document.getElementById(location.hash.replace("#","")))&&d.scrollIntoView()}();</script><script src=/bootstrap.bundle.min.js></script><script>!function(){for(var t=document.querySelectorAll('[data-bs-toggle="tooltip"]'),e=0;e<t.length;e++)new bootstrap.Tooltip(t[e]);var o=document.getElementsByClassName("accordion-item");if(o.length)for(e=0;e<o.length;e++){var l=o[e];l.querySelectorAll("[href='"+document.location.pathname+"']").length&&l.firstChild.click()}}();</script><script src=/html2canvas.min.js></script><script async defer src=https://buttons.github.io/buttons.js></script>