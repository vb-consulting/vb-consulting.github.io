<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>NpgsqlRest Options - Automatic REST API for PostgreSQL Database as .NET8 Middleware</title><meta name="description" content="Automatic REST API for PostgreSQL Database as .NET8 Middleware"><meta name="keywords" content="api, api-rest, restful-api, http, postgres, dotnet, net8, c#, aot, database, rest, server, postgresql, npgsqlrest, pgsql, pg, automatic"><link href="https://vb-consulting.github.io//npgsqlrest/options/" rel="canonical"><link rel="stylesheet" href="/_elderjs/assets/svelte-3b352ec3.css" media="all"><style></style><link href="/style.css?1711825655386" rel="stylesheet"><script>!function(){var e="theme",t=localStorage.getItem(e);t||(t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",localStorage.setItem(e,t)),document.getElementsByTagName("html")[0].dataset.bsTheme=t}();</script></head><body class="d-flex flex-column h-100"><header id="header"><nav class="navbar navbar-expand-md navbar-dark fixed-top py-0 py-md-0 svelte-30jr7w"><div class="container-fluid flex-nowrap svelte-30jr7w"><div class="d-flex svelte-30jr7w"><button id="nav-btn" type="button" class="d-flex btn btn-sm logo animate-rotate svelte-30jr7w"><i class="material-icons-outlined">menu</i></button> <a class="nav-link my-auto ms-2 fw-semibold home svelte-30jr7w" href="/"><i class="bi-chevron-double-left"></i> VB Home</a></div><div class="d-flex right svelte-30jr7w"><a class="nav-link my-auto svelte-30jr7w" data-bs-toggle="tooltip" data-bs-html="true" title="Become a Patreon" href="https://www.patreon.com/vbconsulting" target="_blank"><div class="patreon"></div></a><div class="vr1 text-muted my-auto svelte-30jr7w"></div><a class="nav-link my-auto svelte-30jr7w" data-bs-toggle="tooltip" data-bs-html="true" title="Buy Me a Coffee" href="https://www.buymeacoffee.com/vbilopavu" target="_blank"><div class="bmc"></div></a><div class="vr1 text-muted my-auto svelte-30jr7w"></div><a class="nav-link my-auto me-2 svelte-30jr7w" data-bs-toggle="tooltip" data-bs-html="true" title="options.md on GitHub" href="https://github.com/vb-consulting/NpgsqlRest/blob/master/options.md"><i class="bi-github"></i></a> <a class="github-button svelte-30jr7w" href="https://github.com/vb-consulting/NpgsqlRest/blob/master/options.md" data-bs-toggle="tooltip" data-bs-html="true" title="Star options.md on GitHub" data-color-scheme="no-preference: light_high_contrast; light: light_high_contrast; dark: light_high_contrast;" data-icon="octicon-star" data-show-count="true" aria-label="Star options.md on GitHub"></a><div class="vr1 text-muted my-auto svelte-30jr7w"></div><button id="theme-btn" type="button" aria-pressed="true" aria-label="theme" class="svelte-30jr7w"><span class="check hidden svelte-30jr7w"><span class="icon svelte-30jr7w"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="svelte-30jr7w"><path fill="currentColor" d="M12 21q-3.775 0-6.388-2.613T3 12q0-3.45 2.25-5.988T11 3.05q.625-.075.975.45t-.025 1.1q-.425.65-.638 1.375T11.1 7.5q0 2.25 1.575 3.825T16.5 12.9q.775 0 1.538-.225t1.362-.625q.525-.35 1.075-.037t.475.987q-.35 3.45-2.937 5.725T12 21Zm0-2q2.2 0 3.95-1.213t2.55-3.162q-.5.125-1 .2t-1 .075q-3.075 0-5.238-2.163T9.1 7.5q0-.5.075-1t.2-1q-1.95.8-3.163 2.55T5 12q0 2.9 2.05 4.95T12 19Zm-.25-6.75Z"></path></svg> <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="svelte-30jr7w"><g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M0 0h24v24H0z"></path><path fill="currentColor" d="M12 19a1 1 0 0 1 .993.883L13 20v1a1 1 0 0 1-1.993.117L11 21v-1a1 1 0 0 1 1-1zm6.313-2.09l.094.083l.7.7a1 1 0 0 1-1.32 1.497l-.094-.083l-.7-.7a1 1 0 0 1 1.218-1.567l.102.07zm-11.306.083a1 1 0 0 1 .083 1.32l-.083.094l-.7.7a1 1 0 0 1-1.497-1.32l.083-.094l.7-.7a1 1 0 0 1 1.414 0zM4 11a1 1 0 0 1 .117 1.993L4 13H3a1 1 0 0 1-.117-1.993L3 11h1zm17 0a1 1 0 0 1 .117 1.993L21 13h-1a1 1 0 0 1-.117-1.993L20 11h1zM6.213 4.81l.094.083l.7.7a1 1 0 0 1-1.32 1.497l-.094-.083l-.7-.7A1 1 0 0 1 6.11 4.74l.102.07zm12.894.083a1 1 0 0 1 .083 1.32l-.083.094l-.7.7a1 1 0 0 1-1.497-1.32l.083-.094l.7-.7a1 1 0 0 1 1.414 0zM12 2a1 1 0 0 1 .993.883L13 3v1a1 1 0 0 1-1.993.117L11 4V3a1 1 0 0 1 1-1zm0 5a5 5 0 1 1-4.995 5.217L7 12l.005-.217A5 5 0 0 1 12 7z"></path></g></svg></span></span></button></div></div></nav></header><main class="svelte-9zwk14"><div class="sidebar sidebar-hide svelte-9zwk14"><div class="svelte-9zwk14"><ul class="navbar-nav sidenav accordion svelte-9zwk14"><li class="accordion-item svelte-9zwk14" title="VB-Consulting"><button class="accordion-header accordion-button collapsed svelte-9zwk14 text-uppercase" href="/" type="button" data-bs-toggle="collapse" data-bs-target="#accordion-vb-consulting" aria-expanded="false" aria-controls="accordion-vb-consulting">VB-Consulting</button><div id="accordion-vb-consulting" class="accordion-collapse collapse"><div class="accordion-body svelte-9zwk14"><ul class="navbar-nav"><li class="nav-item svelte-9zwk14" data-id="" title="Home"><a class="nav-link svelte-9zwk14 text-uppercase" href="/">Home</a></li><li class="nav-divider svelte-9zwk14"><hr class="svelte-9zwk14"></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="Norm.Net"><a class="nav-link svelte-9zwk14 text-uppercase" href="/norm.net/">Norm.Net</a></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="RazorSvelte"><a class="nav-link svelte-9zwk14 text-uppercase" href="/razorsvelte/">RazorSvelte</a></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="PgRoutiner"><a class="nav-link svelte-9zwk14 text-uppercase" href="/pgroutiner/">PgRoutiner</a></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="XUnit.Npgsql"><a class="nav-link svelte-9zwk14 text-uppercase" href="/xunit.npgsql/">XUnit.Npgsql</a></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="PostrgeSQL Schema Tools"><a class="nav-link svelte-9zwk14 text-uppercase" href="/pg_schema_tools/">PostrgeSQL Schema Tools</a></li><li class="nav-txt-divider text-muted svelte-9zwk14"><hr class="svelte-9zwk14"><span class="svelte-9zwk14">blogs</span><hr class="svelte-9zwk14"></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="<span class='btn-link'>ALL BLOGS</span>"><a class="nav-link btn btn-sm w-fit px-3 mx-auto svelte-9zwk14 lr-arrow text-uppercase" href="/blogs/"><i class="bi bi-arrow-right-circle svelte-9zwk14"></i> <span class="btn-link">ALL BLOGS</span></a></li><li class="nav-item svelte-9zwk14" data-id="" title="PostgreSQL Arrays üêò"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/postgresql-array/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>PostgreSQL Arrays üêò</a></li><li class="nav-item svelte-9zwk14" data-id="" title="NpgsqlRest Update 1.6.2"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/npgsqlrest-update1.6.2/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>NpgsqlRest Update 1.6.2</a></li><li class="nav-item svelte-9zwk14" data-id="" title="NpgsqlRest v2 Update üêòüî•"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/npgsqlrest-v2/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>NpgsqlRest v2 Update üêòüî•</a></li><li class="nav-item svelte-9zwk14" data-id="" title="How DDD is screwing up your SQL"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/sql-vs-ddd/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>How DDD is screwing up your SQL</a></li><li class="nav-item svelte-9zwk14" data-id="" title="Common Sense Software Design"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/common-sense-design/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>Common Sense Software Design</a></li><li class="nav-item svelte-9zwk14" data-id="" title="PostgreSQL Paging Benchmarks"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/postgresql-paging/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>PostgreSQL Paging Benchmarks</a></li><li class="nav-item svelte-9zwk14" data-id="" title="NpgsqlRest NuGet Library"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/npgsqlrest/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>NpgsqlRest NuGet Library</a></li><li class="nav-item svelte-9zwk14" data-id="" title="Execute Custom Function For Each Record"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/postgresql-record-type/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>Execute Custom Function For Each Record</a></li><li class="nav-item svelte-9zwk14" data-id="" title="Custom Temporal Tables in PostgreSQL"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/postgresql-temporal-tables/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>Custom Temporal Tables in PostgreSQL</a></li><li class="nav-item svelte-9zwk14" data-id="" title="Recursion with PostgreSQL Part 1 - A Different Type of Recursion"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/recursion-postgresql/part1-different-type-of-recursion/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>Recursion with PostgreSQL Part 1 - A Different Type of Recursion</a></li></ul></div></div></li><li class="nav-txt-divider text-muted svelte-9zwk14"><hr class="svelte-9zwk14"><span class="svelte-9zwk14">NpgsqlRest</span><hr class="svelte-9zwk14"></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="NpgsqlRest"><a class="nav-link svelte-9zwk14 text-uppercase" href="/npgsqlrest/">NpgsqlRest</a></li><li class="nav-item toc2 svelte-9zwk14 active" data-id="" title="options"><a class="nav-link svelte-9zwk14 text-uppercase" href="/npgsqlrest/options/">options</a></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="annotations"><a class="nav-link svelte-9zwk14 text-uppercase" href="/npgsqlrest/annotations/">annotations</a></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="performances"><a class="nav-link svelte-9zwk14 text-uppercase" href="/npgsqlrest/performances/">performances</a></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="changelog"><a class="nav-link svelte-9zwk14 text-uppercase" href="/npgsqlrest/changelog/">changelog</a></li><li class="nav-txt-divider text-muted svelte-9zwk14"><hr class="svelte-9zwk14"><span class="svelte-9zwk14">plugins</span><hr class="svelte-9zwk14"></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="NpgsqlRest.CrudSource"><a class="nav-link svelte-9zwk14 text-uppercase" href="/npgsqlrest/crudsource/">NpgsqlRest.CrudSource</a></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="NpgsqlRest.HttpFiles"><a class="nav-link svelte-9zwk14 text-uppercase" href="/npgsqlrest/httpfiles/">NpgsqlRest.HttpFiles</a></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="NpgsqlRest.TsClient"><a class="nav-link svelte-9zwk14 text-uppercase" href="/npgsqlrest/tsclient/">NpgsqlRest.TsClient</a></li><li class="nav-txt-divider text-muted svelte-9zwk14"><hr class="svelte-9zwk14"><span class="svelte-9zwk14">articles</span><hr class="svelte-9zwk14"></li><li class="nav-item svelte-9zwk14" data-id="" title="NpgsqlRest v2 Update üêòüî•"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/npgsqlrest-v2/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>NpgsqlRest v2 Update üêòüî•</a></li><li class="nav-item svelte-9zwk14" data-id="" title="NpgsqlRest Update 1.6.2"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/npgsqlrest-update1.6.2/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>NpgsqlRest Update 1.6.2</a></li><li class="nav-item svelte-9zwk14" data-id="" title="NpgsqlRest NuGet Library"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/npgsqlrest/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>NpgsqlRest NuGet Library</a></li></ul></div></div><div class="content svelte-9zwk14"><div class="container-sm main-content gh-content"><h1 id="npgsql-options">Npgsql Options<a class="anchor bookmark-target" href="#npgsql-options"><i class="bi bi-link-45deg"></i></a></h1><a href="https://github.com/vb-consulting/NpgsqlRest/blob/master/options.md" class="github-edit"><i class="bi bi-github"></i>Edit this page on GitHub</a><p>Options are passed as a parameter of the <code>UseNpgsqlRest</code> extension:</p><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">app</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">builder</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Build</span><span style="color: #E6E6E6">();</span></span>
<span class="line"><span style="color: #9CDCFE">app</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">UseNpgsqlRest</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">NpgsqlRestOptions</span><span style="color: #E6E6E6">());</span></span>
<span class="line"><span style="color: #9CDCFE">app</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Run</span><span style="color: #E6E6E6">();</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">app</span><span style="color: #000000"> = </span><span style="color: #001080">builder</span><span style="color: #000000">.</span><span style="color: #795E26">Build</span><span style="color: #000000">();</span></span>
<span class="line"><span style="color: #001080">app</span><span style="color: #000000">.</span><span style="color: #795E26">UseNpgsqlRest</span><span style="color: #000000">(</span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">NpgsqlRestOptions</span><span style="color: #000000">());</span></span>
<span class="line"><span style="color: #001080">app</span><span style="color: #000000">.</span><span style="color: #795E26">Run</span><span style="color: #000000">();</span></span></code></pre></div><p>The full list of available options in the latest version is below.</p><h2 id="bufferrows">BufferRows<a class="anchor bookmark-target" href="#bufferrows"><i class="bi bi-link-45deg"></i></a></h2><ul><li>Type: <code>ulong</code></li><li>Default: <code>25</code></li></ul><p>The number of rows to buffer in the string builder before sending the response. The default is 25. This applies to rows in JSON object array when returning records from the database.</p><p>Set to 0 to disable buffering and write a response for each row.</p><p>Set to 1 to buffer the entire array (all rows).</p><p>Notes:</p><ul><li>Disabling buffering can have a slight negative impact on performance since buffering is far less expensive than writing to the response stream.</li><li>Setting higher values can have a negative impact on memory usage, especially when returning large datasets.</li></ul><h2 id="connectionstring">ConnectionString<a class="anchor bookmark-target" href="#connectionstring"><i class="bi bi-link-45deg"></i></a></h2><ul><li>Type: <code>string?</code></li><li>Default: <code>null</code></li></ul><p>The connection string to the database. This is the optional value if the <code>ConnectionFromServiceProvider</code> option is set to true.</p><p>Note: the connection string must run as a super user or have select permissions on <code>information_schema</code> and <code>pg_catalog</code> system tables. If the <code>ConnectionFromServiceProvider</code> option is set to false and <code>ConnectionString</code> is null, the middleware will raise an <code>ArgumentException</code> error.</p><h2 id="schemasimilarto">SchemaSimilarTo<a class="anchor bookmark-target" href="#schemasimilarto"><i class="bi bi-link-45deg"></i></a></h2><ul><li>Type: <code>string?</code></li><li>Default: <code>null</code></li></ul><p>Filter schema names by using a <a href="https://www.postgresql.org/docs/current/functions-matching.html#FUNCTIONS-SIMILARTO-REGEXP"><code>SIMILAR TO</code></a> operator with this value, or set it to null to ignore this parameter.</p><h2 id="schemanotsimilarto">SchemaNotSimilarTo<a class="anchor bookmark-target" href="#schemanotsimilarto"><i class="bi bi-link-45deg"></i></a></h2><ul><li>Type: <code>string?</code></li><li>Default: <code>null</code></li></ul><p>Filter schema names by using a <a href="https://www.postgresql.org/docs/current/functions-matching.html#FUNCTIONS-SIMILARTO-REGEXP"><code>NOT SIMILAR TO</code></a> operator with this value, or set it to null to ignore this parameter.</p><h2 id="includeschemas">IncludeSchemas<a class="anchor bookmark-target" href="#includeschemas"><i class="bi bi-link-45deg"></i></a></h2><ul><li>Type: <code>string[]?</code></li><li>Default: <code>null</code></li></ul><p>List of schema names to be included or null to ignore this parameter.</p><h2 id="excludeschemas">ExcludeSchemas<a class="anchor bookmark-target" href="#excludeschemas"><i class="bi bi-link-45deg"></i></a></h2><ul><li>Type: <code>string[]?</code></li><li>Default: <code>null</code></li></ul><p>List of schema names to be excluded or null to ignore this parameter.</p><h2 id="namesimilarto">NameSimilarTo<a class="anchor bookmark-target" href="#namesimilarto"><i class="bi bi-link-45deg"></i></a></h2><ul><li>Type: <code>string?</code></li><li>Default: <code>null</code></li></ul><p>Filter names by using a <a href="https://www.postgresql.org/docs/current/functions-matching.html#FUNCTIONS-SIMILARTO-REGEXP"><code>SIMILAR TO</code></a> operator with this value, or set it to null to ignore this parameter.</p><p>Names are PostgreSQL object names like function or table, depending on the source.</p><h2 id="namenotsimilarto">NameNotSimilarTo<a class="anchor bookmark-target" href="#namenotsimilarto"><i class="bi bi-link-45deg"></i></a></h2><ul><li>Type: <code>string?</code></li><li>Default: <code>null</code></li></ul><p>Filter names by using a <a href="https://www.postgresql.org/docs/current/functions-matching.html#FUNCTIONS-SIMILARTO-REGEXP"><code>NOT SIMILAR TO</code></a> operator with this value, or set it to null to ignore this parameter.</p><p>Names are PostgreSQL object names like function or table, depending on the source.</p><h2 id="includenames">IncludeNames<a class="anchor bookmark-target" href="#includenames"><i class="bi bi-link-45deg"></i></a></h2><ul><li>Type: <code>string[]?</code></li><li>Default: <code>null</code></li></ul><p>List of names to be included or null to ignore this parameter. Names are PostgreSQL object names like function or table, depending on the source.</p><h2 id="excludenames">ExcludeNames<a class="anchor bookmark-target" href="#excludenames"><i class="bi bi-link-45deg"></i></a></h2><ul><li>Type: <code>string[]?</code></li><li>Default: <code>null</code></li></ul><p>List of names to be excluded or null to ignore this parameter. Names are PostgreSQL object names like function or table, depending on the source.</p><h2 id="urlpathprefix">UrlPathPrefix<a class="anchor bookmark-target" href="#urlpathprefix"><i class="bi bi-link-45deg"></i></a></h2><ul><li>Type: <code>string?</code></li><li>Default: <code>"/api"</code></li></ul><p>The URL prefix string for every URL created by the default URL builder or null to ignore the URL prefix.</p><h2 id="urlpathbuilder">UrlPathBuilder<a class="anchor bookmark-target" href="#urlpathbuilder"><i class="bi bi-link-45deg"></i></a></h2><ul><li>Type: <code>Func&lt;Routine, NpgsqlRestOptions, string></code></li><li>Default: <code>DefaultUrlBuilder.CreateUrl</code></li></ul><p>Custom function delegate that receives routine and options parameters and returns constructed URL path string for routine. Default the default URL builder that transforms snake case names to kebab case names.</p><p>Example:</p><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #9CDCFE">app</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">UseNpgsqlRest</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">NpgsqlRestOptions</span></span>
<span class="line"><span style="color: #E6E6E6">{</span></span>
<span class="line"><span style="color: #6A9955">    //</span></span>
<span class="line"><span style="color: #6A9955">    // URL path is equal to the routine name without schema name</span></span>
<span class="line"><span style="color: #6A9955">    //</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">UrlPathBuilder</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> (</span><span style="color: #9CDCFE">routine</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">options</span><span style="color: #E6E6E6">) </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">routine</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Name</span></span>
<span class="line"><span style="color: #E6E6E6">});</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #001080">app</span><span style="color: #000000">.</span><span style="color: #795E26">UseNpgsqlRest</span><span style="color: #000000">(</span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">NpgsqlRestOptions</span></span>
<span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #008000">    //</span></span>
<span class="line"><span style="color: #008000">    // URL path is equal to the routine name without schema name</span></span>
<span class="line"><span style="color: #008000">    //</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">UrlPathBuilder</span><span style="color: #000000"> = (</span><span style="color: #001080">routine</span><span style="color: #000000">, </span><span style="color: #001080">options</span><span style="color: #000000">) => </span><span style="color: #001080">routine</span><span style="color: #000000">.</span><span style="color: #001080">Name</span></span>
<span class="line"><span style="color: #000000">});</span></span></code></pre></div><h2 id="connectionfromserviceprovider">ConnectionFromServiceProvider<a class="anchor bookmark-target" href="#connectionfromserviceprovider"><i class="bi bi-link-45deg"></i></a></h2><ul><li>Type: <code>bool</code></li><li>Default: <code>false</code></li></ul><p>Use the <code>NpgsqlConnection</code> database connection from the service provider.</p><p>If this option is true, middleware will attempt to require <code>NpgsqlConnection</code> from the services collection, which means it needs to be configured. This option provides an opportunity to implement custom database connection creation. If it is false, a new <code>NpgsqlConnection</code> will be created using the <code>ConnectionString</code> property.</p><p>If this option is false and <code>ConnectionString</code> is <code>null</code>, the middleware will raise an <code>ArgumentException</code> error.</p><h2 id="endpointcreated">EndpointCreated<a class="anchor bookmark-target" href="#endpointcreated"><i class="bi bi-link-45deg"></i></a></h2><ul><li>Type: <code>Func&lt;NpgsqlRest.Routine, NpgsqlRest.RoutineEndpoint, NpgsqlRest.RoutineEndpoint?>?</code></li><li>Default: <code>null</code></li></ul><p>A callback function that, if defined, is executed just after the new endpoint is created. Receives routine into and new endpoint info as parameters and it is expected to return the same endpoint or null.</p><p>It offers an opportunity to modify the endpoint based on custom logic or disable endpoints by returning null based on some custom logic.</p><p>Examples:</p><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #9CDCFE">app</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">UseNpgsqlRest</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">NpgsqlRestOptions</span></span>
<span class="line"><span style="color: #E6E6E6">{</span></span>
<span class="line"><span style="color: #6A9955">    // always skip public routines</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">EndpointCreated</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> (</span><span style="color: #9CDCFE">routine</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">endpoint</span><span style="color: #E6E6E6">) </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">routine</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Schema</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">==</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">"public"</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">?</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">null</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">:</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">endpoint</span></span>
<span class="line"><span style="color: #E6E6E6">});</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #001080">app</span><span style="color: #000000">.</span><span style="color: #795E26">UseNpgsqlRest</span><span style="color: #000000">(</span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">NpgsqlRestOptions</span></span>
<span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #008000">    // always skip public routines</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">EndpointCreated</span><span style="color: #000000"> = (</span><span style="color: #001080">routine</span><span style="color: #000000">, </span><span style="color: #001080">endpoint</span><span style="color: #000000">) => </span><span style="color: #001080">routine</span><span style="color: #000000">.</span><span style="color: #001080">Schema</span><span style="color: #000000"> == </span><span style="color: #A31515">"public"</span><span style="color: #000000"> ? </span><span style="color: #0000FF">null</span><span style="color: #000000"> : </span><span style="color: #001080">endpoint</span></span>
<span class="line"><span style="color: #000000">});</span></span></code></pre></div><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #9CDCFE">app</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">UseNpgsqlRest</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">NpgsqlRestOptions</span></span>
<span class="line"><span style="color: #E6E6E6">{</span></span>
<span class="line"><span style="color: #6A9955">    // force all endpoints to have POST method</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">EndpointCreated</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> (</span><span style="color: #9CDCFE">routine</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">endpoint</span><span style="color: #E6E6E6">) </span><span style="color: #D4D4D4">=></span></span>
<span class="line"><span style="color: #E6E6E6">    {</span></span>
<span class="line"><span style="color: #E6E6E6">        </span><span style="color: #9CDCFE">endpoint</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Method</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">Method</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">POST</span><span style="color: #E6E6E6">;</span></span>
<span class="line"><span style="color: #E6E6E6">        </span><span style="color: #C586C0">return</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">endpoint</span><span style="color: #E6E6E6">;</span></span>
<span class="line"><span style="color: #E6E6E6">    }</span></span>
<span class="line"><span style="color: #E6E6E6">});</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #001080">app</span><span style="color: #000000">.</span><span style="color: #795E26">UseNpgsqlRest</span><span style="color: #000000">(</span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">NpgsqlRestOptions</span></span>
<span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #008000">    // force all endpoints to have POST method</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">EndpointCreated</span><span style="color: #000000"> = (</span><span style="color: #001080">routine</span><span style="color: #000000">, </span><span style="color: #001080">endpoint</span><span style="color: #000000">) =></span></span>
<span class="line"><span style="color: #000000">    {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #001080">endpoint</span><span style="color: #000000">.</span><span style="color: #001080">Method</span><span style="color: #000000"> = </span><span style="color: #001080">Method</span><span style="color: #000000">.</span><span style="color: #001080">POST</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">endpoint</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">    }</span></span>
<span class="line"><span style="color: #000000">});</span></span></code></pre></div><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #9CDCFE">app</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">UseNpgsqlRest</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">NpgsqlRestOptions</span></span>
<span class="line"><span style="color: #E6E6E6">{</span></span>
<span class="line"><span style="color: #6A9955">    // All public schema always require authorization</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">EndpointCreated</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> (</span><span style="color: #9CDCFE">routine</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">endpoint</span><span style="color: #E6E6E6">) </span><span style="color: #D4D4D4">=></span></span>
<span class="line"><span style="color: #E6E6E6">    {</span></span>
<span class="line"><span style="color: #E6E6E6">        </span><span style="color: #C586C0">if</span><span style="color: #E6E6E6"> (</span><span style="color: #9CDCFE">routine</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Schema</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">==</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">"public"</span><span style="color: #E6E6E6">)</span></span>
<span class="line"><span style="color: #E6E6E6">        {</span></span>
<span class="line"><span style="color: #E6E6E6">            </span><span style="color: #9CDCFE">endpoint</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">RequiresAuthorization</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">true</span><span style="color: #E6E6E6">;</span></span>
<span class="line"><span style="color: #E6E6E6">        }</span></span>
<span class="line"><span style="color: #E6E6E6">        </span><span style="color: #C586C0">return</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">endpoint</span><span style="color: #E6E6E6">;</span></span>
<span class="line"><span style="color: #E6E6E6">    }</span></span>
<span class="line"><span style="color: #E6E6E6">});</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #001080">app</span><span style="color: #000000">.</span><span style="color: #795E26">UseNpgsqlRest</span><span style="color: #000000">(</span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">NpgsqlRestOptions</span></span>
<span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #008000">    // All public schema always require authorization</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">EndpointCreated</span><span style="color: #000000"> = (</span><span style="color: #001080">routine</span><span style="color: #000000">, </span><span style="color: #001080">endpoint</span><span style="color: #000000">) =></span></span>
<span class="line"><span style="color: #000000">    {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">routine</span><span style="color: #000000">.</span><span style="color: #001080">Schema</span><span style="color: #000000"> == </span><span style="color: #A31515">"public"</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">        {</span></span>
<span class="line"><span style="color: #000000">            </span><span style="color: #001080">endpoint</span><span style="color: #000000">.</span><span style="color: #001080">RequiresAuthorization</span><span style="color: #000000"> = </span><span style="color: #0000FF">true</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">        }</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">endpoint</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">    }</span></span>
<span class="line"><span style="color: #000000">});</span></span></code></pre></div><h2 id="nameconverter">NameConverter<a class="anchor bookmark-target" href="#nameconverter"><i class="bi bi-link-45deg"></i></a></h2><ul><li>Type: <code>Func&lt;string?, string?></code></li><li>Default: <code>NpgsqlRest.Defaults.DefaultNameConverter.ConvertToCamelCase</code></li></ul><p>Custom function callback that receives names from PostgreSQL (parameter names, column names, etc), and is expected to return the same or new name. It offers an opportunity to convert names based on certain conventions. The default converter converts snake case names into camel case names.</p><p>Example:</p><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #9CDCFE">app</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">UseNpgsqlRest</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">NpgsqlRestOptions</span></span>
<span class="line"><span style="color: #E6E6E6">{</span></span>
<span class="line"><span style="color: #6A9955">    //</span></span>
<span class="line"><span style="color: #6A9955">    // Use the original name for parameters and JSON field names</span></span>
<span class="line"><span style="color: #6A9955">    //</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">NameConverter</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">name</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">name</span></span>
<span class="line"><span style="color: #E6E6E6">});</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #001080">app</span><span style="color: #000000">.</span><span style="color: #795E26">UseNpgsqlRest</span><span style="color: #000000">(</span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">NpgsqlRestOptions</span></span>
<span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #008000">    //</span></span>
<span class="line"><span style="color: #008000">    // Use the original name for parameters and JSON field names</span></span>
<span class="line"><span style="color: #008000">    //</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">NameConverter</span><span style="color: #000000"> = </span><span style="color: #001080">name</span><span style="color: #000000"> => </span><span style="color: #001080">name</span></span>
<span class="line"><span style="color: #000000">});</span></span></code></pre></div><h2 id="requiresauthorization">RequiresAuthorization<a class="anchor bookmark-target" href="#requiresauthorization"><i class="bi bi-link-45deg"></i></a></h2><ul><li>Type: <code>bool</code></li><li>Default: <code>false</code></li></ul><p>When set to true, it will force all created endpoints to require authorization.</p><p>Authorization requirements for individual endpoints can be changed with the <code>EndpointCreated</code> function callback, or by using comment annotations.</p><h2 id="logger">Logger<a class="anchor bookmark-target" href="#logger"><i class="bi bi-link-45deg"></i></a></h2><ul><li>Type: <code>Microsoft.Extensions.Logging.ILogger?</code></li><li>Default: <code>null</code></li></ul><p>Set this option to provide a custom logger implementation. The default null value will cause middleware to create a default logger named <code>NpgsqlRest</code> from the default logger factory in the service collection.</p><p>Example:</p><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #9CDCFE">app</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">UseNpgsqlRest</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">NpgsqlRestOptions</span></span>
<span class="line"><span style="color: #E6E6E6">{</span></span>
<span class="line"><span style="color: #6A9955">    // use empty logger</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">Logger</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">EmptyLogger</span><span style="color: #E6E6E6">()</span></span>
<span class="line"><span style="color: #E6E6E6">});</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">class</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">EmptyLogger</span><span style="color: #E6E6E6"> : </span><span style="color: #4EC9B0">ILogger</span></span>
<span class="line"><span style="color: #E6E6E6">{</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">IDisposable</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">BeginScope</span><span style="color: #E6E6E6">&lt;</span><span style="color: #4EC9B0">TState</span><span style="color: #E6E6E6">>(</span><span style="color: #4EC9B0">TState</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">state</span><span style="color: #E6E6E6">) </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span><span style="color: #C586C0">throw</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">NotImplementedException</span><span style="color: #E6E6E6">();</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">bool</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">IsEnabled</span><span style="color: #E6E6E6">(</span><span style="color: #4EC9B0">LogLevel</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">logLevel</span><span style="color: #E6E6E6">) </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">false</span><span style="color: #E6E6E6">;</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">void</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">Log</span><span style="color: #E6E6E6">&lt;</span><span style="color: #4EC9B0">TState</span><span style="color: #E6E6E6">>(</span><span style="color: #4EC9B0">LogLevel</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">logLevel</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">EventId</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">eventId</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">TState</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">state</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">Exception</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">exception</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">Func</span><span style="color: #E6E6E6">&lt;</span><span style="color: #4EC9B0">TState</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">Exception</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">> </span><span style="color: #9CDCFE">formatter</span><span style="color: #E6E6E6">) { }</span></span>
<span class="line"><span style="color: #E6E6E6">}</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #001080">app</span><span style="color: #000000">.</span><span style="color: #795E26">UseNpgsqlRest</span><span style="color: #000000">(</span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">NpgsqlRestOptions</span></span>
<span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #008000">    // use empty logger</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">Logger</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">EmptyLogger</span><span style="color: #000000">()</span></span>
<span class="line"><span style="color: #000000">});</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #267F99">EmptyLogger</span><span style="color: #000000"> : </span><span style="color: #267F99">ILogger</span></span>
<span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #267F99">IDisposable</span><span style="color: #000000"> </span><span style="color: #795E26">BeginScope</span><span style="color: #000000">&lt;</span><span style="color: #267F99">TState</span><span style="color: #000000">>(</span><span style="color: #267F99">TState</span><span style="color: #000000"> </span><span style="color: #001080">state</span><span style="color: #000000">) => </span><span style="color: #AF00DB">throw</span><span style="color: #000000"> </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">NotImplementedException</span><span style="color: #000000">();</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">bool</span><span style="color: #000000"> </span><span style="color: #795E26">IsEnabled</span><span style="color: #000000">(</span><span style="color: #267F99">LogLevel</span><span style="color: #000000"> </span><span style="color: #001080">logLevel</span><span style="color: #000000">) => </span><span style="color: #0000FF">false</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">void</span><span style="color: #000000"> </span><span style="color: #795E26">Log</span><span style="color: #000000">&lt;</span><span style="color: #267F99">TState</span><span style="color: #000000">>(</span><span style="color: #267F99">LogLevel</span><span style="color: #000000"> </span><span style="color: #001080">logLevel</span><span style="color: #000000">, </span><span style="color: #267F99">EventId</span><span style="color: #000000"> </span><span style="color: #001080">eventId</span><span style="color: #000000">, </span><span style="color: #267F99">TState</span><span style="color: #000000"> </span><span style="color: #001080">state</span><span style="color: #000000">, </span><span style="color: #267F99">Exception</span><span style="color: #000000"> </span><span style="color: #001080">exception</span><span style="color: #000000">, </span><span style="color: #267F99">Func</span><span style="color: #000000">&lt;</span><span style="color: #267F99">TState</span><span style="color: #000000">, </span><span style="color: #267F99">Exception</span><span style="color: #000000">, </span><span style="color: #0000FF">string</span><span style="color: #000000">> </span><span style="color: #001080">formatter</span><span style="color: #000000">) { }</span></span>
<span class="line"><span style="color: #000000">}</span></span></code></pre></div><h2 id="loggername">LoggerName<a class="anchor bookmark-target" href="#loggername"><i class="bi bi-link-45deg"></i></a></h2><ul><li>Type: <code>string?</code></li><li>Default: <code>null</code></li></ul><p>Change the logger name with this option.</p><h2 id="logendpointcreatedinfo">LogEndpointCreatedInfo<a class="anchor bookmark-target" href="#logendpointcreatedinfo"><i class="bi bi-link-45deg"></i></a></h2><ul><li>Type: <code>bool</code></li><li>Default: <code>true</code></li></ul><p>When this value is true, all created endpoint events will be logged as information with method and path. Set to false to disable logging this information.</p><p>Example log entry with default Microsoft logger:</p><div class="code console"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #E6E6E6">info: NpgsqlRest[0]</span></span>
<span class="line"><span style="color: #E6E6E6">      Created endpoint POST /api/hello-world</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #000000">info: NpgsqlRest[0]</span></span>
<span class="line"><span style="color: #000000">      Created endpoint POST /api/hello-world</span></span></code></pre></div><h2 id="logconnectionnoticeevents">LogConnectionNoticeEvents<a class="anchor bookmark-target" href="#logconnectionnoticeevents"><i class="bi bi-link-45deg"></i></a></h2><ul><li>Type: <code>bool</code></li><li>Default: <code>true</code></li></ul><p>When this value is true, all connection events are logged (depending on the level). This is usually triggered by the PostgreSQL <a href="https://www.postgresql.org/docs/current/plpgsql-errors-and-messages.html"><code>RAISE</code> statements</a>. Set to false to disable logging these events.</p><p>Example function with RAISE statement:</p><div class="code sql"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">create</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">function</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">return_text</span><span style="color: #E6E6E6">(_t </span><span style="color: #569CD6">text</span><span style="color: #E6E6E6">) </span></span>
<span class="line"><span style="color: #569CD6">returns</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">text</span><span style="color: #E6E6E6"> </span></span>
<span class="line"><span style="color: #569CD6">language</span><span style="color: #E6E6E6"> plpgsql</span></span>
<span class="line"><span style="color: #569CD6">as</span><span style="color: #E6E6E6"> </span></span>
<span class="line"><span style="color: #E6E6E6">$$</span></span>
<span class="line"><span style="color: #569CD6">begin</span></span>
<span class="line"><span style="color: #E6E6E6">    raise info </span><span style="color: #CE9178">'_t = %'</span><span style="color: #E6E6E6">, _t;</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #569CD6">return</span><span style="color: #E6E6E6"> _t;</span></span>
<span class="line"><span style="color: #569CD6">end</span><span style="color: #E6E6E6">;</span></span>
<span class="line"><span style="color: #E6E6E6">$$;</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #0000FF">create</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">return_text</span><span style="color: #000000">(_t </span><span style="color: #0000FF">text</span><span style="color: #000000">) </span></span>
<span class="line"><span style="color: #0000FF">returns</span><span style="color: #000000"> </span><span style="color: #0000FF">text</span><span style="color: #000000"> </span></span>
<span class="line"><span style="color: #0000FF">language</span><span style="color: #000000"> plpgsql</span></span>
<span class="line"><span style="color: #0000FF">as</span><span style="color: #000000"> </span></span>
<span class="line"><span style="color: #000000">$$</span></span>
<span class="line"><span style="color: #0000FF">begin</span></span>
<span class="line"><span style="color: #000000">    raise info </span><span style="color: #A31515">'_t = %'</span><span style="color: #000000">, _t;</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">return</span><span style="color: #000000"> _t;</span></span>
<span class="line"><span style="color: #0000FF">end</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">$$;</span></span></code></pre></div><p>Execution for parameter value "ABC" will produce the following log:</p><div class="code console"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #E6E6E6">info: NpgsqlRest[0]</span></span>
<span class="line"><span style="color: #E6E6E6">      PL/pgSQL function return_text(text) line 3 at RAISE:</span></span>
<span class="line"><span style="color: #E6E6E6">      _t = ABC</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #000000">info: NpgsqlRest[0]</span></span>
<span class="line"><span style="color: #000000">      PL/pgSQL function return_text(text) line 3 at RAISE:</span></span>
<span class="line"><span style="color: #000000">      _t = ABC</span></span></code></pre></div><h2 id="logcommands">LogCommands<a class="anchor bookmark-target" href="#logcommands"><i class="bi bi-link-45deg"></i></a></h2><ul><li>Type: <code>bool</code></li><li>Default: <code>false</code></li></ul><p>Set this option to true to log information for every executed command and query (including parameters and parameter values).</p><p>When this option is true, the following log will be produced:</p><div class="code console"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #E6E6E6">info: NpgsqlRest[0] -- POST http://localhost:5000/api/return-text</span></span>
<span class="line"><span style="color: #E6E6E6">      select public.return_text($1)</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #000000">info: NpgsqlRest[0] -- POST http://localhost:5000/api/return-text</span></span>
<span class="line"><span style="color: #000000">      select public.return_text($1)</span></span></code></pre></div><h2 id="logcommandparameters">LogCommandParameters<a class="anchor bookmark-target" href="#logcommandparameters"><i class="bi bi-link-45deg"></i></a></h2><ul><li>Type: <code>bool</code></li><li>Default: <code>false</code></li></ul><p>Set this option to true to include parameter values when logging commands. This only applies when <code>LogCommands</code> is true.</p><p>Execution for parameter value "ABC" will produce the following log:</p><div class="code console"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #E6E6E6">info: NpgsqlRest[0] -- POST http://localhost:5000/api/return-text</span></span>
<span class="line"><span style="color: #E6E6E6">      -- $1 text = 'ABC'</span></span>
<span class="line"><span style="color: #E6E6E6">      select public.return_text($1)</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #000000">info: NpgsqlRest[0] -- POST http://localhost:5000/api/return-text</span></span>
<span class="line"><span style="color: #000000">      -- $1 text = 'ABC'</span></span>
<span class="line"><span style="color: #000000">      select public.return_text($1)</span></span></code></pre></div><h2 id="commandtimeout">CommandTimeout<a class="anchor bookmark-target" href="#commandtimeout"><i class="bi bi-link-45deg"></i></a></h2><ul><li>Type: <code>int?</code></li><li>Default: <code>null</code></li></ul><p>Sets the wait time (in seconds) on database commands, before terminating the attempt to execute a command and generating an error. This value when it is not null will override the <code>NpgsqlCommand</code> which is 30 seconds.</p><p>Command timeout property for individual endpoints can be changed with the <code>EndpointCreated</code> function callback, or by using comment annotations.</p><h2 id="defaulthttpmethod">DefaultHttpMethod<a class="anchor bookmark-target" href="#defaulthttpmethod"><i class="bi bi-link-45deg"></i></a></h2><ul><li>Type: <code>Method?</code></li><li>Default: <code>null</code></li></ul><p>When not null, force a method type for all created endpoints. Method types are <code>GET</code>, <code>PUT</code>, <code>POST</code>, <code>DELETE</code>, <code>HEAD</code>, <code>OPTIONS</code>, <code>TRACE</code>, <code>PATCH</code> or <code>CONNECT</code>. When this value is null (default), default logic will apply to determine individual endpoint methods, depending on the routine source.</p><p>For example:</p><ul><li>For function and procedures, routines with volatility option <code>VOLATILE</code> are always <code>POST</code>, unless the name starts with, <code>get_</code>, contains <code>_get_</code> or ends with <code>_get</code>, the the method is <code>GET</code>. If the volatility option is not <code>VOLATILE</code>, method is always <code>GET</code>.</li><li>For tables and views, the method depends on the type of CRUD operation. Create is <code>PUT</code>. Read is <code>GET</code>. The update is <code>POST</code>. And, delete is <code>DELETE</code>.</li></ul><p>This option for individual endpoints can be changed with the <code>EndpointCreated</code> function callback, or by using comment annotations.</p><h2 id="defaultrequestparamtype">DefaultRequestParamType<a class="anchor bookmark-target" href="#defaultrequestparamtype"><i class="bi bi-link-45deg"></i></a></h2><ul><li>Type: <code>RequestParamType?</code></li><li>Default: <code>null</code></li></ul><p>When not null, set the request parameter position (request parameter types) for all created endpoints. Values are:</p><ul><li><code>QueryString</code>: parameters are sent using the query string.</li><li><code>BodyJson</code>: parameters are sent using JSON request body.</li></ul><p>When this value is null (default), the request parameter type is <code>QueryString</code> for all <code>GET</code> and <code>DELETE</code> endpoints, otherwise, the request parameter type is <code>BodyJson</code>.</p><p>This option for individual endpoints can be changed with the <code>EndpointCreated</code> function callback, or by using comment annotations.</p><h2 id="validateparameters">ValidateParameters<a class="anchor bookmark-target" href="#validateparameters"><i class="bi bi-link-45deg"></i></a></h2><ul><li>Type: <code>Action&lt;ParameterValidationValues>?</code></li><li>Default: <code>null</code></li></ul><p>Custom parameter validation method. When this callback option is not null, it will be executed for every database parameter created.</p><p>The input structure will contain a current HTTP context that offers the opportunity to alter the response and cancel the request: If the current HTTP response reference has started or the status code is different than 200 OK, command execution will be canceled and the response will be returned.</p><p>Example:</p><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">static</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">void</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">Validate</span><span style="color: #E6E6E6">(</span><span style="color: #4EC9B0">ParameterValidationValues</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">p</span><span style="color: #E6E6E6">)</span></span>
<span class="line"><span style="color: #E6E6E6">{</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #C586C0">if</span><span style="color: #E6E6E6"> (</span><span style="color: #9CDCFE">p</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Routine</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Name</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">==</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">"my_function"</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">&&</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">p</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Parameter</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Value</span><span style="color: #D4D4D4">?</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">ToString</span><span style="color: #E6E6E6">() </span><span style="color: #D4D4D4">==</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">"XXX"</span><span style="color: #E6E6E6">)</span></span>
<span class="line"><span style="color: #E6E6E6">    {</span></span>
<span class="line"><span style="color: #E6E6E6">        </span><span style="color: #9CDCFE">p</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Context</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Response</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">StatusCode</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> (</span><span style="color: #569CD6">int</span><span style="color: #E6E6E6">)</span><span style="color: #9CDCFE">HttpStatusCode</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">BadRequest</span><span style="color: #E6E6E6">;</span></span>
<span class="line"><span style="color: #E6E6E6">    }</span></span>
<span class="line"><span style="color: #E6E6E6">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #9CDCFE">app</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">UseNpgsqlRest</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">NpgsqlRestOptions</span></span>
<span class="line"><span style="color: #E6E6E6">{</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">ValidateParameters</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">Validate</span></span>
<span class="line"><span style="color: #E6E6E6">});</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #0000FF">static</span><span style="color: #000000"> </span><span style="color: #0000FF">void</span><span style="color: #000000"> </span><span style="color: #795E26">Validate</span><span style="color: #000000">(</span><span style="color: #267F99">ParameterValidationValues</span><span style="color: #000000"> </span><span style="color: #001080">p</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">p</span><span style="color: #000000">.</span><span style="color: #001080">Routine</span><span style="color: #000000">.</span><span style="color: #001080">Name</span><span style="color: #000000"> == </span><span style="color: #A31515">"my_function"</span><span style="color: #000000"> && </span><span style="color: #001080">p</span><span style="color: #000000">.</span><span style="color: #001080">Parameter</span><span style="color: #000000">.</span><span style="color: #001080">Value</span><span style="color: #000000">?.</span><span style="color: #795E26">ToString</span><span style="color: #000000">() == </span><span style="color: #A31515">"XXX"</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">    {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #001080">p</span><span style="color: #000000">.</span><span style="color: #001080">Context</span><span style="color: #000000">.</span><span style="color: #001080">Response</span><span style="color: #000000">.</span><span style="color: #001080">StatusCode</span><span style="color: #000000"> = (</span><span style="color: #0000FF">int</span><span style="color: #000000">)</span><span style="color: #001080">HttpStatusCode</span><span style="color: #000000">.</span><span style="color: #001080">BadRequest</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">    }</span></span>
<span class="line"><span style="color: #000000">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #001080">app</span><span style="color: #000000">.</span><span style="color: #795E26">UseNpgsqlRest</span><span style="color: #000000">(</span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">NpgsqlRestOptions</span></span>
<span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">ValidateParameters</span><span style="color: #000000"> = </span><span style="color: #001080">Validate</span></span>
<span class="line"><span style="color: #000000">});</span></span></code></pre></div><h2 id="validateparametersasync">ValidateParametersAsync<a class="anchor bookmark-target" href="#validateparametersasync"><i class="bi bi-link-45deg"></i></a></h2><ul><li>Type: <code>Func&lt;ParameterValidationValues, Task>?</code></li><li>Default: <code>null</code></li></ul><p>Custom parameter validation method, the asynchronous version. When this callback option is not null, it will be executed for every database parameter created.</p><p>The input structure will contain a current HTTP context that offers the opportunity to alter the response and cancel the request: If the current HTTP response reference has started or the status code is different than 200 OK, command execution will be canceled and the response will be returned.</p><p>Example:</p><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">static</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">async</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Task</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">ValidateAsync</span><span style="color: #E6E6E6">(</span><span style="color: #4EC9B0">ParameterValidationValues</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">p</span><span style="color: #E6E6E6">)</span></span>
<span class="line"><span style="color: #E6E6E6">{</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #C586C0">if</span><span style="color: #E6E6E6"> (</span><span style="color: #9CDCFE">p</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Routine</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Name</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">==</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">"my_function"</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">&&</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">p</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Parameter</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Value</span><span style="color: #D4D4D4">?</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">ToString</span><span style="color: #E6E6E6">() </span><span style="color: #D4D4D4">==</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">"XXX"</span><span style="color: #E6E6E6">)</span></span>
<span class="line"><span style="color: #E6E6E6">    {</span></span>
<span class="line"><span style="color: #E6E6E6">        </span><span style="color: #9CDCFE">p</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Context</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Response</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">StatusCode</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> (</span><span style="color: #569CD6">int</span><span style="color: #E6E6E6">)</span><span style="color: #9CDCFE">HttpStatusCode</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">BadRequest</span><span style="color: #E6E6E6">;</span></span>
<span class="line"><span style="color: #E6E6E6">        </span><span style="color: #569CD6">await</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">p</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Context</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Response</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">WriteAsync</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">$"Paramater {</span><span style="color: #9CDCFE">p</span><span style="color: #CE9178">.</span><span style="color: #9CDCFE">ParamName</span><span style="color: #CE9178">} is not valid."</span><span style="color: #E6E6E6">);</span></span>
<span class="line"><span style="color: #E6E6E6">    }</span></span>
<span class="line"><span style="color: #E6E6E6">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #9CDCFE">app</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">UseNpgsqlRest</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">NpgsqlRestOptions</span></span>
<span class="line"><span style="color: #E6E6E6">{</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">ValidateParametersAsync</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">ValidateAsync</span></span>
<span class="line"><span style="color: #E6E6E6">});</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #0000FF">static</span><span style="color: #000000"> </span><span style="color: #0000FF">async</span><span style="color: #000000"> </span><span style="color: #267F99">Task</span><span style="color: #000000"> </span><span style="color: #795E26">ValidateAsync</span><span style="color: #000000">(</span><span style="color: #267F99">ParameterValidationValues</span><span style="color: #000000"> </span><span style="color: #001080">p</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">p</span><span style="color: #000000">.</span><span style="color: #001080">Routine</span><span style="color: #000000">.</span><span style="color: #001080">Name</span><span style="color: #000000"> == </span><span style="color: #A31515">"my_function"</span><span style="color: #000000"> && </span><span style="color: #001080">p</span><span style="color: #000000">.</span><span style="color: #001080">Parameter</span><span style="color: #000000">.</span><span style="color: #001080">Value</span><span style="color: #000000">?.</span><span style="color: #795E26">ToString</span><span style="color: #000000">() == </span><span style="color: #A31515">"XXX"</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">    {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #001080">p</span><span style="color: #000000">.</span><span style="color: #001080">Context</span><span style="color: #000000">.</span><span style="color: #001080">Response</span><span style="color: #000000">.</span><span style="color: #001080">StatusCode</span><span style="color: #000000"> = (</span><span style="color: #0000FF">int</span><span style="color: #000000">)</span><span style="color: #001080">HttpStatusCode</span><span style="color: #000000">.</span><span style="color: #001080">BadRequest</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0000FF">await</span><span style="color: #000000"> </span><span style="color: #001080">p</span><span style="color: #000000">.</span><span style="color: #001080">Context</span><span style="color: #000000">.</span><span style="color: #001080">Response</span><span style="color: #000000">.</span><span style="color: #795E26">WriteAsync</span><span style="color: #000000">(</span><span style="color: #A31515">$"Paramater {</span><span style="color: #001080">p</span><span style="color: #A31515">.</span><span style="color: #001080">ParamName</span><span style="color: #A31515">} is not valid."</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #000000">    }</span></span>
<span class="line"><span style="color: #000000">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #001080">app</span><span style="color: #000000">.</span><span style="color: #795E26">UseNpgsqlRest</span><span style="color: #000000">(</span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">NpgsqlRestOptions</span></span>
<span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">ValidateParametersAsync</span><span style="color: #000000"> = </span><span style="color: #001080">ValidateAsync</span></span>
<span class="line"><span style="color: #000000">});</span></span></code></pre></div><h2 id="commentsmode">CommentsMode<a class="anchor bookmark-target" href="#commentsmode"><i class="bi bi-link-45deg"></i></a></h2><ul><li>Type: <code>CommentsMode</code></li><li>Default: <code>ParseAll</code></li></ul><p>Configure how the comment annotations will behave:</p><ul><li><code>Ignore</code> will create all endpoints and ignore comment annotations.</li><li><code>ParseAll</code> (default) will create all endpoints and parse comment annotations to alter the endpoint.</li><li><code>OnlyWithHttpTag</code> will only create endpoints that contain the <code>HTTP</code> tag in the comments and then parse comment annotations.</li></ul><h2 id="requestheadersmode">RequestHeadersMode<a class="anchor bookmark-target" href="#requestheadersmode"><i class="bi bi-link-45deg"></i></a></h2><ul><li>Type: <code>RequestHeadersMode</code></li><li>Default: <code>Ignore</code></li></ul><p>Configure how to send request headers to PostgreSQL routines execution:</p><ul><li><code>Ignore</code>: (default) don't send any request headers to routines.</li><li><code>Context</code>: sets a context variable for the current session <code>context.headers</code> containing JSON string with current request headers. This executes <code>set_config('context.headers', headers, false)</code> before any routine executions.</li><li><code>Parameter</code>: sends request headers to the routine parameter defined with the <code>RequestHeadersParameterName</code> option. A parameter with this name must exist, must be one of the JSON or text types and must have the default value defined. This option for individual endpoints can be changed with the <code>EndpointCreated</code> function callback, or by using comment annotations.</li></ul><h2 id="requestheadersparametername">RequestHeadersParameterName<a class="anchor bookmark-target" href="#requestheadersparametername"><i class="bi bi-link-45deg"></i></a></h2><ul><li>Type: <code>string</code></li><li>Default: <code>"headers"</code></li></ul><p>Sets a parameter name that will receive a request headers JSON when the <code>Parameter</code> value is used in <code>RequestHeadersMode</code> options.</p><p>A parameter with this name must exist, must be one of the JSON or text types and must have the default value defined.</p><p>This option for individual endpoints can be changed with the <code>EndpointCreated</code> function callback, or by using comment annotations.</p><h2 id="endpointscreated">EndpointsCreated<a class="anchor bookmark-target" href="#endpointscreated"><i class="bi bi-link-45deg"></i></a></h2><ul><li>Type: <code>Action&lt;(Routine routine, RoutineEndpoint endpoint)[]>?</code></li><li>Default: <code>null</code></li></ul><p>Callback, if defined, will be executed after all endpoints are created. It receives an array of routine info and endpoint info tuples <code>(Routine routine, RoutineEndpoint endpoint)</code>. Used mostly for code generation.</p><p>Example:</p><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">static</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">void</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">WriteFile</span><span style="color: #E6E6E6">(</span><span style="color: #4EC9B0">Routine</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">routine</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">RoutineEndpoint</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">endpoint</span><span style="color: #E6E6E6">)</span></span>
<span class="line"><span style="color: #E6E6E6">{</span></span>
<span class="line"><span style="color: #6A9955">    // write file here</span></span>
<span class="line"><span style="color: #E6E6E6">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #9CDCFE">app</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">UseNpgsqlRest</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">NpgsqlRestOptions</span></span>
<span class="line"><span style="color: #E6E6E6">{</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">EndpointsCreated</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">endpoints</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span></span>
<span class="line"><span style="color: #E6E6E6">    {</span></span>
<span class="line"><span style="color: #E6E6E6">        </span><span style="color: #C586C0">foreach</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> (</span><span style="color: #9CDCFE">routine</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">endpoint</span><span style="color: #E6E6E6">) </span><span style="color: #C586C0">in</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">endpoints</span><span style="color: #E6E6E6">)</span></span>
<span class="line"><span style="color: #E6E6E6">        {</span></span>
<span class="line"><span style="color: #E6E6E6">            </span><span style="color: #DCDCAA">WriteFile</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">routine</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">endpoint</span><span style="color: #E6E6E6">);</span></span>
<span class="line"><span style="color: #E6E6E6">        }</span></span>
<span class="line"><span style="color: #E6E6E6">    }</span></span>
<span class="line"><span style="color: #E6E6E6">});</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #0000FF">static</span><span style="color: #000000"> </span><span style="color: #0000FF">void</span><span style="color: #000000"> </span><span style="color: #795E26">WriteFile</span><span style="color: #000000">(</span><span style="color: #267F99">Routine</span><span style="color: #000000"> </span><span style="color: #001080">routine</span><span style="color: #000000">, </span><span style="color: #267F99">RoutineEndpoint</span><span style="color: #000000"> </span><span style="color: #001080">endpoint</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #008000">    // write file here</span></span>
<span class="line"><span style="color: #000000">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #001080">app</span><span style="color: #000000">.</span><span style="color: #795E26">UseNpgsqlRest</span><span style="color: #000000">(</span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">NpgsqlRestOptions</span></span>
<span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">EndpointsCreated</span><span style="color: #000000"> = </span><span style="color: #001080">endpoints</span><span style="color: #000000"> => </span></span>
<span class="line"><span style="color: #000000">    {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #AF00DB">foreach</span><span style="color: #000000">(</span><span style="color: #0000FF">var</span><span style="color: #000000"> (</span><span style="color: #001080">routine</span><span style="color: #000000">, </span><span style="color: #001080">endpoint</span><span style="color: #000000">) </span><span style="color: #AF00DB">in</span><span style="color: #000000"> </span><span style="color: #001080">endpoints</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">        {</span></span>
<span class="line"><span style="color: #000000">            </span><span style="color: #795E26">WriteFile</span><span style="color: #000000">(</span><span style="color: #001080">routine</span><span style="color: #000000">, </span><span style="color: #001080">endpoint</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #000000">        }</span></span>
<span class="line"><span style="color: #000000">    }</span></span>
<span class="line"><span style="color: #000000">});</span></span></code></pre></div><h2 id="commandcallbackasync">CommandCallbackAsync<a class="anchor bookmark-target" href="#commandcallbackasync"><i class="bi bi-link-45deg"></i></a></h2><ul><li>Type: <code>Func&lt;(Routine routine, NpgsqlCommand command, HttpContext context), Task>?</code></li><li>Default: <code>null</code></li></ul><p>Asynchronous callback function that, if defined, will be called after every database command is created and before it has been executed.</p><p>It receives a tuple parameter with routine info, a newly created command and the current HTTP context. Command instance and HTTP context offer the opportunity to execute the command and return a completely different, custom response format.</p><p>If the current HTTP context is modified in any shape or form, it will be returned immediately, otherwise, it will fall back to a default behavior.</p><p>Example of returning a custom format in CSV rather than JSON:</p><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">static</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">async</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Task</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">CommandCallbackAsync</span><span style="color: #E6E6E6">((</span><span style="color: #4EC9B0">Routine</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">routine</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">NpgsqlCommand</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">command</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">HttpContext</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">context</span><span style="color: #E6E6E6">) </span><span style="color: #9CDCFE">p</span><span style="color: #E6E6E6">)</span></span>
<span class="line"><span style="color: #E6E6E6">{</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #C586C0">if</span><span style="color: #E6E6E6"> (</span><span style="color: #9CDCFE">p</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">routine</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Name</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">==</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">"get_csv_data"</span><span style="color: #E6E6E6">)</span></span>
<span class="line"><span style="color: #E6E6E6">    {</span></span>
<span class="line"><span style="color: #E6E6E6">        </span><span style="color: #9CDCFE">p</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">context</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Response</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">ContentType</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">"text/csv"</span><span style="color: #E6E6E6">;</span></span>
<span class="line"><span style="color: #E6E6E6">        </span><span style="color: #569CD6">await</span><span style="color: #E6E6E6"> </span><span style="color: #C586C0">using</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">reader</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">await</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">p</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">command</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">ExecuteReaderAsync</span><span style="color: #E6E6E6">();</span></span>
<span class="line"><span style="color: #E6E6E6">        </span><span style="color: #C586C0">while</span><span style="color: #E6E6E6"> (</span><span style="color: #569CD6">await</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">reader</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">ReadAsync</span><span style="color: #E6E6E6">())</span></span>
<span class="line"><span style="color: #E6E6E6">        {</span></span>
<span class="line"><span style="color: #E6E6E6">            </span><span style="color: #569CD6">await</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">p</span></span>
<span class="line"><span style="color: #E6E6E6">                .</span><span style="color: #9CDCFE">context</span></span>
<span class="line"><span style="color: #E6E6E6">                .</span><span style="color: #9CDCFE">Response</span></span>
<span class="line"><span style="color: #E6E6E6">                .</span><span style="color: #DCDCAA">WriteAsync</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">$"{</span><span style="color: #9CDCFE">reader</span><span style="color: #CE9178">[</span><span style="color: #B5CEA8">0</span><span style="color: #CE9178">]},{</span><span style="color: #9CDCFE">reader</span><span style="color: #CE9178">[</span><span style="color: #B5CEA8">1</span><span style="color: #CE9178">]},{</span><span style="color: #9CDCFE">reader</span><span style="color: #CE9178">.</span><span style="color: #DCDCAA">GetDateTime</span><span style="color: #CE9178">(</span><span style="color: #B5CEA8">2</span><span style="color: #CE9178">)</span><span style="color: #D4D4D4">:</span><span style="color: #9CDCFE">s</span><span style="color: #CE9178">},{</span><span style="color: #9CDCFE">reader</span><span style="color: #CE9178">.</span><span style="color: #DCDCAA">GetBoolean</span><span style="color: #CE9178">(</span><span style="color: #B5CEA8">3</span><span style="color: #CE9178">).</span><span style="color: #DCDCAA">ToString</span><span style="color: #CE9178">().</span><span style="color: #DCDCAA">ToLowerInvariant</span><span style="color: #CE9178">()}</span><span style="color: #D7BA7D">\n</span><span style="color: #CE9178">"</span><span style="color: #E6E6E6">);</span></span>
<span class="line"><span style="color: #E6E6E6">        }</span></span>
<span class="line"><span style="color: #E6E6E6">    }</span></span>
<span class="line"><span style="color: #E6E6E6">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #9CDCFE">app</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">UseNpgsqlRest</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">NpgsqlRestOptions</span></span>
<span class="line"><span style="color: #E6E6E6">{</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">CommandCallbackAsync</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">CommandCallbackAsync</span></span>
<span class="line"><span style="color: #E6E6E6">});</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #0000FF">static</span><span style="color: #000000"> </span><span style="color: #0000FF">async</span><span style="color: #000000"> </span><span style="color: #267F99">Task</span><span style="color: #000000"> </span><span style="color: #795E26">CommandCallbackAsync</span><span style="color: #000000">((</span><span style="color: #267F99">Routine</span><span style="color: #000000"> </span><span style="color: #001080">routine</span><span style="color: #000000">, </span><span style="color: #267F99">NpgsqlCommand</span><span style="color: #000000"> </span><span style="color: #001080">command</span><span style="color: #000000">, </span><span style="color: #267F99">HttpContext</span><span style="color: #000000"> </span><span style="color: #001080">context</span><span style="color: #000000">) </span><span style="color: #001080">p</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">p</span><span style="color: #000000">.</span><span style="color: #001080">routine</span><span style="color: #000000">.</span><span style="color: #001080">Name</span><span style="color: #000000"> == </span><span style="color: #A31515">"get_csv_data"</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">    {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #001080">p</span><span style="color: #000000">.</span><span style="color: #001080">context</span><span style="color: #000000">.</span><span style="color: #001080">Response</span><span style="color: #000000">.</span><span style="color: #001080">ContentType</span><span style="color: #000000"> = </span><span style="color: #A31515">"text/csv"</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0000FF">await</span><span style="color: #000000"> </span><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">reader</span><span style="color: #000000"> = </span><span style="color: #0000FF">await</span><span style="color: #000000"> </span><span style="color: #001080">p</span><span style="color: #000000">.</span><span style="color: #001080">command</span><span style="color: #000000">.</span><span style="color: #795E26">ExecuteReaderAsync</span><span style="color: #000000">();</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #AF00DB">while</span><span style="color: #000000"> (</span><span style="color: #0000FF">await</span><span style="color: #000000"> </span><span style="color: #001080">reader</span><span style="color: #000000">.</span><span style="color: #795E26">ReadAsync</span><span style="color: #000000">())</span></span>
<span class="line"><span style="color: #000000">        {</span></span>
<span class="line"><span style="color: #000000">            </span><span style="color: #0000FF">await</span><span style="color: #000000"> </span><span style="color: #001080">p</span></span>
<span class="line"><span style="color: #000000">                .</span><span style="color: #001080">context</span></span>
<span class="line"><span style="color: #000000">                .</span><span style="color: #001080">Response</span></span>
<span class="line"><span style="color: #000000">                .</span><span style="color: #795E26">WriteAsync</span><span style="color: #000000">(</span><span style="color: #A31515">$"{</span><span style="color: #001080">reader</span><span style="color: #A31515">[</span><span style="color: #098658">0</span><span style="color: #A31515">]},{</span><span style="color: #001080">reader</span><span style="color: #A31515">[</span><span style="color: #098658">1</span><span style="color: #A31515">]},{</span><span style="color: #001080">reader</span><span style="color: #A31515">.</span><span style="color: #795E26">GetDateTime</span><span style="color: #A31515">(</span><span style="color: #098658">2</span><span style="color: #A31515">)</span><span style="color: #000000">:</span><span style="color: #001080">s</span><span style="color: #A31515">},{</span><span style="color: #001080">reader</span><span style="color: #A31515">.</span><span style="color: #795E26">GetBoolean</span><span style="color: #A31515">(</span><span style="color: #098658">3</span><span style="color: #A31515">).</span><span style="color: #795E26">ToString</span><span style="color: #A31515">().</span><span style="color: #795E26">ToLowerInvariant</span><span style="color: #A31515">()}</span><span style="color: #EE0000">\n</span><span style="color: #A31515">"</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #000000">        }</span></span>
<span class="line"><span style="color: #000000">    }</span></span>
<span class="line"><span style="color: #000000">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #001080">app</span><span style="color: #000000">.</span><span style="color: #795E26">UseNpgsqlRest</span><span style="color: #000000">(</span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">NpgsqlRestOptions</span></span>
<span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">CommandCallbackAsync</span><span style="color: #000000"> = </span><span style="color: #001080">CommandCallbackAsync</span></span>
<span class="line"><span style="color: #000000">});</span></span></code></pre></div><h2 id="endpointcreatehandlers">EndpointCreateHandlers<a class="anchor bookmark-target" href="#endpointcreatehandlers"><i class="bi bi-link-45deg"></i></a></h2><ul><li>Type: <code>IEnumerable&lt;IEndpointCreateHandler></code></li><li>Default: <code>[]</code></li></ul><p>List of <code>IEndpointCreateHandler</code> type handlers executed sequentially after endpoints are created. Used to add the different code generation plugins.</p><p>Example:</p><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #9CDCFE">app</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">UseNpgsqlRest</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">NpgsqlRestOptions</span></span>
<span class="line"><span style="color: #E6E6E6">{</span></span>
<span class="line"><span style="color: #6A9955">    // create HTTP file and the Typescript Client from plugins</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">EndpointCreateHandlers</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> [</span></span>
<span class="line"><span style="color: #E6E6E6">        </span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">HttpFile</span><span style="color: #E6E6E6">(), </span></span>
<span class="line"><span style="color: #E6E6E6">        </span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">TsClient</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"../Frontend/src/api.ts"</span><span style="color: #E6E6E6">)]</span></span>
<span class="line"><span style="color: #E6E6E6">});</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #001080">app</span><span style="color: #000000">.</span><span style="color: #795E26">UseNpgsqlRest</span><span style="color: #000000">(</span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">NpgsqlRestOptions</span></span>
<span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #008000">    // create HTTP file and the Typescript Client from plugins</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">EndpointCreateHandlers</span><span style="color: #000000"> = [</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">HttpFile</span><span style="color: #000000">(), </span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">TsClient</span><span style="color: #000000">(</span><span style="color: #A31515">"../Frontend/src/api.ts"</span><span style="color: #000000">)]</span></span>
<span class="line"><span style="color: #000000">});</span></span></code></pre></div><h2 id="sourcescreated">SourcesCreated<a class="anchor bookmark-target" href="#sourcescreated"><i class="bi bi-link-45deg"></i></a></h2><ul><li>Type: <code>Action&lt;List&lt;IRoutineSource>></code></li><li>Default: <code>source => {}</code></li></ul><p>Action callback that, if defined, is executed after routine sources are created and before they are processed into endpoints.</p><p>Receives a parameter with the list of <code>IRoutineSource</code> instances. This list will always contain a single item - functions and procedures source. Use this callback to modify the routine source list and add new sources from plugins.</p><p>Example:</p><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #9CDCFE">app</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">UseNpgsqlRest</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">NpgsqlRestOptions</span></span>
<span class="line"><span style="color: #E6E6E6">{</span></span>
<span class="line"><span style="color: #6A9955">    // add tables and views CRUD source from plugin</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">SourcesCreated</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">sources</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">sources</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Add</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">CrudSource</span><span style="color: #E6E6E6">())</span></span>
<span class="line"><span style="color: #E6E6E6">});</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #001080">app</span><span style="color: #000000">.</span><span style="color: #795E26">UseNpgsqlRest</span><span style="color: #000000">(</span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">NpgsqlRestOptions</span></span>
<span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #008000">    // add tables and views CRUD source from plugin</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">SourcesCreated</span><span style="color: #000000"> = </span><span style="color: #001080">sources</span><span style="color: #000000"> => </span><span style="color: #001080">sources</span><span style="color: #000000">.</span><span style="color: #795E26">Add</span><span style="color: #000000">(</span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">CrudSource</span><span style="color: #000000">())</span></span>
<span class="line"><span style="color: #000000">});</span></span></code></pre></div><h2 id="textresponsenullhandling">TextResponseNullHandling<a class="anchor bookmark-target" href="#textresponsenullhandling"><i class="bi bi-link-45deg"></i></a></h2><ul><li>Type: <code>TextResponseNullHandling</code></li><li>Default: <code>EmptyString</code></li></ul><p>Sets the default behavior of plain text responses when the execution returns the <code>NULL</code> value from the database:</p><ul><li><code>EmptyString</code> (default) returns an empty string response with status code 200 OK.</li><li><code>NullLiteral</code> returns a string literal <code>NULL</code> with the status code 200 OK.</li><li><code>NoContent</code> returns status code 204 NO CONTENT.</li></ul><p>This option for individual endpoints can be changed with the <code>EndpointCreated</code> function callback, or by using comment annotations.</p><h2 id="querystringnullhandling">QueryStringNullHandling<a class="anchor bookmark-target" href="#querystringnullhandling"><i class="bi bi-link-45deg"></i></a></h2><ul><li>Type: <code>QueryStringNullHandling</code></li><li>Default: <code>Ignore</code></li></ul><p>Sets the default behavior on how to pass the <code>NULL</code> values with query strings:</p><ul><li><code>EmptyString</code> empty string values are interpreted as <code>NULL</code> values. This limits sending empty strings via query strings.</li><li><code>NullLiteral</code> literal string values <code>NULL</code> (case insensitive) are interpreted as <code>NULL</code> values.</li><li><code>Ignore</code> (default) <code>NULL</code> values are ignored, query string receives only empty strings.</li></ul><p>This option for individual endpoints can be changed with the <code>EndpointCreated</code> function callback, or by using comment annotations.</p><div class="pt-5 border-top"><div id="comments-section" class="h5">Comments</div><script defer src="https://cdn.commento.io/js/commento.js" data-no-fonts="true" data-css-override="https://vb-consulting.github.io/style.css"></script><div id="commento"></div></div><footer class="mt-3 py-5"><div class="w-fit mx-auto mb-3 border-top border-bottom"><div class="alert text-center fs-smaller text-muted"><div class="alert text-center fs-smaller text-muted mb-1">If you like my content, use my software, or otherwise benefit from my work, consider supporting me by buying me a coffee. The software runs on coffee after all.</div><a class="btn rl-arrow" target="_blank" data-bs-toggle="tooltip" data-bs-html="true" title="Click Here to Buy Me a Coffee Or Scan the Code" href="https://www.buymeacoffee.com/vbilopavu" style="display: inline-grid;">Buy me a Coffee <img class="m-auto svelte-byttq0" alt="Scan Here To Buy Me a Cofee" src="/bmc_qr.png"></a></div></div><div class="d-flex justify-content-center"><a class="btn rl-arrow me-1" target="_blank" data-bs-toggle="tooltip" data-bs-html="true" title="options.md on GitHub" href="https://github.com/vb-consulting/NpgsqlRest/blob/master/options.md" style="display: inline-grid;">options.md on GitHub <i class="bi bi-github"></i></a> <a class="btn rl-arrow" target="_blank" data-bs-toggle="tooltip" data-bs-html="true" title="I Post Software Development Content Daily" href="https://www.linkedin.com/in/vb-software/" style="display: inline-grid;">Follow me on LinkedIn <i class="bi bi-linkedin"></i></a></div><div class="text-center"><div class="mt-5 mb-5 background-floki svelte-byttq0" data-bs-toggle="tooltip" data-bs-html="true" title="Floki is a developer dog."></div></div></footer></div></div><div class="rightside svelte-9zwk14"><div class="svelte-9zwk14"><ul class="navbar-nav sidenav svelte-9zwk14"><li class="nav-txt-divider text-muted svelte-9zwk14"><hr class="svelte-9zwk14"><span class="svelte-9zwk14">on this page</span><hr class="svelte-9zwk14"></li><li class="nav-item toc1 right svelte-9zwk14 bookmark-nav" data-id="npgsql-options" title="Npgsql Options"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#npgsql-options">Npgsql Options</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="bufferrows" title="BufferRows"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#bufferrows">BufferRows</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="connectionstring" title="ConnectionString"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#connectionstring">ConnectionString</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="schemasimilarto" title="SchemaSimilarTo"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#schemasimilarto">SchemaSimilarTo</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="schemanotsimilarto" title="SchemaNotSimilarTo"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#schemanotsimilarto">SchemaNotSimilarTo</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="includeschemas" title="IncludeSchemas"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#includeschemas">IncludeSchemas</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="excludeschemas" title="ExcludeSchemas"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#excludeschemas">ExcludeSchemas</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="namesimilarto" title="NameSimilarTo"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#namesimilarto">NameSimilarTo</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="namenotsimilarto" title="NameNotSimilarTo"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#namenotsimilarto">NameNotSimilarTo</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="includenames" title="IncludeNames"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#includenames">IncludeNames</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="excludenames" title="ExcludeNames"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#excludenames">ExcludeNames</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="urlpathprefix" title="UrlPathPrefix"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#urlpathprefix">UrlPathPrefix</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="urlpathbuilder" title="UrlPathBuilder"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#urlpathbuilder">UrlPathBuilder</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="connectionfromserviceprovider" title="ConnectionFromServiceProvider"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#connectionfromserviceprovider">ConnectionFromServiceProvider</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="endpointcreated" title="EndpointCreated"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#endpointcreated">EndpointCreated</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="nameconverter" title="NameConverter"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#nameconverter">NameConverter</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="requiresauthorization" title="RequiresAuthorization"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#requiresauthorization">RequiresAuthorization</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="logger" title="Logger"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#logger">Logger</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="loggername" title="LoggerName"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#loggername">LoggerName</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="logendpointcreatedinfo" title="LogEndpointCreatedInfo"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#logendpointcreatedinfo">LogEndpointCreatedInfo</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="logconnectionnoticeevents" title="LogConnectionNoticeEvents"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#logconnectionnoticeevents">LogConnectionNoticeEvents</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="logcommands" title="LogCommands"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#logcommands">LogCommands</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="logcommandparameters" title="LogCommandParameters"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#logcommandparameters">LogCommandParameters</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="commandtimeout" title="CommandTimeout"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#commandtimeout">CommandTimeout</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="defaulthttpmethod" title="DefaultHttpMethod"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#defaulthttpmethod">DefaultHttpMethod</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="defaultrequestparamtype" title="DefaultRequestParamType"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#defaultrequestparamtype">DefaultRequestParamType</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="validateparameters" title="ValidateParameters"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#validateparameters">ValidateParameters</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="validateparametersasync" title="ValidateParametersAsync"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#validateparametersasync">ValidateParametersAsync</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="commentsmode" title="CommentsMode"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#commentsmode">CommentsMode</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="requestheadersmode" title="RequestHeadersMode"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#requestheadersmode">RequestHeadersMode</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="requestheadersparametername" title="RequestHeadersParameterName"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#requestheadersparametername">RequestHeadersParameterName</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="endpointscreated" title="EndpointsCreated"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#endpointscreated">EndpointsCreated</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="commandcallbackasync" title="CommandCallbackAsync"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#commandcallbackasync">CommandCallbackAsync</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="endpointcreatehandlers" title="EndpointCreateHandlers"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#endpointcreatehandlers">EndpointCreateHandlers</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="sourcescreated" title="SourcesCreated"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#sourcescreated">SourcesCreated</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="textresponsenullhandling" title="TextResponseNullHandling"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#textresponsenullhandling">TextResponseNullHandling</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="querystringnullhandling" title="QueryStringNullHandling"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#querystringnullhandling">QueryStringNullHandling</a></li></ul></div></div></main><script>!function(){var i=document.querySelector("nav.navbar"),f=document.getElementsByTagName("main")[0],L=f.getElementsByClassName("sidebar")[0],w=f.getElementsByClassName("content")[0],o=document.querySelectorAll("div.code"),k=i.querySelector(".home");function E(e,t){for(var n=1;n<arguments.length;n++)e.classList.remove(arguments[n])}function T(e,t){for(var n=1;n<arguments.length;n++)e.classList.remove(arguments[n]);E(e,t),e.classList.add(t)}function t(e,t){var n=e.currentTarget;if(!n.classList.contains("bi-check")){for(var i="",o=0;o<n.classList.length;o++)if(n.classList[o].startsWith("bi-")){i=n.classList[o];break}n.classList.remove(i),n.classList.add("spinner-border-sm"),n.classList.add("spinner-border");e=bootstrap.Tooltip.getInstance(n);e&&(e.setContent({".tooltip-inner":"Copying..."}),e.show()),t(n,function(){var e;n.classList.remove(i),n.classList.remove("spinner-border-sm"),n.classList.remove("spinner-border"),n.classList.add("bi-check"),bootstrap&&(e=bootstrap.Tooltip.getInstance(n))&&(e.setContent({".tooltip-inner":"Copied!"}),e.show()),setTimeout(function(){var e;n.classList.add(i),n.classList.remove("bi-check"),bootstrap&&(e=bootstrap.Tooltip.getInstance(n))&&e.setContent({".tooltip-inner":n.dataset.bsTitle})},2e3)})}}"/"==document.location.pathname&&T(k,"d-none");var e=document.querySelector(".post-share > .copy-url"),n=(e&&e.addEventListener("click",function(e){t(e,function(e,t){navigator.clipboard.writeText(document.location.origin+document.location.pathname),t()})}),document.getElementsByTagName("html")[0]),a=i.querySelector("#theme-btn"),s="theme";function l(e){var t=a.getElementsByTagName("svg");"dark"===e?(t[0].style.display="",t[1].style.display="none",a.getElementsByClassName("check")[0].classList.add("checked")):(t[0].style.display="none",t[1].style.display="",a.getElementsByClassName("check")[0].classList.remove("checked"));for(var n=0;n<o.length;n++){var i=o[n];"dark"===e?(i.children[1].style.display="inherit",i.children[2].style.display="none"):"light"===e&&(i.children[1].style.display="none",i.children[2].style.display="inherit")}window._theme&&window._theme(e)}function r(e){t(e,function(e,t){navigator.clipboard.writeText(e.parentElement.nextSibling.innerText),t()})}function c(e){t(e,function(e,t){var n=localStorage.getItem(s);e="dark"===n?e.parentElement.parentElement.children[1]:e.parentElement.parentElement.children[2],setTimeout(function(){html2canvas(e).then(e=>{e.toBlob(e=>navigator.clipboard.write([new ClipboardItem({"image/png":e})])),t()})},0)})}a.addEventListener("click",()=>{var e="dark"===localStorage.getItem(s)?"light":"dark";localStorage.setItem(s,e),l(n.dataset.bsTheme=e)}),l(localStorage.getItem(s)),a.children[0].classList.remove("hidden");for(var d=0;d<o.length;d++){o[d].getElementsByClassName("copy-code")[0].addEventListener("click",r);var m=o[d].getElementsByClassName("photo-code");m.length&&m[0].addEventListener("click",c)}for(var S=function(){var a,o,s;if(f.children[2]&&"none"!=f.children[2].style.display)return a=f.querySelector(".main-content").querySelectorAll("[id]"),o=void 0,this.initNavs=function(e){s=e.querySelectorAll("li.bookmark-nav");for(var t=0;t<a.length;t++){for(var n=a[t].id,i=null,o=0;o<s.length;o++)if(s[o].dataset.id==n){i=s[o];break}a[t].nav=i}setTimeout(function(){for(var e=0;e<a.length;e++){var t=a[e];if(l(t).visible&&t.nav)return void t.nav.classList.add("active")}},1e3),r()},f.children[1].addEventListener("scroll",r),this;function l(e){var e=e.getBoundingClientRect(),t=Math.max(document.documentElement.clientHeight,window.innerHeight),n=0<e.top&&!(e.bottom<0||0<=e.top-t)||e.top<0&&e.bottom>t,i=!1;return{visible:n,above:i=n?i:e.bottom<t}}function r(){if(s&&s.length){for(var e=0;e<s.length;e++)s[e].classList.remove("active");for(var t=void 0,e=0;e<a.length;e++){const i=a[e];var n=l(i);if(!n.visible&&n.above&&(t=i.nav),n.visible&&i.nav&&!i.nav.classList.contains("active"))return i.nav.classList.add("active"),o&&clearTimeout(o),void(o=setTimeout(function(){i.nav.scrollIntoView({behavior:"smooth"}),o=void 0},250))}t&&!t.classList.contains("active")&&(t.classList.add("active"),o&&clearTimeout(o),o=setTimeout(function(){t.scrollIntoView({behavior:"smooth"}),o=void 0},250))}}}(),h=function(){var l,r=i.querySelector("#nav-btn"),c=480,d="200px",m="0.25fr",h=730,v=535,u=f.children[0].children[0].children[0],g=f.children[2]&&f.children[2].children[0].children[0],t="sidebar-pinned",p=null==localStorage.getItem(t)||"true"==localStorage.getItem(t),y=!1,b=!1;function n(){window._onresize&&window._onresize();var e=window.outerWidth||window.innerWidth,t=e<c,n=t?y?"100%":"0":p?""+d:"0",i=`grid-template-columns: ${n} 1fr`,o=t&&y?"width: 100%":"0"!=n?"":"display: none",a=t&&y?"display: none":"",s=t?y?"sidebar-show":"sidebar-hide":p?"sidebar-show":"sidebar-hide",n="0"==n;f.children[2]&&(m&&h&&v&&(n&&e<v||!n&&e<h?b||(u.innerHTML=l+g.innerHTML,S.initNavs(u),b=!0):b&&(u.innerHTML=l,S.initNavs(g),b=!1)),!m||t||b?(i+=";",f.children[2].style.display="none"):(i+=` ${m};`,f.children[2].style.display="")),T(r,!t&&p||t&&y?"rotate":"rotate-back","rotate","rotate-back"),p?(r.classList.add("text-shadow"),null==document.querySelector("main .sidebar .accordion > [title='VB-Consulting'] > .collapsed")&&T(k,"d-none")):("/"!=document.location.pathname&&E(k,"d-none"),r.classList.remove("text-shadow")),f.style=L?i:"display: grid;",L&&T(L,s,"sidebar-show","sidebar-hide"),L&&(L.firstChild.style=o),w.style=a,t&&!y&&"/"!=document.location.pathname&&E(k,"d-none"),t&&y&&T(k,"d-none")}function e(){var e=window.outerWidth<c;e?y=!y:p=!p,localStorage.setItem(t,p.toString()),n(),p?(r.classList.add("text-shadow"),null==document.querySelector("main .sidebar .accordion > [title='VB-Consulting'] > .collapsed")&&T(k,"d-none")):("/"!=document.location.pathname&&E(k,"d-none"),r.classList.remove("text-shadow")),e&&!y&&"/"!=document.location.pathname&&E(k,"d-none"),e&&y&&T(k,"d-none")}return m&&h&&v&&g&&(l=u.innerHTML,S.initNavs(g)),r.addEventListener("click",e),(window.onresize=n)(),this.closeSidebar=function(){window.outerWidth<c&&y&&e()},this}(),v=document.getElementsByClassName("auto-close"),u=0;u<v.length;u++)v[u].addEventListener("click",function(e){h.closeSidebar()});location.hash&&(e=document.getElementById(location.hash.replace("#","")))&&e.scrollIntoView()}();</script><script src="/bootstrap.bundle.min.js"></script><script>!function(){for(var e=document.querySelectorAll('[data-bs-toggle="tooltip"]'),t=0;t<e.length;t++)new bootstrap.Tooltip(e[t]);var n=document.getElementsByClassName("accordion-item");if(n.length){for(t=0;t<n.length;t++){var o=n[t];o.querySelectorAll("[href='"+document.location.pathname+"']").length&&o.firstChild.click()}var l=document.querySelector("nav.navbar").querySelector(".home"),a=document.getElementsByClassName("accordion");"/"==document.location.pathname&&l.classList.add("d-none");for(t=0;t<n.length;t++){var s=a[t];s&&s.firstChild&&"VB-Consulting"==s.firstChild.title&&(null!=s.firstChild.querySelector(".collapse")&&l.classList.contains("d-none")&&"/"!=document.location.pathname&&l.classList.remove("d-none"),s.addEventListener("show.bs.collapse",function(){"/"!=document.location.pathname&&l.classList.remove("d-none"),l.classList.add("d-none")}),s.addEventListener("hide.bs.collapse",function(){"/"!=document.location.pathname&&l.classList.remove("d-none")}))}}}();</script><script src="/html2canvas.min.js"></script><script async defer src="https://buttons.github.io/buttons.js"></script></body><script async data-id="101435862" src="//static.getclicky.com/js"></script></html>