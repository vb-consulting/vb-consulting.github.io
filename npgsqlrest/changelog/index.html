<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>NpgsqlRest - Automatic REST API for PostgreSQL Database as .NET8 Middleware</title><meta name="description" content="Automatic REST API for PostgreSQL Database as .NET8 Middleware"><meta name="keywords" content="api, api-rest, restful-api, http, postgres, dotnet, net8, c#, aot, database, rest, server, postgresql, npgsqlrest, pgsql, pg, automatic"><link href="https://vb-consulting.github.io//npgsqlrest/changelog/" rel="canonical"><link rel="stylesheet" href="/_elderjs/assets/svelte-57e0898a.css" media="all"><style></style><link href="/style.css?1735558461414" rel="stylesheet"><script>!function(){var e="theme",t=localStorage.getItem(e);t||(t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",localStorage.setItem(e,t)),document.getElementsByTagName("html")[0].dataset.bsTheme=t}();</script></head><body class="d-flex flex-column h-100"><header id="header"><nav class="navbar navbar-expand-md navbar-dark fixed-top py-0 py-md-0 svelte-30jr7w"><div class="container-fluid flex-nowrap svelte-30jr7w"><div class="d-flex svelte-30jr7w"><button id="nav-btn" type="button" class="d-flex btn btn-sm logo animate-rotate svelte-30jr7w"><i class="material-icons-outlined">menu</i></button> <a class="nav-link my-auto ms-2 fw-semibold home svelte-30jr7w" href="/"><i class="bi-chevron-double-left"></i> VB Home</a></div><div class="d-flex right svelte-30jr7w"><a class="nav-link my-auto svelte-30jr7w" data-bs-toggle="tooltip" data-bs-html="true" title="Become a Patreon" href="https://www.patreon.com/vbconsulting" target="_blank"><div class="patreon"></div></a><div class="vr1 text-muted my-auto svelte-30jr7w"></div><a class="nav-link my-auto svelte-30jr7w" data-bs-toggle="tooltip" data-bs-html="true" title="Buy Me a Coffee" href="https://www.buymeacoffee.com/vbilopavu" target="_blank"><div class="bmc"></div></a><div class="vr1 text-muted my-auto svelte-30jr7w"></div><a class="nav-link my-auto me-2 svelte-30jr7w" data-bs-toggle="tooltip" data-bs-html="true" title="changelog.md on GitHub" href="https://github.com/vb-consulting/NpgsqlRest/blob/master/changelog.md"><i class="bi-github"></i></a> <a class="github-button svelte-30jr7w" href="https://github.com/vb-consulting/NpgsqlRest/blob/master/changelog.md" data-bs-toggle="tooltip" data-bs-html="true" title="Star changelog.md on GitHub" data-color-scheme="no-preference: light_high_contrast; light: light_high_contrast; dark: light_high_contrast;" data-icon="octicon-star" data-show-count="true" aria-label="Star changelog.md on GitHub"></a><div class="vr1 text-muted my-auto svelte-30jr7w"></div><button id="theme-btn" type="button" aria-pressed="true" aria-label="theme" class="svelte-30jr7w"><span class="check hidden svelte-30jr7w"><span class="icon svelte-30jr7w"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="svelte-30jr7w"><path fill="currentColor" d="M12 21q-3.775 0-6.388-2.613T3 12q0-3.45 2.25-5.988T11 3.05q.625-.075.975.45t-.025 1.1q-.425.65-.638 1.375T11.1 7.5q0 2.25 1.575 3.825T16.5 12.9q.775 0 1.538-.225t1.362-.625q.525-.35 1.075-.037t.475.987q-.35 3.45-2.937 5.725T12 21Zm0-2q2.2 0 3.95-1.213t2.55-3.162q-.5.125-1 .2t-1 .075q-3.075 0-5.238-2.163T9.1 7.5q0-.5.075-1t.2-1q-1.95.8-3.163 2.55T5 12q0 2.9 2.05 4.95T12 19Zm-.25-6.75Z"></path></svg> <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="svelte-30jr7w"><g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M0 0h24v24H0z"></path><path fill="currentColor" d="M12 19a1 1 0 0 1 .993.883L13 20v1a1 1 0 0 1-1.993.117L11 21v-1a1 1 0 0 1 1-1zm6.313-2.09l.094.083l.7.7a1 1 0 0 1-1.32 1.497l-.094-.083l-.7-.7a1 1 0 0 1 1.218-1.567l.102.07zm-11.306.083a1 1 0 0 1 .083 1.32l-.083.094l-.7.7a1 1 0 0 1-1.497-1.32l.083-.094l.7-.7a1 1 0 0 1 1.414 0zM4 11a1 1 0 0 1 .117 1.993L4 13H3a1 1 0 0 1-.117-1.993L3 11h1zm17 0a1 1 0 0 1 .117 1.993L21 13h-1a1 1 0 0 1-.117-1.993L20 11h1zM6.213 4.81l.094.083l.7.7a1 1 0 0 1-1.32 1.497l-.094-.083l-.7-.7A1 1 0 0 1 6.11 4.74l.102.07zm12.894.083a1 1 0 0 1 .083 1.32l-.083.094l-.7.7a1 1 0 0 1-1.497-1.32l.083-.094l.7-.7a1 1 0 0 1 1.414 0zM12 2a1 1 0 0 1 .993.883L13 3v1a1 1 0 0 1-1.993.117L11 4V3a1 1 0 0 1 1-1zm0 5a5 5 0 1 1-4.995 5.217L7 12l.005-.217A5 5 0 0 1 12 7z"></path></g></svg></span></span></button></div></div></nav></header><main class="svelte-9zwk14"><div class="sidebar sidebar-hide svelte-9zwk14"><div class="svelte-9zwk14"><ul class="navbar-nav sidenav accordion svelte-9zwk14"><li class="accordion-item svelte-9zwk14" title="VB-Consulting"><button class="accordion-header accordion-button collapsed svelte-9zwk14 text-uppercase" href="/" type="button" data-bs-toggle="collapse" data-bs-target="#accordion-vb-consulting" aria-expanded="false" aria-controls="accordion-vb-consulting">VB-Consulting</button><div id="accordion-vb-consulting" class="accordion-collapse collapse"><div class="accordion-body svelte-9zwk14"><ul class="navbar-nav"><li class="nav-item svelte-9zwk14" data-id="" title="Home"><a class="nav-link svelte-9zwk14 text-uppercase" href="/">Home</a></li><li class="nav-divider svelte-9zwk14"><hr class="svelte-9zwk14"></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="Norm.Net"><a class="nav-link svelte-9zwk14 text-uppercase" href="/norm.net/">Norm.Net</a></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="RazorSvelte"><a class="nav-link svelte-9zwk14 text-uppercase" href="/razorsvelte/">RazorSvelte</a></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="PgRoutiner"><a class="nav-link svelte-9zwk14 text-uppercase" href="/pgroutiner/">PgRoutiner</a></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="XUnit.Npgsql"><a class="nav-link svelte-9zwk14 text-uppercase" href="/xunit.npgsql/">XUnit.Npgsql</a></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="pgmigrations"><a class="nav-link svelte-9zwk14 text-uppercase" href="/pgmigrations/">pgmigrations</a></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="PostrgeSQL Schema Tools"><a class="nav-link svelte-9zwk14 text-uppercase" href="/pg_schema_tools/">PostrgeSQL Schema Tools</a></li><li class="nav-txt-divider text-muted svelte-9zwk14"><hr class="svelte-9zwk14"><span class="svelte-9zwk14">blogs</span><hr class="svelte-9zwk14"></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="<span class='btn-link'>ALL BLOGS</span>"><a class="nav-link btn btn-sm w-fit px-3 mx-auto svelte-9zwk14 lr-arrow text-uppercase" href="/blogs/"><i class="bi bi-arrow-right-circle svelte-9zwk14"></i> <span class="btn-link">ALL BLOGS</span></a></li><li class="nav-item svelte-9zwk14" data-id="" title="Unit Testing and TDD With PostgreSQL is Easy"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/unit-testing-postgresql/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>Unit Testing and TDD With PostgreSQL is Easy</a></li><li class="nav-item svelte-9zwk14" data-id="" title="From Transaction Scripts and Domain Model to SQL"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/domain-model-transaction-script/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>From Transaction Scripts and Domain Model to SQL</a></li><li class="nav-item svelte-9zwk14" data-id="" title="Transaction Script DDD vs SQL"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/transaction-script/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>Transaction Script DDD vs SQL</a></li><li class="nav-item svelte-9zwk14" data-id="" title="Common Sense Software Design"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/common-sense-design/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>Common Sense Software Design</a></li><li class="nav-item svelte-9zwk14" data-id="" title="NpgsqlRest v2 Update üêòüî•"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/npgsqlrest-v2/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>NpgsqlRest v2 Update üêòüî•</a></li><li class="nav-item svelte-9zwk14" data-id="" title="NpgsqlRest Update 1.6.2"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/npgsqlrest-update1.6.2/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>NpgsqlRest Update 1.6.2</a></li><li class="nav-item svelte-9zwk14" data-id="" title="PostgreSQL Arrays üêò"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/postgresql-array/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>PostgreSQL Arrays üêò</a></li><li class="nav-item svelte-9zwk14" data-id="" title="How DDD is screwing up your SQL"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/sql-vs-ddd/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>How DDD is screwing up your SQL</a></li><li class="nav-item svelte-9zwk14" data-id="" title="PostgreSQL Paging Benchmarks"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/postgresql-paging/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>PostgreSQL Paging Benchmarks</a></li><li class="nav-item svelte-9zwk14" data-id="" title="NpgsqlRest NuGet Library"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/npgsqlrest/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>NpgsqlRest NuGet Library</a></li></ul></div></div></li><li class="nav-txt-divider text-muted svelte-9zwk14"><hr class="svelte-9zwk14"><span class="svelte-9zwk14">NpgsqlRest</span><hr class="svelte-9zwk14"></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="NpgsqlRest"><a class="nav-link svelte-9zwk14 text-uppercase" href="/npgsqlrest/">NpgsqlRest</a></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="options"><a class="nav-link svelte-9zwk14 text-uppercase" href="/npgsqlrest/options/">options</a></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="annotations"><a class="nav-link svelte-9zwk14 text-uppercase" href="/npgsqlrest/annotations/">annotations</a></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="login endpoints"><a class="nav-link svelte-9zwk14 text-uppercase" href="/npgsqlrest/login-endpoints/">login endpoints</a></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="performances"><a class="nav-link svelte-9zwk14 text-uppercase" href="/npgsqlrest/performances/">performances</a></li><li class="nav-item toc2 svelte-9zwk14 active" data-id="" title="changelog"><a class="nav-link svelte-9zwk14 text-uppercase" href="/npgsqlrest/changelog/">changelog</a></li><li class="nav-txt-divider text-muted svelte-9zwk14"><hr class="svelte-9zwk14"><span class="svelte-9zwk14">client app</span><hr class="svelte-9zwk14"></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="client"><a class="nav-link svelte-9zwk14 text-uppercase" href="/npgsqlrest/client/">client</a></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="client npm package"><a class="nav-link svelte-9zwk14 text-uppercase" href="/npgsqlrest/client-npm/">client npm package</a></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="client default config"><a class="nav-link svelte-9zwk14 text-uppercase" href="/npgsqlrest/config/">client default config</a></li><li class="nav-txt-divider text-muted svelte-9zwk14"><hr class="svelte-9zwk14"><span class="svelte-9zwk14">plugins</span><hr class="svelte-9zwk14"></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="NpgsqlRest CrudSource"><a class="nav-link svelte-9zwk14 text-uppercase" href="/npgsqlrest/crudsource/">NpgsqlRest CrudSource</a></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="NpgsqlRest HttpFiles"><a class="nav-link svelte-9zwk14 text-uppercase" href="/npgsqlrest/httpfiles/">NpgsqlRest HttpFiles</a></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="NpgsqlRest TsClient"><a class="nav-link svelte-9zwk14 text-uppercase" href="/npgsqlrest/tsclient/">NpgsqlRest TsClient</a></li><li class="nav-txt-divider text-muted svelte-9zwk14"><hr class="svelte-9zwk14"><span class="svelte-9zwk14">articles</span><hr class="svelte-9zwk14"></li><li class="nav-item svelte-9zwk14" data-id="" title="NpgsqlRest NuGet Library"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/npgsqlrest/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>NpgsqlRest NuGet Library</a></li><li class="nav-item svelte-9zwk14" data-id="" title="NpgsqlRest v2 Update üêòüî•"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/npgsqlrest-v2/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>NpgsqlRest v2 Update üêòüî•</a></li><li class="nav-item svelte-9zwk14" data-id="" title="NpgsqlRest Update 1.6.2"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/npgsqlrest-update1.6.2/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>NpgsqlRest Update 1.6.2</a></li></ul></div></div><div class="content svelte-9zwk14"><div class="container-sm main-content gh-content"><h1 id="changelog">Changelog<a class="anchor bookmark-target" href="#changelog"><i class="bi bi-link-45deg"></i></a></h1><a href="https://github.com/vb-consulting/NpgsqlRest/blob/master/changelog.md" class="github-edit"><i class="bi bi-github"></i>Edit this page on GitHub</a><p>Note: For a changelog for a client application <a href="https://vb-consulting.github.io/npgsqlrest/client/#changelog">see the client application page changelog</a>.</p><hr><h2 id="version-2160httpsgithubcomvb-consultingnpgsqlresttree2160-2024-12-30">Version [2.16.0](<a href="https://github.com/vb-consulting/NpgsqlRest/tree/2.16.0">https://github.com/vb-consulting/NpgsqlRest/tree/2.16.0</a> (2024-12-30)<a class="anchor bookmark-target" href="#version-2160httpsgithubcomvb-consultingnpgsqlresttree2160-2024-12-30"><i class="bi bi-link-45deg"></i></a></h2><p><a href="https://github.com/vb-consulting/NpgsqlRest/compare/2.15.0...2.16.0">Full Changelog</a></p><p>Internal optimizations:</p><ul><li>Using sequential access by default for all reader operations.</li><li>Optimized parameter parser to use only single loop.</li></ul><p>Added <code>string[][]? CommentWordLines</code> get property to <code>RoutineEndpoint</code> data structure. This representes parsed words from a routine comment which will make easier to parse comments in plugins.</p><h2 id="version-2150httpsgithubcomvb-consultingnpgsqlresttree2150-2024-12-21">Version [2.15.0](<a href="https://github.com/vb-consulting/NpgsqlRest/tree/2.15.0">https://github.com/vb-consulting/NpgsqlRest/tree/2.15.0</a> (2024-12-21)<a class="anchor bookmark-target" href="#version-2150httpsgithubcomvb-consultingnpgsqlresttree2150-2024-12-21"><i class="bi bi-link-45deg"></i></a></h2><p><a href="https://github.com/vb-consulting/NpgsqlRest/compare/2.14.0...2.15.0">Full Changelog</a></p><p>This version if full rewrite of the library bringing code simplification and many perfomance optimizations.</p><p>If has one new feature that allows refreshing medata without program restart. To facilitate this functionality, there are three new options:</p><h3 id="refreshendpointenabled">RefreshEndpointEnabled<a class="anchor bookmark-target" href="#refreshendpointenabled"><i class="bi bi-link-45deg"></i></a></h3><ul><li>Type: <code>bool</code></li><li>Default: <code>false</code></li></ul><p>Enables or disables refresh endpoint. When refresh endpoint is invoked, the entire metadata for NpgsqlRest endpoints is refreshed. When metadata is refreshed, endpoint returns status 200.</p><h3 id="refreshmethod">RefreshMethod<a class="anchor bookmark-target" href="#refreshmethod"><i class="bi bi-link-45deg"></i></a></h3><ul><li>Type: <code>string</code></li><li>Default: <code>"GET"</code></li></ul><h3 id="refreshpath">RefreshPath<a class="anchor bookmark-target" href="#refreshpath"><i class="bi bi-link-45deg"></i></a></h3><ul><li>Type: <code>string</code></li><li>Default: <code>"/api/npgsqlrest/refresh"</code></li></ul><h2 id="version-2140httpsgithubcomvb-consultingnpgsqlresttree2140-2024-11-25">Version [2.14.0](<a href="https://github.com/vb-consulting/NpgsqlRest/tree/2.14.0">https://github.com/vb-consulting/NpgsqlRest/tree/2.14.0</a> (2024-11-25)<a class="anchor bookmark-target" href="#version-2140httpsgithubcomvb-consultingnpgsqlresttree2140-2024-11-25"><i class="bi bi-link-45deg"></i></a></h2><p><a href="https://github.com/vb-consulting/NpgsqlRest/compare/2.13.1...2.14.0">Full Changelog</a></p><p>Improved connection handling:</p><ul><li>Added new option: <code>public NpgsqlDataSource? DataSource { get; set; }</code></li></ul><p>When <code>DataSource</code> is set, <code>ConnectectionString</code> is ignored. <code>DataSource</code> is then used to create new connections for each request by calling <code>CreateConnection()</code>. This should be much faster then creating a new connection with <code>new NpgsqlConnection(connectionString)</code>.</p><ul><li>Added new option: <code>public ServiceProviderObject ServiceProviderMode { get; set; }</code></li></ul><p><code>ServiceProviderObject</code> is enum that defines how handle service provider objects when fetching connection from service provdiders:</p><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">enum</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">ServiceProviderObject</span></span>
<span class="line"><span style="color: #E6E6E6">{</span></span>
<span class="line"><span style="color: #6A9955">    /// </span><span style="color: #808080">&lt;</span><span style="color: #569CD6">summary</span><span style="color: #808080">></span></span>
<span class="line"><span style="color: #6A9955">    /// Connection is not provided in service provider. Connection is supplied either by ConnectionString or by DataSource option.</span></span>
<span class="line"><span style="color: #6A9955">    /// </span><span style="color: #808080">&lt;/</span><span style="color: #569CD6">summary</span><span style="color: #808080">></span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">None</span><span style="color: #E6E6E6">,</span></span>
<span class="line"><span style="color: #6A9955">    /// </span><span style="color: #808080">&lt;</span><span style="color: #569CD6">summary</span><span style="color: #808080">></span></span>
<span class="line"><span style="color: #6A9955">    /// NpgsqlRest attempts to get NpgsqlDataSource from service provider (assuming one is provided).</span></span>
<span class="line"><span style="color: #6A9955">    /// </span><span style="color: #808080">&lt;/</span><span style="color: #569CD6">summary</span><span style="color: #808080">></span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">NpgsqlDataSource</span><span style="color: #E6E6E6">,</span></span>
<span class="line"><span style="color: #6A9955">    /// </span><span style="color: #808080">&lt;</span><span style="color: #569CD6">summary</span><span style="color: #808080">></span></span>
<span class="line"><span style="color: #6A9955">    /// NpgsqlRest attempts to get NpgsqlConnection from service provider (assuming one is provided).</span></span>
<span class="line"><span style="color: #6A9955">    /// </span><span style="color: #808080">&lt;/</span><span style="color: #569CD6">summary</span><span style="color: #808080">></span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">NpgsqlConnection</span></span>
<span class="line"><span style="color: #E6E6E6">}</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">enum</span><span style="color: #000000"> </span><span style="color: #267F99">ServiceProviderObject</span></span>
<span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #008000">    /// </span><span style="color: #800000">&lt;summary></span></span>
<span class="line"><span style="color: #008000">    /// Connection is not provided in service provider. Connection is supplied either by ConnectionString or by DataSource option.</span></span>
<span class="line"><span style="color: #008000">    /// </span><span style="color: #800000">&lt;/summary></span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">None</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #008000">    /// </span><span style="color: #800000">&lt;summary></span></span>
<span class="line"><span style="color: #008000">    /// NpgsqlRest attempts to get NpgsqlDataSource from service provider (assuming one is provided).</span></span>
<span class="line"><span style="color: #008000">    /// </span><span style="color: #800000">&lt;/summary></span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">NpgsqlDataSource</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #008000">    /// </span><span style="color: #800000">&lt;summary></span></span>
<span class="line"><span style="color: #008000">    /// NpgsqlRest attempts to get NpgsqlConnection from service provider (assuming one is provided).</span></span>
<span class="line"><span style="color: #008000">    /// </span><span style="color: #800000">&lt;/summary></span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">NpgsqlConnection</span></span>
<span class="line"><span style="color: #000000">}</span></span></code></pre></div><p>Default is <code>ServiceProviderObject.None</code>.</p><ul><li>Removed <code>public bool ConnectionFromServiceProvider { get; set; }</code>. Replaced by <code>ServiceProviderMode</code>.</li></ul><h2 id="version-2131httpsgithubcomvb-consultingnpgsqlresttree2131-2024-11-23">Version [2.13.1](<a href="https://github.com/vb-consulting/NpgsqlRest/tree/2.13.1">https://github.com/vb-consulting/NpgsqlRest/tree/2.13.1</a> (2024-11-23)<a class="anchor bookmark-target" href="#version-2131httpsgithubcomvb-consultingnpgsqlresttree2131-2024-11-23"><i class="bi bi-link-45deg"></i></a></h2><p><a href="https://github.com/vb-consulting/NpgsqlRest/compare/2.13.0...2.13.1">Full Changelog</a></p><p>Upgrade Npgsql to 9.0.1</p><h2 id="version-2121httpsgithubcomvb-consultingnpgsqlresttree2130-2024-11-17">Version [2.12.1](<a href="https://github.com/vb-consulting/NpgsqlRest/tree/2.13.0">https://github.com/vb-consulting/NpgsqlRest/tree/2.13.0</a> (2024-11-17)<a class="anchor bookmark-target" href="#version-2121httpsgithubcomvb-consultingnpgsqlresttree2130-2024-11-17"><i class="bi bi-link-45deg"></i></a></h2><p><a href="https://github.com/vb-consulting/NpgsqlRest/compare/2.12.1...2.13.0">Full Changelog</a></p><ul><li>Upgrade all projects and libraries to .NET 9</li><li>Improve the performance of the middlweware by using:<ul><li>GetAlternateLookup extensions method to get the value from the dictionary.</li><li>System.IO.Pipelines.PipeWriter instead of writing directly to the response stream.</li><li>Spans where possible.</li></ul></li></ul><p>Performance benchmarks show up to 50% improvement in the middleware performance.</p><p>The <a href="https://github.com/vb-consulting/pg_function_load_tests">benchmark projects</a> is being built and will be available soon.</p><h2 id="version-2121httpsgithubcomvb-consultingnpgsqlresttree2121-2024-11-06">Version [2.12.1](<a href="https://github.com/vb-consulting/NpgsqlRest/tree/2.12.1">https://github.com/vb-consulting/NpgsqlRest/tree/2.12.1</a> (2024-11-06)<a class="anchor bookmark-target" href="#version-2121httpsgithubcomvb-consultingnpgsqlresttree2121-2024-11-06"><i class="bi bi-link-45deg"></i></a></h2><p><a href="https://github.com/vb-consulting/NpgsqlRest/compare/2.12.0...2.12.1">Full Changelog</a></p><p>Reverted changes in reader logic (Reader Optimizations and Provider-Specific Values). Detailed perfomance load tests and examining the Npgsql sozrce does not justify these changes.</p><hr><h2 id="version-2120-2024-10-29">Version <a href="https://github.com/vb-consulting/NpgsqlRest/tree/2.12.0">2.12.0</a> (2024-10-29)<a class="anchor bookmark-target" href="#version-2120-2024-10-29"><i class="bi bi-link-45deg"></i></a></h2><p><a href="https://github.com/vb-consulting/NpgsqlRest/compare/2.11.0...2.12.0">Full Changelog</a></p><h3 id="login-endpoint-custom-claims-maintain-the-original-field-names">Login Endpoint Custom Claims Maintain the Original Field Names<a class="anchor bookmark-target" href="#login-endpoint-custom-claims-maintain-the-original-field-names"><i class="bi bi-link-45deg"></i></a></h3><p>This is a small but breaking change that makes the system a bit more consistent.</p><p>For example, if you have a login endpoint that returns fields that are not mapped to any known <a href="https://learn.microsoft.com/en-us/dotnet/api/system.security.claims.claimtypes?view=net-8.0#fields">AD Federation Services Claim Types</a> like this:</p><div class="code sql"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">create</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">function</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">auth</span><span style="color: #E6E6E6">.</span><span style="color: #569CD6">login</span><span style="color: #E6E6E6">(</span></span>
<span class="line"><span style="color: #E6E6E6">    _username </span><span style="color: #569CD6">text</span><span style="color: #E6E6E6">,</span></span>
<span class="line"><span style="color: #E6E6E6">    _password </span><span style="color: #569CD6">text</span></span>
<span class="line"><span style="color: #E6E6E6">) </span></span>
<span class="line"><span style="color: #569CD6">returns</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">table</span><span style="color: #E6E6E6"> (</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #569CD6">status</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">int</span><span style="color: #E6E6E6">,             </span><span style="color: #6A9955">-- indicates login status 200, 404, etc</span></span>
<span class="line"><span style="color: #E6E6E6">    name_identifier </span><span style="color: #569CD6">text</span><span style="color: #E6E6E6">,   </span><span style="color: #6A9955">-- name_identifier when converted with default name converter becomes name_identifier and mapps to http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #569CD6">name</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">text</span><span style="color: #E6E6E6">,              </span><span style="color: #6A9955">-- http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #569CD6">role</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">text</span><span style="color: #E6E6E6">[],            </span><span style="color: #6A9955">-- http://schemas.microsoft.com/ws/2008/06/identity/claims/role</span></span>
<span class="line"><span style="color: #E6E6E6">    company_id </span><span style="color: #569CD6">int</span><span style="color: #E6E6E6">             </span><span style="color: #6A9955">-- company_id can't be mapped to AD Federation Services Claim Types</span></span>
<span class="line"><span style="color: #E6E6E6">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955">--</span></span>
<span class="line"><span style="color: #6A9955">-- ... </span></span>
<span class="line"><span style="color: #6A9955">--</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">comment on function auth.login(text, text) is </span><span style="color: #CE9178">'</span></span>
<span class="line"><span style="color: #CE9178">HTTP POST</span></span>
<span class="line"><span style="color: #CE9178">Login</span></span>
<span class="line"><span style="color: #CE9178">'</span><span style="color: #E6E6E6">;</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #0000FF">create</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">auth</span><span style="color: #000000">.</span><span style="color: #0000FF">login</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">    _username </span><span style="color: #0000FF">text</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    _password </span><span style="color: #0000FF">text</span></span>
<span class="line"><span style="color: #000000">) </span></span>
<span class="line"><span style="color: #0000FF">returns</span><span style="color: #000000"> </span><span style="color: #0000FF">table</span><span style="color: #000000"> (</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">status</span><span style="color: #000000"> </span><span style="color: #0000FF">int</span><span style="color: #000000">,             </span><span style="color: #008000">-- indicates login status 200, 404, etc</span></span>
<span class="line"><span style="color: #000000">    name_identifier </span><span style="color: #0000FF">text</span><span style="color: #000000">,   </span><span style="color: #008000">-- name_identifier when converted with default name converter becomes name_identifier and mapps to http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">name</span><span style="color: #000000"> </span><span style="color: #0000FF">text</span><span style="color: #000000">,              </span><span style="color: #008000">-- http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">role</span><span style="color: #000000"> </span><span style="color: #0000FF">text</span><span style="color: #000000">[],            </span><span style="color: #008000">-- http://schemas.microsoft.com/ws/2008/06/identity/claims/role</span></span>
<span class="line"><span style="color: #000000">    company_id </span><span style="color: #0000FF">int</span><span style="color: #000000">             </span><span style="color: #008000">-- company_id can't be mapped to AD Federation Services Claim Types</span></span>
<span class="line"><span style="color: #000000">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #008000">--</span></span>
<span class="line"><span style="color: #008000">-- ... </span></span>
<span class="line"><span style="color: #008000">--</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0000FF">comment on function auth.login(text, text) is </span><span style="color: #A31515">'</span></span>
<span class="line"><span style="color: #A31515">HTTP POST</span></span>
<span class="line"><span style="color: #A31515">Login</span></span>
<span class="line"><span style="color: #A31515">'</span><span style="color: #000000">;</span></span></code></pre></div><p>So, in this example, <code>company_id</code> can't be mapped to any AD Federation Services Claim Types, and a claim with a custom claim name will be created. In the previous version, that name was parsed with name converter, and the default name converter is the camel case converter, and the newly created claim name, in this case, was <code>companyId</code>.</p><p>This is now changed to use the original, unconverted column named, and the newly created claim name, in this case, is now <code>company_id</code>.</p><p>This is important with the client configuration when mapping a custom claim to a parameter name, like this:</p><div class="code jsonc"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #E6E6E6">{</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #6A9955">//...</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">"NpgsqlRest"</span><span style="color: #E6E6E6">: {</span></span>
<span class="line"><span style="color: #E6E6E6">        </span><span style="color: #6A9955">//...</span></span>
<span class="line"><span style="color: #E6E6E6">        </span><span style="color: #9CDCFE">"AuthenticationOptions"</span><span style="color: #E6E6E6">: {</span></span>
<span class="line"><span style="color: #E6E6E6">            </span><span style="color: #6A9955">//...</span></span>
<span class="line"><span style="color: #E6E6E6">            </span><span style="color: #9CDCFE">"CustomParameterNameToClaimMappings"</span><span style="color: #E6E6E6">: {</span></span>
<span class="line"><span style="color: #E6E6E6">                </span><span style="color: #9CDCFE">"_company_id"</span><span style="color: #E6E6E6">: </span><span style="color: #CE9178">"company_id"</span></span>
<span class="line"><span style="color: #E6E6E6">            }</span></span>
<span class="line"><span style="color: #E6E6E6">        }</span></span>
<span class="line"><span style="color: #E6E6E6">    }</span></span>
<span class="line"><span style="color: #E6E6E6">}</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #008000">//...</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">"NpgsqlRest"</span><span style="color: #000000">: {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #008000">//...</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">"AuthenticationOptions"</span><span style="color: #000000">: {</span></span>
<span class="line"><span style="color: #000000">            </span><span style="color: #008000">//...</span></span>
<span class="line"><span style="color: #000000">            </span><span style="color: #0451A5">"CustomParameterNameToClaimMappings"</span><span style="color: #000000">: {</span></span>
<span class="line"><span style="color: #000000">                </span><span style="color: #0451A5">"_company_id"</span><span style="color: #000000">: </span><span style="color: #A31515">"company_id"</span></span>
<span class="line"><span style="color: #000000">            }</span></span>
<span class="line"><span style="color: #000000">        }</span></span>
<span class="line"><span style="color: #000000">    }</span></span>
<span class="line"><span style="color: #000000">}</span></span></code></pre></div><h3 id="reader-optimizations-and-provider-specific-values">Reader Optimizations and Provider-Specific Values<a class="anchor bookmark-target" href="#reader-optimizations-and-provider-specific-values"><i class="bi bi-link-45deg"></i></a></h3><p>From this version, all command readers are using <code>GetProviderSpecificValue(int ordinal)</code> method instead of <code>GetValue(int ordinal)</code>.</p><p>This change ensures that data is retrieved in its native PostgreSQL format, preserving any provider-specific types. This change enhances accuracy and eliminates the overhead of automatic type conversion to standard .NET types.</p><p>Also, when reading multiple rows, the reader will now take advantage of the <code>GetProviderSpecificValues(Object[])</code> method to initialize the current row into an array. Previously, the entire row was read with <code>GetValue(int ordinal)</code> one by one. This approach <strong>improves performances when reading multiple rows by roughly 10%</strong> and slightly increases memory consumption.</p><h3 id="updated-npgsql-reference">Updated Npgsql Reference<a class="anchor bookmark-target" href="#updated-npgsql-reference"><i class="bi bi-link-45deg"></i></a></h3><p>Npgsql reference updated from 8.0.3 to 8.0.5:</p><ul><li>8.0.4 list of changes: <a href="https://github.com/npgsql/npgsql/milestone/115?closed=1">https://github.com/npgsql/npgsql/milestone/115?closed=1</a></li><li>8.0.5 list of changes: <a href="https://github.com/npgsql/npgsql/milestone/118?closed=1">https://github.com/npgsql/npgsql/milestone/118?closed=1</a></li></ul><p>Any project using NpgsqlRest library will have to upgrade Npgsql minimal version to 8.0.5.</p><h3 id="custom-types-support">Custom Types Support<a class="anchor bookmark-target" href="#custom-types-support"><i class="bi bi-link-45deg"></i></a></h3><p>From this version PostgreSQL custom types can be used as:</p><ol><li>Parameters (single paramtere or combined).</li><li>Return types (single type or combined as a set).</li></ol><p>Example:</p><div class="code sql"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">create</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">type</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">my_request</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">as</span><span style="color: #E6E6E6"> (</span></span>
<span class="line"><span style="color: #E6E6E6">    id </span><span style="color: #569CD6">int</span><span style="color: #E6E6E6">,</span></span>
<span class="line"><span style="color: #E6E6E6">    text_value </span><span style="color: #569CD6">text</span><span style="color: #E6E6E6">,</span></span>
<span class="line"><span style="color: #E6E6E6">    flag </span><span style="color: #569CD6">boolean</span></span>
<span class="line"><span style="color: #E6E6E6">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">create</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">function</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">my_service</span><span style="color: #E6E6E6">(</span></span>
<span class="line"><span style="color: #E6E6E6">    request my_request</span></span>
<span class="line"><span style="color: #E6E6E6">)</span></span>
<span class="line"><span style="color: #569CD6">returns</span><span style="color: #E6E6E6"> void</span></span>
<span class="line"><span style="color: #569CD6">language</span><span style="color: #E6E6E6"> plpgsql </span><span style="color: #569CD6">as</span><span style="color: #E6E6E6"> </span></span>
<span class="line"><span style="color: #E6E6E6">$$</span></span>
<span class="line"><span style="color: #569CD6">begin</span></span>
<span class="line"><span style="color: #E6E6E6">    raise info </span><span style="color: #CE9178">'id: %, text_value: %, flag: %'</span><span style="color: #E6E6E6">, request.id, request.text_value, request.flag;</span></span>
<span class="line"><span style="color: #569CD6">end</span><span style="color: #E6E6E6">;</span></span>
<span class="line"><span style="color: #E6E6E6">$$;</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #0000FF">create</span><span style="color: #000000"> </span><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #795E26">my_request</span><span style="color: #000000"> </span><span style="color: #0000FF">as</span><span style="color: #000000"> (</span></span>
<span class="line"><span style="color: #000000">    id </span><span style="color: #0000FF">int</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    text_value </span><span style="color: #0000FF">text</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    flag </span><span style="color: #0000FF">boolean</span></span>
<span class="line"><span style="color: #000000">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0000FF">create</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">my_service</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">    request my_request</span></span>
<span class="line"><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #0000FF">returns</span><span style="color: #000000"> void</span></span>
<span class="line"><span style="color: #0000FF">language</span><span style="color: #000000"> plpgsql </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span></span>
<span class="line"><span style="color: #000000">$$</span></span>
<span class="line"><span style="color: #0000FF">begin</span></span>
<span class="line"><span style="color: #000000">    raise info </span><span style="color: #A31515">'id: %, text_value: %, flag: %'</span><span style="color: #000000">, request.id, request.text_value, request.flag;</span></span>
<span class="line"><span style="color: #0000FF">end</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">$$;</span></span></code></pre></div><p>Normally, to call this function calling a <code>row</code> constructor is required and then casting it back to <code>my_request</code>:</p><div class="one-liner"><div class="code sql"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">select</span><span style="color: #E6E6E6"> my_service(</span><span style="color: #569CD6">row</span><span style="color: #E6E6E6">(</span><span style="color: #B5CEA8">1</span><span style="color: #E6E6E6">, </span><span style="color: #CE9178">'test'</span><span style="color: #E6E6E6">, true)::my_request);</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #0000FF">select</span><span style="color: #000000"> my_service(</span><span style="color: #0000FF">row</span><span style="color: #000000">(</span><span style="color: #098658">1</span><span style="color: #000000">, </span><span style="color: #A31515">'test'</span><span style="color: #000000">, true)::my_request);</span></span></code></pre></div></div><p>NpgslRest will construnct a valid endpoint where parameters names are constructed by following rule:</p><ul><li>Parameter name (in this example <code>request</code>) plus <code>CustomTypeParameterSeparator</code> value (default is underscore) plus custom type field name.</li></ul><p>This gives as these three parameters:</p><ol><li><code>request_id</code></li><li><code>request_text_value</code></li><li><code>request_flag</code></li></ol><p>And when translated by the default name translator (camle case), we will get these three parameters:</p><ol><li><code>requestId</code></li><li><code>requestTextValue</code></li><li><code>requestFlag</code></li></ol><p>So, now, we have valid REST endpoint:</p><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #C586C0">using</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">body</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">StringContent</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"""</span></span>
<span class="line"><span style="color: #CE9178">{  </span></span>
<span class="line"><span style="color: #CE9178">    "requestId": 1,</span></span>
<span class="line"><span style="color: #CE9178">    "requestTextValue": "test",</span></span>
<span class="line"><span style="color: #CE9178">    "requestFlag": true</span></span>
<span class="line"><span style="color: #CE9178">}</span></span>
<span class="line"><span style="color: #CE9178">"""</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">Encoding</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">UTF8</span><span style="color: #E6E6E6">, </span><span style="color: #CE9178">"application/json"</span><span style="color: #E6E6E6">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C586C0">using</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">response</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">await</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">test</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Client</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">PostAsync</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"/api/my-service"</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">body</span><span style="color: #E6E6E6">);</span></span>
<span class="line"><span style="color: #9CDCFE">response</span><span style="color: #D4D4D4">?</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">StatusCode</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Should</span><span style="color: #E6E6E6">().</span><span style="color: #DCDCAA">Be</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">HttpStatusCode</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">NoContent</span><span style="color: #E6E6E6">); </span><span style="color: #6A9955">// void functions by default are returning 204 NoContent</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">body</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">StringContent</span><span style="color: #000000">(</span><span style="color: #A31515">"""</span></span>
<span class="line"><span style="color: #A31515">{  </span></span>
<span class="line"><span style="color: #A31515">    "requestId": 1,</span></span>
<span class="line"><span style="color: #A31515">    "requestTextValue": "test",</span></span>
<span class="line"><span style="color: #A31515">    "requestFlag": true</span></span>
<span class="line"><span style="color: #A31515">}</span></span>
<span class="line"><span style="color: #A31515">"""</span><span style="color: #000000">, </span><span style="color: #001080">Encoding</span><span style="color: #000000">.</span><span style="color: #001080">UTF8</span><span style="color: #000000">, </span><span style="color: #A31515">"application/json"</span><span style="color: #000000">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">response</span><span style="color: #000000"> = </span><span style="color: #0000FF">await</span><span style="color: #000000"> </span><span style="color: #001080">test</span><span style="color: #000000">.</span><span style="color: #001080">Client</span><span style="color: #000000">.</span><span style="color: #795E26">PostAsync</span><span style="color: #000000">(</span><span style="color: #A31515">"/api/my-service"</span><span style="color: #000000">, </span><span style="color: #001080">body</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #001080">response</span><span style="color: #000000">?.</span><span style="color: #001080">StatusCode</span><span style="color: #000000">.</span><span style="color: #795E26">Should</span><span style="color: #000000">().</span><span style="color: #795E26">Be</span><span style="color: #000000">(</span><span style="color: #001080">HttpStatusCode</span><span style="color: #000000">.</span><span style="color: #001080">NoContent</span><span style="color: #000000">); </span><span style="color: #008000">// void functions by default are returning 204 NoContent</span></span></code></pre></div><p>Custom type parameters can be mixed with normal parameters:</p><div class="code sql"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">create</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">function</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">my_service</span><span style="color: #E6E6E6">(</span></span>
<span class="line"><span style="color: #E6E6E6">    a </span><span style="color: #569CD6">text</span><span style="color: #E6E6E6">,</span></span>
<span class="line"><span style="color: #E6E6E6">    request my_request,</span></span>
<span class="line"><span style="color: #E6E6E6">    b </span><span style="color: #569CD6">text</span></span>
<span class="line"><span style="color: #E6E6E6">)</span></span>
<span class="line"><span style="color: #569CD6">returns</span><span style="color: #E6E6E6"> void</span></span>
<span class="line"><span style="color: #6A9955">/*</span></span>
<span class="line"><span style="color: #6A9955">... rest of the function</span></span>
<span class="line"><span style="color: #6A9955">*/</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #0000FF">create</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">my_service</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">    a </span><span style="color: #0000FF">text</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    request my_request,</span></span>
<span class="line"><span style="color: #000000">    b </span><span style="color: #0000FF">text</span></span>
<span class="line"><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #0000FF">returns</span><span style="color: #000000"> void</span></span>
<span class="line"><span style="color: #008000">/*</span></span>
<span class="line"><span style="color: #008000">... rest of the function</span></span>
<span class="line"><span style="color: #008000">*/</span></span></code></pre></div><p>In this example parameters <code>a</code> and <code>b</code> will behace as before, just three new parameters from the custom types will also be present.</p><p>Custom types can now also be a return value:</p><div class="code sql"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">create</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">function</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">get_my_service</span><span style="color: #E6E6E6">(</span></span>
<span class="line"><span style="color: #E6E6E6">    request my_request</span></span>
<span class="line"><span style="color: #E6E6E6">)</span></span>
<span class="line"><span style="color: #569CD6">returns</span><span style="color: #E6E6E6"> my_request</span></span>
<span class="line"><span style="color: #569CD6">language</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">sql</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">as</span><span style="color: #E6E6E6"> </span></span>
<span class="line"><span style="color: #E6E6E6">$$</span></span>
<span class="line"><span style="color: #569CD6">select</span><span style="color: #E6E6E6"> request;</span></span>
<span class="line"><span style="color: #E6E6E6">$$;</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #0000FF">create</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">get_my_service</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">    request my_request</span></span>
<span class="line"><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #0000FF">returns</span><span style="color: #000000"> my_request</span></span>
<span class="line"><span style="color: #0000FF">language</span><span style="color: #000000"> </span><span style="color: #0000FF">sql</span><span style="color: #000000"> </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span></span>
<span class="line"><span style="color: #000000">$$</span></span>
<span class="line"><span style="color: #0000FF">select</span><span style="color: #000000"> request;</span></span>
<span class="line"><span style="color: #000000">$$;</span></span></code></pre></div><p>This will produce a valid json object, where properties are custom type fields, as we see in the client code test:</p><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">query</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">QueryBuilder</span></span>
<span class="line"><span style="color: #E6E6E6">{</span></span>
<span class="line"><span style="color: #E6E6E6">    { </span><span style="color: #CE9178">"requestId"</span><span style="color: #E6E6E6">, </span><span style="color: #CE9178">"1"</span><span style="color: #E6E6E6"> },</span></span>
<span class="line"><span style="color: #E6E6E6">    { </span><span style="color: #CE9178">"requestTextValue"</span><span style="color: #E6E6E6">, </span><span style="color: #CE9178">"test"</span><span style="color: #E6E6E6"> },</span></span>
<span class="line"><span style="color: #E6E6E6">    { </span><span style="color: #CE9178">"requestFlag"</span><span style="color: #E6E6E6">, </span><span style="color: #CE9178">"true"</span><span style="color: #E6E6E6"> },</span></span>
<span class="line"><span style="color: #E6E6E6">};</span></span>
<span class="line"><span style="color: #C586C0">using</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">response</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">await</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">test</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Client</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">GetAsync</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">$"/api/get-my-service/{</span><span style="color: #9CDCFE">query</span><span style="color: #CE9178">}"</span><span style="color: #E6E6E6">);</span></span>
<span class="line"><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">content</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">await</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">response</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Content</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">ReadAsStringAsync</span><span style="color: #E6E6E6">();</span></span>
<span class="line"><span style="color: #9CDCFE">response</span><span style="color: #D4D4D4">?</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">StatusCode</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Should</span><span style="color: #E6E6E6">().</span><span style="color: #DCDCAA">Be</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">HttpStatusCode</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">OK</span><span style="color: #E6E6E6">);</span></span>
<span class="line"><span style="color: #9CDCFE">content</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Should</span><span style="color: #E6E6E6">().</span><span style="color: #DCDCAA">Be</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"{</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">id</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:1,</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">textValue</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">test</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">,</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">flag</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:true}"</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">query</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">QueryBuilder</span></span>
<span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #000000">    { </span><span style="color: #A31515">"requestId"</span><span style="color: #000000">, </span><span style="color: #A31515">"1"</span><span style="color: #000000"> },</span></span>
<span class="line"><span style="color: #000000">    { </span><span style="color: #A31515">"requestTextValue"</span><span style="color: #000000">, </span><span style="color: #A31515">"test"</span><span style="color: #000000"> },</span></span>
<span class="line"><span style="color: #000000">    { </span><span style="color: #A31515">"requestFlag"</span><span style="color: #000000">, </span><span style="color: #A31515">"true"</span><span style="color: #000000"> },</span></span>
<span class="line"><span style="color: #000000">};</span></span>
<span class="line"><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">response</span><span style="color: #000000"> = </span><span style="color: #0000FF">await</span><span style="color: #000000"> </span><span style="color: #001080">test</span><span style="color: #000000">.</span><span style="color: #001080">Client</span><span style="color: #000000">.</span><span style="color: #795E26">GetAsync</span><span style="color: #000000">(</span><span style="color: #A31515">$"/api/get-my-service/{</span><span style="color: #001080">query</span><span style="color: #A31515">}"</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">content</span><span style="color: #000000"> = </span><span style="color: #0000FF">await</span><span style="color: #000000"> </span><span style="color: #001080">response</span><span style="color: #000000">.</span><span style="color: #001080">Content</span><span style="color: #000000">.</span><span style="color: #795E26">ReadAsStringAsync</span><span style="color: #000000">();</span></span>
<span class="line"><span style="color: #001080">response</span><span style="color: #000000">?.</span><span style="color: #001080">StatusCode</span><span style="color: #000000">.</span><span style="color: #795E26">Should</span><span style="color: #000000">().</span><span style="color: #795E26">Be</span><span style="color: #000000">(</span><span style="color: #001080">HttpStatusCode</span><span style="color: #000000">.</span><span style="color: #001080">OK</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #001080">content</span><span style="color: #000000">.</span><span style="color: #795E26">Should</span><span style="color: #000000">().</span><span style="color: #795E26">Be</span><span style="color: #000000">(</span><span style="color: #A31515">"{</span><span style="color: #EE0000">\"</span><span style="color: #A31515">id</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:1,</span><span style="color: #EE0000">\"</span><span style="color: #A31515">textValue</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:</span><span style="color: #EE0000">\"</span><span style="color: #A31515">test</span><span style="color: #EE0000">\"</span><span style="color: #A31515">,</span><span style="color: #EE0000">\"</span><span style="color: #A31515">flag</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:true}"</span><span style="color: #000000">);</span></span></code></pre></div><p>If return a set of, instead of single array, we will get an aray as expected:</p><div class="code sql"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">create</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">function</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">get_setof_my_requests</span><span style="color: #E6E6E6">(</span></span>
<span class="line"><span style="color: #E6E6E6">    request my_request</span></span>
<span class="line"><span style="color: #E6E6E6">)</span></span>
<span class="line"><span style="color: #569CD6">returns</span><span style="color: #E6E6E6"> setof my_request</span></span>
<span class="line"><span style="color: #569CD6">language</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">sql</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">as</span><span style="color: #E6E6E6"> </span></span>
<span class="line"><span style="color: #E6E6E6">$$</span></span>
<span class="line"><span style="color: #569CD6">select</span><span style="color: #E6E6E6"> request </span><span style="color: #569CD6">union all</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">select</span><span style="color: #E6E6E6"> request;</span></span>
<span class="line"><span style="color: #E6E6E6">$$;</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #0000FF">create</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">get_setof_my_requests</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">    request my_request</span></span>
<span class="line"><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #0000FF">returns</span><span style="color: #000000"> setof my_request</span></span>
<span class="line"><span style="color: #0000FF">language</span><span style="color: #000000"> </span><span style="color: #0000FF">sql</span><span style="color: #000000"> </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span></span>
<span class="line"><span style="color: #000000">$$</span></span>
<span class="line"><span style="color: #0000FF">select</span><span style="color: #000000"> request </span><span style="color: #0000FF">union all</span><span style="color: #000000"> </span><span style="color: #0000FF">select</span><span style="color: #000000"> request;</span></span>
<span class="line"><span style="color: #000000">$$;</span></span></code></pre></div><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">query</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">QueryBuilder</span></span>
<span class="line"><span style="color: #E6E6E6">{</span></span>
<span class="line"><span style="color: #E6E6E6">    { </span><span style="color: #CE9178">"requestId"</span><span style="color: #E6E6E6">, </span><span style="color: #CE9178">"1"</span><span style="color: #E6E6E6"> },</span></span>
<span class="line"><span style="color: #E6E6E6">    { </span><span style="color: #CE9178">"requestTextValue"</span><span style="color: #E6E6E6">, </span><span style="color: #CE9178">"test"</span><span style="color: #E6E6E6"> },</span></span>
<span class="line"><span style="color: #E6E6E6">    { </span><span style="color: #CE9178">"requestFlag"</span><span style="color: #E6E6E6">, </span><span style="color: #CE9178">"true"</span><span style="color: #E6E6E6"> },</span></span>
<span class="line"><span style="color: #E6E6E6">};</span></span>
<span class="line"><span style="color: #C586C0">using</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">response</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">await</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">test</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Client</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">GetAsync</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">$"/api/get-setof-my-requests/{</span><span style="color: #9CDCFE">query</span><span style="color: #CE9178">}"</span><span style="color: #E6E6E6">);</span></span>
<span class="line"><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">content</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">await</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">response</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Content</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">ReadAsStringAsync</span><span style="color: #E6E6E6">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #9CDCFE">response</span><span style="color: #D4D4D4">?</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">StatusCode</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Should</span><span style="color: #E6E6E6">().</span><span style="color: #DCDCAA">Be</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">HttpStatusCode</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">OK</span><span style="color: #E6E6E6">);</span></span>
<span class="line"><span style="color: #9CDCFE">content</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Should</span><span style="color: #E6E6E6">().</span><span style="color: #DCDCAA">Be</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"[{</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">id</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:1,</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">textValue</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">test</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">,</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">flag</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:true},{</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">id</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:1,</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">textValue</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">test</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">,</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">flag</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:true}]"</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">query</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">QueryBuilder</span></span>
<span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #000000">    { </span><span style="color: #A31515">"requestId"</span><span style="color: #000000">, </span><span style="color: #A31515">"1"</span><span style="color: #000000"> },</span></span>
<span class="line"><span style="color: #000000">    { </span><span style="color: #A31515">"requestTextValue"</span><span style="color: #000000">, </span><span style="color: #A31515">"test"</span><span style="color: #000000"> },</span></span>
<span class="line"><span style="color: #000000">    { </span><span style="color: #A31515">"requestFlag"</span><span style="color: #000000">, </span><span style="color: #A31515">"true"</span><span style="color: #000000"> },</span></span>
<span class="line"><span style="color: #000000">};</span></span>
<span class="line"><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">response</span><span style="color: #000000"> = </span><span style="color: #0000FF">await</span><span style="color: #000000"> </span><span style="color: #001080">test</span><span style="color: #000000">.</span><span style="color: #001080">Client</span><span style="color: #000000">.</span><span style="color: #795E26">GetAsync</span><span style="color: #000000">(</span><span style="color: #A31515">$"/api/get-setof-my-requests/{</span><span style="color: #001080">query</span><span style="color: #A31515">}"</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">content</span><span style="color: #000000"> = </span><span style="color: #0000FF">await</span><span style="color: #000000"> </span><span style="color: #001080">response</span><span style="color: #000000">.</span><span style="color: #001080">Content</span><span style="color: #000000">.</span><span style="color: #795E26">ReadAsStringAsync</span><span style="color: #000000">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #001080">response</span><span style="color: #000000">?.</span><span style="color: #001080">StatusCode</span><span style="color: #000000">.</span><span style="color: #795E26">Should</span><span style="color: #000000">().</span><span style="color: #795E26">Be</span><span style="color: #000000">(</span><span style="color: #001080">HttpStatusCode</span><span style="color: #000000">.</span><span style="color: #001080">OK</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #001080">content</span><span style="color: #000000">.</span><span style="color: #795E26">Should</span><span style="color: #000000">().</span><span style="color: #795E26">Be</span><span style="color: #000000">(</span><span style="color: #A31515">"[{</span><span style="color: #EE0000">\"</span><span style="color: #A31515">id</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:1,</span><span style="color: #EE0000">\"</span><span style="color: #A31515">textValue</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:</span><span style="color: #EE0000">\"</span><span style="color: #A31515">test</span><span style="color: #EE0000">\"</span><span style="color: #A31515">,</span><span style="color: #EE0000">\"</span><span style="color: #A31515">flag</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:true},{</span><span style="color: #EE0000">\"</span><span style="color: #A31515">id</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:1,</span><span style="color: #EE0000">\"</span><span style="color: #A31515">textValue</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:</span><span style="color: #EE0000">\"</span><span style="color: #A31515">test</span><span style="color: #EE0000">\"</span><span style="color: #A31515">,</span><span style="color: #EE0000">\"</span><span style="color: #A31515">flag</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:true}]"</span><span style="color: #000000">);</span></span></code></pre></div><p>The same, completely identical result - we will get if we return a table with a single custom type:</p><div class="code sql"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">create</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">function</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">get_table_of_my_requests</span><span style="color: #E6E6E6">(</span></span>
<span class="line"><span style="color: #E6E6E6">    request my_request</span></span>
<span class="line"><span style="color: #E6E6E6">)</span></span>
<span class="line"><span style="color: #569CD6">returns</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">table</span><span style="color: #E6E6E6"> (</span></span>
<span class="line"><span style="color: #E6E6E6">    req my_request</span></span>
<span class="line"><span style="color: #E6E6E6">)</span></span>
<span class="line"><span style="color: #569CD6">language</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">sql</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">as</span><span style="color: #E6E6E6"> </span></span>
<span class="line"><span style="color: #E6E6E6">$$</span></span>
<span class="line"><span style="color: #569CD6">select</span><span style="color: #E6E6E6"> request </span><span style="color: #569CD6">union all</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">select</span><span style="color: #E6E6E6"> request;</span></span>
<span class="line"><span style="color: #E6E6E6">$$;</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #0000FF">create</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">get_table_of_my_requests</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">    request my_request</span></span>
<span class="line"><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #0000FF">returns</span><span style="color: #000000"> </span><span style="color: #0000FF">table</span><span style="color: #000000"> (</span></span>
<span class="line"><span style="color: #000000">    req my_request</span></span>
<span class="line"><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #0000FF">language</span><span style="color: #000000"> </span><span style="color: #0000FF">sql</span><span style="color: #000000"> </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span></span>
<span class="line"><span style="color: #000000">$$</span></span>
<span class="line"><span style="color: #0000FF">select</span><span style="color: #000000"> request </span><span style="color: #0000FF">union all</span><span style="color: #000000"> </span><span style="color: #0000FF">select</span><span style="color: #000000"> request;</span></span>
<span class="line"><span style="color: #000000">$$;</span></span></code></pre></div><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">query</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">QueryBuilder</span></span>
<span class="line"><span style="color: #E6E6E6">{</span></span>
<span class="line"><span style="color: #E6E6E6">    { </span><span style="color: #CE9178">"requestId"</span><span style="color: #E6E6E6">, </span><span style="color: #CE9178">"1"</span><span style="color: #E6E6E6"> },</span></span>
<span class="line"><span style="color: #E6E6E6">    { </span><span style="color: #CE9178">"requestTextValue"</span><span style="color: #E6E6E6">, </span><span style="color: #CE9178">"test"</span><span style="color: #E6E6E6"> },</span></span>
<span class="line"><span style="color: #E6E6E6">    { </span><span style="color: #CE9178">"requestFlag"</span><span style="color: #E6E6E6">, </span><span style="color: #CE9178">"true"</span><span style="color: #E6E6E6"> },</span></span>
<span class="line"><span style="color: #E6E6E6">};</span></span>
<span class="line"><span style="color: #C586C0">using</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">response</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">await</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">test</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Client</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">GetAsync</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">$"/api/get-table-of-my-requests/{</span><span style="color: #9CDCFE">query</span><span style="color: #CE9178">}"</span><span style="color: #E6E6E6">);</span></span>
<span class="line"><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">content</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">await</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">response</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Content</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">ReadAsStringAsync</span><span style="color: #E6E6E6">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #9CDCFE">response</span><span style="color: #D4D4D4">?</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">StatusCode</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Should</span><span style="color: #E6E6E6">().</span><span style="color: #DCDCAA">Be</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">HttpStatusCode</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">OK</span><span style="color: #E6E6E6">);</span></span>
<span class="line"><span style="color: #9CDCFE">content</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Should</span><span style="color: #E6E6E6">().</span><span style="color: #DCDCAA">Be</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"[{</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">id</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:1,</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">textValue</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">test</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">,</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">flag</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:true},{</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">id</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:1,</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">textValue</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">test</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">,</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">flag</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:true}]"</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">query</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">QueryBuilder</span></span>
<span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #000000">    { </span><span style="color: #A31515">"requestId"</span><span style="color: #000000">, </span><span style="color: #A31515">"1"</span><span style="color: #000000"> },</span></span>
<span class="line"><span style="color: #000000">    { </span><span style="color: #A31515">"requestTextValue"</span><span style="color: #000000">, </span><span style="color: #A31515">"test"</span><span style="color: #000000"> },</span></span>
<span class="line"><span style="color: #000000">    { </span><span style="color: #A31515">"requestFlag"</span><span style="color: #000000">, </span><span style="color: #A31515">"true"</span><span style="color: #000000"> },</span></span>
<span class="line"><span style="color: #000000">};</span></span>
<span class="line"><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">response</span><span style="color: #000000"> = </span><span style="color: #0000FF">await</span><span style="color: #000000"> </span><span style="color: #001080">test</span><span style="color: #000000">.</span><span style="color: #001080">Client</span><span style="color: #000000">.</span><span style="color: #795E26">GetAsync</span><span style="color: #000000">(</span><span style="color: #A31515">$"/api/get-table-of-my-requests/{</span><span style="color: #001080">query</span><span style="color: #A31515">}"</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">content</span><span style="color: #000000"> = </span><span style="color: #0000FF">await</span><span style="color: #000000"> </span><span style="color: #001080">response</span><span style="color: #000000">.</span><span style="color: #001080">Content</span><span style="color: #000000">.</span><span style="color: #795E26">ReadAsStringAsync</span><span style="color: #000000">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #001080">response</span><span style="color: #000000">?.</span><span style="color: #001080">StatusCode</span><span style="color: #000000">.</span><span style="color: #795E26">Should</span><span style="color: #000000">().</span><span style="color: #795E26">Be</span><span style="color: #000000">(</span><span style="color: #001080">HttpStatusCode</span><span style="color: #000000">.</span><span style="color: #001080">OK</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #001080">content</span><span style="color: #000000">.</span><span style="color: #795E26">Should</span><span style="color: #000000">().</span><span style="color: #795E26">Be</span><span style="color: #000000">(</span><span style="color: #A31515">"[{</span><span style="color: #EE0000">\"</span><span style="color: #A31515">id</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:1,</span><span style="color: #EE0000">\"</span><span style="color: #A31515">textValue</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:</span><span style="color: #EE0000">\"</span><span style="color: #A31515">test</span><span style="color: #EE0000">\"</span><span style="color: #A31515">,</span><span style="color: #EE0000">\"</span><span style="color: #A31515">flag</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:true},{</span><span style="color: #EE0000">\"</span><span style="color: #A31515">id</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:1,</span><span style="color: #EE0000">\"</span><span style="color: #A31515">textValue</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:</span><span style="color: #EE0000">\"</span><span style="color: #A31515">test</span><span style="color: #EE0000">\"</span><span style="color: #A31515">,</span><span style="color: #EE0000">\"</span><span style="color: #A31515">flag</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:true}]"</span><span style="color: #000000">);</span></span></code></pre></div><p>In this case, the actual table field name <code>req</code> is ignored, and a single field is replace with trhee fields from the custom type.</p><p>When returning a table type, we can mix custom types with normal fields, for example:</p><div class="code sql"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">create</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">function</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">get_mixed_table_of_my_requests</span><span style="color: #E6E6E6">(</span></span>
<span class="line"><span style="color: #E6E6E6">    request my_request</span></span>
<span class="line"><span style="color: #E6E6E6">)</span></span>
<span class="line"><span style="color: #569CD6">returns</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">table</span><span style="color: #E6E6E6"> (</span></span>
<span class="line"><span style="color: #E6E6E6">    a </span><span style="color: #569CD6">text</span><span style="color: #E6E6E6">,</span></span>
<span class="line"><span style="color: #E6E6E6">    req my_request,</span></span>
<span class="line"><span style="color: #E6E6E6">    b </span><span style="color: #569CD6">text</span></span>
<span class="line"><span style="color: #E6E6E6">)</span></span>
<span class="line"><span style="color: #569CD6">language</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">sql</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">as</span><span style="color: #E6E6E6"> </span></span>
<span class="line"><span style="color: #E6E6E6">$$</span></span>
<span class="line"><span style="color: #569CD6">select</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">'a1'</span><span style="color: #E6E6E6">, request, </span><span style="color: #CE9178">'b1'</span></span>
<span class="line"><span style="color: #569CD6">union all</span><span style="color: #E6E6E6"> </span></span>
<span class="line"><span style="color: #569CD6">select</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">'a2'</span><span style="color: #E6E6E6">, request, </span><span style="color: #CE9178">'b2'</span></span>
<span class="line"><span style="color: #E6E6E6">$$;</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #0000FF">create</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">get_mixed_table_of_my_requests</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">    request my_request</span></span>
<span class="line"><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #0000FF">returns</span><span style="color: #000000"> </span><span style="color: #0000FF">table</span><span style="color: #000000"> (</span></span>
<span class="line"><span style="color: #000000">    a </span><span style="color: #0000FF">text</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    req my_request,</span></span>
<span class="line"><span style="color: #000000">    b </span><span style="color: #0000FF">text</span></span>
<span class="line"><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #0000FF">language</span><span style="color: #000000"> </span><span style="color: #0000FF">sql</span><span style="color: #000000"> </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span></span>
<span class="line"><span style="color: #000000">$$</span></span>
<span class="line"><span style="color: #0000FF">select</span><span style="color: #000000"> </span><span style="color: #A31515">'a1'</span><span style="color: #000000">, request, </span><span style="color: #A31515">'b1'</span></span>
<span class="line"><span style="color: #0000FF">union all</span><span style="color: #000000"> </span></span>
<span class="line"><span style="color: #0000FF">select</span><span style="color: #000000"> </span><span style="color: #A31515">'a2'</span><span style="color: #000000">, request, </span><span style="color: #A31515">'b2'</span></span>
<span class="line"><span style="color: #000000">$$;</span></span></code></pre></div><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">query</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">QueryBuilder</span></span>
<span class="line"><span style="color: #E6E6E6">{</span></span>
<span class="line"><span style="color: #E6E6E6">    { </span><span style="color: #CE9178">"requestId"</span><span style="color: #E6E6E6">, </span><span style="color: #CE9178">"1"</span><span style="color: #E6E6E6"> },</span></span>
<span class="line"><span style="color: #E6E6E6">    { </span><span style="color: #CE9178">"requestTextValue"</span><span style="color: #E6E6E6">, </span><span style="color: #CE9178">"test"</span><span style="color: #E6E6E6"> },</span></span>
<span class="line"><span style="color: #E6E6E6">    { </span><span style="color: #CE9178">"requestFlag"</span><span style="color: #E6E6E6">, </span><span style="color: #CE9178">"true"</span><span style="color: #E6E6E6"> },</span></span>
<span class="line"><span style="color: #E6E6E6">};</span></span>
<span class="line"><span style="color: #C586C0">using</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">response</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">await</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">test</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Client</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">GetAsync</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">$"/api/get-mixed-table-of-my-requests/{</span><span style="color: #9CDCFE">query</span><span style="color: #CE9178">}"</span><span style="color: #E6E6E6">);</span></span>
<span class="line"><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">content</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">await</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">response</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Content</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">ReadAsStringAsync</span><span style="color: #E6E6E6">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #9CDCFE">response</span><span style="color: #D4D4D4">?</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">StatusCode</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Should</span><span style="color: #E6E6E6">().</span><span style="color: #DCDCAA">Be</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">HttpStatusCode</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">OK</span><span style="color: #E6E6E6">);</span></span>
<span class="line"><span style="color: #9CDCFE">content</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Should</span><span style="color: #E6E6E6">().</span><span style="color: #DCDCAA">Be</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"[{</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">a</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">a1</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">,</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">id</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:1,</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">textValue</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">test</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">,</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">flag</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:true,</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">b</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">b1</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">},{</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">a</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">a2</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">,</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">id</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:1,</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">textValue</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">test</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">,</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">flag</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:true,</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">b</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">b2</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">}]"</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">query</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">QueryBuilder</span></span>
<span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #000000">    { </span><span style="color: #A31515">"requestId"</span><span style="color: #000000">, </span><span style="color: #A31515">"1"</span><span style="color: #000000"> },</span></span>
<span class="line"><span style="color: #000000">    { </span><span style="color: #A31515">"requestTextValue"</span><span style="color: #000000">, </span><span style="color: #A31515">"test"</span><span style="color: #000000"> },</span></span>
<span class="line"><span style="color: #000000">    { </span><span style="color: #A31515">"requestFlag"</span><span style="color: #000000">, </span><span style="color: #A31515">"true"</span><span style="color: #000000"> },</span></span>
<span class="line"><span style="color: #000000">};</span></span>
<span class="line"><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">response</span><span style="color: #000000"> = </span><span style="color: #0000FF">await</span><span style="color: #000000"> </span><span style="color: #001080">test</span><span style="color: #000000">.</span><span style="color: #001080">Client</span><span style="color: #000000">.</span><span style="color: #795E26">GetAsync</span><span style="color: #000000">(</span><span style="color: #A31515">$"/api/get-mixed-table-of-my-requests/{</span><span style="color: #001080">query</span><span style="color: #A31515">}"</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">content</span><span style="color: #000000"> = </span><span style="color: #0000FF">await</span><span style="color: #000000"> </span><span style="color: #001080">response</span><span style="color: #000000">.</span><span style="color: #001080">Content</span><span style="color: #000000">.</span><span style="color: #795E26">ReadAsStringAsync</span><span style="color: #000000">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #001080">response</span><span style="color: #000000">?.</span><span style="color: #001080">StatusCode</span><span style="color: #000000">.</span><span style="color: #795E26">Should</span><span style="color: #000000">().</span><span style="color: #795E26">Be</span><span style="color: #000000">(</span><span style="color: #001080">HttpStatusCode</span><span style="color: #000000">.</span><span style="color: #001080">OK</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #001080">content</span><span style="color: #000000">.</span><span style="color: #795E26">Should</span><span style="color: #000000">().</span><span style="color: #795E26">Be</span><span style="color: #000000">(</span><span style="color: #A31515">"[{</span><span style="color: #EE0000">\"</span><span style="color: #A31515">a</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:</span><span style="color: #EE0000">\"</span><span style="color: #A31515">a1</span><span style="color: #EE0000">\"</span><span style="color: #A31515">,</span><span style="color: #EE0000">\"</span><span style="color: #A31515">id</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:1,</span><span style="color: #EE0000">\"</span><span style="color: #A31515">textValue</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:</span><span style="color: #EE0000">\"</span><span style="color: #A31515">test</span><span style="color: #EE0000">\"</span><span style="color: #A31515">,</span><span style="color: #EE0000">\"</span><span style="color: #A31515">flag</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:true,</span><span style="color: #EE0000">\"</span><span style="color: #A31515">b</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:</span><span style="color: #EE0000">\"</span><span style="color: #A31515">b1</span><span style="color: #EE0000">\"</span><span style="color: #A31515">},{</span><span style="color: #EE0000">\"</span><span style="color: #A31515">a</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:</span><span style="color: #EE0000">\"</span><span style="color: #A31515">a2</span><span style="color: #EE0000">\"</span><span style="color: #A31515">,</span><span style="color: #EE0000">\"</span><span style="color: #A31515">id</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:1,</span><span style="color: #EE0000">\"</span><span style="color: #A31515">textValue</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:</span><span style="color: #EE0000">\"</span><span style="color: #A31515">test</span><span style="color: #EE0000">\"</span><span style="color: #A31515">,</span><span style="color: #EE0000">\"</span><span style="color: #A31515">flag</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:true,</span><span style="color: #EE0000">\"</span><span style="color: #A31515">b</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:</span><span style="color: #EE0000">\"</span><span style="color: #A31515">b2</span><span style="color: #EE0000">\"</span><span style="color: #A31515">}]"</span><span style="color: #000000">);</span></span></code></pre></div><h3 id="table-types-support">Table Types Support<a class="anchor bookmark-target" href="#table-types-support"><i class="bi bi-link-45deg"></i></a></h3><p>Table types were supported before, bot now, everything that is true for custom types is also true for table types. They can be used as:</p><ol><li>Parameters (single paramtere or combined).</li><li>Return types (single type or combined as a set).</li></ol><p>Examples:</p><div class="code sql"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">create</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">table</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">my_table</span><span style="color: #E6E6E6"> (</span></span>
<span class="line"><span style="color: #E6E6E6">    id </span><span style="color: #569CD6">int</span><span style="color: #E6E6E6">,</span></span>
<span class="line"><span style="color: #E6E6E6">    text_value </span><span style="color: #569CD6">text</span><span style="color: #E6E6E6">,</span></span>
<span class="line"><span style="color: #E6E6E6">    flag </span><span style="color: #569CD6">boolean</span></span>
<span class="line"><span style="color: #E6E6E6">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">create</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">function</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">my_table_service</span><span style="color: #E6E6E6">(</span></span>
<span class="line"><span style="color: #E6E6E6">    request my_table</span></span>
<span class="line"><span style="color: #E6E6E6">)</span></span>
<span class="line"><span style="color: #569CD6">returns</span><span style="color: #E6E6E6"> void</span></span>
<span class="line"><span style="color: #569CD6">language</span><span style="color: #E6E6E6"> plpgsql </span><span style="color: #569CD6">as</span><span style="color: #E6E6E6"> </span></span>
<span class="line"><span style="color: #E6E6E6">$$</span></span>
<span class="line"><span style="color: #569CD6">begin</span></span>
<span class="line"><span style="color: #E6E6E6">    raise info </span><span style="color: #CE9178">'id: %, text_value: %, flag: %'</span><span style="color: #E6E6E6">, request.id, request.text_value, request.flag;</span></span>
<span class="line"><span style="color: #569CD6">end</span><span style="color: #E6E6E6">;</span></span>
<span class="line"><span style="color: #E6E6E6">$$;</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #0000FF">create</span><span style="color: #000000"> </span><span style="color: #0000FF">table</span><span style="color: #000000"> </span><span style="color: #795E26">my_table</span><span style="color: #000000"> (</span></span>
<span class="line"><span style="color: #000000">    id </span><span style="color: #0000FF">int</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    text_value </span><span style="color: #0000FF">text</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    flag </span><span style="color: #0000FF">boolean</span></span>
<span class="line"><span style="color: #000000">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0000FF">create</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">my_table_service</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">    request my_table</span></span>
<span class="line"><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #0000FF">returns</span><span style="color: #000000"> void</span></span>
<span class="line"><span style="color: #0000FF">language</span><span style="color: #000000"> plpgsql </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span></span>
<span class="line"><span style="color: #000000">$$</span></span>
<span class="line"><span style="color: #0000FF">begin</span></span>
<span class="line"><span style="color: #000000">    raise info </span><span style="color: #A31515">'id: %, text_value: %, flag: %'</span><span style="color: #000000">, request.id, request.text_value, request.flag;</span></span>
<span class="line"><span style="color: #0000FF">end</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">$$;</span></span></code></pre></div><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #C586C0">using</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">body</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">StringContent</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"""</span></span>
<span class="line"><span style="color: #CE9178">{  </span></span>
<span class="line"><span style="color: #CE9178">    "requestId": 1,</span></span>
<span class="line"><span style="color: #CE9178">    "requestTextValue": "test",</span></span>
<span class="line"><span style="color: #CE9178">    "requestFlag": true</span></span>
<span class="line"><span style="color: #CE9178">}</span></span>
<span class="line"><span style="color: #CE9178">"""</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">Encoding</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">UTF8</span><span style="color: #E6E6E6">, </span><span style="color: #CE9178">"application/json"</span><span style="color: #E6E6E6">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C586C0">using</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">response</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">await</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">test</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Client</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">PostAsync</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"/api/my-table-service"</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">body</span><span style="color: #E6E6E6">);</span></span>
<span class="line"><span style="color: #9CDCFE">response</span><span style="color: #D4D4D4">?</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">StatusCode</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Should</span><span style="color: #E6E6E6">().</span><span style="color: #DCDCAA">Be</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">HttpStatusCode</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">NoContent</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">body</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">StringContent</span><span style="color: #000000">(</span><span style="color: #A31515">"""</span></span>
<span class="line"><span style="color: #A31515">{  </span></span>
<span class="line"><span style="color: #A31515">    "requestId": 1,</span></span>
<span class="line"><span style="color: #A31515">    "requestTextValue": "test",</span></span>
<span class="line"><span style="color: #A31515">    "requestFlag": true</span></span>
<span class="line"><span style="color: #A31515">}</span></span>
<span class="line"><span style="color: #A31515">"""</span><span style="color: #000000">, </span><span style="color: #001080">Encoding</span><span style="color: #000000">.</span><span style="color: #001080">UTF8</span><span style="color: #000000">, </span><span style="color: #A31515">"application/json"</span><span style="color: #000000">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">response</span><span style="color: #000000"> = </span><span style="color: #0000FF">await</span><span style="color: #000000"> </span><span style="color: #001080">test</span><span style="color: #000000">.</span><span style="color: #001080">Client</span><span style="color: #000000">.</span><span style="color: #795E26">PostAsync</span><span style="color: #000000">(</span><span style="color: #A31515">"/api/my-table-service"</span><span style="color: #000000">, </span><span style="color: #001080">body</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #001080">response</span><span style="color: #000000">?.</span><span style="color: #001080">StatusCode</span><span style="color: #000000">.</span><span style="color: #795E26">Should</span><span style="color: #000000">().</span><span style="color: #795E26">Be</span><span style="color: #000000">(</span><span style="color: #001080">HttpStatusCode</span><span style="color: #000000">.</span><span style="color: #001080">NoContent</span><span style="color: #000000">);</span></span></code></pre></div><div class="code sql"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">create</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">function</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">get_my_table_service</span><span style="color: #E6E6E6">(</span></span>
<span class="line"><span style="color: #E6E6E6">    request my_table</span></span>
<span class="line"><span style="color: #E6E6E6">)</span></span>
<span class="line"><span style="color: #569CD6">returns</span><span style="color: #E6E6E6"> my_table</span></span>
<span class="line"><span style="color: #569CD6">language</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">sql</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">as</span><span style="color: #E6E6E6"> </span></span>
<span class="line"><span style="color: #E6E6E6">$$</span></span>
<span class="line"><span style="color: #569CD6">select</span><span style="color: #E6E6E6"> request;</span></span>
<span class="line"><span style="color: #E6E6E6">$$;</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #0000FF">create</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">get_my_table_service</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">    request my_table</span></span>
<span class="line"><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #0000FF">returns</span><span style="color: #000000"> my_table</span></span>
<span class="line"><span style="color: #0000FF">language</span><span style="color: #000000"> </span><span style="color: #0000FF">sql</span><span style="color: #000000"> </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span></span>
<span class="line"><span style="color: #000000">$$</span></span>
<span class="line"><span style="color: #0000FF">select</span><span style="color: #000000"> request;</span></span>
<span class="line"><span style="color: #000000">$$;</span></span></code></pre></div><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">query</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">QueryBuilder</span></span>
<span class="line"><span style="color: #E6E6E6">{</span></span>
<span class="line"><span style="color: #E6E6E6">    { </span><span style="color: #CE9178">"requestId"</span><span style="color: #E6E6E6">, </span><span style="color: #CE9178">"1"</span><span style="color: #E6E6E6"> },</span></span>
<span class="line"><span style="color: #E6E6E6">    { </span><span style="color: #CE9178">"requestTextValue"</span><span style="color: #E6E6E6">, </span><span style="color: #CE9178">"test"</span><span style="color: #E6E6E6"> },</span></span>
<span class="line"><span style="color: #E6E6E6">    { </span><span style="color: #CE9178">"requestFlag"</span><span style="color: #E6E6E6">, </span><span style="color: #CE9178">"true"</span><span style="color: #E6E6E6"> },</span></span>
<span class="line"><span style="color: #E6E6E6">};</span></span>
<span class="line"><span style="color: #C586C0">using</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">response</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">await</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">test</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Client</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">GetAsync</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">$"/api/get-my-table-service/{</span><span style="color: #9CDCFE">query</span><span style="color: #CE9178">}"</span><span style="color: #E6E6E6">);</span></span>
<span class="line"><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">content</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">await</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">response</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Content</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">ReadAsStringAsync</span><span style="color: #E6E6E6">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #9CDCFE">response</span><span style="color: #D4D4D4">?</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">StatusCode</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Should</span><span style="color: #E6E6E6">().</span><span style="color: #DCDCAA">Be</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">HttpStatusCode</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">OK</span><span style="color: #E6E6E6">);</span></span>
<span class="line"><span style="color: #9CDCFE">content</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Should</span><span style="color: #E6E6E6">().</span><span style="color: #DCDCAA">Be</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"{</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">id</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:1,</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">textValue</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">test</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">,</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">flag</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:true}"</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">query</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">QueryBuilder</span></span>
<span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #000000">    { </span><span style="color: #A31515">"requestId"</span><span style="color: #000000">, </span><span style="color: #A31515">"1"</span><span style="color: #000000"> },</span></span>
<span class="line"><span style="color: #000000">    { </span><span style="color: #A31515">"requestTextValue"</span><span style="color: #000000">, </span><span style="color: #A31515">"test"</span><span style="color: #000000"> },</span></span>
<span class="line"><span style="color: #000000">    { </span><span style="color: #A31515">"requestFlag"</span><span style="color: #000000">, </span><span style="color: #A31515">"true"</span><span style="color: #000000"> },</span></span>
<span class="line"><span style="color: #000000">};</span></span>
<span class="line"><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">response</span><span style="color: #000000"> = </span><span style="color: #0000FF">await</span><span style="color: #000000"> </span><span style="color: #001080">test</span><span style="color: #000000">.</span><span style="color: #001080">Client</span><span style="color: #000000">.</span><span style="color: #795E26">GetAsync</span><span style="color: #000000">(</span><span style="color: #A31515">$"/api/get-my-table-service/{</span><span style="color: #001080">query</span><span style="color: #A31515">}"</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">content</span><span style="color: #000000"> = </span><span style="color: #0000FF">await</span><span style="color: #000000"> </span><span style="color: #001080">response</span><span style="color: #000000">.</span><span style="color: #001080">Content</span><span style="color: #000000">.</span><span style="color: #795E26">ReadAsStringAsync</span><span style="color: #000000">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #001080">response</span><span style="color: #000000">?.</span><span style="color: #001080">StatusCode</span><span style="color: #000000">.</span><span style="color: #795E26">Should</span><span style="color: #000000">().</span><span style="color: #795E26">Be</span><span style="color: #000000">(</span><span style="color: #001080">HttpStatusCode</span><span style="color: #000000">.</span><span style="color: #001080">OK</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #001080">content</span><span style="color: #000000">.</span><span style="color: #795E26">Should</span><span style="color: #000000">().</span><span style="color: #795E26">Be</span><span style="color: #000000">(</span><span style="color: #A31515">"{</span><span style="color: #EE0000">\"</span><span style="color: #A31515">id</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:1,</span><span style="color: #EE0000">\"</span><span style="color: #A31515">textValue</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:</span><span style="color: #EE0000">\"</span><span style="color: #A31515">test</span><span style="color: #EE0000">\"</span><span style="color: #A31515">,</span><span style="color: #EE0000">\"</span><span style="color: #A31515">flag</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:true}"</span><span style="color: #000000">);</span></span></code></pre></div><div class="code sql"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">create</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">function</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">get_setof_my_tables</span><span style="color: #E6E6E6">(</span></span>
<span class="line"><span style="color: #E6E6E6">    request my_table</span></span>
<span class="line"><span style="color: #E6E6E6">)</span></span>
<span class="line"><span style="color: #569CD6">returns</span><span style="color: #E6E6E6"> setof my_table</span></span>
<span class="line"><span style="color: #569CD6">language</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">sql</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">as</span><span style="color: #E6E6E6"> </span></span>
<span class="line"><span style="color: #E6E6E6">$$</span></span>
<span class="line"><span style="color: #569CD6">select</span><span style="color: #E6E6E6"> request </span><span style="color: #569CD6">union all</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">select</span><span style="color: #E6E6E6"> request;</span></span>
<span class="line"><span style="color: #E6E6E6">$$;</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #0000FF">create</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">get_setof_my_tables</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">    request my_table</span></span>
<span class="line"><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #0000FF">returns</span><span style="color: #000000"> setof my_table</span></span>
<span class="line"><span style="color: #0000FF">language</span><span style="color: #000000"> </span><span style="color: #0000FF">sql</span><span style="color: #000000"> </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span></span>
<span class="line"><span style="color: #000000">$$</span></span>
<span class="line"><span style="color: #0000FF">select</span><span style="color: #000000"> request </span><span style="color: #0000FF">union all</span><span style="color: #000000"> </span><span style="color: #0000FF">select</span><span style="color: #000000"> request;</span></span>
<span class="line"><span style="color: #000000">$$;</span></span></code></pre></div><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">query</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">QueryBuilder</span></span>
<span class="line"><span style="color: #E6E6E6">{</span></span>
<span class="line"><span style="color: #E6E6E6">    { </span><span style="color: #CE9178">"requestId"</span><span style="color: #E6E6E6">, </span><span style="color: #CE9178">"1"</span><span style="color: #E6E6E6"> },</span></span>
<span class="line"><span style="color: #E6E6E6">    { </span><span style="color: #CE9178">"requestTextValue"</span><span style="color: #E6E6E6">, </span><span style="color: #CE9178">"test"</span><span style="color: #E6E6E6"> },</span></span>
<span class="line"><span style="color: #E6E6E6">    { </span><span style="color: #CE9178">"requestFlag"</span><span style="color: #E6E6E6">, </span><span style="color: #CE9178">"true"</span><span style="color: #E6E6E6"> },</span></span>
<span class="line"><span style="color: #E6E6E6">};</span></span>
<span class="line"><span style="color: #C586C0">using</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">response</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">await</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">test</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Client</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">GetAsync</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">$"/api/get-setof-my-tables/{</span><span style="color: #9CDCFE">query</span><span style="color: #CE9178">}"</span><span style="color: #E6E6E6">);</span></span>
<span class="line"><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">content</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">await</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">response</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Content</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">ReadAsStringAsync</span><span style="color: #E6E6E6">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #9CDCFE">response</span><span style="color: #D4D4D4">?</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">StatusCode</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Should</span><span style="color: #E6E6E6">().</span><span style="color: #DCDCAA">Be</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">HttpStatusCode</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">OK</span><span style="color: #E6E6E6">);</span></span>
<span class="line"><span style="color: #9CDCFE">content</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Should</span><span style="color: #E6E6E6">().</span><span style="color: #DCDCAA">Be</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"[{</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">id</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:1,</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">textValue</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">test</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">,</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">flag</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:true},{</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">id</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:1,</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">textValue</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">test</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">,</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">flag</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:true}]"</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">query</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">QueryBuilder</span></span>
<span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #000000">    { </span><span style="color: #A31515">"requestId"</span><span style="color: #000000">, </span><span style="color: #A31515">"1"</span><span style="color: #000000"> },</span></span>
<span class="line"><span style="color: #000000">    { </span><span style="color: #A31515">"requestTextValue"</span><span style="color: #000000">, </span><span style="color: #A31515">"test"</span><span style="color: #000000"> },</span></span>
<span class="line"><span style="color: #000000">    { </span><span style="color: #A31515">"requestFlag"</span><span style="color: #000000">, </span><span style="color: #A31515">"true"</span><span style="color: #000000"> },</span></span>
<span class="line"><span style="color: #000000">};</span></span>
<span class="line"><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">response</span><span style="color: #000000"> = </span><span style="color: #0000FF">await</span><span style="color: #000000"> </span><span style="color: #001080">test</span><span style="color: #000000">.</span><span style="color: #001080">Client</span><span style="color: #000000">.</span><span style="color: #795E26">GetAsync</span><span style="color: #000000">(</span><span style="color: #A31515">$"/api/get-setof-my-tables/{</span><span style="color: #001080">query</span><span style="color: #A31515">}"</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">content</span><span style="color: #000000"> = </span><span style="color: #0000FF">await</span><span style="color: #000000"> </span><span style="color: #001080">response</span><span style="color: #000000">.</span><span style="color: #001080">Content</span><span style="color: #000000">.</span><span style="color: #795E26">ReadAsStringAsync</span><span style="color: #000000">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #001080">response</span><span style="color: #000000">?.</span><span style="color: #001080">StatusCode</span><span style="color: #000000">.</span><span style="color: #795E26">Should</span><span style="color: #000000">().</span><span style="color: #795E26">Be</span><span style="color: #000000">(</span><span style="color: #001080">HttpStatusCode</span><span style="color: #000000">.</span><span style="color: #001080">OK</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #001080">content</span><span style="color: #000000">.</span><span style="color: #795E26">Should</span><span style="color: #000000">().</span><span style="color: #795E26">Be</span><span style="color: #000000">(</span><span style="color: #A31515">"[{</span><span style="color: #EE0000">\"</span><span style="color: #A31515">id</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:1,</span><span style="color: #EE0000">\"</span><span style="color: #A31515">textValue</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:</span><span style="color: #EE0000">\"</span><span style="color: #A31515">test</span><span style="color: #EE0000">\"</span><span style="color: #A31515">,</span><span style="color: #EE0000">\"</span><span style="color: #A31515">flag</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:true},{</span><span style="color: #EE0000">\"</span><span style="color: #A31515">id</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:1,</span><span style="color: #EE0000">\"</span><span style="color: #A31515">textValue</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:</span><span style="color: #EE0000">\"</span><span style="color: #A31515">test</span><span style="color: #EE0000">\"</span><span style="color: #A31515">,</span><span style="color: #EE0000">\"</span><span style="color: #A31515">flag</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:true}]"</span><span style="color: #000000">);</span></span></code></pre></div><div class="code sql"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">create</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">function</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">get_table_of_my_tables</span><span style="color: #E6E6E6">(</span></span>
<span class="line"><span style="color: #E6E6E6">    request my_table</span></span>
<span class="line"><span style="color: #E6E6E6">)</span></span>
<span class="line"><span style="color: #569CD6">returns</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">table</span><span style="color: #E6E6E6"> (</span></span>
<span class="line"><span style="color: #E6E6E6">    req my_table</span></span>
<span class="line"><span style="color: #E6E6E6">)</span></span>
<span class="line"><span style="color: #569CD6">language</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">sql</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">as</span><span style="color: #E6E6E6"> </span></span>
<span class="line"><span style="color: #E6E6E6">$$</span></span>
<span class="line"><span style="color: #569CD6">select</span><span style="color: #E6E6E6"> request </span><span style="color: #569CD6">union all</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">select</span><span style="color: #E6E6E6"> request;</span></span>
<span class="line"><span style="color: #E6E6E6">$$;</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #0000FF">create</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">get_table_of_my_tables</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">    request my_table</span></span>
<span class="line"><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #0000FF">returns</span><span style="color: #000000"> </span><span style="color: #0000FF">table</span><span style="color: #000000"> (</span></span>
<span class="line"><span style="color: #000000">    req my_table</span></span>
<span class="line"><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #0000FF">language</span><span style="color: #000000"> </span><span style="color: #0000FF">sql</span><span style="color: #000000"> </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span></span>
<span class="line"><span style="color: #000000">$$</span></span>
<span class="line"><span style="color: #0000FF">select</span><span style="color: #000000"> request </span><span style="color: #0000FF">union all</span><span style="color: #000000"> </span><span style="color: #0000FF">select</span><span style="color: #000000"> request;</span></span>
<span class="line"><span style="color: #000000">$$;</span></span></code></pre></div><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">query</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">QueryBuilder</span></span>
<span class="line"><span style="color: #E6E6E6">{</span></span>
<span class="line"><span style="color: #E6E6E6">    { </span><span style="color: #CE9178">"requestId"</span><span style="color: #E6E6E6">, </span><span style="color: #CE9178">"1"</span><span style="color: #E6E6E6"> },</span></span>
<span class="line"><span style="color: #E6E6E6">    { </span><span style="color: #CE9178">"requestTextValue"</span><span style="color: #E6E6E6">, </span><span style="color: #CE9178">"test"</span><span style="color: #E6E6E6"> },</span></span>
<span class="line"><span style="color: #E6E6E6">    { </span><span style="color: #CE9178">"requestFlag"</span><span style="color: #E6E6E6">, </span><span style="color: #CE9178">"true"</span><span style="color: #E6E6E6"> },</span></span>
<span class="line"><span style="color: #E6E6E6">};</span></span>
<span class="line"><span style="color: #C586C0">using</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">response</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">await</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">test</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Client</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">GetAsync</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">$"/api/get-table-of-my-tables/{</span><span style="color: #9CDCFE">query</span><span style="color: #CE9178">}"</span><span style="color: #E6E6E6">);</span></span>
<span class="line"><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">content</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">await</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">response</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Content</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">ReadAsStringAsync</span><span style="color: #E6E6E6">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #9CDCFE">response</span><span style="color: #D4D4D4">?</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">StatusCode</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Should</span><span style="color: #E6E6E6">().</span><span style="color: #DCDCAA">Be</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">HttpStatusCode</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">OK</span><span style="color: #E6E6E6">);</span></span>
<span class="line"><span style="color: #9CDCFE">content</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Should</span><span style="color: #E6E6E6">().</span><span style="color: #DCDCAA">Be</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"[{</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">id</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:1,</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">textValue</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">test</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">,</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">flag</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:true},{</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">id</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:1,</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">textValue</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">test</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">,</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">flag</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:true}]"</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">query</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">QueryBuilder</span></span>
<span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #000000">    { </span><span style="color: #A31515">"requestId"</span><span style="color: #000000">, </span><span style="color: #A31515">"1"</span><span style="color: #000000"> },</span></span>
<span class="line"><span style="color: #000000">    { </span><span style="color: #A31515">"requestTextValue"</span><span style="color: #000000">, </span><span style="color: #A31515">"test"</span><span style="color: #000000"> },</span></span>
<span class="line"><span style="color: #000000">    { </span><span style="color: #A31515">"requestFlag"</span><span style="color: #000000">, </span><span style="color: #A31515">"true"</span><span style="color: #000000"> },</span></span>
<span class="line"><span style="color: #000000">};</span></span>
<span class="line"><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">response</span><span style="color: #000000"> = </span><span style="color: #0000FF">await</span><span style="color: #000000"> </span><span style="color: #001080">test</span><span style="color: #000000">.</span><span style="color: #001080">Client</span><span style="color: #000000">.</span><span style="color: #795E26">GetAsync</span><span style="color: #000000">(</span><span style="color: #A31515">$"/api/get-table-of-my-tables/{</span><span style="color: #001080">query</span><span style="color: #A31515">}"</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">content</span><span style="color: #000000"> = </span><span style="color: #0000FF">await</span><span style="color: #000000"> </span><span style="color: #001080">response</span><span style="color: #000000">.</span><span style="color: #001080">Content</span><span style="color: #000000">.</span><span style="color: #795E26">ReadAsStringAsync</span><span style="color: #000000">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #001080">response</span><span style="color: #000000">?.</span><span style="color: #001080">StatusCode</span><span style="color: #000000">.</span><span style="color: #795E26">Should</span><span style="color: #000000">().</span><span style="color: #795E26">Be</span><span style="color: #000000">(</span><span style="color: #001080">HttpStatusCode</span><span style="color: #000000">.</span><span style="color: #001080">OK</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #001080">content</span><span style="color: #000000">.</span><span style="color: #795E26">Should</span><span style="color: #000000">().</span><span style="color: #795E26">Be</span><span style="color: #000000">(</span><span style="color: #A31515">"[{</span><span style="color: #EE0000">\"</span><span style="color: #A31515">id</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:1,</span><span style="color: #EE0000">\"</span><span style="color: #A31515">textValue</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:</span><span style="color: #EE0000">\"</span><span style="color: #A31515">test</span><span style="color: #EE0000">\"</span><span style="color: #A31515">,</span><span style="color: #EE0000">\"</span><span style="color: #A31515">flag</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:true},{</span><span style="color: #EE0000">\"</span><span style="color: #A31515">id</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:1,</span><span style="color: #EE0000">\"</span><span style="color: #A31515">textValue</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:</span><span style="color: #EE0000">\"</span><span style="color: #A31515">test</span><span style="color: #EE0000">\"</span><span style="color: #A31515">,</span><span style="color: #EE0000">\"</span><span style="color: #A31515">flag</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:true}]"</span><span style="color: #000000">);</span></span></code></pre></div><div class="code sql"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">create</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">function</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">get_mixed_table_of_my_tables</span><span style="color: #E6E6E6">(</span></span>
<span class="line"><span style="color: #E6E6E6">    request my_table</span></span>
<span class="line"><span style="color: #E6E6E6">)</span></span>
<span class="line"><span style="color: #569CD6">returns</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">table</span><span style="color: #E6E6E6"> (</span></span>
<span class="line"><span style="color: #E6E6E6">    a </span><span style="color: #569CD6">text</span><span style="color: #E6E6E6">,</span></span>
<span class="line"><span style="color: #E6E6E6">    req my_table,</span></span>
<span class="line"><span style="color: #E6E6E6">    b </span><span style="color: #569CD6">text</span></span>
<span class="line"><span style="color: #E6E6E6">)</span></span>
<span class="line"><span style="color: #569CD6">language</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">sql</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">as</span><span style="color: #E6E6E6"> </span></span>
<span class="line"><span style="color: #E6E6E6">$$</span></span>
<span class="line"><span style="color: #569CD6">select</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">'a1'</span><span style="color: #E6E6E6">, request, </span><span style="color: #CE9178">'b1'</span></span>
<span class="line"><span style="color: #569CD6">union all</span><span style="color: #E6E6E6"> </span></span>
<span class="line"><span style="color: #569CD6">select</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">'a2'</span><span style="color: #E6E6E6">, request, </span><span style="color: #CE9178">'b2'</span></span>
<span class="line"><span style="color: #E6E6E6">$$;</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #0000FF">create</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">get_mixed_table_of_my_tables</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">    request my_table</span></span>
<span class="line"><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #0000FF">returns</span><span style="color: #000000"> </span><span style="color: #0000FF">table</span><span style="color: #000000"> (</span></span>
<span class="line"><span style="color: #000000">    a </span><span style="color: #0000FF">text</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    req my_table,</span></span>
<span class="line"><span style="color: #000000">    b </span><span style="color: #0000FF">text</span></span>
<span class="line"><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #0000FF">language</span><span style="color: #000000"> </span><span style="color: #0000FF">sql</span><span style="color: #000000"> </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span></span>
<span class="line"><span style="color: #000000">$$</span></span>
<span class="line"><span style="color: #0000FF">select</span><span style="color: #000000"> </span><span style="color: #A31515">'a1'</span><span style="color: #000000">, request, </span><span style="color: #A31515">'b1'</span></span>
<span class="line"><span style="color: #0000FF">union all</span><span style="color: #000000"> </span></span>
<span class="line"><span style="color: #0000FF">select</span><span style="color: #000000"> </span><span style="color: #A31515">'a2'</span><span style="color: #000000">, request, </span><span style="color: #A31515">'b2'</span></span>
<span class="line"><span style="color: #000000">$$;</span></span></code></pre></div><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">query</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">QueryBuilder</span></span>
<span class="line"><span style="color: #E6E6E6">{</span></span>
<span class="line"><span style="color: #E6E6E6">    { </span><span style="color: #CE9178">"requestId"</span><span style="color: #E6E6E6">, </span><span style="color: #CE9178">"1"</span><span style="color: #E6E6E6"> },</span></span>
<span class="line"><span style="color: #E6E6E6">    { </span><span style="color: #CE9178">"requestTextValue"</span><span style="color: #E6E6E6">, </span><span style="color: #CE9178">"test"</span><span style="color: #E6E6E6"> },</span></span>
<span class="line"><span style="color: #E6E6E6">    { </span><span style="color: #CE9178">"requestFlag"</span><span style="color: #E6E6E6">, </span><span style="color: #CE9178">"true"</span><span style="color: #E6E6E6"> },</span></span>
<span class="line"><span style="color: #E6E6E6">};</span></span>
<span class="line"><span style="color: #C586C0">using</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">response</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">await</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">test</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Client</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">GetAsync</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">$"/api/get-mixed-table-of-my-tables/{</span><span style="color: #9CDCFE">query</span><span style="color: #CE9178">}"</span><span style="color: #E6E6E6">);</span></span>
<span class="line"><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">content</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">await</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">response</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Content</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">ReadAsStringAsync</span><span style="color: #E6E6E6">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #9CDCFE">response</span><span style="color: #D4D4D4">?</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">StatusCode</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Should</span><span style="color: #E6E6E6">().</span><span style="color: #DCDCAA">Be</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">HttpStatusCode</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">OK</span><span style="color: #E6E6E6">);</span></span>
<span class="line"><span style="color: #9CDCFE">content</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Should</span><span style="color: #E6E6E6">().</span><span style="color: #DCDCAA">Be</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"[{</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">a</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">a1</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">,</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">id</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:1,</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">textValue</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">test</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">,</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">flag</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:true,</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">b</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">b1</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">},{</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">a</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">a2</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">,</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">id</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:1,</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">textValue</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">test</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">,</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">flag</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:true,</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">b</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">b2</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">}]"</span><span style="color: #E6E6E6">);</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">query</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">QueryBuilder</span></span>
<span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #000000">    { </span><span style="color: #A31515">"requestId"</span><span style="color: #000000">, </span><span style="color: #A31515">"1"</span><span style="color: #000000"> },</span></span>
<span class="line"><span style="color: #000000">    { </span><span style="color: #A31515">"requestTextValue"</span><span style="color: #000000">, </span><span style="color: #A31515">"test"</span><span style="color: #000000"> },</span></span>
<span class="line"><span style="color: #000000">    { </span><span style="color: #A31515">"requestFlag"</span><span style="color: #000000">, </span><span style="color: #A31515">"true"</span><span style="color: #000000"> },</span></span>
<span class="line"><span style="color: #000000">};</span></span>
<span class="line"><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">response</span><span style="color: #000000"> = </span><span style="color: #0000FF">await</span><span style="color: #000000"> </span><span style="color: #001080">test</span><span style="color: #000000">.</span><span style="color: #001080">Client</span><span style="color: #000000">.</span><span style="color: #795E26">GetAsync</span><span style="color: #000000">(</span><span style="color: #A31515">$"/api/get-mixed-table-of-my-tables/{</span><span style="color: #001080">query</span><span style="color: #A31515">}"</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">content</span><span style="color: #000000"> = </span><span style="color: #0000FF">await</span><span style="color: #000000"> </span><span style="color: #001080">response</span><span style="color: #000000">.</span><span style="color: #001080">Content</span><span style="color: #000000">.</span><span style="color: #795E26">ReadAsStringAsync</span><span style="color: #000000">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #001080">response</span><span style="color: #000000">?.</span><span style="color: #001080">StatusCode</span><span style="color: #000000">.</span><span style="color: #795E26">Should</span><span style="color: #000000">().</span><span style="color: #795E26">Be</span><span style="color: #000000">(</span><span style="color: #001080">HttpStatusCode</span><span style="color: #000000">.</span><span style="color: #001080">OK</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #001080">content</span><span style="color: #000000">.</span><span style="color: #795E26">Should</span><span style="color: #000000">().</span><span style="color: #795E26">Be</span><span style="color: #000000">(</span><span style="color: #A31515">"[{</span><span style="color: #EE0000">\"</span><span style="color: #A31515">a</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:</span><span style="color: #EE0000">\"</span><span style="color: #A31515">a1</span><span style="color: #EE0000">\"</span><span style="color: #A31515">,</span><span style="color: #EE0000">\"</span><span style="color: #A31515">id</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:1,</span><span style="color: #EE0000">\"</span><span style="color: #A31515">textValue</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:</span><span style="color: #EE0000">\"</span><span style="color: #A31515">test</span><span style="color: #EE0000">\"</span><span style="color: #A31515">,</span><span style="color: #EE0000">\"</span><span style="color: #A31515">flag</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:true,</span><span style="color: #EE0000">\"</span><span style="color: #A31515">b</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:</span><span style="color: #EE0000">\"</span><span style="color: #A31515">b1</span><span style="color: #EE0000">\"</span><span style="color: #A31515">},{</span><span style="color: #EE0000">\"</span><span style="color: #A31515">a</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:</span><span style="color: #EE0000">\"</span><span style="color: #A31515">a2</span><span style="color: #EE0000">\"</span><span style="color: #A31515">,</span><span style="color: #EE0000">\"</span><span style="color: #A31515">id</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:1,</span><span style="color: #EE0000">\"</span><span style="color: #A31515">textValue</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:</span><span style="color: #EE0000">\"</span><span style="color: #A31515">test</span><span style="color: #EE0000">\"</span><span style="color: #A31515">,</span><span style="color: #EE0000">\"</span><span style="color: #A31515">flag</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:true,</span><span style="color: #EE0000">\"</span><span style="color: #A31515">b</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:</span><span style="color: #EE0000">\"</span><span style="color: #A31515">b2</span><span style="color: #EE0000">\"</span><span style="color: #A31515">}]"</span><span style="color: #000000">);</span></span></code></pre></div><h3 id="routinesources-options-property">RoutineSources Options Property<a class="anchor bookmark-target" href="#routinesources-options-property"><i class="bi bi-link-45deg"></i></a></h3><p>The <code>RoutineSources</code> options property access was changed from internal to public. This property defines routine sources (functions and procedures and/or CRUD table source) that will be used to create REST API endpoints. Default is functions and procedures.</p><p>This change was made to facilitate easier client configuration.</p><h3 id="routine-source-options">Routine Source Options<a class="anchor bookmark-target" href="#routine-source-options"><i class="bi bi-link-45deg"></i></a></h3><p><code>RoutineSource</code> class, which is used to build REST endpoints from PostgreSQL functions and procedures have some new options. These were added to serve client applications better. These new options are:</p><ul><li><code>CustomTypeParameterSeparator</code></li></ul><p>This values is used as a separator between parameter name and a custom type (or table type) field name. See changes in parameter creation above. Default is underscore <code>_</code>.</p><ul><li><code>IncludeLanguagues</code></li></ul><p>Include functions and procedures with these languagues (case insensitive). Default is null (all are included).</p><ul><li><code>ExcludeLanguagues</code></li></ul><p>Exclude functions and procedures with these languagues (case insensitive). Default is C and internal (array <code>['c', 'internal']</code>).</p><h3 id="reference-update">Reference Update<a class="anchor bookmark-target" href="#reference-update"><i class="bi bi-link-45deg"></i></a></h3><p>Npgsql reference from 8.0.3 to 8.0.5.</p><hr><h2 id="version-2110-2024-09-03">Version <a href="https://github.com/vb-consulting/NpgsqlRest/tree/2.11.0">2.11.0</a> (2024-09-03)<a class="anchor bookmark-target" href="#version-2110-2024-09-03"><i class="bi bi-link-45deg"></i></a></h2><p><a href="https://github.com/vb-consulting/NpgsqlRest/compare/2.10.0...2.11.0">Full Changelog</a></p><ol><li>Default value for the <code>CommentsMode</code> is changed. For now on, default value for this option is more restrictive <code>OnlyWithHttpTag</code> instead of previously <code>ParseAll</code>.</li><li>New routine endpoint option <code>bool RawColumnNames</code> (default false) with the following annotation <code>columnnames</code> or <code>column_names</code> or <code>column-names</code>. If this option is set to true (in code or with comment annotation) - and if the endpoint is int the "raw" mode - the endpoint will contain a header names. If separators are applied, they will be used also.</li></ol><hr><h2 id="version-2100-2024-08-06">Version <a href="https://github.com/vb-consulting/NpgsqlRest/tree/2.10.0">2.10.0</a> (2024-08-06)<a class="anchor bookmark-target" href="#version-2100-2024-08-06"><i class="bi bi-link-45deg"></i></a></h2><p><a href="https://github.com/vb-consulting/NpgsqlRest/compare/2.9.0...2.10.0">Full Changelog</a></p><h3 id="new-routine-endpoint-options-with-annotations">New Routine Endpoint Options With Annotations<a class="anchor bookmark-target" href="#new-routine-endpoint-options-with-annotations"><i class="bi bi-link-45deg"></i></a></h3><p>These two options will only apply when <a href="https://vb-consulting.github.io/npgsqlrest/annotations/#raw"><code>raw</code></a> is on. Also, comment annotation values will accept standard escape sequences such as <code>\n</code>, <code>\r</code> or <code>\t</code>, etc.</p><p>These are:</p><ul><li><code>RoutineEndpoint</code> option <code>public string? RawValueSeparator { get; set; } = null;</code> that maps to new comment annotation <code>separator</code></li></ul><p>Defines a standard separator between raw values.</p><ul><li><code>RoutineEndpoint</code> option <code>public string? RawNewLineSeparator { get; set; } = null;</code> that maps to new comment annotation <code>newline</code></li></ul><p>Defines a standard separator between raw value columns.</p><h3 id="dynamic-custom-header-values">Dynamic Custom Header Values<a class="anchor bookmark-target" href="#dynamic-custom-header-values"><i class="bi bi-link-45deg"></i></a></h3><p>In this version, when you define custom headers, either trough:</p><ul><li><a href="https://vb-consulting.github.io/npgsqlrest/options/#customrequestheaders"><code>CustomRequestHeaders</code> option</a> for all requests.</li><li>On <a href="https://vb-consulting.github.io/npgsqlrest/options/#endpointscreated"><code>EndpointsCreated</code> option event</a> as <code>ResponseHeaders</code> on a specific endpoint.</li><li>Or, as <a href="https://vb-consulting.github.io/npgsqlrest/annotations/#headers">comment annotation</a> on a PostgreSQL routine.</li></ul><p>Now, you can set header value from a routine parameter. For, example, if the header value has a name in curly brackets like this <code>Content-Type: {_type}</code>, then a <code>Content-Type</code> header will have to value of the <code>_type</code> routine parameter (if the parameter exists).</p><p>See CSV example:</p><h3 id="csv-example">CSV Example:<a class="anchor bookmark-target" href="#csv-example"><i class="bi bi-link-45deg"></i></a></h3><ul><li>Routine:</li></ul><div class="code sql"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">create</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">function</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">header_template_response1</span><span style="color: #E6E6E6">(_type </span><span style="color: #569CD6">text</span><span style="color: #E6E6E6">, _file </span><span style="color: #569CD6">text</span><span style="color: #E6E6E6">) </span></span>
<span class="line"><span style="color: #569CD6">returns</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">table</span><span style="color: #E6E6E6">(n </span><span style="color: #569CD6">numeric</span><span style="color: #E6E6E6">, d </span><span style="color: #569CD6">timestamp</span><span style="color: #E6E6E6">, b </span><span style="color: #569CD6">boolean</span><span style="color: #E6E6E6">, t </span><span style="color: #569CD6">text</span><span style="color: #E6E6E6">)</span></span>
<span class="line"><span style="color: #569CD6">language</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">sql</span></span>
<span class="line"><span style="color: #569CD6">as</span><span style="color: #E6E6E6"> </span></span>
<span class="line"><span style="color: #E6E6E6">$$</span></span>
<span class="line"><span style="color: #569CD6">select</span><span style="color: #E6E6E6"> sub.</span><span style="color: #D4D4D4">*</span><span style="color: #E6E6E6"> </span></span>
<span class="line"><span style="color: #569CD6">from</span><span style="color: #E6E6E6"> (</span></span>
<span class="line"><span style="color: #569CD6">values</span><span style="color: #E6E6E6"> </span></span>
<span class="line"><span style="color: #E6E6E6">    (</span><span style="color: #B5CEA8">123</span><span style="color: #E6E6E6">, </span><span style="color: #CE9178">'2024-01-01'</span><span style="color: #E6E6E6">::</span><span style="color: #569CD6">timestamp</span><span style="color: #E6E6E6">, true, </span><span style="color: #CE9178">'some text'</span><span style="color: #E6E6E6">),</span></span>
<span class="line"><span style="color: #E6E6E6">    (</span><span style="color: #B5CEA8">456</span><span style="color: #E6E6E6">, </span><span style="color: #CE9178">'2024-12-31'</span><span style="color: #E6E6E6">::</span><span style="color: #569CD6">timestamp</span><span style="color: #E6E6E6">, false, </span><span style="color: #CE9178">'another text'</span><span style="color: #E6E6E6">)</span></span>
<span class="line"><span style="color: #E6E6E6">)</span></span>
<span class="line"><span style="color: #E6E6E6">sub (n, d, b, t)</span></span>
<span class="line"><span style="color: #E6E6E6">$$;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">comment on function header_template_response1(text, text) is </span><span style="color: #CE9178">'</span></span>
<span class="line"><span style="color: #CE9178">raw</span></span>
<span class="line"><span style="color: #CE9178">separator ,</span></span>
<span class="line"><span style="color: #CE9178">newline </span><span style="color: #D7BA7D">\n</span></span>
<span class="line"><span style="color: #CE9178">Content-Type: {_type}</span></span>
<span class="line"><span style="color: #CE9178">Content-Disposition: attachment; filename={_file}</span></span>
<span class="line"><span style="color: #CE9178">'</span><span style="color: #E6E6E6">;</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #0000FF">create</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">header_template_response1</span><span style="color: #000000">(_type </span><span style="color: #0000FF">text</span><span style="color: #000000">, _file </span><span style="color: #0000FF">text</span><span style="color: #000000">) </span></span>
<span class="line"><span style="color: #0000FF">returns</span><span style="color: #000000"> </span><span style="color: #0000FF">table</span><span style="color: #000000">(n </span><span style="color: #0000FF">numeric</span><span style="color: #000000">, d </span><span style="color: #0000FF">timestamp</span><span style="color: #000000">, b </span><span style="color: #0000FF">boolean</span><span style="color: #000000">, t </span><span style="color: #0000FF">text</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #0000FF">language</span><span style="color: #000000"> </span><span style="color: #0000FF">sql</span></span>
<span class="line"><span style="color: #0000FF">as</span><span style="color: #000000"> </span></span>
<span class="line"><span style="color: #000000">$$</span></span>
<span class="line"><span style="color: #0000FF">select</span><span style="color: #000000"> sub.* </span></span>
<span class="line"><span style="color: #0000FF">from</span><span style="color: #000000"> (</span></span>
<span class="line"><span style="color: #0000FF">values</span><span style="color: #000000"> </span></span>
<span class="line"><span style="color: #000000">    (</span><span style="color: #098658">123</span><span style="color: #000000">, </span><span style="color: #A31515">'2024-01-01'</span><span style="color: #000000">::</span><span style="color: #0000FF">timestamp</span><span style="color: #000000">, true, </span><span style="color: #A31515">'some text'</span><span style="color: #000000">),</span></span>
<span class="line"><span style="color: #000000">    (</span><span style="color: #098658">456</span><span style="color: #000000">, </span><span style="color: #A31515">'2024-12-31'</span><span style="color: #000000">::</span><span style="color: #0000FF">timestamp</span><span style="color: #000000">, false, </span><span style="color: #A31515">'another text'</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">sub (n, d, b, t)</span></span>
<span class="line"><span style="color: #000000">$$;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0000FF">comment on function header_template_response1(text, text) is </span><span style="color: #A31515">'</span></span>
<span class="line"><span style="color: #A31515">raw</span></span>
<span class="line"><span style="color: #A31515">separator ,</span></span>
<span class="line"><span style="color: #A31515">newline </span><span style="color: #EE0000">\n</span></span>
<span class="line"><span style="color: #A31515">Content-Type: {_type}</span></span>
<span class="line"><span style="color: #A31515">Content-Disposition: attachment; filename={_file}</span></span>
<span class="line"><span style="color: #A31515">'</span><span style="color: #000000">;</span></span></code></pre></div><p>Request on this enpoint with parameters:</p><ul><li>_type = 'text/csv'</li><li>_file = 'test.csv'</li></ul><p>Will produce a download response to a 'test.csv' file with content type 'test.csv'. Raw values separator will be <code>,</code> character and row values separator will be new line.</p><hr><h2 id="version-290-2024-08-02">Version <a href="https://github.com/vb-consulting/NpgsqlRest/tree/2.9.0">2.9.0</a> (2024-08-02)<a class="anchor bookmark-target" href="#version-290-2024-08-02"><i class="bi bi-link-45deg"></i></a></h2><p><a href="https://github.com/vb-consulting/NpgsqlRest/compare/2.8.5...2.9.0">Full Changelog</a></p><p>Added <code>raw</code> endpoint options and comment annotation:</p><p>Sets response to a "raw" mode. HTTP response is written exactly as it is received from PostgreSQL (raw mode).</p><p>This is useful for creating CSV responses automatically. For example:</p><div class="code sql"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">create</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">function</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">raw_csv_response1</span><span style="color: #E6E6E6">() </span></span>
<span class="line"><span style="color: #569CD6">returns</span><span style="color: #E6E6E6"> setof </span><span style="color: #569CD6">text</span></span>
<span class="line"><span style="color: #569CD6">language</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">sql</span></span>
<span class="line"><span style="color: #569CD6">as</span><span style="color: #E6E6E6"> </span></span>
<span class="line"><span style="color: #E6E6E6">$$</span></span>
<span class="line"><span style="color: #569CD6">select</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">trim</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">both</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">'()'</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">FROM</span><span style="color: #E6E6E6"> sub::</span><span style="color: #569CD6">text</span><span style="color: #E6E6E6">) </span><span style="color: #D4D4D4">||</span><span style="color: #E6E6E6"> E</span><span style="color: #CE9178">'\n'</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">from</span><span style="color: #E6E6E6"> (</span></span>
<span class="line"><span style="color: #569CD6">values</span><span style="color: #E6E6E6"> </span></span>
<span class="line"><span style="color: #E6E6E6">    (</span><span style="color: #B5CEA8">123</span><span style="color: #E6E6E6">, </span><span style="color: #CE9178">'2024-01-01'</span><span style="color: #E6E6E6">::</span><span style="color: #569CD6">timestamp</span><span style="color: #E6E6E6">, true, </span><span style="color: #CE9178">'some text'</span><span style="color: #E6E6E6">),</span></span>
<span class="line"><span style="color: #E6E6E6">    (</span><span style="color: #B5CEA8">456</span><span style="color: #E6E6E6">, </span><span style="color: #CE9178">'2024-12-31'</span><span style="color: #E6E6E6">::</span><span style="color: #569CD6">timestamp</span><span style="color: #E6E6E6">, false, </span><span style="color: #CE9178">'another text'</span><span style="color: #E6E6E6">)</span></span>
<span class="line"><span style="color: #E6E6E6">)</span></span>
<span class="line"><span style="color: #E6E6E6">sub (n, d, b, t)</span></span>
<span class="line"><span style="color: #E6E6E6">$$;</span></span>
<span class="line"><span style="color: #569CD6">comment on function raw_csv_response1() is </span><span style="color: #CE9178">'</span></span>
<span class="line"><span style="color: #CE9178">raw</span></span>
<span class="line"><span style="color: #CE9178">Content-Type: text/csv</span></span>
<span class="line"><span style="color: #CE9178">'</span><span style="color: #E6E6E6">;</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #0000FF">create</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">raw_csv_response1</span><span style="color: #000000">() </span></span>
<span class="line"><span style="color: #0000FF">returns</span><span style="color: #000000"> setof </span><span style="color: #0000FF">text</span></span>
<span class="line"><span style="color: #0000FF">language</span><span style="color: #000000"> </span><span style="color: #0000FF">sql</span></span>
<span class="line"><span style="color: #0000FF">as</span><span style="color: #000000"> </span></span>
<span class="line"><span style="color: #000000">$$</span></span>
<span class="line"><span style="color: #0000FF">select</span><span style="color: #000000"> </span><span style="color: #795E26">trim</span><span style="color: #000000">(</span><span style="color: #0000FF">both</span><span style="color: #000000"> </span><span style="color: #A31515">'()'</span><span style="color: #000000"> </span><span style="color: #0000FF">FROM</span><span style="color: #000000"> sub::</span><span style="color: #0000FF">text</span><span style="color: #000000">) || E</span><span style="color: #A31515">'\n'</span><span style="color: #000000"> </span><span style="color: #0000FF">from</span><span style="color: #000000"> (</span></span>
<span class="line"><span style="color: #0000FF">values</span><span style="color: #000000"> </span></span>
<span class="line"><span style="color: #000000">    (</span><span style="color: #098658">123</span><span style="color: #000000">, </span><span style="color: #A31515">'2024-01-01'</span><span style="color: #000000">::</span><span style="color: #0000FF">timestamp</span><span style="color: #000000">, true, </span><span style="color: #A31515">'some text'</span><span style="color: #000000">),</span></span>
<span class="line"><span style="color: #000000">    (</span><span style="color: #098658">456</span><span style="color: #000000">, </span><span style="color: #A31515">'2024-12-31'</span><span style="color: #000000">::</span><span style="color: #0000FF">timestamp</span><span style="color: #000000">, false, </span><span style="color: #A31515">'another text'</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">sub (n, d, b, t)</span></span>
<span class="line"><span style="color: #000000">$$;</span></span>
<span class="line"><span style="color: #0000FF">comment on function raw_csv_response1() is </span><span style="color: #A31515">'</span></span>
<span class="line"><span style="color: #A31515">raw</span></span>
<span class="line"><span style="color: #A31515">Content-Type: text/csv</span></span>
<span class="line"><span style="color: #A31515">'</span><span style="color: #000000">;</span></span></code></pre></div><p>Produces the following response:</p><pre><code>HTTP/1.1 200 OK                                                  
Connection: close
Content-Type: text/csv
Date: Tue, 08 Aug 2024 14:25:26 GMT
Server: Kestrel
Transfer-Encoding: chunked

123,"2024-01-01 00:00:00",t,"some text"
456,"2024-12-31 00:00:00",f,"another text"

</code></pre><hr><h2 id="version-285-2024-06-25">Version <a href="https://github.com/vb-consulting/NpgsqlRest/tree/2.8.5">2.8.5</a> (2024-06-25)<a class="anchor bookmark-target" href="#version-285-2024-06-25"><i class="bi bi-link-45deg"></i></a></h2><p><a href="https://github.com/vb-consulting/NpgsqlRest/compare/2.8.4...2.8.5">Full Changelog</a></p><p>Fix default parameter validation callback.</p><hr><h2 id="version-284-2024-06-22">Version <a href="https://github.com/vb-consulting/NpgsqlRest/tree/2.8.4">2.8.4</a> (2024-06-22)<a class="anchor bookmark-target" href="#version-284-2024-06-22"><i class="bi bi-link-45deg"></i></a></h2><p><a href="https://github.com/vb-consulting/NpgsqlRest/compare/2.8.3...2.8.4">Full Changelog</a></p><p>Slight improvements in logging and enabling it to work with the client application.</p><hr><h2 id="version-283-2024-06-11">Version <a href="https://github.com/vb-consulting/NpgsqlRest/tree/2.8.3">2.8.3</a> (2024-06-11)<a class="anchor bookmark-target" href="#version-283-2024-06-11"><i class="bi bi-link-45deg"></i></a></h2><p><a href="https://github.com/vb-consulting/NpgsqlRest/compare/2.8.2...2.8.3">Full Changelog</a></p><p>Fix inconsistency with sending request parameters by routine parameters.</p><p>Previously it was possible to send request parameters to parameters without default values. To use request parameters in routine parameters, that parameter has to have a default value always.</p><p>This inconsistency is actually a bug in cases when the request header parameter name wasn't provided a value.</p><p>This is fixed now.</p><p>TsClient 1.8.1:</p><ul><li>If all routines are skipped, don't write any files.</li></ul><hr><h2 id="version-282-2024-06-09">Version <a href="https://github.com/vb-consulting/NpgsqlRest/tree/2.8.2">2.8.2</a> (2024-06-09)<a class="anchor bookmark-target" href="#version-282-2024-06-09"><i class="bi bi-link-45deg"></i></a></h2><p><a href="https://github.com/vb-consulting/NpgsqlRest/compare/2.8.1...2.8.2">Full Changelog</a></p><h3 id="fixed-bug-with-default-parameters">Fixed bug with default parameters<a class="anchor bookmark-target" href="#fixed-bug-with-default-parameters"><i class="bi bi-link-45deg"></i></a></h3><p>Using a routine that has default parameters and supplying one of the parameters would sometimes cause mixing of the parameter order. For example, if the routine is defined like this:</p><div class="code sql"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">create</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">function</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">get_two_default_params</span><span style="color: #E6E6E6">(</span></span>
<span class="line"><span style="color: #E6E6E6">    _p1 </span><span style="color: #569CD6">text</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">'abc'</span><span style="color: #E6E6E6">, </span></span>
<span class="line"><span style="color: #E6E6E6">    _p2 </span><span style="color: #569CD6">text</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">'xyz'</span></span>
<span class="line"><span style="color: #E6E6E6">) </span></span>
<span class="line"><span style="color: #569CD6">returns</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">text</span><span style="color: #E6E6E6"> </span></span>
<span class="line"><span style="color: #569CD6">language</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">sql</span></span>
<span class="line"><span style="color: #569CD6">as</span><span style="color: #E6E6E6"> </span></span>
<span class="line"><span style="color: #E6E6E6">$$</span></span>
<span class="line"><span style="color: #569CD6">select</span><span style="color: #E6E6E6"> _p1 </span><span style="color: #D4D4D4">||</span><span style="color: #E6E6E6"> _p2;</span></span>
<span class="line"><span style="color: #E6E6E6">$$;</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #0000FF">create</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">get_two_default_params</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">    _p1 </span><span style="color: #0000FF">text</span><span style="color: #000000"> = </span><span style="color: #A31515">'abc'</span><span style="color: #000000">, </span></span>
<span class="line"><span style="color: #000000">    _p2 </span><span style="color: #0000FF">text</span><span style="color: #000000"> = </span><span style="color: #A31515">'xyz'</span></span>
<span class="line"><span style="color: #000000">) </span></span>
<span class="line"><span style="color: #0000FF">returns</span><span style="color: #000000"> </span><span style="color: #0000FF">text</span><span style="color: #000000"> </span></span>
<span class="line"><span style="color: #0000FF">language</span><span style="color: #000000"> </span><span style="color: #0000FF">sql</span></span>
<span class="line"><span style="color: #0000FF">as</span><span style="color: #000000"> </span></span>
<span class="line"><span style="color: #000000">$$</span></span>
<span class="line"><span style="color: #0000FF">select</span><span style="color: #000000"> _p1 || _p2;</span></span>
<span class="line"><span style="color: #000000">$$;</span></span></code></pre></div><p>Invoking it with only the second parameter parameter (p2) would mix p1 and p2 and wrongly assume that the first parameter is the second parameter and vice versa.</p><p>This is now fixed and the parameters are correctly assigned.</p><h3 id="fixed-bug-with-default-parameters-for-postgresql-roles-that-are-not-super-users">Fixed bug with default parameters for PostgreSQL roles that are not super-users.<a class="anchor bookmark-target" href="#fixed-bug-with-default-parameters-for-postgresql-roles-that-are-not-super-users"><i class="bi bi-link-45deg"></i></a></h3><p>When using a PostgreSQL role that is not a super-user, the default parameters were not correctly assigned.</p><p>This may be a bug in PostgreSQL itself (reported), column <code>parameter_default</code> in system table <code>information_schema.parameters</code> always returns <code>null</code> for roles that are not super-users.</p><p>Workaround is implemented and tested to use the <code>pg_get_function_arguments</code> function and then to parse the default values from the function definition.</p><hr><h2 id="version-281-2024-05-10">Version <a href="https://github.com/vb-consulting/NpgsqlRest/tree/2.8.1">2.8.1</a> (2024-05-10)<a class="anchor bookmark-target" href="#version-281-2024-05-10"><i class="bi bi-link-45deg"></i></a></h2><p><a href="https://github.com/vb-consulting/NpgsqlRest/compare/2.8.0...2.8.1">Full Changelog</a></p><ul><li>Upgrade Npgsql from 8.0.0 to 8.0.3</li><li>Fix null dereference of a possibly null build warning.</li></ul><hr><h2 id="version-280-2024-05-02">Version <a href="https://github.com/vb-consulting/NpgsqlRest/tree/2.8.0">2.8.0</a> (2024-05-02)<a class="anchor bookmark-target" href="#version-280-2024-05-02"><i class="bi bi-link-45deg"></i></a></h2><p><a href="https://github.com/vb-consulting/NpgsqlRest/compare/2.7.1...2.8.0">Full Changelog</a></p><ul><li>New Option: <code>Dictionary&lt;string, StringValues> CustomRequestHeaders</code></li></ul><p>Custom request headers dictionary that will be added to NpgsqlRest requests.</p><p>Note: these values are added to the request headers dictionary before they are sent as a context or parameter to the PostgreSQL routine and as such not visible to the browser debugger.</p><h3 id="tsclient-version-170">TsClient Version 1.7.0<a class="anchor bookmark-target" href="#tsclient-version-170"><i class="bi bi-link-45deg"></i></a></h3><ul><li>Sanitaze generated TypeScript names.</li><li>Add <code>SkipRoutineNames</code>, <code>SkipFunctionNames</code> and <code>SkipPaths</code> options.</li></ul><hr><h2 id="version-271-2024-04-30">Version <a href="https://github.com/vb-consulting/NpgsqlRest/tree/2.7.1">2.7.1</a> (2024-04-30)<a class="anchor bookmark-target" href="#version-271-2024-04-30"><i class="bi bi-link-45deg"></i></a></h2><p><a href="https://github.com/vb-consulting/NpgsqlRest/compare/2.7.0...2.7.1">Full Changelog</a></p><ul><li>Small fix on the Login endpoint that fixed the problem with the custom message not being written to the response in some rare circumstances.</li><li>Redesigned the auth module and changed the access modifiers to the public of the ClaimTypes Dictionary to be used with the client application.</li></ul><hr><h2 id="version-270-2024-04-17">Version <a href="https://github.com/vb-consulting/NpgsqlRest/tree/2.7.0">2.7.0</a> (2024-04-17)<a class="anchor bookmark-target" href="#version-270-2024-04-17"><i class="bi bi-link-45deg"></i></a></h2><p><a href="https://github.com/vb-consulting/NpgsqlRest/compare/2.6.1...2.7.0">Full Changelog</a></p><p>New callback option: <code>Action&lt;NpgsqlConnection, Routine, RoutineEndpoint, HttpContext>? BeforeConnectionOpen</code>.</p><p>This is used to set the application name parameter (for example) without having to use the service provider. It executes before the new connection is open for the request. For example:</p><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #9CDCFE">app</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">UseNpgsqlRest</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">new</span><span style="color: #E6E6E6">()</span></span>
<span class="line"><span style="color: #E6E6E6">{</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">ConnectionString</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connectionString</span><span style="color: #E6E6E6">,</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">BeforeConnectionOpen</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> (</span><span style="color: #4EC9B0">NpgsqlConnection</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">Routine</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">routine</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">RoutineEndpoint</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">endpoint</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">HttpContext</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">context</span><span style="color: #E6E6E6">) </span><span style="color: #D4D4D4">=></span></span>
<span class="line"><span style="color: #E6E6E6">    {</span></span>
<span class="line"><span style="color: #E6E6E6">        </span><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">username</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">context</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">User</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Identity</span><span style="color: #D4D4D4">?</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Name</span><span style="color: #E6E6E6">;</span></span>
<span class="line"><span style="color: #E6E6E6">        </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">ConnectionString</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">NpgsqlConnectionStringBuilder</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">connectionString</span><span style="color: #E6E6E6">)</span></span>
<span class="line"><span style="color: #E6E6E6">        {</span></span>
<span class="line"><span style="color: #E6E6E6">            </span><span style="color: #9CDCFE">ApplicationName</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Concat</span><span style="color: #E6E6E6">(</span></span>
<span class="line"><span style="color: #E6E6E6">                    </span><span style="color: #CE9178">"{</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">app</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">"</span><span style="color: #E6E6E6">,</span></span>
<span class="line"><span style="color: #E6E6E6">                    </span><span style="color: #9CDCFE">builder</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Environment</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">ApplicationName</span><span style="color: #E6E6E6">,</span></span>
<span class="line"><span style="color: #E6E6E6">                    </span><span style="color: #9CDCFE">username</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">is</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">null</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">?</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">"</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">,</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">user</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:null}"</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">:</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Concat</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">,</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">user</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">:</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">"</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">username</span><span style="color: #E6E6E6">, </span><span style="color: #CE9178">"</span><span style="color: #D7BA7D">\"</span><span style="color: #CE9178">}"</span><span style="color: #E6E6E6">))</span></span>
<span class="line"><span style="color: #E6E6E6">        }.</span><span style="color: #9CDCFE">ConnectionString</span><span style="color: #E6E6E6">;</span></span>
<span class="line"><span style="color: #E6E6E6">    }</span></span>
<span class="line"><span style="color: #E6E6E6">}</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #001080">app</span><span style="color: #000000">.</span><span style="color: #795E26">UseNpgsqlRest</span><span style="color: #000000">(</span><span style="color: #0000FF">new</span><span style="color: #000000">()</span></span>
<span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">ConnectionString</span><span style="color: #000000"> = </span><span style="color: #001080">connectionString</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">BeforeConnectionOpen</span><span style="color: #000000"> = (</span><span style="color: #267F99">NpgsqlConnection</span><span style="color: #000000"> </span><span style="color: #001080">connection</span><span style="color: #000000">, </span><span style="color: #267F99">Routine</span><span style="color: #000000"> </span><span style="color: #001080">routine</span><span style="color: #000000">, </span><span style="color: #267F99">RoutineEndpoint</span><span style="color: #000000"> </span><span style="color: #001080">endpoint</span><span style="color: #000000">, </span><span style="color: #267F99">HttpContext</span><span style="color: #000000"> </span><span style="color: #001080">context</span><span style="color: #000000">) =></span></span>
<span class="line"><span style="color: #000000">    {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">username</span><span style="color: #000000"> = </span><span style="color: #001080">context</span><span style="color: #000000">.</span><span style="color: #001080">User</span><span style="color: #000000">.</span><span style="color: #001080">Identity</span><span style="color: #000000">?.</span><span style="color: #001080">Name</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #001080">connection</span><span style="color: #000000">.</span><span style="color: #001080">ConnectionString</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">NpgsqlConnectionStringBuilder</span><span style="color: #000000">(</span><span style="color: #001080">connectionString</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">        {</span></span>
<span class="line"><span style="color: #000000">            </span><span style="color: #001080">ApplicationName</span><span style="color: #000000"> = </span><span style="color: #0000FF">string</span><span style="color: #000000">.</span><span style="color: #795E26">Concat</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">                    </span><span style="color: #A31515">"{</span><span style="color: #EE0000">\"</span><span style="color: #A31515">app</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:</span><span style="color: #EE0000">\"</span><span style="color: #A31515">"</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">                    </span><span style="color: #001080">builder</span><span style="color: #000000">.</span><span style="color: #001080">Environment</span><span style="color: #000000">.</span><span style="color: #001080">ApplicationName</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">                    </span><span style="color: #001080">username</span><span style="color: #000000"> </span><span style="color: #0000FF">is</span><span style="color: #000000"> </span><span style="color: #0000FF">null</span><span style="color: #000000"> ? </span><span style="color: #A31515">"</span><span style="color: #EE0000">\"</span><span style="color: #A31515">,</span><span style="color: #EE0000">\"</span><span style="color: #A31515">user</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:null}"</span><span style="color: #000000"> : </span><span style="color: #0000FF">string</span><span style="color: #000000">.</span><span style="color: #795E26">Concat</span><span style="color: #000000">(</span><span style="color: #A31515">"</span><span style="color: #EE0000">\"</span><span style="color: #A31515">,</span><span style="color: #EE0000">\"</span><span style="color: #A31515">user</span><span style="color: #EE0000">\"</span><span style="color: #A31515">:</span><span style="color: #EE0000">\"</span><span style="color: #A31515">"</span><span style="color: #000000">, </span><span style="color: #001080">username</span><span style="color: #000000">, </span><span style="color: #A31515">"</span><span style="color: #EE0000">\"</span><span style="color: #A31515">}"</span><span style="color: #000000">))</span></span>
<span class="line"><span style="color: #000000">        }.</span><span style="color: #001080">ConnectionString</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">    }</span></span>
<span class="line"><span style="color: #000000">}</span></span></code></pre></div><hr><h2 id="version-261-2024-04-16">Version <a href="https://github.com/vb-consulting/NpgsqlRest/tree/2.6.1">2.6.1</a> (2024-04-16)<a class="anchor bookmark-target" href="#version-261-2024-04-16"><i class="bi bi-link-45deg"></i></a></h2><p><a href="https://github.com/vb-consulting/NpgsqlRest/compare/2.6.0...2.6.1">Full Changelog</a></p><p>Don't write the response body on status 205, which is forbidden.</p><h2 id="version-260-2024-04-16">Version <a href="https://github.com/vb-consulting/NpgsqlRest/tree/2.6.0">2.6.0</a> (2024-04-16)<a class="anchor bookmark-target" href="#version-260-2024-04-16"><i class="bi bi-link-45deg"></i></a></h2><p><a href="https://github.com/vb-consulting/NpgsqlRest/compare/2.5.0...2.6.0">Full Changelog</a></p><p>Improved error handling. Two new options are available:</p><h3 id="returnnpgsqlexceptionmessage"><code>ReturnNpgsqlExceptionMessage</code>:<a class="anchor bookmark-target" href="#returnnpgsqlexceptionmessage"><i class="bi bi-link-45deg"></i></a></h3><ul><li><p>Set to true to return message property on exception from the <code>NpgsqlException</code> object on response body. The default is true.</p></li><li><p>Set to false to return empty body on exception.</p></li></ul><h3 id="postgresqlerrorcodetohttpstatuscodemapping"><code>PostgreSqlErrorCodeToHttpStatusCodeMapping</code><a class="anchor bookmark-target" href="#postgresqlerrorcodetohttpstatuscodemapping"><i class="bi bi-link-45deg"></i></a></h3><p>Dictionary setting that maps the PostgreSQL Error Codes (see the <a href="https://www.postgresql.org/docs/current/errcodes-appendix.html">errcodes-appendix</a> to HTTP Status Codes.</p><p>Default is <code>{ "57014", 205 }</code> which maps PostgreSQL <code>query_canceled</code> error to HTTP <code>205 Reset Content</code>. If the mapping doesn't exist, the standard HTTP <code>500 Internal Server Error</code> is returned.</p><hr><h2 id="version-250-2024-04-15">Version <a href="https://github.com/vb-consulting/NpgsqlRest/tree/2.5.0">2.5.0</a> (2024-04-15)<a class="anchor bookmark-target" href="#version-250-2024-04-15"><i class="bi bi-link-45deg"></i></a></h2><p><a href="https://github.com/vb-consulting/NpgsqlRest/compare/2.4.2...2.5.0">Full Changelog</a></p><ul><li>New endpoint parameter option <code>BufferRows</code>.</li></ul><p>Now it's possible to set the number of buffered rows that are returned before they are written to HTTP response on an endpoint level.</p><p>It is also possible to set this endpoint parameter as a comment annotation:</p><div class="code sql"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">comment on function my_streaming_function() is </span><span style="color: #CE9178">'HTTP GET</span></span>
<span class="line"><span style="color: #CE9178">bufferrows 1'</span><span style="color: #E6E6E6">;</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #0000FF">comment on function my_streaming_function() is </span><span style="color: #A31515">'HTTP GET</span></span>
<span class="line"><span style="color: #A31515">bufferrows 1'</span><span style="color: #000000">;</span></span></code></pre></div><p>See the full comment <a href="https://github.com/vb-consulting/NpgsqlRest/blob/master/annotations.md">annotation list here</a>.</p><p>Setting this parameter to 1 is useful in the HTTP streaming scenarios.</p><ul><li>New TsClient plugin options and fixes</li></ul><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #6A9955">/// </span><span style="color: #808080">&lt;</span><span style="color: #569CD6">summary</span><span style="color: #808080">></span></span>
<span class="line"><span style="color: #6A9955">/// Module name to import "baseUrl" constant, instead of defining it in a module.</span></span>
<span class="line"><span style="color: #6A9955">/// </span><span style="color: #808080">&lt;/</span><span style="color: #569CD6">summary</span><span style="color: #808080">></span></span>
<span class="line"><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">string</span><span style="color: #D4D4D4">?</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">ImportBaseUrlFrom</span><span style="color: #E6E6E6"> { </span><span style="color: #9CDCFE">get</span><span style="color: #E6E6E6">; </span><span style="color: #9CDCFE">set</span><span style="color: #E6E6E6">; } </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">importBaseUrlFrom</span><span style="color: #E6E6E6">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955">/// </span><span style="color: #808080">&lt;</span><span style="color: #569CD6">summary</span><span style="color: #808080">></span></span>
<span class="line"><span style="color: #6A9955">/// Module name to import "pasreQuery" function, instead of defining it in a module.</span></span>
<span class="line"><span style="color: #6A9955">/// </span><span style="color: #808080">&lt;/</span><span style="color: #569CD6">summary</span><span style="color: #808080">></span></span>
<span class="line"><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">string</span><span style="color: #D4D4D4">?</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">ImportParseQueryFrom</span><span style="color: #E6E6E6"> { </span><span style="color: #9CDCFE">get</span><span style="color: #E6E6E6">; </span><span style="color: #9CDCFE">set</span><span style="color: #E6E6E6">; } </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">importParseQueryFrom</span><span style="color: #E6E6E6">;</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #008000">/// </span><span style="color: #800000">&lt;summary></span></span>
<span class="line"><span style="color: #008000">/// Module name to import "baseUrl" constant, instead of defining it in a module.</span></span>
<span class="line"><span style="color: #008000">/// </span><span style="color: #800000">&lt;/summary></span></span>
<span class="line"><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">string</span><span style="color: #000000">? </span><span style="color: #001080">ImportBaseUrlFrom</span><span style="color: #000000"> { </span><span style="color: #001080">get</span><span style="color: #000000">; </span><span style="color: #001080">set</span><span style="color: #000000">; } = </span><span style="color: #001080">importBaseUrlFrom</span><span style="color: #000000">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #008000">/// </span><span style="color: #800000">&lt;summary></span></span>
<span class="line"><span style="color: #008000">/// Module name to import "pasreQuery" function, instead of defining it in a module.</span></span>
<span class="line"><span style="color: #008000">/// </span><span style="color: #800000">&lt;/summary></span></span>
<span class="line"><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">string</span><span style="color: #000000">? </span><span style="color: #001080">ImportParseQueryFrom</span><span style="color: #000000"> { </span><span style="color: #001080">get</span><span style="color: #000000">; </span><span style="color: #001080">set</span><span style="color: #000000">; } = </span><span style="color: #001080">importParseQueryFrom</span><span style="color: #000000">;</span></span></code></pre></div><hr><h2 id="version-242-2024-04-14">Version <a href="https://github.com/vb-consulting/NpgsqlRest/tree/2.4.2">2.4.2</a> (2024-04-14)<a class="anchor bookmark-target" href="#version-242-2024-04-14"><i class="bi bi-link-45deg"></i></a></h2><p><a href="https://github.com/vb-consulting/NpgsqlRest/compare/2.4.1...2.4.2">Full Changelog</a></p><ul><li>Fix double logging the same message on the connection notice.</li></ul><hr><h2 id="version-241-2024-04-12">Version <a href="https://github.com/vb-consulting/NpgsqlRest/tree/2.4.1">2.4.1</a> (2024-04-12)<a class="anchor bookmark-target" href="#version-241-2024-04-12"><i class="bi bi-link-45deg"></i></a></h2><p><a href="https://github.com/vb-consulting/NpgsqlRest/compare/2.4.0...2.4.1">Full Changelog</a></p><ul><li>Fix missing Text type for types in need of JSON escaping.</li></ul><hr><h2 id="version-240-2024-04-08">Version <a href="https://github.com/vb-consulting/NpgsqlRest/tree/2.4.0">2.4.0</a> (2024-04-08)<a class="anchor bookmark-target" href="#version-240-2024-04-08"><i class="bi bi-link-45deg"></i></a></h2><p><a href="https://github.com/vb-consulting/NpgsqlRest/compare/2.3.1...2.4.0">Full Changelog</a></p><ul><li>Remove <code>AotTemplate</code> subproject directory. AOT Template is now <code>NpgsqlRestTestWebApi</code> with full configuration for the entire application.</li><li>The auth handler doesn't complete the response if it doesn't have to on login and logout.</li><li>Changed wording <code>Schema</code> to <code>Scheme</code> everywhere because that appears to be standard with the auth (unlike with databases).</li><li>Changed <code>IRoutineSource</code> interface to:<ul><li>Have <code>CommentsMode</code> mode fully exposed with getters and setters.</li><li>Have <code>Query</code> property exposed.</li><li>Every parameter for the query exposed (<code>SchemaSimilarTo</code>, <code>SchemaNotSimilarTo</code>, etc).</li></ul></li><li>Replaced interfaces with concrete implementation for better performance.</li><li>Fixed bug with service scope disposal when using <code>ConnectionFromServiceProvider</code>.</li><li>Obfuscated auth parameters in logs (with <code>ObfuscateAuthParameterLogValues</code> option).</li><li>Implemented <code>SerializeAuthEndpointsResponse</code> to serialize the auth (log in or log out) when it's possible.</li><li>Fixed <code>ParameterValidationValues</code> to use <code>NpgsqlRestParameter</code> instead of <code>NpgsqlParameter</code> to expose the actual parameter name.</li><li>Added <code>IsAuth</code> read-only property to the endpoint.</li><li>Fixed automatic port detection in the code-gen plugins.</li><li>Added <code>CommentHeaderIncludeComments</code> to the <code>TsClient</code> plugin.</li></ul><hr><h2 id="version-231-2024-04-05">Version <a href="https://github.com/vb-consulting/NpgsqlRest/tree/2.3.1">2.3.1</a> (2024-04-05)<a class="anchor bookmark-target" href="#version-231-2024-04-05"><i class="bi bi-link-45deg"></i></a></h2><p><a href="https://github.com/vb-consulting/NpgsqlRest/compare/2.3.0...2.3.1">Full Changelog</a></p><ul><li>Fix the "Headers are read-only, response has already started." error during the logout execution.</li></ul><hr><h2 id="version-230-2024-04-04">Version <a href="https://github.com/vb-consulting/NpgsqlRest/tree/2.3.0">2.3.0</a> (2024-04-04)<a class="anchor bookmark-target" href="#version-230-2024-04-04"><i class="bi bi-link-45deg"></i></a></h2><p><a href="https://github.com/vb-consulting/NpgsqlRest/compare/2.2.0...2.3.0">Full Changelog</a></p><ul><li>Login Endpoints can return text messages.</li><li>A new option that supports this feature: <code>AuthenticationOptions.MessageColumnName</code>.</li><li>Login endpoints always return text.</li><li>Interface <code>IRoutineSource</code> exposes <code>string Query { get; set; }</code>. If the value doesn't contain blanks it is interpreted as the function name.</li><li>TsClient plugin new version (1.2.0):<ul><li>New TsClweint option BySchema. If true, create a file by schema. The default is false.</li><li>Fix handling login endpoints.</li><li>Bugfixes.</li></ul></li></ul><hr><h2 id="version-220-2024-04-02">Version <a href="https://github.com/vb-consulting/NpgsqlRest/tree/2.2.0">2.2.0</a> (2024-04-02)<a class="anchor bookmark-target" href="#version-220-2024-04-02"><i class="bi bi-link-45deg"></i></a></h2><p><a href="https://github.com/vb-consulting/NpgsqlRest/compare/2.1.0...2.2.0">Full Changelog</a></p><ul><li>Login endpoints</li><li>Logout endpoints</li><li>Small name refactoring (ReturnRecordNames -> ColumnNames)</li></ul><p>To enable authentication, the authentication service first needs to be enabled in the application:</p><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">builder</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">WebApplication</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">CreateBuilder</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">args</span><span style="color: #E6E6E6">);</span></span>
<span class="line"><span style="color: #9CDCFE">builder</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Services</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">AddAuthentication</span><span style="color: #E6E6E6">().</span><span style="color: #DCDCAA">AddCookie</span><span style="color: #E6E6E6">();</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">builder</span><span style="color: #000000"> = </span><span style="color: #001080">WebApplication</span><span style="color: #000000">.</span><span style="color: #795E26">CreateBuilder</span><span style="color: #000000">(</span><span style="color: #001080">args</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #001080">builder</span><span style="color: #000000">.</span><span style="color: #001080">Services</span><span style="color: #000000">.</span><span style="color: #795E26">AddAuthentication</span><span style="color: #000000">().</span><span style="color: #795E26">AddCookie</span><span style="color: #000000">();</span></span></code></pre></div><p>The login-enabled endpoints must return a named record.</p><p>The program will result in the <code>ArgumentException</code> exception if the login-enabled routine is either of these:</p><ul><li>void</li><li>returns simple value</li><li>returns set of record unnamed records</li></ul><p>The login operation will be interpreted as an unsuccessful login attempt and return the status code <code>401 Unauthorized</code> without creating a user identity if either:</p><ul><li>The routine returns an empty record.</li><li>The returned record includes a <a href="https://vb-consulting.github.io/npgsqlrest/options/#authenticationoptionsschemacolumnname">status column</a>, and the value of the status column name is:<ul><li>False for boolean types.</li><li>Not 200 for numeric types.</li></ul></li></ul><p>The login operation will be interpreted as a successful login attempt and return the status code <code>200 OK</code> with creating a new user identity if either:</p><ul><li>The routine returns a record without status <a href="https://vb-consulting.github.io/npgsqlrest/options/#authenticationoptionsschemacolumnname">status column</a>.</li><li>The returned record includes a <a href="https://vb-consulting.github.io/npgsqlrest/options/#authenticationoptionsschemacolumnname">status column</a>, and the value of the status column name is:<ul><li>True for boolean types.</li><li>200 for numeric types.</li></ul></li></ul><p>To authorize a different authorization scheme, return a <a href="https://vb-consulting.github.io/npgsqlrest/options/#authenticationoptionsschemacolumnname">schema column name</a> with the value of that schema.</p><p>Any other records will be set as new claims for the created user identity on successful login, where:</p><ul><li>The column name is claim type. This type will by default try to match the constant name in the <a href="https://learn.microsoft.com/en-us/dotnet/api/system.security.claims.claimtypes?view=net-8.0">ClaimTypes class</a> to retrieve the value. Use the [<code>UseActiveDirectoryFederationServicesClaimTypes</code> Option][<a href="https://vb-consulting.github.io/npgsqlrest/options/#authenticationoptionsuseactivedirectoryfederationservicesclaimtypes">https://vb-consulting.github.io/npgsqlrest/options/#authenticationoptionsuseactivedirectoryfederationservicesclaimtypes</a>] to control this behavior.</li><li>The record value (as string) is the claim value.</li></ul><hr><h2 id="version-210-2024-03-29">Version <a href="https://github.com/vb-consulting/NpgsqlRest/tree/2.1.0">2.1.0</a> (2024-03-29)<a class="anchor bookmark-target" href="#version-210-2024-03-29"><i class="bi bi-link-45deg"></i></a></h2><p><a href="https://github.com/vb-consulting/NpgsqlRest/compare/2.0.0...2.1.0">Full Changelog</a></p><h3 id="role-based-security">Role-Based Security<a class="anchor bookmark-target" href="#role-based-security"><i class="bi bi-link-45deg"></i></a></h3><p>This version supports the <strong>Roles-Based Security</strong> mechanism.</p><p>The Endpoint can be authorized for only certain roles.</p><p>For example, all endpoints must be in <code>admin</code> or <code>superadmin</code> roles:</p><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #9CDCFE">app</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">UseNpgsqlRest</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">new</span><span style="color: #E6E6E6">()</span></span>
<span class="line"><span style="color: #E6E6E6">{</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">ConnectionString</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connectionString</span><span style="color: #E6E6E6">,</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">EndpointCreated</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> (</span><span style="color: #9CDCFE">routine</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">endpoint</span><span style="color: #E6E6E6">) </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">endpoint</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">with</span><span style="color: #E6E6E6"> { </span><span style="color: #9CDCFE">AuthorizeRoles</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> [</span><span style="color: #CE9178">"admin"</span><span style="color: #E6E6E6">, </span><span style="color: #CE9178">"super"</span><span style="color: #E6E6E6">] }</span></span>
<span class="line"><span style="color: #E6E6E6">});</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #001080">app</span><span style="color: #000000">.</span><span style="color: #795E26">UseNpgsqlRest</span><span style="color: #000000">(</span><span style="color: #0000FF">new</span><span style="color: #000000">()</span></span>
<span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">ConnectionString</span><span style="color: #000000"> = </span><span style="color: #001080">connectionString</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">EndpointCreated</span><span style="color: #000000"> = (</span><span style="color: #001080">routine</span><span style="color: #000000">, </span><span style="color: #001080">endpoint</span><span style="color: #000000">) => </span><span style="color: #001080">endpoint</span><span style="color: #000000"> </span><span style="color: #0000FF">with</span><span style="color: #000000"> { </span><span style="color: #001080">AuthorizeRoles</span><span style="color: #000000"> = [</span><span style="color: #A31515">"admin"</span><span style="color: #000000">, </span><span style="color: #A31515">"super"</span><span style="color: #000000">] }</span></span>
<span class="line"><span style="color: #000000">});</span></span></code></pre></div><p>Same thing, only for the function with name <code>protected_func</code>:</p><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #9CDCFE">app</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">UseNpgsqlRest</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">new</span><span style="color: #E6E6E6">()</span></span>
<span class="line"><span style="color: #E6E6E6">{</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">ConnectionString</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connectionString</span><span style="color: #E6E6E6">,</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">EndpointCreated</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> (</span><span style="color: #9CDCFE">routine</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">endpoint</span><span style="color: #E6E6E6">) </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">routine</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Name</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">==</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">"protected_func"</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">?</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">endpoint</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">with</span><span style="color: #E6E6E6"> { </span><span style="color: #9CDCFE">AuthorizeRoles</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> [</span><span style="color: #CE9178">"admin"</span><span style="color: #E6E6E6">, </span><span style="color: #CE9178">"super"</span><span style="color: #E6E6E6">] } </span><span style="color: #D4D4D4">:</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">endpoint</span></span>
<span class="line"><span style="color: #E6E6E6">});</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #001080">app</span><span style="color: #000000">.</span><span style="color: #795E26">UseNpgsqlRest</span><span style="color: #000000">(</span><span style="color: #0000FF">new</span><span style="color: #000000">()</span></span>
<span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">ConnectionString</span><span style="color: #000000"> = </span><span style="color: #001080">connectionString</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">EndpointCreated</span><span style="color: #000000"> = (</span><span style="color: #001080">routine</span><span style="color: #000000">, </span><span style="color: #001080">endpoint</span><span style="color: #000000">) => </span><span style="color: #001080">routine</span><span style="color: #000000">.</span><span style="color: #001080">Name</span><span style="color: #000000"> == </span><span style="color: #A31515">"protected_func"</span><span style="color: #000000"> ? </span><span style="color: #001080">endpoint</span><span style="color: #000000"> </span><span style="color: #0000FF">with</span><span style="color: #000000"> { </span><span style="color: #001080">AuthorizeRoles</span><span style="color: #000000"> = [</span><span style="color: #A31515">"admin"</span><span style="color: #000000">, </span><span style="color: #A31515">"super"</span><span style="color: #000000">] } : </span><span style="color: #001080">endpoint</span></span>
<span class="line"><span style="color: #000000">});</span></span></code></pre></div><p>There is also support for the comment annotations. Add a list of roles after the <code>RequiresAuthorization</code> annotation tag:</p><div class="one-liner"><div class="code sql"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">comment on function protected_func() is </span><span style="color: #CE9178">'authorize admin, superadmin'</span><span style="color: #E6E6E6">;</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #0000FF">comment on function protected_func() is </span><span style="color: #A31515">'authorize admin, superadmin'</span><span style="color: #000000">;</span></span></code></pre></div></div><p>See more details on the <a href="https://vb-consulting.github.io/npgsqlrest/annotations/#requiresauthorization"><code>RequiresAuthorization</code> annotation tag</a>.</p><p>Note: If the user is authorized but not in any of the roles required by the authorization, the endpoint will return the status code <code>403 Forbidden</code>.</p><h3 id="tsclient-includestatuscode">TsClient IncludeStatusCode<a class="anchor bookmark-target" href="#tsclient-includestatuscode"><i class="bi bi-link-45deg"></i></a></h3><p>The New version of the <code>NpgsqlRest.TsClient</code> (1.1.0) plugin now includes the <code>IncludeStatusCode</code> option.</p><p>When set to true (default is false), the resulting value will include the response code in the function result, for example:</p><div class="code ts"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #C586C0">export</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">async</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">function</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">getDuplicateEmailCustomers</span><span style="color: #E6E6E6">() </span><span style="color: #D4D4D4">:</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Promise</span><span style="color: #E6E6E6">&lt;{</span><span style="color: #9CDCFE">status</span><span style="color: #D4D4D4">:</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">number</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">response</span><span style="color: #D4D4D4">:</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">IGetDuplicateEmailCustomersResponse</span><span style="color: #E6E6E6">[]}> {</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #569CD6">const</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">response</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #C586C0">await</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">fetch</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">_baseUrl</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">+</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">"/api/get-duplicate-email-customers"</span><span style="color: #E6E6E6">, {</span></span>
<span class="line"><span style="color: #E6E6E6">        </span><span style="color: #9CDCFE">method:</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">"GET"</span><span style="color: #E6E6E6">,</span></span>
<span class="line"><span style="color: #E6E6E6">        </span><span style="color: #9CDCFE">headers:</span><span style="color: #E6E6E6"> { </span><span style="color: #CE9178">"Content-Type"</span><span style="color: #9CDCFE">:</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">"application/json"</span><span style="color: #E6E6E6"> },</span></span>
<span class="line"><span style="color: #E6E6E6">    });</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #C586C0">return</span><span style="color: #E6E6E6"> {</span><span style="color: #9CDCFE">status:</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">response</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">status</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">response:</span><span style="color: #E6E6E6"> </span><span style="color: #C586C0">await</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">response</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">json</span><span style="color: #E6E6E6">() </span><span style="color: #C586C0">as</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">IGetDuplicateEmailCustomersResponse</span><span style="color: #E6E6E6">[]};</span></span>
<span class="line"><span style="color: #E6E6E6">}</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">async</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">getDuplicateEmailCustomers</span><span style="color: #000000">() : </span><span style="color: #267F99">Promise</span><span style="color: #000000">&lt;{</span><span style="color: #001080">status</span><span style="color: #000000">: </span><span style="color: #267F99">number</span><span style="color: #000000">, </span><span style="color: #001080">response</span><span style="color: #000000">: </span><span style="color: #267F99">IGetDuplicateEmailCustomersResponse</span><span style="color: #000000">[]}> {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">response</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #795E26">fetch</span><span style="color: #000000">(</span><span style="color: #001080">_baseUrl</span><span style="color: #000000"> + </span><span style="color: #A31515">"/api/get-duplicate-email-customers"</span><span style="color: #000000">, {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #001080">method:</span><span style="color: #000000"> </span><span style="color: #A31515">"GET"</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #001080">headers:</span><span style="color: #000000"> { </span><span style="color: #A31515">"Content-Type"</span><span style="color: #001080">:</span><span style="color: #000000"> </span><span style="color: #A31515">"application/json"</span><span style="color: #000000"> },</span></span>
<span class="line"><span style="color: #000000">    });</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> {</span><span style="color: #001080">status:</span><span style="color: #000000"> </span><span style="color: #001080">response</span><span style="color: #000000">.</span><span style="color: #001080">status</span><span style="color: #000000">, </span><span style="color: #001080">response:</span><span style="color: #000000"> </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">response</span><span style="color: #000000">.</span><span style="color: #795E26">json</span><span style="color: #000000">() </span><span style="color: #AF00DB">as</span><span style="color: #000000"> </span><span style="color: #267F99">IGetDuplicateEmailCustomersResponse</span><span style="color: #000000">[]};</span></span>
<span class="line"><span style="color: #000000">}</span></span></code></pre></div><hr><h2 id="version-200-2024-03-10">Version <a href="https://github.com/vb-consulting/NpgsqlRest/tree/2.0.0">2.0.0</a> (2024-03-10)<a class="anchor bookmark-target" href="#version-200-2024-03-10"><i class="bi bi-link-45deg"></i></a></h2><p>Version 2.0.0 is the major redesign of the entire library. This version adds extendibility by introducing the <strong>concept of plugins.</strong></p><p>There are two types of plugins:</p><h3 id="1-routine-source-plugins">1) Routine Source Plugins<a class="anchor bookmark-target" href="#1-routine-source-plugins"><i class="bi bi-link-45deg"></i></a></h3><p>The concept of a routine in NpgsqlRest refers to an action that is executed on the PostgreSQL server when an API endpoint is called. This can include PostgreSQL functions, procedures, custom queries, or commands.</p><p>In previous versions of the library, only PostgreSQL functions and procedures were considered routine sources. The REST API was built on the available functions and procedures in the PostgreSQL database and provided configuration.</p><p>However, in the latest version, the routine source has been abstracted, allowing for the addition of new routine sources as plugins. This provides extendibility and flexibility in building the REST API based on different sources of routines.</p><p>For example, a plugin that can build CRUD (create, read, update, delete) support for tables and views is published as an independent, standalone package: <strong><a href="https://vb-consulting.github.io/npgsqlrest/crudsource">NpgsqlRest.CrudSource</a></strong>.</p><p>To add CRUD support to API generation, first, reference <code>NpgsqlRest.CrudSource</code> plugin library with:</p><div class="one-liner"><div class="code console"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #E6E6E6">dotnet add package NpgsqlRest.CrudSource --version 1.0.0</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #000000">dotnet add package NpgsqlRest.CrudSource --version 1.0.0</span></span></code></pre></div></div><p>And then include the <code>CrudSource</code> source into existing sources:</p><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">NpgsqlRest</span><span style="color: #E6E6E6">;</span></span>
<span class="line"><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">NpgsqlRest</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">CrudSource</span><span style="color: #E6E6E6">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">builder</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">WebApplication</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">CreateBuilder</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">args</span><span style="color: #E6E6E6">);</span></span>
<span class="line"><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">app</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">builder</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Build</span><span style="color: #E6E6E6">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #9CDCFE">app</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">UseNpgsqlRest</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">new</span><span style="color: #E6E6E6">()</span></span>
<span class="line"><span style="color: #E6E6E6">{</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">ConnectionString</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connectionString</span><span style="color: #E6E6E6">,</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">SourcesCreated</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">sources</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">sources</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Add</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">CrudSource</span><span style="color: #E6E6E6">())</span></span>
<span class="line"><span style="color: #E6E6E6">});</span></span>
<span class="line"></span>
<span class="line"><span style="color: #9CDCFE">app</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Run</span><span style="color: #E6E6E6">();</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">NpgsqlRest</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">NpgsqlRest</span><span style="color: #000000">.</span><span style="color: #267F99">CrudSource</span><span style="color: #000000">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">builder</span><span style="color: #000000"> = </span><span style="color: #001080">WebApplication</span><span style="color: #000000">.</span><span style="color: #795E26">CreateBuilder</span><span style="color: #000000">(</span><span style="color: #001080">args</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">app</span><span style="color: #000000"> = </span><span style="color: #001080">builder</span><span style="color: #000000">.</span><span style="color: #795E26">Build</span><span style="color: #000000">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #001080">app</span><span style="color: #000000">.</span><span style="color: #795E26">UseNpgsqlRest</span><span style="color: #000000">(</span><span style="color: #0000FF">new</span><span style="color: #000000">()</span></span>
<span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">ConnectionString</span><span style="color: #000000"> = </span><span style="color: #001080">connectionString</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">SourcesCreated</span><span style="color: #000000"> = </span><span style="color: #001080">sources</span><span style="color: #000000"> => </span><span style="color: #001080">sources</span><span style="color: #000000">.</span><span style="color: #795E26">Add</span><span style="color: #000000">(</span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">CrudSource</span><span style="color: #000000">())</span></span>
<span class="line"><span style="color: #000000">});</span></span>
<span class="line"></span>
<span class="line"><span style="color: #001080">app</span><span style="color: #000000">.</span><span style="color: #795E26">Run</span><span style="color: #000000">();</span></span></code></pre></div><p>Note that the routine source for functions and procedures is already present in the basic library. It's part of the basic functionality and is not separated into a plugin package.</p><h3 id="2-code-generation-plugins">2) Code Generation Plugins<a class="anchor bookmark-target" href="#2-code-generation-plugins"><i class="bi bi-link-45deg"></i></a></h3><p>The second type is the code generator plugins, capable of generating a client code that can call those generated REST API endpoints.</p><p>In the previous version, there is support for the automatic generation of <a href="https://learn.microsoft.com/en-us/aspnet/core/test/http-files?view=aspnetcore-8.0">HTTP files</a>. This support is now moved to a separate plugin library <strong><a href="https://vb-consulting.github.io/npgsqlrest/httpfiles/">NpgsqlRest.HttpFiles</a></strong>.</p><p>To use the HTTP files support, first, reference <code>NpgsqlRest.HttpFiles</code> plugin library with:</p><div class="one-liner"><div class="code console"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #E6E6E6">dotnet add package NpgsqlRest.HttpFiles --version 1.0.0</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #000000">dotnet add package NpgsqlRest.HttpFiles --version 1.0.0</span></span></code></pre></div></div><p>And then include the <code>HttpFiles</code> in the list of generators in the <code>EndpointCreateHandlers</code> list option:</p><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">NpgsqlRest</span><span style="color: #E6E6E6">;</span></span>
<span class="line"><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">NpgsqlRest</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">HttpFiles</span><span style="color: #E6E6E6">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">builder</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">WebApplication</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">CreateBuilder</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">args</span><span style="color: #E6E6E6">);</span></span>
<span class="line"><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">app</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">builder</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Build</span><span style="color: #E6E6E6">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #9CDCFE">app</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">UseNpgsqlRest</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">new</span><span style="color: #E6E6E6">()</span></span>
<span class="line"><span style="color: #E6E6E6">{</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">ConnectionString</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connectionString</span><span style="color: #E6E6E6">,</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">EndpointCreateHandlers</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> [</span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">HttpFile</span><span style="color: #E6E6E6">(), </span><span style="color: #6A9955">/* other gnerator plugins */</span><span style="color: #E6E6E6">],</span></span>
<span class="line"><span style="color: #E6E6E6">});</span></span>
<span class="line"></span>
<span class="line"><span style="color: #9CDCFE">app</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Run</span><span style="color: #E6E6E6">();</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">NpgsqlRest</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">NpgsqlRest</span><span style="color: #000000">.</span><span style="color: #267F99">HttpFiles</span><span style="color: #000000">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">builder</span><span style="color: #000000"> = </span><span style="color: #001080">WebApplication</span><span style="color: #000000">.</span><span style="color: #795E26">CreateBuilder</span><span style="color: #000000">(</span><span style="color: #001080">args</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">app</span><span style="color: #000000"> = </span><span style="color: #001080">builder</span><span style="color: #000000">.</span><span style="color: #795E26">Build</span><span style="color: #000000">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #001080">app</span><span style="color: #000000">.</span><span style="color: #795E26">UseNpgsqlRest</span><span style="color: #000000">(</span><span style="color: #0000FF">new</span><span style="color: #000000">()</span></span>
<span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">ConnectionString</span><span style="color: #000000"> = </span><span style="color: #001080">connectionString</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">EndpointCreateHandlers</span><span style="color: #000000"> = [</span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">HttpFile</span><span style="color: #000000">(), </span><span style="color: #008000">/* other gnerator plugins */</span><span style="color: #000000">],</span></span>
<span class="line"><span style="color: #000000">});</span></span>
<span class="line"></span>
<span class="line"><span style="color: #001080">app</span><span style="color: #000000">.</span><span style="color: #795E26">Run</span><span style="color: #000000">();</span></span></code></pre></div><p>There is also a client code generator for Typescript that can generate a Typescript module to call the generated API: <strong><a href="https://vb-consulting.github.io/npgsqlrest/tsclient/">NpgsqlRest.TsClient</a></strong></p><p>To include Typesscipt client:</p><div class="one-liner"><div class="code console"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #E6E6E6">dotnet add package NpgsqlRest.TsClient --version 1.0.0</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #000000">dotnet add package NpgsqlRest.TsClient --version 1.0.0</span></span></code></pre></div></div><p>And add <code>TsClient</code> to the list:</p><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">NpgsqlRest</span><span style="color: #E6E6E6">;</span></span>
<span class="line"><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">NpgsqlRest</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">TsClient</span><span style="color: #E6E6E6">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">builder</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">WebApplication</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">CreateBuilder</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">args</span><span style="color: #E6E6E6">);</span></span>
<span class="line"><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">app</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">builder</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Build</span><span style="color: #E6E6E6">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #9CDCFE">app</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">UseNpgsqlRest</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">new</span><span style="color: #E6E6E6">()</span></span>
<span class="line"><span style="color: #E6E6E6">{</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">ConnectionString</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connectionString</span><span style="color: #E6E6E6">,</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">EndpointCreateHandlers</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> [</span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">TsClient</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"../Frontend/src/api.ts"</span><span style="color: #E6E6E6">)],</span></span>
<span class="line"><span style="color: #E6E6E6">});</span></span>
<span class="line"></span>
<span class="line"><span style="color: #9CDCFE">app</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Run</span><span style="color: #E6E6E6">();</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">NpgsqlRest</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">NpgsqlRest</span><span style="color: #000000">.</span><span style="color: #267F99">TsClient</span><span style="color: #000000">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">builder</span><span style="color: #000000"> = </span><span style="color: #001080">WebApplication</span><span style="color: #000000">.</span><span style="color: #795E26">CreateBuilder</span><span style="color: #000000">(</span><span style="color: #001080">args</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">app</span><span style="color: #000000"> = </span><span style="color: #001080">builder</span><span style="color: #000000">.</span><span style="color: #795E26">Build</span><span style="color: #000000">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #001080">app</span><span style="color: #000000">.</span><span style="color: #795E26">UseNpgsqlRest</span><span style="color: #000000">(</span><span style="color: #0000FF">new</span><span style="color: #000000">()</span></span>
<span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">ConnectionString</span><span style="color: #000000"> = </span><span style="color: #001080">connectionString</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">EndpointCreateHandlers</span><span style="color: #000000"> = [</span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">TsClient</span><span style="color: #000000">(</span><span style="color: #A31515">"../Frontend/src/api.ts"</span><span style="color: #000000">)],</span></span>
<span class="line"><span style="color: #000000">});</span></span>
<span class="line"></span>
<span class="line"><span style="color: #001080">app</span><span style="color: #000000">.</span><span style="color: #795E26">Run</span><span style="color: #000000">();</span></span></code></pre></div><h3 id="system-design">System Design<a class="anchor bookmark-target" href="#system-design"><i class="bi bi-link-45deg"></i></a></h3><p>System design can be illustrated with the following diagram:</p><p style="text-align: center; width: 100%"><img src="/npgsqlrest-v2.png" style="width: 70%;"></p><p>The initial bootstrap with all available plugins looks like this:</p><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">NpgsqlRest</span><span style="color: #E6E6E6">;</span></span>
<span class="line"><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">NpgsqlRest</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">CrudSource</span><span style="color: #E6E6E6">;</span></span>
<span class="line"><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">NpgsqlRest</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">HttpFiles</span><span style="color: #E6E6E6">;</span></span>
<span class="line"><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">NpgsqlRest</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">TsClient</span><span style="color: #E6E6E6">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">builder</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">WebApplication</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">CreateBuilder</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">args</span><span style="color: #E6E6E6">);</span></span>
<span class="line"><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">app</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">builder</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Build</span><span style="color: #E6E6E6">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #9CDCFE">app</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">UseNpgsqlRest</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">new</span><span style="color: #E6E6E6">()</span></span>
<span class="line"><span style="color: #E6E6E6">{</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">ConnectionString</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connectionString</span><span style="color: #E6E6E6">,</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">EndpointCreateHandlers</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> [</span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">HttpFile</span><span style="color: #E6E6E6">(), </span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">TsClient</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"../Frontend/src/api.ts"</span><span style="color: #E6E6E6">)],</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">SourcesCreated</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">sources</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">sources</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Add</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">CrudSource</span><span style="color: #E6E6E6">())</span></span>
<span class="line"><span style="color: #E6E6E6">});</span></span>
<span class="line"></span>
<span class="line"><span style="color: #9CDCFE">app</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Run</span><span style="color: #E6E6E6">();</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">NpgsqlRest</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">NpgsqlRest</span><span style="color: #000000">.</span><span style="color: #267F99">CrudSource</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">NpgsqlRest</span><span style="color: #000000">.</span><span style="color: #267F99">HttpFiles</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">NpgsqlRest</span><span style="color: #000000">.</span><span style="color: #267F99">TsClient</span><span style="color: #000000">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">builder</span><span style="color: #000000"> = </span><span style="color: #001080">WebApplication</span><span style="color: #000000">.</span><span style="color: #795E26">CreateBuilder</span><span style="color: #000000">(</span><span style="color: #001080">args</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">app</span><span style="color: #000000"> = </span><span style="color: #001080">builder</span><span style="color: #000000">.</span><span style="color: #795E26">Build</span><span style="color: #000000">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #001080">app</span><span style="color: #000000">.</span><span style="color: #795E26">UseNpgsqlRest</span><span style="color: #000000">(</span><span style="color: #0000FF">new</span><span style="color: #000000">()</span></span>
<span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">ConnectionString</span><span style="color: #000000"> = </span><span style="color: #001080">connectionString</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">EndpointCreateHandlers</span><span style="color: #000000"> = [</span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">HttpFile</span><span style="color: #000000">(), </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">TsClient</span><span style="color: #000000">(</span><span style="color: #A31515">"../Frontend/src/api.ts"</span><span style="color: #000000">)],</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">SourcesCreated</span><span style="color: #000000"> = </span><span style="color: #001080">sources</span><span style="color: #000000"> => </span><span style="color: #001080">sources</span><span style="color: #000000">.</span><span style="color: #795E26">Add</span><span style="color: #000000">(</span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">CrudSource</span><span style="color: #000000">())</span></span>
<span class="line"><span style="color: #000000">});</span></span>
<span class="line"></span>
<span class="line"><span style="color: #001080">app</span><span style="color: #000000">.</span><span style="color: #795E26">Run</span><span style="color: #000000">();</span></span></code></pre></div><h3 id="other-changes">Other Changes<a class="anchor bookmark-target" href="#other-changes"><i class="bi bi-link-45deg"></i></a></h3><p>Other changes include:</p><ul><li>Optimizations</li><li>Bugfixes for edge cases</li></ul><p>Full list of available options and annotations for version 2:</p><ul><li><strong><a href="https://vb-consulting.github.io/npgsqlrest/options/">See Options Reference</a></strong></li><li><strong><a href="https://vb-consulting.github.io/npgsqlrest/annotations/">See Comment Annotations Reference</a></strong></li></ul><hr><h2 id="older-versions">Older Versions<a class="anchor bookmark-target" href="#older-versions"><i class="bi bi-link-45deg"></i></a></h2><p>The changelog for the previous version can be found here: <a href="https://github.com/vb-consulting/NpgsqlRest/blob/2.0.0/changelog-old.md">Changelog Version 1</a></p><hr><div class="pt-5 border-top"><div id="comments-section" class="h5">Comments</div><script defer src="https://cdn.commento.io/js/commento.js" data-no-fonts="true" data-css-override="https://vb-consulting.github.io/style.css"></script><div id="commento"></div></div><footer class="mt-3 py-5"><div class="w-fit mx-auto mb-3 border-top border-bottom"><div class="alert text-center fs-smaller text-muted"><div class="alert text-center fs-smaller text-muted mb-1">If you like my content, use my software, or otherwise benefit from my work, consider supporting me by buying me a coffee. The software runs on coffee after all.</div><a class="btn rl-arrow" target="_blank" data-bs-toggle="tooltip" data-bs-html="true" title="Click Here to Buy Me a Coffee Or Scan the Code" href="https://www.buymeacoffee.com/vbilopavu" style="display: inline-grid;">Buy me a Coffee <img class="m-auto svelte-byttq0" alt="Scan Here To Buy Me a Cofee" src="/bmc_qr.png"></a></div></div><div class="d-flex justify-content-center"><a class="btn rl-arrow me-1" target="_blank" data-bs-toggle="tooltip" data-bs-html="true" title="changelog.md on GitHub" href="https://github.com/vb-consulting/NpgsqlRest/blob/master/changelog.md" style="display: inline-grid;">changelog.md on GitHub <i class="bi bi-github"></i></a> <a class="btn rl-arrow" target="_blank" data-bs-toggle="tooltip" data-bs-html="true" title="I Post Software Development Content Daily" href="https://www.linkedin.com/in/vb-software/" style="display: inline-grid;">Follow me on LinkedIn <i class="bi bi-linkedin"></i></a></div><div class="text-center"><div class="mt-5 mb-5 background-floki svelte-byttq0" data-bs-toggle="tooltip" data-bs-html="true" title="Floki is a developer dog."></div></div></footer></div></div><div class="rightside svelte-9zwk14"><div class="svelte-9zwk14"><ul class="navbar-nav sidenav svelte-9zwk14"><li class="nav-txt-divider text-muted svelte-9zwk14"><hr class="svelte-9zwk14"><span class="svelte-9zwk14">on this page</span><hr class="svelte-9zwk14"></li><li class="nav-item toc1 right svelte-9zwk14 bookmark-nav" data-id="changelog" title="Changelog"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#changelog">Changelog</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="version-2160httpsgithubcomvb-consultingnpgsqlresttree2160-2024-12-30" title="Version [2.16.0](https://github.com/vb-consulting/NpgsqlRest/tree/2.16.0 (2024-12-30)"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#version-2160httpsgithubcomvb-consultingnpgsqlresttree2160-2024-12-30">Version [2.16.0](https://github.com/vb-consulting/NpgsqlRest/tree/2.16.0 (2024-12-30)</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="version-2150httpsgithubcomvb-consultingnpgsqlresttree2150-2024-12-21" title="Version [2.15.0](https://github.com/vb-consulting/NpgsqlRest/tree/2.15.0 (2024-12-21)"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#version-2150httpsgithubcomvb-consultingnpgsqlresttree2150-2024-12-21">Version [2.15.0](https://github.com/vb-consulting/NpgsqlRest/tree/2.15.0 (2024-12-21)</a></li><li class="nav-item toc3 right svelte-9zwk14 bookmark-nav" data-id="refreshendpointenabled" title="RefreshEndpointEnabled"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#refreshendpointenabled">RefreshEndpointEnabled</a></li><li class="nav-item toc3 right svelte-9zwk14 bookmark-nav" data-id="refreshmethod" title="RefreshMethod"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#refreshmethod">RefreshMethod</a></li><li class="nav-item toc3 right svelte-9zwk14 bookmark-nav" data-id="refreshpath" title="RefreshPath"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#refreshpath">RefreshPath</a></li><li class="nav-item toc2 mt-2 right svelte-9zwk14 bookmark-nav" data-id="version-2140httpsgithubcomvb-consultingnpgsqlresttree2140-2024-11-25" title="Version [2.14.0](https://github.com/vb-consulting/NpgsqlRest/tree/2.14.0 (2024-11-25)"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#version-2140httpsgithubcomvb-consultingnpgsqlresttree2140-2024-11-25">Version [2.14.0](https://github.com/vb-consulting/NpgsqlRest/tree/2.14.0 (2024-11-25)</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="version-2131httpsgithubcomvb-consultingnpgsqlresttree2131-2024-11-23" title="Version [2.13.1](https://github.com/vb-consulting/NpgsqlRest/tree/2.13.1 (2024-11-23)"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#version-2131httpsgithubcomvb-consultingnpgsqlresttree2131-2024-11-23">Version [2.13.1](https://github.com/vb-consulting/NpgsqlRest/tree/2.13.1 (2024-11-23)</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="version-2121httpsgithubcomvb-consultingnpgsqlresttree2130-2024-11-17" title="Version [2.12.1](https://github.com/vb-consulting/NpgsqlRest/tree/2.13.0 (2024-11-17)"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#version-2121httpsgithubcomvb-consultingnpgsqlresttree2130-2024-11-17">Version [2.12.1](https://github.com/vb-consulting/NpgsqlRest/tree/2.13.0 (2024-11-17)</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="version-2121httpsgithubcomvb-consultingnpgsqlresttree2121-2024-11-06" title="Version [2.12.1](https://github.com/vb-consulting/NpgsqlRest/tree/2.12.1 (2024-11-06)"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#version-2121httpsgithubcomvb-consultingnpgsqlresttree2121-2024-11-06">Version [2.12.1](https://github.com/vb-consulting/NpgsqlRest/tree/2.12.1 (2024-11-06)</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="version-2120-2024-10-29" title="Version 2.12.0 (2024-10-29)"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#version-2120-2024-10-29">Version 2.12.0 (2024-10-29)</a></li><li class="nav-item toc3 right svelte-9zwk14 bookmark-nav" data-id="login-endpoint-custom-claims-maintain-the-original-field-names" title="Login Endpoint Custom Claims Maintain the Original Field Names"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#login-endpoint-custom-claims-maintain-the-original-field-names">Login Endpoint Custom Claims Maintain the Original Field Names</a></li><li class="nav-item toc3 right svelte-9zwk14 bookmark-nav" data-id="reader-optimizations-and-provider-specific-values" title="Reader Optimizations and Provider-Specific Values"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#reader-optimizations-and-provider-specific-values">Reader Optimizations and Provider-Specific Values</a></li><li class="nav-item toc3 right svelte-9zwk14 bookmark-nav" data-id="updated-npgsql-reference" title="Updated Npgsql Reference"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#updated-npgsql-reference">Updated Npgsql Reference</a></li><li class="nav-item toc3 right svelte-9zwk14 bookmark-nav" data-id="custom-types-support" title="Custom Types Support"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#custom-types-support">Custom Types Support</a></li><li class="nav-item toc3 right svelte-9zwk14 bookmark-nav" data-id="table-types-support" title="Table Types Support"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#table-types-support">Table Types Support</a></li><li class="nav-item toc3 right svelte-9zwk14 bookmark-nav" data-id="routinesources-options-property" title="RoutineSources Options Property"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#routinesources-options-property">RoutineSources Options Property</a></li><li class="nav-item toc3 right svelte-9zwk14 bookmark-nav" data-id="routine-source-options" title="Routine Source Options"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#routine-source-options">Routine Source Options</a></li><li class="nav-item toc3 right svelte-9zwk14 bookmark-nav" data-id="reference-update" title="Reference Update"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#reference-update">Reference Update</a></li><li class="nav-item toc2 mt-2 right svelte-9zwk14 bookmark-nav" data-id="version-2110-2024-09-03" title="Version 2.11.0 (2024-09-03)"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#version-2110-2024-09-03">Version 2.11.0 (2024-09-03)</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="version-2100-2024-08-06" title="Version 2.10.0 (2024-08-06)"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#version-2100-2024-08-06">Version 2.10.0 (2024-08-06)</a></li><li class="nav-item toc3 right svelte-9zwk14 bookmark-nav" data-id="new-routine-endpoint-options-with-annotations" title="New Routine Endpoint Options With Annotations"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#new-routine-endpoint-options-with-annotations">New Routine Endpoint Options With Annotations</a></li><li class="nav-item toc3 right svelte-9zwk14 bookmark-nav" data-id="dynamic-custom-header-values" title="Dynamic Custom Header Values"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#dynamic-custom-header-values">Dynamic Custom Header Values</a></li><li class="nav-item toc3 right svelte-9zwk14 bookmark-nav" data-id="csv-example" title="CSV Example:"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#csv-example">CSV Example:</a></li><li class="nav-item toc2 mt-2 right svelte-9zwk14 bookmark-nav" data-id="version-290-2024-08-02" title="Version 2.9.0 (2024-08-02)"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#version-290-2024-08-02">Version 2.9.0 (2024-08-02)</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="version-285-2024-06-25" title="Version 2.8.5 (2024-06-25)"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#version-285-2024-06-25">Version 2.8.5 (2024-06-25)</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="version-284-2024-06-22" title="Version 2.8.4 (2024-06-22)"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#version-284-2024-06-22">Version 2.8.4 (2024-06-22)</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="version-283-2024-06-11" title="Version 2.8.3 (2024-06-11)"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#version-283-2024-06-11">Version 2.8.3 (2024-06-11)</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="version-282-2024-06-09" title="Version 2.8.2 (2024-06-09)"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#version-282-2024-06-09">Version 2.8.2 (2024-06-09)</a></li><li class="nav-item toc3 right svelte-9zwk14 bookmark-nav" data-id="fixed-bug-with-default-parameters" title="Fixed bug with default parameters"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#fixed-bug-with-default-parameters">Fixed bug with default parameters</a></li><li class="nav-item toc3 right svelte-9zwk14 bookmark-nav" data-id="fixed-bug-with-default-parameters-for-postgresql-roles-that-are-not-super-users" title="Fixed bug with default parameters for PostgreSQL roles that are not super-users."><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#fixed-bug-with-default-parameters-for-postgresql-roles-that-are-not-super-users">Fixed bug with default parameters for PostgreSQL roles that are not super-users.</a></li><li class="nav-item toc2 mt-2 right svelte-9zwk14 bookmark-nav" data-id="version-281-2024-05-10" title="Version 2.8.1 (2024-05-10)"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#version-281-2024-05-10">Version 2.8.1 (2024-05-10)</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="version-280-2024-05-02" title="Version 2.8.0 (2024-05-02)"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#version-280-2024-05-02">Version 2.8.0 (2024-05-02)</a></li><li class="nav-item toc3 right svelte-9zwk14 bookmark-nav" data-id="tsclient-version-170" title="TsClient Version 1.7.0"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#tsclient-version-170">TsClient Version 1.7.0</a></li><li class="nav-item toc2 mt-2 right svelte-9zwk14 bookmark-nav" data-id="version-271-2024-04-30" title="Version 2.7.1 (2024-04-30)"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#version-271-2024-04-30">Version 2.7.1 (2024-04-30)</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="version-270-2024-04-17" title="Version 2.7.0 (2024-04-17)"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#version-270-2024-04-17">Version 2.7.0 (2024-04-17)</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="version-261-2024-04-16" title="Version 2.6.1 (2024-04-16)"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#version-261-2024-04-16">Version 2.6.1 (2024-04-16)</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="version-260-2024-04-16" title="Version 2.6.0 (2024-04-16)"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#version-260-2024-04-16">Version 2.6.0 (2024-04-16)</a></li><li class="nav-item toc3 right svelte-9zwk14 bookmark-nav" data-id="returnnpgsqlexceptionmessage" title=":"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#returnnpgsqlexceptionmessage">:</a></li><li class="nav-item toc3 right svelte-9zwk14 bookmark-nav" data-id="postgresqlerrorcodetohttpstatuscodemapping" title=""></li><li class="nav-item toc2 mt-2 right svelte-9zwk14 bookmark-nav" data-id="version-250-2024-04-15" title="Version 2.5.0 (2024-04-15)"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#version-250-2024-04-15">Version 2.5.0 (2024-04-15)</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="version-242-2024-04-14" title="Version 2.4.2 (2024-04-14)"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#version-242-2024-04-14">Version 2.4.2 (2024-04-14)</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="version-241-2024-04-12" title="Version 2.4.1 (2024-04-12)"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#version-241-2024-04-12">Version 2.4.1 (2024-04-12)</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="version-240-2024-04-08" title="Version 2.4.0 (2024-04-08)"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#version-240-2024-04-08">Version 2.4.0 (2024-04-08)</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="version-231-2024-04-05" title="Version 2.3.1 (2024-04-05)"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#version-231-2024-04-05">Version 2.3.1 (2024-04-05)</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="version-230-2024-04-04" title="Version 2.3.0 (2024-04-04)"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#version-230-2024-04-04">Version 2.3.0 (2024-04-04)</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="version-220-2024-04-02" title="Version 2.2.0 (2024-04-02)"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#version-220-2024-04-02">Version 2.2.0 (2024-04-02)</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="version-210-2024-03-29" title="Version 2.1.0 (2024-03-29)"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#version-210-2024-03-29">Version 2.1.0 (2024-03-29)</a></li><li class="nav-item toc3 right svelte-9zwk14 bookmark-nav" data-id="role-based-security" title="Role-Based Security"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#role-based-security">Role-Based Security</a></li><li class="nav-item toc3 right svelte-9zwk14 bookmark-nav" data-id="tsclient-includestatuscode" title="TsClient IncludeStatusCode"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#tsclient-includestatuscode">TsClient IncludeStatusCode</a></li><li class="nav-item toc2 mt-2 right svelte-9zwk14 bookmark-nav" data-id="version-200-2024-03-10" title="Version 2.0.0 (2024-03-10)"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#version-200-2024-03-10">Version 2.0.0 (2024-03-10)</a></li><li class="nav-item toc3 right svelte-9zwk14 bookmark-nav" data-id="1-routine-source-plugins" title="1) Routine Source Plugins"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#1-routine-source-plugins">1) Routine Source Plugins</a></li><li class="nav-item toc3 right svelte-9zwk14 bookmark-nav" data-id="2-code-generation-plugins" title="2) Code Generation Plugins"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#2-code-generation-plugins">2) Code Generation Plugins</a></li><li class="nav-item toc3 right svelte-9zwk14 bookmark-nav" data-id="system-design" title="System Design"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#system-design">System Design</a></li><li class="nav-item toc3 right svelte-9zwk14 bookmark-nav" data-id="other-changes" title="Other Changes"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#other-changes">Other Changes</a></li><li class="nav-item toc2 mt-2 right svelte-9zwk14 bookmark-nav" data-id="older-versions" title="Older Versions"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#older-versions">Older Versions</a></li></ul></div></div></main><script>!function(){var i=document.querySelector("nav.navbar"),f=document.getElementsByTagName("main")[0],L=f.getElementsByClassName("sidebar")[0],w=f.getElementsByClassName("content")[0],o=document.querySelectorAll("div.code"),k=i.querySelector(".home");function E(e,t){for(var n=1;n<arguments.length;n++)e.classList.remove(arguments[n])}function T(e,t){for(var n=1;n<arguments.length;n++)e.classList.remove(arguments[n]);E(e,t),e.classList.add(t)}function t(e,t){var n=e.currentTarget;if(!n.classList.contains("bi-check")){for(var i="",o=0;o<n.classList.length;o++)if(n.classList[o].startsWith("bi-")){i=n.classList[o];break}n.classList.remove(i),n.classList.add("spinner-border-sm"),n.classList.add("spinner-border");e=bootstrap.Tooltip.getInstance(n);e&&(e.setContent({".tooltip-inner":"Copying..."}),e.show()),t(n,function(){var e;n.classList.remove(i),n.classList.remove("spinner-border-sm"),n.classList.remove("spinner-border"),n.classList.add("bi-check"),bootstrap&&(e=bootstrap.Tooltip.getInstance(n))&&(e.setContent({".tooltip-inner":"Copied!"}),e.show()),setTimeout(function(){var e;n.classList.add(i),n.classList.remove("bi-check"),bootstrap&&(e=bootstrap.Tooltip.getInstance(n))&&e.setContent({".tooltip-inner":n.dataset.bsTitle})},2e3)})}}"/"==document.location.pathname&&T(k,"d-none");var e=document.querySelector(".post-share > .copy-url"),n=(e&&e.addEventListener("click",function(e){t(e,function(e,t){navigator.clipboard.writeText(document.location.origin+document.location.pathname),t()})}),document.getElementsByTagName("html")[0]),a=i.querySelector("#theme-btn"),s="theme";function l(e){var t=a.getElementsByTagName("svg");"dark"===e?(t[0].style.display="",t[1].style.display="none",a.getElementsByClassName("check")[0].classList.add("checked")):(t[0].style.display="none",t[1].style.display="",a.getElementsByClassName("check")[0].classList.remove("checked"));for(var n=0;n<o.length;n++){var i=o[n];"dark"===e?(i.children[1].style.display="inherit",i.children[2].style.display="none"):"light"===e&&(i.children[1].style.display="none",i.children[2].style.display="inherit")}window._theme&&window._theme(e)}function r(e){t(e,function(e,t){navigator.clipboard.writeText(e.parentElement.nextSibling.innerText),t()})}function c(e){t(e,function(e,t){var n=localStorage.getItem(s);e="dark"===n?e.parentElement.parentElement.children[1]:e.parentElement.parentElement.children[2],setTimeout(function(){html2canvas(e).then(e=>{e.toBlob(e=>navigator.clipboard.write([new ClipboardItem({"image/png":e})])),t()})},0)})}a.addEventListener("click",()=>{var e="dark"===localStorage.getItem(s)?"light":"dark";localStorage.setItem(s,e),l(n.dataset.bsTheme=e)}),l(localStorage.getItem(s)),a.children[0].classList.remove("hidden");for(var d=0;d<o.length;d++){o[d].getElementsByClassName("copy-code")[0].addEventListener("click",r);var m=o[d].getElementsByClassName("photo-code");m.length&&m[0].addEventListener("click",c)}for(var S=function(){var a,o,s;if(f.children[2]&&"none"!=f.children[2].style.display)return a=f.querySelector(".main-content").querySelectorAll("[id]"),o=void 0,this.initNavs=function(e){s=e.querySelectorAll("li.bookmark-nav");for(var t=0;t<a.length;t++){for(var n=a[t].id,i=null,o=0;o<s.length;o++)if(s[o].dataset.id==n){i=s[o];break}a[t].nav=i}setTimeout(function(){for(var e=0;e<a.length;e++){var t=a[e];if(l(t).visible&&t.nav)return void t.nav.classList.add("active")}},1e3),r()},f.children[1].addEventListener("scroll",r),this;function l(e){var e=e.getBoundingClientRect(),t=Math.max(document.documentElement.clientHeight,window.innerHeight),n=0<e.top&&!(e.bottom<0||0<=e.top-t)||e.top<0&&e.bottom>t,i=!1;return{visible:n,above:i=n?i:e.bottom<t}}function r(){if(s&&s.length){for(var e=0;e<s.length;e++)s[e].classList.remove("active");for(var t=void 0,e=0;e<a.length;e++){const i=a[e];var n=l(i);if(!n.visible&&n.above&&(t=i.nav),n.visible&&i.nav&&!i.nav.classList.contains("active"))return i.nav.classList.add("active"),o&&clearTimeout(o),void(o=setTimeout(function(){i.nav.scrollIntoView({behavior:"smooth"}),o=void 0},250))}t&&!t.classList.contains("active")&&(t.classList.add("active"),o&&clearTimeout(o),o=setTimeout(function(){t.scrollIntoView({behavior:"smooth"}),o=void 0},250))}}}(),h=function(){var l,r=i.querySelector("#nav-btn"),c=480,d="200px",m="0.25fr",h=730,v=535,u=f.children[0].children[0].children[0],g=f.children[2]&&f.children[2].children[0].children[0],t="sidebar-pinned",p=null==localStorage.getItem(t)||"true"==localStorage.getItem(t),y=!1,b=!1;function n(){window._onresize&&window._onresize();var e=window.outerWidth||window.innerWidth,t=e<c,n=t?y?"100%":"0":p?""+d:"0",i=`grid-template-columns: ${n} 1fr`,o=t&&y?"width: 100%":"0"!=n?"":"display: none",a=t&&y?"display: none":"",s=t?y?"sidebar-show":"sidebar-hide":p?"sidebar-show":"sidebar-hide",n="0"==n;f.children[2]&&(m&&h&&v&&(n&&e<v||!n&&e<h?b||(u.innerHTML=l+g.innerHTML,S.initNavs(u),b=!0):b&&(u.innerHTML=l,S.initNavs(g),b=!1)),!m||t||b?(i+=";",f.children[2].style.display="none"):(i+=` ${m};`,f.children[2].style.display="")),T(r,!t&&p||t&&y?"rotate":"rotate-back","rotate","rotate-back"),p?(r.classList.add("text-shadow"),null==document.querySelector("main .sidebar .accordion > [title='VB-Consulting'] > .collapsed")&&T(k,"d-none")):("/"!=document.location.pathname&&E(k,"d-none"),r.classList.remove("text-shadow")),f.style=L?i:"display: grid;",L&&T(L,s,"sidebar-show","sidebar-hide"),L&&(L.firstChild.style=o),w.style=a,t&&!y&&"/"!=document.location.pathname&&E(k,"d-none"),t&&y&&T(k,"d-none")}function e(){var e=window.outerWidth<c;e?y=!y:p=!p,localStorage.setItem(t,p.toString()),n(),p?(r.classList.add("text-shadow"),null==document.querySelector("main .sidebar .accordion > [title='VB-Consulting'] > .collapsed")&&T(k,"d-none")):("/"!=document.location.pathname&&E(k,"d-none"),r.classList.remove("text-shadow")),e&&!y&&"/"!=document.location.pathname&&E(k,"d-none"),e&&y&&T(k,"d-none")}return m&&h&&v&&g&&(l=u.innerHTML,S.initNavs(g)),r.addEventListener("click",e),(window.onresize=n)(),this.closeSidebar=function(){window.outerWidth<c&&y&&e()},this}(),v=document.getElementsByClassName("auto-close"),u=0;u<v.length;u++)v[u].addEventListener("click",function(e){h.closeSidebar()});location.hash&&(e=document.getElementById(location.hash.replace("#","")))&&e.scrollIntoView()}();</script><script src="/bootstrap.bundle.min.js"></script><script>!function(){for(var e=document.querySelectorAll('[data-bs-toggle="tooltip"]'),t=0;t<e.length;t++)new bootstrap.Tooltip(e[t]);var n=document.getElementsByClassName("accordion-item");if(n.length){for(t=0;t<n.length;t++){var o=n[t];o.querySelectorAll("[href='"+document.location.pathname+"']").length&&o.firstChild.click()}var l=document.querySelector("nav.navbar").querySelector(".home"),a=document.getElementsByClassName("accordion");"/"==document.location.pathname&&l.classList.add("d-none");for(t=0;t<n.length;t++){var s=a[t];s&&s.firstChild&&"VB-Consulting"==s.firstChild.title&&(null!=s.firstChild.querySelector(".collapse")&&l.classList.contains("d-none")&&"/"!=document.location.pathname&&l.classList.remove("d-none"),s.addEventListener("show.bs.collapse",function(){"/"!=document.location.pathname&&l.classList.remove("d-none"),l.classList.add("d-none")}),s.addEventListener("hide.bs.collapse",function(){"/"!=document.location.pathname&&l.classList.remove("d-none")}))}}}();</script><script src="/html2canvas.min.js"></script><script async defer src="https://buttons.github.io/buttons.js"></script></body><script async data-id="101435862" src="//static.getclicky.com/js"></script></html>