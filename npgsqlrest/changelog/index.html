<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>NpgsqlRest - Automatic REST API for PostgreSQL Database</title><meta name="description" content="Automatic REST API for PostgreSQL Database"><meta name="keywords" content="api, api-rest, restful-api, http, postgres, dotnet, net8, c#, aot, database, rest, server, postgresql, npgsqlrest, pgsql, pg, automatic"><link href="https://vb-consulting.github.io//npgsqlrest/changelog/" rel="canonical"><link rel="stylesheet" href="/_elderjs/assets/svelte-8a06b895.css" media="all"><style></style><link href="/style.css?1745864513913" rel="stylesheet"><script>!function(){var e="theme",t=localStorage.getItem(e);t||(t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",localStorage.setItem(e,t)),document.getElementsByTagName("html")[0].dataset.bsTheme=t}();</script></head><body class="d-flex flex-column h-100"><header id="header"><nav class="navbar navbar-expand-md navbar-dark fixed-top py-0 py-md-0 svelte-30jr7w"><div class="container-fluid flex-nowrap svelte-30jr7w"><div class="d-flex svelte-30jr7w"><button id="nav-btn" type="button" class="d-flex btn btn-sm logo animate-rotate svelte-30jr7w"><i class="material-icons-outlined">menu</i></button> <a class="nav-link my-auto ms-2 fw-semibold home svelte-30jr7w" href="/"><i class="bi-chevron-double-left"></i> VB Home</a></div><div class="d-flex right svelte-30jr7w"><a class="nav-link my-auto svelte-30jr7w" data-bs-toggle="tooltip" data-bs-html="true" title="Become a Patreon" href="https://www.patreon.com/vbconsulting" target="_blank"><div class="patreon"></div></a><div class="vr1 text-muted my-auto svelte-30jr7w"></div><a class="nav-link my-auto svelte-30jr7w" data-bs-toggle="tooltip" data-bs-html="true" title="Buy Me a Coffee" href="https://www.buymeacoffee.com/vbilopavu" target="_blank"><div class="bmc"></div></a><div class="vr1 text-muted my-auto svelte-30jr7w"></div><a class="nav-link my-auto me-2 svelte-30jr7w" data-bs-toggle="tooltip" data-bs-html="true" title="changelog.md on GitHub" href="https://github.com/vb-consulting/NpgsqlRest/blob/master/changelog.md"><i class="bi-github"></i></a> <a class="github-button svelte-30jr7w" href="https://github.com/vb-consulting/NpgsqlRest/blob/master/changelog.md" data-bs-toggle="tooltip" data-bs-html="true" title="Star changelog.md on GitHub" data-color-scheme="no-preference: light_high_contrast; light: light_high_contrast; dark: light_high_contrast;" data-icon="octicon-star" data-show-count="true" aria-label="Star changelog.md on GitHub"></a><div class="vr1 text-muted my-auto svelte-30jr7w"></div><button id="theme-btn" type="button" aria-pressed="true" aria-label="theme" class="svelte-30jr7w"><span class="check hidden svelte-30jr7w"><span class="icon svelte-30jr7w"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="svelte-30jr7w"><path fill="currentColor" d="M12 21q-3.775 0-6.388-2.613T3 12q0-3.45 2.25-5.988T11 3.05q.625-.075.975.45t-.025 1.1q-.425.65-.638 1.375T11.1 7.5q0 2.25 1.575 3.825T16.5 12.9q.775 0 1.538-.225t1.362-.625q.525-.35 1.075-.037t.475.987q-.35 3.45-2.937 5.725T12 21Zm0-2q2.2 0 3.95-1.213t2.55-3.162q-.5.125-1 .2t-1 .075q-3.075 0-5.238-2.163T9.1 7.5q0-.5.075-1t.2-1q-1.95.8-3.163 2.55T5 12q0 2.9 2.05 4.95T12 19Zm-.25-6.75Z"></path></svg> <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="svelte-30jr7w"><g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M0 0h24v24H0z"></path><path fill="currentColor" d="M12 19a1 1 0 0 1 .993.883L13 20v1a1 1 0 0 1-1.993.117L11 21v-1a1 1 0 0 1 1-1zm6.313-2.09l.094.083l.7.7a1 1 0 0 1-1.32 1.497l-.094-.083l-.7-.7a1 1 0 0 1 1.218-1.567l.102.07zm-11.306.083a1 1 0 0 1 .083 1.32l-.083.094l-.7.7a1 1 0 0 1-1.497-1.32l.083-.094l.7-.7a1 1 0 0 1 1.414 0zM4 11a1 1 0 0 1 .117 1.993L4 13H3a1 1 0 0 1-.117-1.993L3 11h1zm17 0a1 1 0 0 1 .117 1.993L21 13h-1a1 1 0 0 1-.117-1.993L20 11h1zM6.213 4.81l.094.083l.7.7a1 1 0 0 1-1.32 1.497l-.094-.083l-.7-.7A1 1 0 0 1 6.11 4.74l.102.07zm12.894.083a1 1 0 0 1 .083 1.32l-.083.094l-.7.7a1 1 0 0 1-1.497-1.32l.083-.094l.7-.7a1 1 0 0 1 1.414 0zM12 2a1 1 0 0 1 .993.883L13 3v1a1 1 0 0 1-1.993.117L11 4V3a1 1 0 0 1 1-1zm0 5a5 5 0 1 1-4.995 5.217L7 12l.005-.217A5 5 0 0 1 12 7z"></path></g></svg></span></span></button></div></div></nav></header><main class="svelte-9zwk14"><div class="sidebar sidebar-hide svelte-9zwk14"><div class="svelte-9zwk14"><ul class="navbar-nav sidenav accordion svelte-9zwk14"><li class="accordion-item svelte-9zwk14" title="VB-Consulting"><button class="accordion-header accordion-button collapsed svelte-9zwk14 text-uppercase" href="/" type="button" data-bs-toggle="collapse" data-bs-target="#accordion-vb-consulting" aria-expanded="false" aria-controls="accordion-vb-consulting">VB-Consulting</button><div id="accordion-vb-consulting" class="accordion-collapse collapse"><div class="accordion-body svelte-9zwk14"><ul class="navbar-nav"><li class="nav-item svelte-9zwk14" data-id="" title="Home"><a class="nav-link svelte-9zwk14 text-uppercase" href="/">Home</a></li><li class="nav-divider svelte-9zwk14"><hr class="svelte-9zwk14"></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="Norm.Net"><a class="nav-link svelte-9zwk14 text-uppercase" href="/norm.net/">Norm.Net</a></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="RazorSvelte"><a class="nav-link svelte-9zwk14 text-uppercase" href="/razorsvelte/">RazorSvelte</a></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="PgRoutiner"><a class="nav-link svelte-9zwk14 text-uppercase" href="/pgroutiner/">PgRoutiner</a></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="XUnit.Npgsql"><a class="nav-link svelte-9zwk14 text-uppercase" href="/xunit.npgsql/">XUnit.Npgsql</a></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="pgmigrations"><a class="nav-link svelte-9zwk14 text-uppercase" href="/pgmigrations/">pgmigrations</a></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="PostrgeSQL Schema Tools"><a class="nav-link svelte-9zwk14 text-uppercase" href="/pg_schema_tools/">PostrgeSQL Schema Tools</a></li><li class="nav-txt-divider text-muted svelte-9zwk14"><hr class="svelte-9zwk14"><span class="svelte-9zwk14">blogs</span><hr class="svelte-9zwk14"></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="<span class='btn-link'>ALL BLOGS</span>"><a class="nav-link btn btn-sm w-fit px-3 mx-auto svelte-9zwk14 lr-arrow text-uppercase" href="/blogs/"><i class="bi bi-arrow-right-circle svelte-9zwk14"></i> <span class="btn-link">ALL BLOGS</span></a></li><li class="nav-item svelte-9zwk14" data-id="" title="WebAPI Load Tests"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/npgsqlrest/load-test/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>WebAPI Load Tests</a></li><li class="nav-item svelte-9zwk14" data-id="" title="NpgsqlRest v2 Update üêòüî•"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/npgsqlrest-v2/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>NpgsqlRest v2 Update üêòüî•</a></li><li class="nav-item svelte-9zwk14" data-id="" title="NpgsqlRest Update 1.6.2"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/npgsqlrest-update1.6.2/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>NpgsqlRest Update 1.6.2</a></li><li class="nav-item svelte-9zwk14" data-id="" title="Vanilla SQL With NpgsqlRest Part 1 - ToDo App Requirements"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/npgsqlrest/todo/part1-todo-requirements/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>Vanilla SQL With NpgsqlRest Part 1 - ToDo App Requirements</a></li><li class="nav-item svelte-9zwk14" data-id="" title="Unit Testing and TDD With PostgreSQL is Easy"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/unit-testing-postgresql/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>Unit Testing and TDD With PostgreSQL is Easy</a></li><li class="nav-item svelte-9zwk14" data-id="" title="From Transaction Scripts and Domain Model to SQL"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/domain-model-transaction-script/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>From Transaction Scripts and Domain Model to SQL</a></li><li class="nav-item svelte-9zwk14" data-id="" title="Transaction Script DDD vs SQL"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/transaction-script/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>Transaction Script DDD vs SQL</a></li><li class="nav-item svelte-9zwk14" data-id="" title="Common Sense Software Design"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/common-sense-design/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>Common Sense Software Design</a></li><li class="nav-item svelte-9zwk14" data-id="" title="PostgreSQL Arrays üêò"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/postgresql-array/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>PostgreSQL Arrays üêò</a></li><li class="nav-item svelte-9zwk14" data-id="" title="How DDD is screwing up your SQL"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/sql-vs-ddd/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>How DDD is screwing up your SQL</a></li></ul></div></div></li><li class="nav-txt-divider text-muted svelte-9zwk14"><hr class="svelte-9zwk14"><span class="svelte-9zwk14">NpgsqlRest</span><hr class="svelte-9zwk14"></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="NpgsqlRest"><a class="nav-link svelte-9zwk14 text-uppercase" href="/npgsqlrest/">NpgsqlRest</a></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="options"><a class="nav-link svelte-9zwk14 text-uppercase" href="/npgsqlrest/options/">options</a></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="annotations"><a class="nav-link svelte-9zwk14 text-uppercase" href="/npgsqlrest/annotations/">annotations</a></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="login endpoints"><a class="nav-link svelte-9zwk14 text-uppercase" href="/npgsqlrest/login-endpoints/">login endpoints</a></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="performances"><a class="nav-link svelte-9zwk14 text-uppercase" href="/npgsqlrest/performances/">performances</a></li><li class="nav-item toc2 svelte-9zwk14 active" data-id="" title="changelog"><a class="nav-link svelte-9zwk14 text-uppercase" href="/npgsqlrest/changelog/">changelog</a></li><li class="nav-txt-divider text-muted svelte-9zwk14"><hr class="svelte-9zwk14"><span class="svelte-9zwk14">client app</span><hr class="svelte-9zwk14"></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="client"><a class="nav-link svelte-9zwk14 text-uppercase" href="/npgsqlrest/client/">client</a></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="client npm package"><a class="nav-link svelte-9zwk14 text-uppercase" href="/npgsqlrest/client-npm/">client npm package</a></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="client default config"><a class="nav-link svelte-9zwk14 text-uppercase" href="/npgsqlrest/config/">client default config</a></li><li class="nav-txt-divider text-muted svelte-9zwk14"><hr class="svelte-9zwk14"><span class="svelte-9zwk14">plugins</span><hr class="svelte-9zwk14"></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="NpgsqlRest CrudSource"><a class="nav-link svelte-9zwk14 text-uppercase" href="/npgsqlrest/crudsource/">NpgsqlRest CrudSource</a></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="NpgsqlRest HttpFiles"><a class="nav-link svelte-9zwk14 text-uppercase" href="/npgsqlrest/httpfiles/">NpgsqlRest HttpFiles</a></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="NpgsqlRest TsClient"><a class="nav-link svelte-9zwk14 text-uppercase" href="/npgsqlrest/tsclient/">NpgsqlRest TsClient</a></li><li class="nav-txt-divider text-muted svelte-9zwk14"><hr class="svelte-9zwk14"><span class="svelte-9zwk14">articles</span><hr class="svelte-9zwk14"></li><li class="nav-item svelte-9zwk14" data-id="" title="Vanilla SQL With NpgsqlRest Part 1 - ToDo App Requirements"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/npgsqlrest/todo/part1-todo-requirements/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>Vanilla SQL With NpgsqlRest Part 1 - ToDo App Requirements</a></li><li class="nav-item svelte-9zwk14" data-id="" title="NpgsqlRest NuGet Library"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/npgsqlrest/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>NpgsqlRest NuGet Library</a></li><li class="nav-item svelte-9zwk14" data-id="" title="NpgsqlRest v2 Update üêòüî•"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/npgsqlrest-v2/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>NpgsqlRest v2 Update üêòüî•</a></li><li class="nav-item svelte-9zwk14" data-id="" title="NpgsqlRest Update 1.6.2"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/npgsqlrest-update1.6.2/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>NpgsqlRest Update 1.6.2</a></li></ul></div></div><div class="content svelte-9zwk14"><div class="container-sm main-content gh-content"><h1 id="changelog">Changelog<a class="anchor bookmark-target" href="#changelog"><i class="bi bi-link-45deg"></i></a></h1><a href="https://github.com/vb-consulting/NpgsqlRest/blob/master/changelog.md" class="github-edit"><i class="bi bi-github"></i>Edit this page on GitHub</a><p>Note: The changelog for the older version can be found here: <a href="https://github.com/vb-consulting/NpgsqlRest/blob/master/changelog-old.md">Changelog Archive</a></p><hr><h2 id="version-2240-2025-04-29">Version <a href="https://github.com/vb-consulting/NpgsqlRest/tree/2.24.0">2.24.0</a> (2025-04-29)<a class="anchor bookmark-target" href="#version-2240-2025-04-29"><i class="bi bi-link-45deg"></i></a></h2><p><a href="https://github.com/vb-consulting/NpgsqlRest/compare/2.24.0...2.23.0">Full Changelog</a></p><h3 id="core-npgsqlrest-library">Core NpgsqlRest Library<a class="anchor bookmark-target" href="#core-npgsqlrest-library"><i class="bi bi-link-45deg"></i></a></h3><ul><li>Added support for callback command when password verification fails on login.</li></ul><h3 id="npgsqlrest-client-app">NpgsqlRest Client App<a class="anchor bookmark-target" href="#npgsqlrest-client-app"><i class="bi bi-link-45deg"></i></a></h3><ul><li>Added support for callback command when password verification fails on login.</li><li>Fixed data parameter for external login to send actual retrieved data.</li><li>Fixed Docker image to have valid certificate.</li></ul><h2 id="version-2230-2025-04-28">Version <a href="https://github.com/vb-consulting/NpgsqlRest/tree/2.23.0">2.23.0</a> (2025-04-28)<a class="anchor bookmark-target" href="#version-2230-2025-04-28"><i class="bi bi-link-45deg"></i></a></h2><p><a href="https://github.com/vb-consulting/NpgsqlRest/compare/2.23.0...2.22.0">Full Changelog</a></p><h3 id="tsclient-plugin-fixes">TsClient Plugin Fixes<a class="anchor bookmark-target" href="#tsclient-plugin-fixes"><i class="bi bi-link-45deg"></i></a></h3><ul><li>Fixed TsClient plugin to handle booleans correctly.</li><li>Added JsCode style comments for parameters and return values in TsClient plugin.</li><li>Added upload support for TS and JS client.</li><li>Added support for XsrfTokenHeaderName if used. This is used by the Upload endpoints.</li><li>Smaller fixes in the TsClient plugin to handle some edge cases.</li></ul><h3 id="core-npgsqlrest-library-1">Core NpgsqlRest Library<a class="anchor bookmark-target" href="#core-npgsqlrest-library-1"><i class="bi bi-link-45deg"></i></a></h3><h4 id="simplified-endpointcreated-option-event">Simplified EndpointCreated Option Event<a class="anchor bookmark-target" href="#simplified-endpointcreated-option-event"><i class="bi bi-link-45deg"></i></a></h4><ul><li>From now on, this event doesn't require returning an endpoint, since it receives the endpoint instance as the parameter:</li></ul><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #6A9955">/// </span><span style="color: #808080">&lt;</span><span style="color: #569CD6">summary</span><span style="color: #808080">></span></span>
<span class="line"><span style="color: #6A9955">/// Callback function that is executed just after the new endpoint is created. Set the RoutineEndpoint to null to disable endpoint.</span></span>
<span class="line"><span style="color: #6A9955">/// </span><span style="color: #808080">&lt;/</span><span style="color: #569CD6">summary</span><span style="color: #808080">></span></span>
<span class="line"><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">Action</span><span style="color: #D4D4D4">&lt;</span><span style="color: #9CDCFE">RoutineEndpoint</span><span style="color: #D4D4D4">?>?</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">EndpointCreated</span><span style="color: #E6E6E6"> { </span><span style="color: #9CDCFE">get</span><span style="color: #E6E6E6">; </span><span style="color: #9CDCFE">set</span><span style="color: #E6E6E6">; } </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">null</span><span style="color: #E6E6E6">;</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #008000">/// </span><span style="color: #800000">&lt;summary></span></span>
<span class="line"><span style="color: #008000">/// Callback function that is executed just after the new endpoint is created. Set the RoutineEndpoint to null to disable endpoint.</span></span>
<span class="line"><span style="color: #008000">/// </span><span style="color: #800000">&lt;/summary></span></span>
<span class="line"><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #001080">Action</span><span style="color: #000000">&lt;</span><span style="color: #001080">RoutineEndpoint</span><span style="color: #000000">?>? </span><span style="color: #001080">EndpointCreated</span><span style="color: #000000"> { </span><span style="color: #001080">get</span><span style="color: #000000">; </span><span style="color: #001080">set</span><span style="color: #000000">; } = </span><span style="color: #0000FF">null</span><span style="color: #000000">;</span></span></code></pre></div><p>To change endpoint properties, simply change them on the parameter instance directly or set to null to disable if necessary:</p><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #9CDCFE">app</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">UseNpgsqlRest</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">new</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">connectionString</span><span style="color: #E6E6E6">)</span></span>
<span class="line"><span style="color: #E6E6E6">{</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">EndpointCreated</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">endpoint</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span></span>
<span class="line"><span style="color: #E6E6E6">    {</span></span>
<span class="line"><span style="color: #E6E6E6">        </span><span style="color: #C586C0">if</span><span style="color: #E6E6E6"> (</span><span style="color: #9CDCFE">endpoint</span><span style="color: #D4D4D4">?</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Routine</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Name</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">==</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">"restricted"</span><span style="color: #E6E6E6">)</span></span>
<span class="line"><span style="color: #E6E6E6">        {</span></span>
<span class="line"><span style="color: #6A9955">            // disable the endpoint</span></span>
<span class="line"><span style="color: #E6E6E6">            </span><span style="color: #9CDCFE">endpoint</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">null</span><span style="color: #E6E6E6">;</span></span>
<span class="line"><span style="color: #E6E6E6">        }</span></span>
<span class="line"><span style="color: #E6E6E6">    }</span></span>
<span class="line"><span style="color: #E6E6E6">});</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #001080">app</span><span style="color: #000000">.</span><span style="color: #795E26">UseNpgsqlRest</span><span style="color: #000000">(</span><span style="color: #0000FF">new</span><span style="color: #000000">(</span><span style="color: #001080">connectionString</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">EndpointCreated</span><span style="color: #000000"> = </span><span style="color: #001080">endpoint</span><span style="color: #000000"> => </span></span>
<span class="line"><span style="color: #000000">    {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">endpoint</span><span style="color: #000000">?.</span><span style="color: #001080">Routine</span><span style="color: #000000">.</span><span style="color: #001080">Name</span><span style="color: #000000"> == </span><span style="color: #A31515">"restricted"</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">        {</span></span>
<span class="line"><span style="color: #008000">            // disable the endpoint</span></span>
<span class="line"><span style="color: #000000">            </span><span style="color: #001080">endpoint</span><span style="color: #000000"> = </span><span style="color: #0000FF">null</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">        }</span></span>
<span class="line"><span style="color: #000000">    }</span></span>
<span class="line"><span style="color: #000000">});</span></span></code></pre></div><h4 id="added-path-to-comment-annotation-parser">Added PATH to Comment Annotation Parser<a class="anchor bookmark-target" href="#added-path-to-comment-annotation-parser"><i class="bi bi-link-45deg"></i></a></h4><ul><li>New comment annotation: <code>PATH path</code>.</li><li>Ability to set just HTTP path without method by using <code>PATH /my-path/</code></li><li>If HTTP tag has only two params and second param is not valid VERB (GET, POST, etc) - it is treated as the path.</li></ul><h4 id="added-securitysensitive-routine-option">Added SecuritySensitive Routine Option<a class="anchor bookmark-target" href="#added-securitysensitive-routine-option"><i class="bi bi-link-45deg"></i></a></h4><ul><li><p>New Endpoint Option and Comment Annotation: <code>securitysensitive</code> <code>sensitive</code> <code>security</code> <code>security_sensitive</code> <code>security-sensitive</code></p></li><li><p>This will manually obfuscate all parameter values before sending them to log.</p></li></ul><h4 id="hashing-capabilities">Hashing Capabilities<a class="anchor bookmark-target" href="#hashing-capabilities"><i class="bi bi-link-45deg"></i></a></h4><ul><li>This is a completely new feature. There is a default hasher class that can be injected into the system with the new option called <code>PasswordHasher</code>.</li></ul><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #6A9955">/// </span><span style="color: #808080">&lt;</span><span style="color: #569CD6">summary</span><span style="color: #808080">></span></span>
<span class="line"><span style="color: #6A9955">/// Default password hasher object. Inject custom password hasher object to add default password hasher.</span></span>
<span class="line"><span style="color: #6A9955">/// </span><span style="color: #808080">&lt;/</span><span style="color: #569CD6">summary</span><span style="color: #808080">></span></span>
<span class="line"><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">IPasswordHasher</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">PasswordHasher</span><span style="color: #E6E6E6"> { </span><span style="color: #9CDCFE">get</span><span style="color: #E6E6E6">; </span><span style="color: #9CDCFE">set</span><span style="color: #E6E6E6">; } </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">PasswordHasher</span><span style="color: #E6E6E6">();</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #008000">/// </span><span style="color: #800000">&lt;summary></span></span>
<span class="line"><span style="color: #008000">/// Default password hasher object. Inject custom password hasher object to add default password hasher.</span></span>
<span class="line"><span style="color: #008000">/// </span><span style="color: #800000">&lt;/summary></span></span>
<span class="line"><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #001080">IPasswordHasher</span><span style="color: #000000"> </span><span style="color: #001080">PasswordHasher</span><span style="color: #000000"> { </span><span style="color: #001080">get</span><span style="color: #000000">; </span><span style="color: #001080">set</span><span style="color: #000000">; } = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">PasswordHasher</span><span style="color: #000000">();</span></span></code></pre></div><ul><li>Default implementation in <code>PasswordHasher</code> class is using PBKDF2 (Password-Based Key Derivation Function 2) with SHA-256 and it incorporates 128-bit salt with 600,000 iterations (OWASP-recommended as of 2025). So it's secure, but there is an option to inject a different one.</li></ul><h5 id="mark-parameter-as-hash">Mark Parameter as Hash<a class="anchor bookmark-target" href="#mark-parameter-as-hash"><i class="bi bi-link-45deg"></i></a></h5><ul><li><p>Ability to mark the parameter as hash and the value will be pre-hashed with the default hasher.</p></li><li><p>New comment annotations:</p><ul><li><code>param param_name1 is hash of param_name2</code> - the first parameter <code>param_name1</code> will have the hashed value of <code>param_name2</code>.</li><li><code>param param_name is hash of param_name</code> - this parameter <code>param_name</code> will have the original value hashed.</li><li>Typical usage: <code>param _hashed_password is hash of _password</code> or just <code>param _password is hash of _password</code>.</li></ul></li><li><p>This can be set programmatically also:</p></li></ul><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #9CDCFE">app</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">UseNpgsqlRest</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">new</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">connectionString</span><span style="color: #E6E6E6">)</span></span>
<span class="line"><span style="color: #E6E6E6">{</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">EndpointCreated</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">endpoint</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span><span style="color: #E6E6E6"> </span></span>
<span class="line"><span style="color: #E6E6E6">    {</span></span>
<span class="line"><span style="color: #E6E6E6">        </span><span style="color: #C586C0">if</span><span style="color: #E6E6E6"> (</span><span style="color: #9CDCFE">endpoint</span><span style="color: #D4D4D4">?</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Routine</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Name</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">==</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">"login"</span><span style="color: #E6E6E6">)</span></span>
<span class="line"><span style="color: #E6E6E6">        {</span></span>
<span class="line"><span style="color: #6A9955">            // Set the second parameter to contain the hash instead of plain text</span></span>
<span class="line"><span style="color: #E6E6E6">            </span><span style="color: #9CDCFE">endpoint</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Routine</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Parameters</span><span style="color: #E6E6E6">[</span><span style="color: #B5CEA8">1</span><span style="color: #E6E6E6">].</span><span style="color: #9CDCFE">HashOf</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">endpoint</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Routine</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Parameters</span><span style="color: #E6E6E6">[</span><span style="color: #B5CEA8">1</span><span style="color: #E6E6E6">];</span></span>
<span class="line"><span style="color: #E6E6E6">        }</span></span>
<span class="line"><span style="color: #E6E6E6">    }</span></span>
<span class="line"><span style="color: #E6E6E6">});</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #001080">app</span><span style="color: #000000">.</span><span style="color: #795E26">UseNpgsqlRest</span><span style="color: #000000">(</span><span style="color: #0000FF">new</span><span style="color: #000000">(</span><span style="color: #001080">connectionString</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">EndpointCreated</span><span style="color: #000000"> = </span><span style="color: #001080">endpoint</span><span style="color: #000000"> => </span></span>
<span class="line"><span style="color: #000000">    {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">endpoint</span><span style="color: #000000">?.</span><span style="color: #001080">Routine</span><span style="color: #000000">.</span><span style="color: #001080">Name</span><span style="color: #000000"> == </span><span style="color: #A31515">"login"</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">        {</span></span>
<span class="line"><span style="color: #008000">            // Set the second parameter to contain the hash instead of plain text</span></span>
<span class="line"><span style="color: #000000">            </span><span style="color: #001080">endpoint</span><span style="color: #000000">.</span><span style="color: #001080">Routine</span><span style="color: #000000">.</span><span style="color: #001080">Parameters</span><span style="color: #000000">[</span><span style="color: #098658">1</span><span style="color: #000000">].</span><span style="color: #001080">HashOf</span><span style="color: #000000"> = </span><span style="color: #001080">endpoint</span><span style="color: #000000">.</span><span style="color: #001080">Routine</span><span style="color: #000000">.</span><span style="color: #001080">Parameters</span><span style="color: #000000">[</span><span style="color: #098658">1</span><span style="color: #000000">];</span></span>
<span class="line"><span style="color: #000000">        }</span></span>
<span class="line"><span style="color: #000000">    }</span></span>
<span class="line"><span style="color: #000000">});</span></span></code></pre></div><h5 id="login-endpoints-can-verify-hashes">Login Endpoints Can Verify Hashes<a class="anchor bookmark-target" href="#login-endpoints-can-verify-hashes"><i class="bi bi-link-45deg"></i></a></h5><ul><li><p>New ability of the Login endpoints to compare and verify returned password hashes.</p></li><li><p>Login endpoints can now return field <code>hash</code> (configurable) and when they do, it will be verified against a parameter that contains "pass" (configurable).</p></li><li><p>If verification fails, login will automatically return status 404 with no message and relevant information will be logged as a warning to default logger: <code>Password verification failed for attempted login: path={path} userId={userId}, username={userName}</code></p></li><li><p>New <code>AuthenticationOptions</code> values to support this feature are these:</p></li></ul><ol><li><p><code>AuthenticationOptions.HashColumnName</code></p><ul><li>Type: <code>string</code></li><li>Default: <code>"hash"</code></li></ul><p>The default column name in the data reader that will contain password hash. If this column is present, value will be verified with the default hasher against the password parameter.</p></li><li><p><code>AuthenticationOptions.PasswordParameterNameContains</code></p></li></ol><ul><li>Type: <code>string</code></li><li>Default: <code>"pass"</code></li></ul><p>When the login endpoint tries to verify supplied hash with the password parameter, this value will be used to locate the password parameter from the parameter collection. That will be the first parameter that contains this string in parameter name (either original or translated).</p><h4 id="upload-support">Upload Support<a class="anchor bookmark-target" href="#upload-support"><i class="bi bi-link-45deg"></i></a></h4><ul><li><p>There is robust and flexible UPLOAD endpoint support from this version.</p></li><li><p>There are three new options to support this feature:</p></li></ul><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #6A9955">/// </span><span style="color: #808080">&lt;</span><span style="color: #569CD6">summary</span><span style="color: #808080">></span></span>
<span class="line"><span style="color: #6A9955">/// Default upload handler options. </span></span>
<span class="line"><span style="color: #6A9955">/// Set this option to null to disable upload handlers or use this to modify upload handler options.</span></span>
<span class="line"><span style="color: #6A9955">/// </span><span style="color: #808080">&lt;/</span><span style="color: #569CD6">summary</span><span style="color: #808080">></span></span>
<span class="line"><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">UploadHandlerOptions</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">DefaultUploadHandlerOptions</span><span style="color: #E6E6E6"> { </span><span style="color: #9CDCFE">get</span><span style="color: #E6E6E6">; </span><span style="color: #9CDCFE">set</span><span style="color: #E6E6E6">; } </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">UploadHandlerOptions</span><span style="color: #E6E6E6">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955">/// </span><span style="color: #808080">&lt;</span><span style="color: #569CD6">summary</span><span style="color: #808080">></span></span>
<span class="line"><span style="color: #6A9955">/// Upload handlers dictionary map. </span></span>
<span class="line"><span style="color: #6A9955">/// When the endpoint has set Upload to true, this dictionary will be used to find the upload handlers for the current request. </span></span>
<span class="line"><span style="color: #6A9955">/// Handler will be located by the key values from the endpoint UploadHandlers string array property if set or by the default upload handler (DefaultUploadHandler option).</span></span>
<span class="line"><span style="color: #6A9955">/// Set this option to null to use default upload handler from the UploadHandlerOptions property.</span></span>
<span class="line"><span style="color: #6A9955">/// Set this option to empty dictionary to disable upload handlers.</span></span>
<span class="line"><span style="color: #6A9955">/// Set this option to a dictionary with one or more upload handlers to enable your own custom upload handlers.</span></span>
<span class="line"><span style="color: #6A9955">/// </span><span style="color: #808080">&lt;/</span><span style="color: #569CD6">summary</span><span style="color: #808080">></span></span>
<span class="line"><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">Dictionary</span><span style="color: #D4D4D4">&lt;</span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">Func</span><span style="color: #D4D4D4">&lt;</span><span style="color: #9CDCFE">IUploadHandler</span><span style="color: #D4D4D4">>>?</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">UploadHandlers</span><span style="color: #E6E6E6"> { </span><span style="color: #9CDCFE">get</span><span style="color: #E6E6E6">; </span><span style="color: #9CDCFE">set</span><span style="color: #E6E6E6">; } </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">null</span><span style="color: #E6E6E6">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955">/// </span><span style="color: #808080">&lt;</span><span style="color: #569CD6">summary</span><span style="color: #808080">></span></span>
<span class="line"><span style="color: #6A9955">/// Default upload handler name. This value is used when the upload handlers are not specified.</span></span>
<span class="line"><span style="color: #6A9955">/// </span><span style="color: #808080">&lt;/</span><span style="color: #569CD6">summary</span><span style="color: #808080">></span></span>
<span class="line"><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">DefaultUploadHandler</span><span style="color: #E6E6E6"> { </span><span style="color: #9CDCFE">get</span><span style="color: #E6E6E6">; </span><span style="color: #9CDCFE">set</span><span style="color: #E6E6E6">; } </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">"large_object"</span><span style="color: #E6E6E6">;</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #008000">/// </span><span style="color: #800000">&lt;summary></span></span>
<span class="line"><span style="color: #008000">/// Default upload handler options. </span></span>
<span class="line"><span style="color: #008000">/// Set this option to null to disable upload handlers or use this to modify upload handler options.</span></span>
<span class="line"><span style="color: #008000">/// </span><span style="color: #800000">&lt;/summary></span></span>
<span class="line"><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #001080">UploadHandlerOptions</span><span style="color: #000000"> </span><span style="color: #001080">DefaultUploadHandlerOptions</span><span style="color: #000000"> { </span><span style="color: #001080">get</span><span style="color: #000000">; </span><span style="color: #001080">set</span><span style="color: #000000">; } = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #267F99">UploadHandlerOptions</span><span style="color: #000000">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #008000">/// </span><span style="color: #800000">&lt;summary></span></span>
<span class="line"><span style="color: #008000">/// Upload handlers dictionary map. </span></span>
<span class="line"><span style="color: #008000">/// When the endpoint has set Upload to true, this dictionary will be used to find the upload handlers for the current request. </span></span>
<span class="line"><span style="color: #008000">/// Handler will be located by the key values from the endpoint UploadHandlers string array property if set or by the default upload handler (DefaultUploadHandler option).</span></span>
<span class="line"><span style="color: #008000">/// Set this option to null to use default upload handler from the UploadHandlerOptions property.</span></span>
<span class="line"><span style="color: #008000">/// Set this option to empty dictionary to disable upload handlers.</span></span>
<span class="line"><span style="color: #008000">/// Set this option to a dictionary with one or more upload handlers to enable your own custom upload handlers.</span></span>
<span class="line"><span style="color: #008000">/// </span><span style="color: #800000">&lt;/summary></span></span>
<span class="line"><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #001080">Dictionary</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">string</span><span style="color: #000000">, </span><span style="color: #001080">Func</span><span style="color: #000000">&lt;</span><span style="color: #001080">IUploadHandler</span><span style="color: #000000">>>? </span><span style="color: #001080">UploadHandlers</span><span style="color: #000000"> { </span><span style="color: #001080">get</span><span style="color: #000000">; </span><span style="color: #001080">set</span><span style="color: #000000">; } = </span><span style="color: #0000FF">null</span><span style="color: #000000">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #008000">/// </span><span style="color: #800000">&lt;summary></span></span>
<span class="line"><span style="color: #008000">/// Default upload handler name. This value is used when the upload handlers are not specified.</span></span>
<span class="line"><span style="color: #008000">/// </span><span style="color: #800000">&lt;/summary></span></span>
<span class="line"><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">string</span><span style="color: #000000"> </span><span style="color: #001080">DefaultUploadHandler</span><span style="color: #000000"> { </span><span style="color: #001080">get</span><span style="color: #000000">; </span><span style="color: #001080">set</span><span style="color: #000000">; } = </span><span style="color: #A31515">"large_object"</span><span style="color: #000000">;</span></span></code></pre></div><ul><li>Endpoints also have two new properties:</li></ul><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">bool</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">Upload</span><span style="color: #E6E6E6"> { </span><span style="color: #9CDCFE">get</span><span style="color: #E6E6E6">; </span><span style="color: #9CDCFE">set</span><span style="color: #E6E6E6">; } </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">true</span><span style="color: #E6E6E6">;</span></span>
<span class="line"><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">[]</span><span style="color: #D4D4D4">?</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">UploadHandlers</span><span style="color: #E6E6E6"> { </span><span style="color: #9CDCFE">get</span><span style="color: #E6E6E6">; </span><span style="color: #9CDCFE">set</span><span style="color: #E6E6E6">; } </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">null</span><span style="color: #E6E6E6">;</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">bool</span><span style="color: #000000"> </span><span style="color: #001080">Upload</span><span style="color: #000000"> { </span><span style="color: #001080">get</span><span style="color: #000000">; </span><span style="color: #001080">set</span><span style="color: #000000">; } = </span><span style="color: #0000FF">true</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">string</span><span style="color: #000000">[]? </span><span style="color: #001080">UploadHandlers</span><span style="color: #000000"> { </span><span style="color: #001080">get</span><span style="color: #000000">; </span><span style="color: #001080">set</span><span style="color: #000000">; } = </span><span style="color: #0000FF">null</span><span style="color: #000000">;</span></span></code></pre></div><ul><li><p>When the endpoint has Upload set to true, the request will first try to locate appropriate handlers.</p></li><li><p>Endpoint can specify one or more handlers with <code>UploadHandlers</code> property (keys in <code>UploadHandlers</code> dictionary).</p></li><li><p>When endpoint <code>UploadHandlers</code> property is null, Upload handler will use the one from the <code>DefaultUploadHandler</code> option ("large_object" by default).</p></li><li><p>Option <code>Dictionary&lt;string, Func&lt;IUploadHandler>>? UploadHandlers</code> is initialized from the <code>DefaultUploadHandlerOptions</code> option which has these defaults:</p></li></ul><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">bool</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">UploadsEnabled</span><span style="color: #E6E6E6"> { </span><span style="color: #9CDCFE">get</span><span style="color: #E6E6E6">; </span><span style="color: #9CDCFE">set</span><span style="color: #E6E6E6">; } </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">true</span><span style="color: #E6E6E6">;</span></span>
<span class="line"><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">bool</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">LargeObjectEnabled</span><span style="color: #E6E6E6"> { </span><span style="color: #9CDCFE">get</span><span style="color: #E6E6E6">; </span><span style="color: #9CDCFE">set</span><span style="color: #E6E6E6">; } </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">true</span><span style="color: #E6E6E6">;</span></span>
<span class="line"><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">LargeObjectKey</span><span style="color: #E6E6E6"> { </span><span style="color: #9CDCFE">get</span><span style="color: #E6E6E6">; </span><span style="color: #9CDCFE">set</span><span style="color: #E6E6E6">; } </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">"large_object"</span><span style="color: #E6E6E6">;</span></span>
<span class="line"><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">int</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">LargeObjectHandlerBufferSize</span><span style="color: #E6E6E6"> { </span><span style="color: #9CDCFE">get</span><span style="color: #E6E6E6">; </span><span style="color: #9CDCFE">set</span><span style="color: #E6E6E6">; } </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #B5CEA8">8192</span><span style="color: #E6E6E6">;</span></span>
<span class="line"><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">bool</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">FileSystemEnabled</span><span style="color: #E6E6E6"> { </span><span style="color: #9CDCFE">get</span><span style="color: #E6E6E6">; </span><span style="color: #9CDCFE">set</span><span style="color: #E6E6E6">; } </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">true</span><span style="color: #E6E6E6">;</span></span>
<span class="line"><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">FileSystemKey</span><span style="color: #E6E6E6"> { </span><span style="color: #9CDCFE">get</span><span style="color: #E6E6E6">; </span><span style="color: #9CDCFE">set</span><span style="color: #E6E6E6">; } </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">"file_system"</span><span style="color: #E6E6E6">;</span></span>
<span class="line"><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">string</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">FileSystemHandlerPath</span><span style="color: #E6E6E6"> { </span><span style="color: #9CDCFE">get</span><span style="color: #E6E6E6">; </span><span style="color: #9CDCFE">set</span><span style="color: #E6E6E6">; } </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">"./"</span><span style="color: #E6E6E6">;</span></span>
<span class="line"><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">bool</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">FileSystemHandlerUseUniqueFileName</span><span style="color: #E6E6E6"> { </span><span style="color: #9CDCFE">get</span><span style="color: #E6E6E6">; </span><span style="color: #9CDCFE">set</span><span style="color: #E6E6E6">; } </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">true</span><span style="color: #E6E6E6">;</span></span>
<span class="line"><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">bool</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">FileSystemHandlerCreatePathIfNotExists</span><span style="color: #E6E6E6"> { </span><span style="color: #9CDCFE">get</span><span style="color: #E6E6E6">; </span><span style="color: #9CDCFE">set</span><span style="color: #E6E6E6">; } </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">true</span><span style="color: #E6E6E6">;</span></span>
<span class="line"><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">int</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">FileSystemHandlerBufferSize</span><span style="color: #E6E6E6"> { </span><span style="color: #9CDCFE">get</span><span style="color: #E6E6E6">; </span><span style="color: #9CDCFE">set</span><span style="color: #E6E6E6">; } </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #B5CEA8">8192</span><span style="color: #E6E6E6">;</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">bool</span><span style="color: #000000"> </span><span style="color: #001080">UploadsEnabled</span><span style="color: #000000"> { </span><span style="color: #001080">get</span><span style="color: #000000">; </span><span style="color: #001080">set</span><span style="color: #000000">; } = </span><span style="color: #0000FF">true</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">bool</span><span style="color: #000000"> </span><span style="color: #001080">LargeObjectEnabled</span><span style="color: #000000"> { </span><span style="color: #001080">get</span><span style="color: #000000">; </span><span style="color: #001080">set</span><span style="color: #000000">; } = </span><span style="color: #0000FF">true</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">string</span><span style="color: #000000"> </span><span style="color: #001080">LargeObjectKey</span><span style="color: #000000"> { </span><span style="color: #001080">get</span><span style="color: #000000">; </span><span style="color: #001080">set</span><span style="color: #000000">; } = </span><span style="color: #A31515">"large_object"</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">int</span><span style="color: #000000"> </span><span style="color: #001080">LargeObjectHandlerBufferSize</span><span style="color: #000000"> { </span><span style="color: #001080">get</span><span style="color: #000000">; </span><span style="color: #001080">set</span><span style="color: #000000">; } = </span><span style="color: #098658">8192</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">bool</span><span style="color: #000000"> </span><span style="color: #001080">FileSystemEnabled</span><span style="color: #000000"> { </span><span style="color: #001080">get</span><span style="color: #000000">; </span><span style="color: #001080">set</span><span style="color: #000000">; } = </span><span style="color: #0000FF">true</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">string</span><span style="color: #000000"> </span><span style="color: #001080">FileSystemKey</span><span style="color: #000000"> { </span><span style="color: #001080">get</span><span style="color: #000000">; </span><span style="color: #001080">set</span><span style="color: #000000">; } = </span><span style="color: #A31515">"file_system"</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">string</span><span style="color: #000000"> </span><span style="color: #001080">FileSystemHandlerPath</span><span style="color: #000000"> { </span><span style="color: #001080">get</span><span style="color: #000000">; </span><span style="color: #001080">set</span><span style="color: #000000">; } = </span><span style="color: #A31515">"./"</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">bool</span><span style="color: #000000"> </span><span style="color: #001080">FileSystemHandlerUseUniqueFileName</span><span style="color: #000000"> { </span><span style="color: #001080">get</span><span style="color: #000000">; </span><span style="color: #001080">set</span><span style="color: #000000">; } = </span><span style="color: #0000FF">true</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">bool</span><span style="color: #000000"> </span><span style="color: #001080">FileSystemHandlerCreatePathIfNotExists</span><span style="color: #000000"> { </span><span style="color: #001080">get</span><span style="color: #000000">; </span><span style="color: #001080">set</span><span style="color: #000000">; } = </span><span style="color: #0000FF">true</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">int</span><span style="color: #000000"> </span><span style="color: #001080">FileSystemHandlerBufferSize</span><span style="color: #000000"> { </span><span style="color: #001080">get</span><span style="color: #000000">; </span><span style="color: #001080">set</span><span style="color: #000000">; } = </span><span style="color: #098658">8192</span><span style="color: #000000">;</span></span></code></pre></div><ul><li><p>Each upload handler returns a string text by convention, which usually represents JSON metadata for the upload.</p></li><li><p>This metadata is then assigned to a routine parameter that has <code>UploadMetadata</code> set to true.</p></li><li><p>That routine is executed on PostgreSQL after successful upload (handlers execution).</p></li><li><p>If the routine fails, upload handlers automatically perform upload cleanup.</p></li><li><p>There are currently two upload handlers implemented in the library:</p></li></ul><ol><li>PostgreSQL Large Object Upload Handler</li></ol><ul><li>Key: <code>large_object</code></li><li>Description: uses <a href="https://www.postgresql.org/docs/current/largeobjects.html">PostgreSQL Large Object API</a> to upload content directly to database.</li><li>Metadata example: <code>{"type": "large_object", "fileName": "test.txt", "fileType": "text/plain", "size": 100, "oid": 1234}</code></li></ul><ol start="2"><li>File System Upload Handler</li></ol><ul><li><p>Key: <code>file_system</code></p></li><li><p>Description: Uploads files to the file system</p></li><li><p>Metadata example: <code>{"type": "file_system", "fileName": "test.txt", "fileType": "text/plain", "size": 100, "filePath": "/tmp/uploads/ADF3B177-D0A5-4AA0-8805-FB63F8504ED8.txt"}</code></p></li><li><p>If the endpoint has multiple upload handlers, metadata parameter is expected to be array of text or array of JSON.</p></li><li><p>Example of programmatic usage:</p></li></ul><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #9CDCFE">app</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">UseNpgsqlRest</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">new</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">connectionString</span><span style="color: #E6E6E6">)</span></span>
<span class="line"><span style="color: #E6E6E6">{</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">DefaultUploadHandlerOptions</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">new</span><span style="color: #E6E6E6">() { </span><span style="color: #9CDCFE">FileSystemHandlerPath</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">"./images/"</span><span style="color: #E6E6E6"> },</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">EndpointCreated</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">endpoint</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=></span></span>
<span class="line"><span style="color: #E6E6E6">    {</span></span>
<span class="line"><span style="color: #E6E6E6">        </span><span style="color: #C586C0">if</span><span style="color: #E6E6E6"> (</span><span style="color: #9CDCFE">endpoint</span><span style="color: #D4D4D4">?</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Url</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">EndsWith</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"upload"</span><span style="color: #E6E6E6">) </span><span style="color: #569CD6">is</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">true</span><span style="color: #E6E6E6">)</span></span>
<span class="line"><span style="color: #E6E6E6">        {</span></span>
<span class="line"><span style="color: #E6E6E6">            </span><span style="color: #9CDCFE">endpoint</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Upload</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">true</span><span style="color: #E6E6E6">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E6E6E6">            </span><span style="color: #C586C0">if</span><span style="color: #E6E6E6"> (</span><span style="color: #9CDCFE">endpoint</span><span style="color: #D4D4D4">?</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Url</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Contains</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"image"</span><span style="color: #E6E6E6">) </span><span style="color: #569CD6">is</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">true</span><span style="color: #E6E6E6">)</span></span>
<span class="line"><span style="color: #E6E6E6">            {</span></span>
<span class="line"><span style="color: #E6E6E6">                </span><span style="color: #9CDCFE">endpoint</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">UploadHandlers</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> [</span><span style="color: #CE9178">"file_system"</span><span style="color: #E6E6E6">];</span></span>
<span class="line"><span style="color: #E6E6E6">            }</span></span>
<span class="line"><span style="color: #E6E6E6">            </span><span style="color: #C586C0">else</span><span style="color: #E6E6E6"> </span><span style="color: #C586C0">if</span><span style="color: #E6E6E6"> (</span><span style="color: #9CDCFE">endpoint</span><span style="color: #D4D4D4">?</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">Url</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Contains</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"csv"</span><span style="color: #E6E6E6">) </span><span style="color: #569CD6">is</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">true</span><span style="color: #E6E6E6">)</span></span>
<span class="line"><span style="color: #E6E6E6">            {</span></span>
<span class="line"><span style="color: #E6E6E6">                </span><span style="color: #9CDCFE">endpoint</span><span style="color: #E6E6E6">.</span><span style="color: #9CDCFE">UploadHandlers</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> [</span><span style="color: #CE9178">"large_object"</span><span style="color: #E6E6E6">];</span></span>
<span class="line"><span style="color: #E6E6E6">            }</span></span>
<span class="line"><span style="color: #E6E6E6">        }</span></span>
<span class="line"><span style="color: #E6E6E6">    }</span></span>
<span class="line"><span style="color: #E6E6E6">});</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #001080">app</span><span style="color: #000000">.</span><span style="color: #795E26">UseNpgsqlRest</span><span style="color: #000000">(</span><span style="color: #0000FF">new</span><span style="color: #000000">(</span><span style="color: #001080">connectionString</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">DefaultUploadHandlerOptions</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000">() { </span><span style="color: #001080">FileSystemHandlerPath</span><span style="color: #000000"> = </span><span style="color: #A31515">"./images/"</span><span style="color: #000000"> },</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">EndpointCreated</span><span style="color: #000000"> = </span><span style="color: #001080">endpoint</span><span style="color: #000000"> =></span></span>
<span class="line"><span style="color: #000000">    {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">endpoint</span><span style="color: #000000">?.</span><span style="color: #001080">Url</span><span style="color: #000000">.</span><span style="color: #795E26">EndsWith</span><span style="color: #000000">(</span><span style="color: #A31515">"upload"</span><span style="color: #000000">) </span><span style="color: #0000FF">is</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">        {</span></span>
<span class="line"><span style="color: #000000">            </span><span style="color: #001080">endpoint</span><span style="color: #000000">.</span><span style="color: #001080">Upload</span><span style="color: #000000"> = </span><span style="color: #0000FF">true</span><span style="color: #000000">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #000000">            </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">endpoint</span><span style="color: #000000">?.</span><span style="color: #001080">Url</span><span style="color: #000000">.</span><span style="color: #795E26">Contains</span><span style="color: #000000">(</span><span style="color: #A31515">"image"</span><span style="color: #000000">) </span><span style="color: #0000FF">is</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">            {</span></span>
<span class="line"><span style="color: #000000">                </span><span style="color: #001080">endpoint</span><span style="color: #000000">.</span><span style="color: #001080">UploadHandlers</span><span style="color: #000000"> = [</span><span style="color: #A31515">"file_system"</span><span style="color: #000000">];</span></span>
<span class="line"><span style="color: #000000">            }</span></span>
<span class="line"><span style="color: #000000">            </span><span style="color: #AF00DB">else</span><span style="color: #000000"> </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">endpoint</span><span style="color: #000000">?.</span><span style="color: #001080">Url</span><span style="color: #000000">.</span><span style="color: #795E26">Contains</span><span style="color: #000000">(</span><span style="color: #A31515">"csv"</span><span style="color: #000000">) </span><span style="color: #0000FF">is</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">            {</span></span>
<span class="line"><span style="color: #000000">                </span><span style="color: #001080">endpoint</span><span style="color: #000000">.</span><span style="color: #001080">UploadHandlers</span><span style="color: #000000"> = [</span><span style="color: #A31515">"large_object"</span><span style="color: #000000">];</span></span>
<span class="line"><span style="color: #000000">            }</span></span>
<span class="line"><span style="color: #000000">        }</span></span>
<span class="line"><span style="color: #000000">    }</span></span>
<span class="line"><span style="color: #000000">});</span></span></code></pre></div><ul><li><p>This example will enable upload for all URL paths that end with "upload" text.</p></li><li><p>If the URL path contains "image", it will upload them to file system and to configured <code>./images/</code> path.</p></li><li><p>If the URL path contains "csv", it will be uploaded as the PostgreSQL large object.</p></li><li><p>There is also robust comment annotation support for this feature:</p><ul><li><code>upload</code> - mark routine as upload (uses default handlers)</li><li><code>upload for handler_name1, handler_name2 [, ...]</code> mark routine as upload and set handler key to be used (e.g. <code>upload for file_system</code>).</li><li><code>upload param_name as metadata</code> mark routine as upload (uses default handlers) and sets <code>param_name</code> as metadata parameter.</li><li>Note: mixing these two is not (yet) possible, <code>upload for file_system param_name as metadata</code> or <code>upload param_name as metadata for file_system</code> will not work.</li><li><code>param param_name1 is upload metadata</code> set <code>param_name1</code> as the upload metadata.</li></ul></li><li><p>Examples:</p></li></ul><div class="code sql"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">create</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">procedure</span><span style="color: #E6E6E6"> simple_upload(</span></span>
<span class="line"><span style="color: #E6E6E6">    _meta </span><span style="color: #569CD6">json</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">null</span></span>
<span class="line"><span style="color: #E6E6E6">)</span></span>
<span class="line"><span style="color: #569CD6">language</span><span style="color: #E6E6E6"> plpgsql</span></span>
<span class="line"><span style="color: #569CD6">as</span><span style="color: #E6E6E6"> </span></span>
<span class="line"><span style="color: #E6E6E6">$$</span></span>
<span class="line"><span style="color: #569CD6">begin</span></span>
<span class="line"><span style="color: #E6E6E6">    raise info </span><span style="color: #CE9178">'upload metadata: %'</span><span style="color: #E6E6E6">, _meta;</span></span>
<span class="line"><span style="color: #569CD6">end</span><span style="color: #E6E6E6">;</span></span>
<span class="line"><span style="color: #E6E6E6">$$;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E6E6E6">comment </span><span style="color: #569CD6">on</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">procedure</span><span style="color: #E6E6E6"> simple_upload(</span><span style="color: #569CD6">json</span><span style="color: #E6E6E6">) </span><span style="color: #569CD6">is</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">'upload'</span><span style="color: #E6E6E6">; </span><span style="color: #6A9955">-- does not send _meta parameter</span></span>
<span class="line"><span style="color: #6A9955">-- or --</span></span>
<span class="line"><span style="color: #E6E6E6">comment </span><span style="color: #569CD6">on</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">procedure</span><span style="color: #E6E6E6"> simple_upload(</span><span style="color: #569CD6">json</span><span style="color: #E6E6E6">) </span><span style="color: #569CD6">is</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">'upload _meta as metadata'</span><span style="color: #E6E6E6"> </span><span style="color: #6A9955">-- sends _meta parameter</span></span>
<span class="line"><span style="color: #6A9955">-- or --</span></span>
<span class="line"><span style="color: #E6E6E6">comment </span><span style="color: #569CD6">on</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">procedure</span><span style="color: #E6E6E6"> simple_upload(</span><span style="color: #569CD6">json</span><span style="color: #E6E6E6">) </span><span style="color: #569CD6">is</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">'</span></span>
<span class="line"><span style="color: #CE9178">upload</span></span>
<span class="line"><span style="color: #CE9178">param _meta is upload metadata</span></span>
<span class="line"><span style="color: #CE9178">'</span><span style="color: #E6E6E6">; </span></span>
<span class="line"><span style="color: #6A9955">-- or --</span></span>
<span class="line"><span style="color: #E6E6E6">comment </span><span style="color: #569CD6">on</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">procedure</span><span style="color: #E6E6E6"> simple_upload(</span><span style="color: #569CD6">json</span><span style="color: #E6E6E6">) </span><span style="color: #569CD6">is</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">'</span></span>
<span class="line"><span style="color: #CE9178">upload for file_system</span></span>
<span class="line"><span style="color: #CE9178">param _meta is upload metadata</span></span>
<span class="line"><span style="color: #CE9178">'</span><span style="color: #E6E6E6">;</span></span>
<span class="line"><span style="color: #6A9955">-- or --</span></span>
<span class="line"><span style="color: #E6E6E6">comment </span><span style="color: #569CD6">on</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">procedure</span><span style="color: #E6E6E6"> simple_upload(</span><span style="color: #569CD6">json</span><span style="color: #E6E6E6">) </span><span style="color: #569CD6">is</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">'</span></span>
<span class="line"><span style="color: #CE9178">upload for large_object</span></span>
<span class="line"><span style="color: #CE9178">param _meta is upload metadata</span></span>
<span class="line"><span style="color: #CE9178">'</span><span style="color: #E6E6E6">;</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #0000FF">create</span><span style="color: #000000"> </span><span style="color: #0000FF">procedure</span><span style="color: #000000"> simple_upload(</span></span>
<span class="line"><span style="color: #000000">    _meta </span><span style="color: #0000FF">json</span><span style="color: #000000"> = </span><span style="color: #0000FF">null</span></span>
<span class="line"><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #0000FF">language</span><span style="color: #000000"> plpgsql</span></span>
<span class="line"><span style="color: #0000FF">as</span><span style="color: #000000"> </span></span>
<span class="line"><span style="color: #000000">$$</span></span>
<span class="line"><span style="color: #0000FF">begin</span></span>
<span class="line"><span style="color: #000000">    raise info </span><span style="color: #A31515">'upload metadata: %'</span><span style="color: #000000">, _meta;</span></span>
<span class="line"><span style="color: #0000FF">end</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">$$;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #000000">comment </span><span style="color: #0000FF">on</span><span style="color: #000000"> </span><span style="color: #0000FF">procedure</span><span style="color: #000000"> simple_upload(</span><span style="color: #0000FF">json</span><span style="color: #000000">) </span><span style="color: #0000FF">is</span><span style="color: #000000"> </span><span style="color: #A31515">'upload'</span><span style="color: #000000">; </span><span style="color: #008000">-- does not send _meta parameter</span></span>
<span class="line"><span style="color: #008000">-- or --</span></span>
<span class="line"><span style="color: #000000">comment </span><span style="color: #0000FF">on</span><span style="color: #000000"> </span><span style="color: #0000FF">procedure</span><span style="color: #000000"> simple_upload(</span><span style="color: #0000FF">json</span><span style="color: #000000">) </span><span style="color: #0000FF">is</span><span style="color: #000000"> </span><span style="color: #A31515">'upload _meta as metadata'</span><span style="color: #000000"> </span><span style="color: #008000">-- sends _meta parameter</span></span>
<span class="line"><span style="color: #008000">-- or --</span></span>
<span class="line"><span style="color: #000000">comment </span><span style="color: #0000FF">on</span><span style="color: #000000"> </span><span style="color: #0000FF">procedure</span><span style="color: #000000"> simple_upload(</span><span style="color: #0000FF">json</span><span style="color: #000000">) </span><span style="color: #0000FF">is</span><span style="color: #000000"> </span><span style="color: #A31515">'</span></span>
<span class="line"><span style="color: #A31515">upload</span></span>
<span class="line"><span style="color: #A31515">param _meta is upload metadata</span></span>
<span class="line"><span style="color: #A31515">'</span><span style="color: #000000">; </span></span>
<span class="line"><span style="color: #008000">-- or --</span></span>
<span class="line"><span style="color: #000000">comment </span><span style="color: #0000FF">on</span><span style="color: #000000"> </span><span style="color: #0000FF">procedure</span><span style="color: #000000"> simple_upload(</span><span style="color: #0000FF">json</span><span style="color: #000000">) </span><span style="color: #0000FF">is</span><span style="color: #000000"> </span><span style="color: #A31515">'</span></span>
<span class="line"><span style="color: #A31515">upload for file_system</span></span>
<span class="line"><span style="color: #A31515">param _meta is upload metadata</span></span>
<span class="line"><span style="color: #A31515">'</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #008000">-- or --</span></span>
<span class="line"><span style="color: #000000">comment </span><span style="color: #0000FF">on</span><span style="color: #000000"> </span><span style="color: #0000FF">procedure</span><span style="color: #000000"> simple_upload(</span><span style="color: #0000FF">json</span><span style="color: #000000">) </span><span style="color: #0000FF">is</span><span style="color: #000000"> </span><span style="color: #A31515">'</span></span>
<span class="line"><span style="color: #A31515">upload for large_object</span></span>
<span class="line"><span style="color: #A31515">param _meta is upload metadata</span></span>
<span class="line"><span style="color: #A31515">'</span><span style="color: #000000">;</span></span></code></pre></div><ul><li>In case of multiple handlers, parameter has to be an array:</li></ul><div class="code sql"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">create</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">procedure</span><span style="color: #E6E6E6"> simple_upload(</span></span>
<span class="line"><span style="color: #E6E6E6">    _meta[] </span><span style="color: #569CD6">json</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">null</span></span>
<span class="line"><span style="color: #E6E6E6">)</span></span>
<span class="line"><span style="color: #569CD6">language</span><span style="color: #E6E6E6"> plpgsql</span></span>
<span class="line"><span style="color: #569CD6">as</span><span style="color: #E6E6E6"> </span></span>
<span class="line"><span style="color: #E6E6E6">$$</span></span>
<span class="line"><span style="color: #569CD6">begin</span></span>
<span class="line"><span style="color: #E6E6E6">    raise info </span><span style="color: #CE9178">'upload metadata: %'</span><span style="color: #E6E6E6">, _meta;</span></span>
<span class="line"><span style="color: #569CD6">end</span><span style="color: #E6E6E6">;</span></span>
<span class="line"><span style="color: #E6E6E6">$$;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955">-- multiple handlers</span></span>
<span class="line"><span style="color: #E6E6E6">comment </span><span style="color: #569CD6">on</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">procedure</span><span style="color: #E6E6E6"> simple_upload(</span><span style="color: #569CD6">json</span><span style="color: #E6E6E6">) </span><span style="color: #569CD6">is</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">'</span></span>
<span class="line"><span style="color: #CE9178">upload for large_object, file_system</span></span>
<span class="line"><span style="color: #CE9178">param _meta is upload metadata</span></span>
<span class="line"><span style="color: #CE9178">'</span><span style="color: #E6E6E6">;</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #0000FF">create</span><span style="color: #000000"> </span><span style="color: #0000FF">procedure</span><span style="color: #000000"> simple_upload(</span></span>
<span class="line"><span style="color: #000000">    _meta[] </span><span style="color: #0000FF">json</span><span style="color: #000000"> = </span><span style="color: #0000FF">null</span></span>
<span class="line"><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #0000FF">language</span><span style="color: #000000"> plpgsql</span></span>
<span class="line"><span style="color: #0000FF">as</span><span style="color: #000000"> </span></span>
<span class="line"><span style="color: #000000">$$</span></span>
<span class="line"><span style="color: #0000FF">begin</span></span>
<span class="line"><span style="color: #000000">    raise info </span><span style="color: #A31515">'upload metadata: %'</span><span style="color: #000000">, _meta;</span></span>
<span class="line"><span style="color: #0000FF">end</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">$$;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #008000">-- multiple handlers</span></span>
<span class="line"><span style="color: #000000">comment </span><span style="color: #0000FF">on</span><span style="color: #000000"> </span><span style="color: #0000FF">procedure</span><span style="color: #000000"> simple_upload(</span><span style="color: #0000FF">json</span><span style="color: #000000">) </span><span style="color: #0000FF">is</span><span style="color: #000000"> </span><span style="color: #A31515">'</span></span>
<span class="line"><span style="color: #A31515">upload for large_object, file_system</span></span>
<span class="line"><span style="color: #A31515">param _meta is upload metadata</span></span>
<span class="line"><span style="color: #A31515">'</span><span style="color: #000000">;</span></span></code></pre></div><h4 id="other-improvements">Other Improvements<a class="anchor bookmark-target" href="#other-improvements"><i class="bi bi-link-45deg"></i></a></h4><ol><li><p>Fixed issue with endpoint with default parameters. When they receive non-existing parameters in same number as default parameters, the endpoint now returns 404 instead of 200 error as it should be.</p></li><li><p>Fixed serialization of binary data in the response. From now on, endpoints that return either:</p></li></ol><ul><li>single value of type bytea (binary)</li><li>single column of type setof bytea (binary)</li><li>will be written raw directly to response.</li><li>This allows, for example, displaying images directly from the database.</li></ul><h3 id="npgsqlrest-client-app-1">NpgsqlRest Client App<a class="anchor bookmark-target" href="#npgsqlrest-client-app-1"><i class="bi bi-link-45deg"></i></a></h3><h4 id="external-login-fixes-and-improvements">External Login Fixes and Improvements<a class="anchor bookmark-target" href="#external-login-fixes-and-improvements"><i class="bi bi-link-45deg"></i></a></h4><ul><li><p>External login was fundamentally broken, now it is fixed.</p></li><li><p>External login function is called with the following parameters:</p><ul><li>external login provider (if param exists)</li><li>external login email (if param exists)</li><li>external login name (if param exists)</li><li>external login json data received (if param exists)</li><li>client browser analytics json data (if param exists)</li></ul></li><li><p>To accommodate client browser analytics parameter support, two new config keys were added:</p><ul><li>ClientAnalyticsData - javascript object definition</li><li>ClientAnalyticsIpKey - key name for the IP address that is added to the analytics data</li></ul></li><li><p>Added default configurations for Microsoft and Facebook too</p></li></ul><h4 id="caching-static-files">Caching Static Files<a class="anchor bookmark-target" href="#caching-static-files"><i class="bi bi-link-45deg"></i></a></h4><ul><li><p>This applies only to static content being parsed.</p></li><li><p>Add caching static files to the middleware.</p><ul><li>New key: StaticFiles -> ParseContentOptions -> CacheParsedFile - caches parsed content, default true.</li></ul></li></ul><h4 id="custom-startup-message">Custom Startup Message<a class="anchor bookmark-target" href="#custom-startup-message"><i class="bi bi-link-45deg"></i></a></h4><ul><li>Added custom message on client started listening support.</li><li>Following configuration key was added:</li></ul><div class="code jsonc"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #E6E6E6">{</span></span>
<span class="line"><span style="color: #E6E6E6">  </span><span style="color: #6A9955">//</span></span>
<span class="line"><span style="color: #E6E6E6">  </span><span style="color: #6A9955">// Logs at startup, placeholders:</span></span>
<span class="line"><span style="color: #E6E6E6">  </span><span style="color: #6A9955">// {0} - startup time</span></span>
<span class="line"><span style="color: #E6E6E6">  </span><span style="color: #6A9955">// {1} - listening on urls</span></span>
<span class="line"><span style="color: #E6E6E6">  </span><span style="color: #6A9955">// {2} - current version</span></span>
<span class="line"><span style="color: #E6E6E6">  </span><span style="color: #6A9955">//</span></span>
<span class="line"><span style="color: #E6E6E6">  </span><span style="color: #9CDCFE">"StartupMessage"</span><span style="color: #E6E6E6">: </span><span style="color: #CE9178">"Started in {0}, listening on {1}, version {2}"</span></span>
<span class="line"><span style="color: #E6E6E6">}</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #008000">//</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #008000">// Logs at startup, placeholders:</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #008000">// {0} - startup time</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #008000">// {1} - listening on urls</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #008000">// {2} - current version</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #008000">//</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0451A5">"StartupMessage"</span><span style="color: #000000">: </span><span style="color: #A31515">"Started in {0}, listening on {1}, version {2}"</span></span>
<span class="line"><span style="color: #000000">}</span></span></code></pre></div><ul><li>Format placeholders are optional.</li></ul><h4 id="logging-context-from-applicationname">Logging Context from ApplicationName<a class="anchor bookmark-target" href="#logging-context-from-applicationname"><i class="bi bi-link-45deg"></i></a></h4><ul><li>Using the <code>ApplicationName</code> value (if any) as custom logging context name instead of <code>NpgsqlRest</code>.</li><li>Set <code>ApplicationName</code> to null to keep using <code>NpgsqlRest</code>.</li><li>This applies to both client app logs and core library logs.</li></ul><h4 id="antiforgery-token-support">Antiforgery Token Support<a class="anchor bookmark-target" href="#antiforgery-token-support"><i class="bi bi-link-45deg"></i></a></h4><ul><li>New configuration section in root: <code>Antiforgery</code>:</li></ul><div class="code jsonc"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #E6E6E6">{</span></span>
<span class="line"><span style="color: #E6E6E6">  </span><span style="color: #9CDCFE">"Antiforgery"</span><span style="color: #E6E6E6">: {</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">"Enabled"</span><span style="color: #E6E6E6">: </span><span style="color: #569CD6">false</span><span style="color: #E6E6E6">,</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">"CookieName"</span><span style="color: #E6E6E6">: </span><span style="color: #569CD6">null</span><span style="color: #E6E6E6">,</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">"FormFieldName"</span><span style="color: #E6E6E6">: </span><span style="color: #CE9178">"__RequestVerificationToken"</span><span style="color: #E6E6E6">,</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">"HeaderName"</span><span style="color: #E6E6E6">: </span><span style="color: #CE9178">"RequestVerificationToken"</span><span style="color: #E6E6E6">,</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">"SuppressReadingTokenFromFormBody"</span><span style="color: #E6E6E6">: </span><span style="color: #569CD6">false</span><span style="color: #E6E6E6">,</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">"SuppressXFrameOptionsHeader"</span><span style="color: #E6E6E6">: </span><span style="color: #569CD6">false</span></span>
<span class="line"><span style="color: #E6E6E6">  }</span></span>
<span class="line"><span style="color: #E6E6E6">}</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0451A5">"Antiforgery"</span><span style="color: #000000">: {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">"Enabled"</span><span style="color: #000000">: </span><span style="color: #0000FF">false</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">"CookieName"</span><span style="color: #000000">: </span><span style="color: #0000FF">null</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">"FormFieldName"</span><span style="color: #000000">: </span><span style="color: #A31515">"__RequestVerificationToken"</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">"HeaderName"</span><span style="color: #000000">: </span><span style="color: #A31515">"RequestVerificationToken"</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">"SuppressReadingTokenFromFormBody"</span><span style="color: #000000">: </span><span style="color: #0000FF">false</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">"SuppressXFrameOptionsHeader"</span><span style="color: #000000">: </span><span style="color: #0000FF">false</span></span>
<span class="line"><span style="color: #000000">  }</span></span>
<span class="line"><span style="color: #000000">}</span></span></code></pre></div><ul><li>Antiforgery Tokens are also added as new keys to static content parser:</li></ul><div class="code jsonc"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #E6E6E6">{</span></span>
<span class="line"><span style="color: #E6E6E6">  </span><span style="color: #6A9955">//</span></span>
<span class="line"><span style="color: #E6E6E6">  </span><span style="color: #6A9955">// Static files settings </span></span>
<span class="line"><span style="color: #E6E6E6">  </span><span style="color: #6A9955">//</span></span>
<span class="line"><span style="color: #E6E6E6">  </span><span style="color: #9CDCFE">"StaticFiles"</span><span style="color: #E6E6E6">: {</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #6A9955">// ...</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">"ParseContentOptions"</span><span style="color: #E6E6E6">: {</span></span>
<span class="line"><span style="color: #E6E6E6">      </span><span style="color: #6A9955">// ...</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E6E6E6">      </span><span style="color: #6A9955">//</span></span>
<span class="line"><span style="color: #E6E6E6">      </span><span style="color: #6A9955">// Name of the configured Antiforgery form field name to be used in the static files (see Antiforgery FormFieldName setting).</span></span>
<span class="line"><span style="color: #E6E6E6">      </span><span style="color: #6A9955">//</span></span>
<span class="line"><span style="color: #E6E6E6">      </span><span style="color: #9CDCFE">"AntiforgeryFieldName"</span><span style="color: #E6E6E6">: </span><span style="color: #CE9178">"antiForgeryFieldName"</span><span style="color: #E6E6E6">,</span></span>
<span class="line"><span style="color: #E6E6E6">      </span><span style="color: #6A9955">//</span></span>
<span class="line"><span style="color: #E6E6E6">      </span><span style="color: #6A9955">// Value of the Antiforgery token if Antiforgery is enabled..</span></span>
<span class="line"><span style="color: #E6E6E6">      </span><span style="color: #6A9955">//</span></span>
<span class="line"><span style="color: #E6E6E6">      </span><span style="color: #9CDCFE">"AntiforgeryToken"</span><span style="color: #E6E6E6">: </span><span style="color: #CE9178">"antiForgeryToken"</span></span>
<span class="line"><span style="color: #E6E6E6">    }</span></span>
<span class="line"><span style="color: #E6E6E6">  }</span></span>
<span class="line"><span style="color: #E6E6E6">}</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #008000">//</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #008000">// Static files settings </span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #008000">//</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0451A5">"StaticFiles"</span><span style="color: #000000">: {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #008000">// ...</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">"ParseContentOptions"</span><span style="color: #000000">: {</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #008000">// ...</span></span>
<span class="line"></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #008000">//</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #008000">// Name of the configured Antiforgery form field name to be used in the static files (see Antiforgery FormFieldName setting).</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #008000">//</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0451A5">"AntiforgeryFieldName"</span><span style="color: #000000">: </span><span style="color: #A31515">"antiForgeryFieldName"</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #008000">//</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #008000">// Value of the Antiforgery token if Antiforgery is enabled..</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #008000">//</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0451A5">"AntiforgeryToken"</span><span style="color: #000000">: </span><span style="color: #A31515">"antiForgeryToken"</span></span>
<span class="line"><span style="color: #000000">    }</span></span>
<span class="line"><span style="color: #000000">  }</span></span>
<span class="line"><span style="color: #000000">}</span></span></code></pre></div><h4 id="upload-support-1">Upload Support<a class="anchor bookmark-target" href="#upload-support-1"><i class="bi bi-link-45deg"></i></a></h4><ul><li>New config section in <code>NpgsqlRest</code> section:</li></ul><div class="code jsonc"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #E6E6E6">{</span></span>
<span class="line"><span style="color: #E6E6E6">  </span><span style="color: #6A9955">//...</span></span>
<span class="line"><span style="color: #E6E6E6">  </span><span style="color: #9CDCFE">"NpgsqlRest"</span><span style="color: #E6E6E6">: {</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #6A9955">// ...</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #6A9955">//</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #6A9955">// Upload handlers options</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #6A9955">//</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #9CDCFE">"UploadHandlers"</span><span style="color: #E6E6E6">: {</span></span>
<span class="line"><span style="color: #E6E6E6">      </span><span style="color: #6A9955">//</span></span>
<span class="line"><span style="color: #E6E6E6">      </span><span style="color: #6A9955">// Handler that will be used when upload handler or handlers are not specified.</span></span>
<span class="line"><span style="color: #E6E6E6">      </span><span style="color: #6A9955">//</span></span>
<span class="line"><span style="color: #E6E6E6">      </span><span style="color: #9CDCFE">"DefaultUploadHandler"</span><span style="color: #E6E6E6">: </span><span style="color: #CE9178">"large_object"</span><span style="color: #E6E6E6">,</span></span>
<span class="line"><span style="color: #E6E6E6">      </span><span style="color: #6A9955">//</span></span>
<span class="line"><span style="color: #E6E6E6">      </span><span style="color: #6A9955">// Enables upload handlers for the NpgsqlRest endpoints that uses PostgreSQL Large Objects API</span></span>
<span class="line"><span style="color: #E6E6E6">      </span><span style="color: #6A9955">// Metadata example: {"type": "large_object", "fileName": "file.txt", "contentType": "text/plain", "size": 1234567890, "oid": 1234}</span></span>
<span class="line"><span style="color: #E6E6E6">      </span><span style="color: #6A9955">//</span></span>
<span class="line"><span style="color: #E6E6E6">      </span><span style="color: #9CDCFE">"LargeObjectEnabled"</span><span style="color: #E6E6E6">: </span><span style="color: #569CD6">true</span><span style="color: #E6E6E6">,</span></span>
<span class="line"><span style="color: #E6E6E6">      </span><span style="color: #9CDCFE">"LargeObjectKey"</span><span style="color: #E6E6E6">: </span><span style="color: #CE9178">"large_object"</span><span style="color: #E6E6E6">,</span></span>
<span class="line"><span style="color: #E6E6E6">      </span><span style="color: #9CDCFE">"LargeObjectHandlerBufferSize"</span><span style="color: #E6E6E6">: </span><span style="color: #B5CEA8">8192</span><span style="color: #E6E6E6">,</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E6E6E6">      </span><span style="color: #6A9955">//</span></span>
<span class="line"><span style="color: #E6E6E6">      </span><span style="color: #6A9955">// Enables upload handlers for the NpgsqlRest endpoints that uses file system</span></span>
<span class="line"><span style="color: #E6E6E6">      </span><span style="color: #6A9955">// Metadata example: {"type": "file_system", "fileName": "file.txt", "contentType": "text/plain", "size": 1234567890, "filePath": "/tmp/uploads/CB0B16D6-FF10-4A39-94A4-C7017C09D869.txt"}</span></span>
<span class="line"><span style="color: #E6E6E6">      </span><span style="color: #6A9955">//</span></span>
<span class="line"><span style="color: #E6E6E6">      </span><span style="color: #9CDCFE">"FileSystemEnabled"</span><span style="color: #E6E6E6">: </span><span style="color: #569CD6">true</span><span style="color: #E6E6E6">,</span></span>
<span class="line"><span style="color: #E6E6E6">      </span><span style="color: #9CDCFE">"FileSystemKey"</span><span style="color: #E6E6E6">: </span><span style="color: #CE9178">"file_system"</span><span style="color: #E6E6E6">,</span></span>
<span class="line"><span style="color: #E6E6E6">      </span><span style="color: #9CDCFE">"FileSystemHandlerPath"</span><span style="color: #E6E6E6">: </span><span style="color: #CE9178">"/tmp/uploads"</span><span style="color: #E6E6E6">,</span></span>
<span class="line"><span style="color: #E6E6E6">      </span><span style="color: #9CDCFE">"FileSystemHandlerUseUniqueFileName"</span><span style="color: #E6E6E6">: </span><span style="color: #569CD6">true</span><span style="color: #E6E6E6">,</span></span>
<span class="line"><span style="color: #E6E6E6">      </span><span style="color: #9CDCFE">"FileSystemHandlerCreatePathIfNotExists"</span><span style="color: #E6E6E6">: </span><span style="color: #569CD6">true</span><span style="color: #E6E6E6">,</span></span>
<span class="line"><span style="color: #E6E6E6">      </span><span style="color: #9CDCFE">"FileSystemHandlerBufferSize"</span><span style="color: #E6E6E6">: </span><span style="color: #B5CEA8">8192</span></span>
<span class="line"><span style="color: #E6E6E6">    }</span></span>
<span class="line"><span style="color: #E6E6E6">  }</span></span>
<span class="line"><span style="color: #E6E6E6">}</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #008000">//...</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0451A5">"NpgsqlRest"</span><span style="color: #000000">: {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #008000">// ...</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #008000">//</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #008000">// Upload handlers options</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #008000">//</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">"UploadHandlers"</span><span style="color: #000000">: {</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #008000">//</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #008000">// Handler that will be used when upload handler or handlers are not specified.</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #008000">//</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0451A5">"DefaultUploadHandler"</span><span style="color: #000000">: </span><span style="color: #A31515">"large_object"</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #008000">//</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #008000">// Enables upload handlers for the NpgsqlRest endpoints that uses PostgreSQL Large Objects API</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #008000">// Metadata example: {"type": "large_object", "fileName": "file.txt", "contentType": "text/plain", "size": 1234567890, "oid": 1234}</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #008000">//</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0451A5">"LargeObjectEnabled"</span><span style="color: #000000">: </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0451A5">"LargeObjectKey"</span><span style="color: #000000">: </span><span style="color: #A31515">"large_object"</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0451A5">"LargeObjectHandlerBufferSize"</span><span style="color: #000000">: </span><span style="color: #098658">8192</span><span style="color: #000000">,</span></span>
<span class="line"></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #008000">//</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #008000">// Enables upload handlers for the NpgsqlRest endpoints that uses file system</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #008000">// Metadata example: {"type": "file_system", "fileName": "file.txt", "contentType": "text/plain", "size": 1234567890, "filePath": "/tmp/uploads/CB0B16D6-FF10-4A39-94A4-C7017C09D869.txt"}</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #008000">//</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0451A5">"FileSystemEnabled"</span><span style="color: #000000">: </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0451A5">"FileSystemKey"</span><span style="color: #000000">: </span><span style="color: #A31515">"file_system"</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0451A5">"FileSystemHandlerPath"</span><span style="color: #000000">: </span><span style="color: #A31515">"/tmp/uploads"</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0451A5">"FileSystemHandlerUseUniqueFileName"</span><span style="color: #000000">: </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0451A5">"FileSystemHandlerCreatePathIfNotExists"</span><span style="color: #000000">: </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0451A5">"FileSystemHandlerBufferSize"</span><span style="color: #000000">: </span><span style="color: #098658">8192</span></span>
<span class="line"><span style="color: #000000">    }</span></span>
<span class="line"><span style="color: #000000">  }</span></span>
<span class="line"><span style="color: #000000">}</span></span></code></pre></div><h2 id="version-2220-2025-04-07">Version <a href="https://github.com/vb-consulting/NpgsqlRest/tree/2.22.0">2.22.0</a> (2025-04-07)<a class="anchor bookmark-target" href="#version-2220-2025-04-07"><i class="bi bi-link-45deg"></i></a></h2><p><a href="https://github.com/vb-consulting/NpgsqlRest/compare/2.22.0...2.21.0">Full Changelog</a></p><h3 id="improved-logging">Improved Logging<a class="anchor bookmark-target" href="#improved-logging"><i class="bi bi-link-45deg"></i></a></h3><p>Improved Logging for Endpoint creation to include routine and endpoint:</p><div class="one-liner"><div class="code console"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #E6E6E6">[14:56:17.477 INF] Function auth.login mapped to POST /api/auth/login has set ALLOW ANONYMOUS by the comment annotation. [NpgsqlRest]</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #000000">[14:56:17.477 INF] Function auth.login mapped to POST /api/auth/login has set ALLOW ANONYMOUS by the comment annotation. [NpgsqlRest]</span></span></code></pre></div></div><h3 id="fixed-crud-plugin">Fixed CRUD Plugin<a class="anchor bookmark-target" href="#fixed-crud-plugin"><i class="bi bi-link-45deg"></i></a></h3><p>CRUD Endpoints are finally getting some love:</p><ul><li>Fixed issue with connection as data source.</li><li>Added new tags: <code>onconflict</code>, <code>on_conflict</code> and <code>on-conflict</code> to generated endpoints handling with on conflict resolutions.</li></ul><p>Now it's possible to enable or disable those endpoints explicitly with comment annotations:</p><div class="code sql"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">create</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">table</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">test</span><span style="color: #E6E6E6">.crud_table (</span></span>
<span class="line"><span style="color: #E6E6E6">    id </span><span style="color: #569CD6">bigint</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">generated</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">always</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">as</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">identity</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">primary key</span><span style="color: #E6E6E6">,</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #569CD6">name</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">text</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">not null</span><span style="color: #E6E6E6">,</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #569CD6">description</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">text</span><span style="color: #E6E6E6">,</span></span>
<span class="line"><span style="color: #E6E6E6">    created_at </span><span style="color: #569CD6">timestamp</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">default</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">now</span><span style="color: #E6E6E6">()</span></span>
<span class="line"><span style="color: #E6E6E6">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">comment on table test.crud_table is </span><span style="color: #CE9178">'</span></span>
<span class="line"><span style="color: #CE9178">HTTP</span></span>
<span class="line"><span style="color: #CE9178">for on-conflict </span></span>
<span class="line"><span style="color: #CE9178">disabled</span></span>
<span class="line"><span style="color: #CE9178">'</span><span style="color: #E6E6E6">;</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #0000FF">create</span><span style="color: #000000"> </span><span style="color: #0000FF">table</span><span style="color: #000000"> </span><span style="color: #795E26">test</span><span style="color: #000000">.crud_table (</span></span>
<span class="line"><span style="color: #000000">    id </span><span style="color: #0000FF">bigint</span><span style="color: #000000"> </span><span style="color: #0000FF">generated</span><span style="color: #000000"> </span><span style="color: #0000FF">always</span><span style="color: #000000"> </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #0000FF">identity</span><span style="color: #000000"> </span><span style="color: #0000FF">primary key</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">name</span><span style="color: #000000"> </span><span style="color: #0000FF">text</span><span style="color: #000000"> </span><span style="color: #0000FF">not null</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">description</span><span style="color: #000000"> </span><span style="color: #0000FF">text</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    created_at </span><span style="color: #0000FF">timestamp</span><span style="color: #000000"> </span><span style="color: #0000FF">default</span><span style="color: #000000"> </span><span style="color: #0000FF">now</span><span style="color: #000000">()</span></span>
<span class="line"><span style="color: #000000">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0000FF">comment on table test.crud_table is </span><span style="color: #A31515">'</span></span>
<span class="line"><span style="color: #A31515">HTTP</span></span>
<span class="line"><span style="color: #A31515">for on-conflict </span></span>
<span class="line"><span style="color: #A31515">disabled</span></span>
<span class="line"><span style="color: #A31515">'</span><span style="color: #000000">;</span></span></code></pre></div><h2 id="version-2210-2025-03-24">Version <a href="https://github.com/vb-consulting/NpgsqlRest/tree/2.21.0">2.21.0</a> (2025-03-24)<a class="anchor bookmark-target" href="#version-2210-2025-03-24"><i class="bi bi-link-45deg"></i></a></h2><p><a href="https://github.com/vb-consulting/NpgsqlRest/compare/2.21.0...2.20.0">Full Changelog</a></p><h3 id="support-for-multiple-connections">Support For Multiple Connections<a class="anchor bookmark-target" href="#support-for-multiple-connections"><i class="bi bi-link-45deg"></i></a></h3><p>In this version, it is possible to set multiple connections by using the <code>ConnectionStrings</code> dictionary option and setting the correct <code>ConnectionName</code> on the routine endpoint.</p><ul><li>New option:</li></ul><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #6A9955">/// </span><span style="color: #808080">&lt;</span><span style="color: #569CD6">summary</span><span style="color: #808080">></span></span>
<span class="line"><span style="color: #6A9955">/// Dictionary of connection strings. The key is the connection name and the value is the connection string.</span></span>
<span class="line"><span style="color: #6A9955">/// This option is used when the RoutineEndpoint has a connection name defined.</span></span>
<span class="line"><span style="color: #6A9955">/// This allows the middleware to use different connection strings for different routines.</span></span>
<span class="line"><span style="color: #6A9955">/// For example, some routines might use the primary database connection string, while others might use a read-only connection string from the replica servers.</span></span>
<span class="line"><span style="color: #6A9955">/// </span><span style="color: #808080">&lt;/</span><span style="color: #569CD6">summary</span><span style="color: #808080">></span></span>
<span class="line"><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">IDictionary</span><span style="color: #D4D4D4">&lt;</span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">string</span><span style="color: #D4D4D4">>?</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">ConnectionStrings</span><span style="color: #E6E6E6"> { </span><span style="color: #9CDCFE">get</span><span style="color: #E6E6E6">; </span><span style="color: #9CDCFE">set</span><span style="color: #E6E6E6">; } </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connectionStrings</span><span style="color: #E6E6E6">;</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #008000">/// </span><span style="color: #800000">&lt;summary></span></span>
<span class="line"><span style="color: #008000">/// Dictionary of connection strings. The key is the connection name and the value is the connection string.</span></span>
<span class="line"><span style="color: #008000">/// This option is used when the RoutineEndpoint has a connection name defined.</span></span>
<span class="line"><span style="color: #008000">/// This allows the middleware to use different connection strings for different routines.</span></span>
<span class="line"><span style="color: #008000">/// For example, some routines might use the primary database connection string, while others might use a read-only connection string from the replica servers.</span></span>
<span class="line"><span style="color: #008000">/// </span><span style="color: #800000">&lt;/summary></span></span>
<span class="line"><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #001080">IDictionary</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">string</span><span style="color: #000000">, </span><span style="color: #0000FF">string</span><span style="color: #000000">>? </span><span style="color: #001080">ConnectionStrings</span><span style="color: #000000"> { </span><span style="color: #001080">get</span><span style="color: #000000">; </span><span style="color: #001080">set</span><span style="color: #000000">; } = </span><span style="color: #001080">connectionStrings</span><span style="color: #000000">;</span></span></code></pre></div><ul><li>New property on the routine endpoint:</li></ul><div class="one-liner"><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">string</span><span style="color: #D4D4D4">?</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">ConnectionName</span><span style="color: #E6E6E6"> { </span><span style="color: #9CDCFE">get</span><span style="color: #E6E6E6">; </span><span style="color: #9CDCFE">set</span><span style="color: #E6E6E6">; } </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connectionName</span><span style="color: #E6E6E6">;</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">string</span><span style="color: #000000">? </span><span style="color: #001080">ConnectionName</span><span style="color: #000000"> { </span><span style="color: #001080">get</span><span style="color: #000000">; </span><span style="color: #001080">set</span><span style="color: #000000">; } = </span><span style="color: #001080">connectionName</span><span style="color: #000000">;</span></span></code></pre></div></div><p>The default value for all these properties is null.</p><p>Set the ConnectionStrings dictionary to alternate connection and then set ConnectionName for a specific connection key name. If the key doesn't exist, the endpoint will return 500 (Internal Server Error).</p><p>This feature was added to add support for configuring certain routines to be executed on read-only replicas.</p><h2 id="version-2200-2025-03-05">Version <a href="https://github.com/vb-consulting/NpgsqlRest/tree/2.20.0">2.20.0</a> (2025-03-05)<a class="anchor bookmark-target" href="#version-2200-2025-03-05"><i class="bi bi-link-45deg"></i></a></h2><p><a href="https://github.com/vb-consulting/NpgsqlRest/compare/2.20.0...2.19.0">Full Changelog</a></p><p>Many changes:</p><h3 id="1-breaking-changes-in-interfaces">1) Breaking changes in interfaces<a class="anchor bookmark-target" href="#1-breaking-changes-in-interfaces"><i class="bi bi-link-45deg"></i></a></h3><p>There are some small breaking changes in public interfaces. These are just simplifications:</p><p>From this version, <code>RoutineEndpoint</code> has a <code>Routine</code> read-only property. This allows simplification where we don't have to have these two parameters: <code>RoutineEndpoint</code> and <code>Routine</code>.</p><p>We can only have one <code>RoutineEndpoint</code>. Every interface and structure that had these two parameters, fields, or properties now only has one: <code>RoutineEndpoint</code>.</p><h3 id="2-logging-improvements">2) Logging improvements<a class="anchor bookmark-target" href="#2-logging-improvements"><i class="bi bi-link-45deg"></i></a></h3><ul><li>New option:</li></ul><pre><code class="language-cs">/// &lt;summary>
/// MessageOnly - Log only connection messages.
/// FirstStackFrameAndMessage - Log first stack frame and the message.
/// FullStackAndMessage - Log full stack trace and message.
/// &lt;/summary>
public PostgresConnectionNoticeLoggingMode LogConnectionNoticeEventsMode { get; set; } = PostgresConnectionNoticeLoggingMode.FirstStackFrameAndMessage;
</code></pre><p>The default is the <code>FirstStackFrameAndMessage</code> that logs only the first stack frame and the message. In chained calls, the stack frame can be longer and obfuscate the log message. This option will show only the first (starting) stack frame along with the message.</p><ul><li><p>The log pattern was also slightly changed. The last two options now look like this: <code>" {where}:\n{message}"</code>.</p></li><li><p>Fix: Fixed parameter ordinal number when logging command parameters (<code>LogCommands</code> and <code>LogCommandParameters</code> options are true).</p></li></ul><h3 id="3-caching-improvements">3) Caching Improvements<a class="anchor bookmark-target" href="#3-caching-improvements"><i class="bi bi-link-45deg"></i></a></h3><p>In the previous version, some basic response caching in server memory was introduced (when the routine is marked as cached). This feature is now massively improved:</p><ul><li>Injectable Cache Object</li></ul><p>Cache Object can be injected in options by using the new <code>DefaultRoutineCache</code></p><pre><code class="language-cs">/// &lt;summary>
/// Default routine cache object. Inject custom cache object to override default cache.
/// &lt;/summary>
public IRoutineCache DefaultRoutineCache { get; set; } = defaultRoutineCache ?? new RoutineCache();
</code></pre><p>Interface <code>IRoutineCache</code> can implement any caching strategy:</p><pre><code class="language-cs">public interface IRoutineCache
{
    bool Get(RoutineEndpoint endpoint, string key, out string? result);
    void AddOrUpdate(RoutineEndpoint endpoint, string key, string? value);
}
</code></pre><p>There is a new default cache implementation that supports a cache expiration time span.</p><ul><li>Cache Expiration</li></ul><p>Cache expiration can be defined on a <code>RoutineEndpoint</code> property, together with other caching properties</p><pre><code class="language-cs">public bool Cached { get; set; } = cached;
public HashSet&lt;string>? CachedParams { get; set; } = cachedParams?.ToHashSet();
public TimeSpan? CacheExpiresIn { get; set; } = cacheExpiresIn;
</code></pre><p>It can also be set as routine comment annotation by using any of these annotation tags:</p><pre><code>cacheexpires [ time_span_value ]
cacheexpiresin [ time_span_value ]
cache-expires [ time_span_value ]
cache-expires-in [ time_span_value ]
cache_expires [ time_span_value ]
cache_expires_in [ time_span_value ]
</code></pre><p>Value is a simplified PostgreSQL interval value, for example, <code>10s</code> or <code>10sec</code> for 10 seconds, <code>5d</code> is for 5 days, and so on. Space between is also allowed. For example, <code>3h</code>, <code>3 hours</code>, <code>3 h</code>, and <code>3 hours</code> are the same.</p><p>Valid abbreviations are:</p><table class="table table-hover table-sm table-responsive-sm table-striped table-bordered"><thead><tr><th>abbr</th><th>meaning</th></tr></thead><tbody class="table-group-divider"><tr><td><code>s</code>, <code>sec</code>, <code>second</code> or <code>seconds</code></td><td>value is expressed in seconds</td></tr><tr><td><code>m</code>, <code>min</code>, <code>minute</code> or <code>minutes</code></td><td>value is expressed in minutes</td></tr><tr><td><code>h</code>, <code>hour</code>, <code>hours</code></td><td>value is expressed in hours</td></tr><tr><td><code>d</code>, <code>day</code>, <code>days</code></td><td>value is expressed in days</td></tr></tbody></table><ul><li>Other Cache Improvements</li></ul><p>There are some other improvements, such as avoiding unnecessary allocations when returning from the cache, creating a connection, and so on.</p><p>There is also a new option to set cache prune interval:</p><pre><code class="language-cs">/// &lt;summary>
/// When cache is enabled, this value sets the interval in minutes for cache pruning (removing expired entries). Default is 1 minute.
/// &lt;/summary>
public int CachePruneIntervalMin { get; set; } = 1;
</code></pre><p>This is the interval in minutes that, if the cache is used, will remove expired items in this interval.</p><h3 id="4-responses-parser">4) Responses Parser<a class="anchor bookmark-target" href="#4-responses-parser"><i class="bi bi-link-45deg"></i></a></h3><p>From this version, it is possible to inject a custom response parser mechanism by using a new option:</p><pre><code class="language-cs">/// &lt;summary>
/// Default response parser object. Inject custom response parser object to add default response parser.
/// &lt;/summary>
public IResponseParser? DefaultResponseParser { get; set; } = null;
</code></pre><p>You can set a custom implementation to the <code>DefaultResponseParser</code> option that implements the <code>IResponseParser</code> interface:</p><pre><code class="language-cs">public interface IResponseParser
{
    /// &lt;summary>
    /// Parse response from PostgreSQL.
    /// &lt;/summary>
    /// &lt;returns>Response string&lt;/returns>
    ReadOnlySpan&lt;char> Parse(ReadOnlySpan&lt;char> input, RoutineEndpoint endpoint, HttpContext context);
}
</code></pre><p>This is useful when response content needs to be enriched from the Http context, such as user claims, IP address, etc.</p><p>In order to call this parser, <code>RoutineEndpoint</code> needs to have <code>ParseResponse</code> set to true (default is false).</p><p>This also can be set by using new comment annotations:</p><pre><code>parse
parseresponse
parse_response
parse-response
</code></pre><p>When <code>ParseResponse</code> is set to true on the endpoint, and DefaultResponseParser has been set to nonnull instance, the response will be parsed and returned from the <code>Parse</code> method always, even when it is cached.</p><h2 id="version-2190-2025-02-24">Version <a href="https://github.com/vb-consulting/NpgsqlRest/tree/2.19.0">2.19.0</a> (2025-02-24)<a class="anchor bookmark-target" href="#version-2190-2025-02-24"><i class="bi bi-link-45deg"></i></a></h2><p><a href="https://github.com/vb-consulting/NpgsqlRest/compare/2.19.0...2.18.0">Full Changelog</a></p><p>New routine annotation and new endpoint options:</p><div class="code console"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #E6E6E6">cached                                          </span></span>
<span class="line"><span style="color: #E6E6E6">cached [ param1, param2, param3 [, ...] ]       </span></span>
<span class="line"><span style="color: #E6E6E6">cached [ param1 param2 param3 [...] ]</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #000000">cached                                          </span></span>
<span class="line"><span style="color: #000000">cached [ param1, param2, param3 [, ...] ]       </span></span>
<span class="line"><span style="color: #000000">cached [ param1 param2 param3 [...] ]</span></span></code></pre></div><p>If the routine returns a single value of any type, result will be cached in memory and retrieved from memory on next call. Use the optional list of parameter names (original or converted) to be used as additional cache keys.</p><p>Same can be set programmatically directly on the endpoint settings:</p><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">bool</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">Cached</span><span style="color: #E6E6E6"> { </span><span style="color: #9CDCFE">get</span><span style="color: #E6E6E6">; </span><span style="color: #9CDCFE">set</span><span style="color: #E6E6E6">; } </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">false</span><span style="color: #E6E6E6">;</span></span>
<span class="line"><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">HashSet</span><span style="color: #D4D4D4">&lt;</span><span style="color: #569CD6">string</span><span style="color: #D4D4D4">>?</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">CachedParams</span><span style="color: #E6E6E6"> { </span><span style="color: #9CDCFE">get</span><span style="color: #E6E6E6">; </span><span style="color: #9CDCFE">set</span><span style="color: #E6E6E6">; } </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">null</span><span style="color: #E6E6E6">;</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">bool</span><span style="color: #000000"> </span><span style="color: #001080">Cached</span><span style="color: #000000"> { </span><span style="color: #001080">get</span><span style="color: #000000">; </span><span style="color: #001080">set</span><span style="color: #000000">; } = </span><span style="color: #0000FF">false</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #001080">HashSet</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">string</span><span style="color: #000000">>? </span><span style="color: #001080">CachedParams</span><span style="color: #000000"> { </span><span style="color: #001080">get</span><span style="color: #000000">; </span><span style="color: #001080">set</span><span style="color: #000000">; } = </span><span style="color: #0000FF">null</span><span style="color: #000000">;</span></span></code></pre></div><p>If the associated routine doesn't return a single value of any type, there will be a warning on startup and cache will be ignored.</p><p>Results from cache will have <code>[from cache]</code> tag in execution log.</p><hr><h2 id="older-versions">Older Versions<a class="anchor bookmark-target" href="#older-versions"><i class="bi bi-link-45deg"></i></a></h2><p>The changelog for the previous version can be found here: <a href="https://github.com/vb-consulting/NpgsqlRest/blob/2.0.0/changelog-old.md">Changelog Archive</a></p><hr><div class="pt-5 border-top"><div id="comments-section" class="h5">Comments</div><script defer src="https://cdn.commento.io/js/commento.js" data-no-fonts="true" data-css-override="https://vb-consulting.github.io/style.css"></script><div id="commento"></div></div><footer class="mt-3 py-5"><div class="w-fit mx-auto mb-3 border-top border-bottom"><div class="alert text-center fs-smaller text-muted"><div class="alert text-center fs-smaller text-muted mb-1">If you like my content, use my software, or otherwise benefit from my work, consider supporting me by buying me a coffee. The software runs on coffee after all.</div><a class="btn rl-arrow" target="_blank" data-bs-toggle="tooltip" data-bs-html="true" title="Click Here to Buy Me a Coffee Or Scan the Code" href="https://www.buymeacoffee.com/vbilopavu" style="display: inline-grid;">Buy me a Coffee <img class="m-auto svelte-byttq0" alt="Scan Here To Buy Me a Cofee" src="/bmc_qr.png"></a></div></div><div class="d-flex justify-content-center"><a class="btn rl-arrow me-1" target="_blank" data-bs-toggle="tooltip" data-bs-html="true" title="changelog.md on GitHub" href="https://github.com/vb-consulting/NpgsqlRest/blob/master/changelog.md" style="display: inline-grid;">changelog.md on GitHub <i class="bi bi-github"></i></a> <a class="btn rl-arrow" target="_blank" data-bs-toggle="tooltip" data-bs-html="true" title="I Post Software Development Content Daily" href="https://www.linkedin.com/in/vb-software/" style="display: inline-grid;">Follow me on LinkedIn <i class="bi bi-linkedin"></i></a></div><div class="text-center"><div class="mt-5 mb-5 background-floki svelte-byttq0" data-bs-toggle="tooltip" data-bs-html="true" title="Floki is a developer dog."></div></div></footer></div></div><div class="rightside svelte-9zwk14"><div class="svelte-9zwk14"><ul class="navbar-nav sidenav svelte-9zwk14"><li class="nav-txt-divider text-muted svelte-9zwk14"><hr class="svelte-9zwk14"><span class="svelte-9zwk14">on this page</span><hr class="svelte-9zwk14"></li><li class="nav-item toc1 right svelte-9zwk14 bookmark-nav" data-id="changelog" title="Changelog"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#changelog">Changelog</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="version-2240-2025-04-29" title="Version 2.24.0 (2025-04-29)"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#version-2240-2025-04-29">Version 2.24.0 (2025-04-29)</a></li><li class="nav-item toc3 right svelte-9zwk14 bookmark-nav" data-id="core-npgsqlrest-library" title="Core NpgsqlRest Library"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#core-npgsqlrest-library">Core NpgsqlRest Library</a></li><li class="nav-item toc3 right svelte-9zwk14 bookmark-nav" data-id="npgsqlrest-client-app" title="NpgsqlRest Client App"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#npgsqlrest-client-app">NpgsqlRest Client App</a></li><li class="nav-item toc2 mt-2 right svelte-9zwk14 bookmark-nav" data-id="version-2230-2025-04-28" title="Version 2.23.0 (2025-04-28)"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#version-2230-2025-04-28">Version 2.23.0 (2025-04-28)</a></li><li class="nav-item toc3 right svelte-9zwk14 bookmark-nav" data-id="tsclient-plugin-fixes" title="TsClient Plugin Fixes"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#tsclient-plugin-fixes">TsClient Plugin Fixes</a></li><li class="nav-item toc3 right svelte-9zwk14 bookmark-nav" data-id="core-npgsqlrest-library-1" title="Core NpgsqlRest Library"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#core-npgsqlrest-library-1">Core NpgsqlRest Library</a></li><li class="nav-item toc4 right svelte-9zwk14 bookmark-nav" data-id="simplified-endpointcreated-option-event" title="Simplified EndpointCreated Option Event"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#simplified-endpointcreated-option-event">Simplified EndpointCreated Option Event</a></li><li class="nav-item toc4 right svelte-9zwk14 bookmark-nav" data-id="added-path-to-comment-annotation-parser" title="Added PATH to Comment Annotation Parser"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#added-path-to-comment-annotation-parser">Added PATH to Comment Annotation Parser</a></li><li class="nav-item toc4 right svelte-9zwk14 bookmark-nav" data-id="added-securitysensitive-routine-option" title="Added SecuritySensitive Routine Option"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#added-securitysensitive-routine-option">Added SecuritySensitive Routine Option</a></li><li class="nav-item toc4 right svelte-9zwk14 bookmark-nav" data-id="hashing-capabilities" title="Hashing Capabilities"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#hashing-capabilities">Hashing Capabilities</a></li><li class="nav-item toc5 right svelte-9zwk14 bookmark-nav" data-id="mark-parameter-as-hash" title="Mark Parameter as Hash"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#mark-parameter-as-hash">Mark Parameter as Hash</a></li><li class="nav-item toc5 right svelte-9zwk14 bookmark-nav" data-id="login-endpoints-can-verify-hashes" title="Login Endpoints Can Verify Hashes"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#login-endpoints-can-verify-hashes">Login Endpoints Can Verify Hashes</a></li><li class="nav-item toc4 mt-2 right svelte-9zwk14 bookmark-nav" data-id="upload-support" title="Upload Support"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#upload-support">Upload Support</a></li><li class="nav-item toc4 right svelte-9zwk14 bookmark-nav" data-id="other-improvements" title="Other Improvements"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#other-improvements">Other Improvements</a></li><li class="nav-item toc3 mt-2 right svelte-9zwk14 bookmark-nav" data-id="npgsqlrest-client-app-1" title="NpgsqlRest Client App"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#npgsqlrest-client-app-1">NpgsqlRest Client App</a></li><li class="nav-item toc4 right svelte-9zwk14 bookmark-nav" data-id="external-login-fixes-and-improvements" title="External Login Fixes and Improvements"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#external-login-fixes-and-improvements">External Login Fixes and Improvements</a></li><li class="nav-item toc4 right svelte-9zwk14 bookmark-nav" data-id="caching-static-files" title="Caching Static Files"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#caching-static-files">Caching Static Files</a></li><li class="nav-item toc4 right svelte-9zwk14 bookmark-nav" data-id="custom-startup-message" title="Custom Startup Message"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#custom-startup-message">Custom Startup Message</a></li><li class="nav-item toc4 right svelte-9zwk14 bookmark-nav" data-id="logging-context-from-applicationname" title="Logging Context from ApplicationName"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#logging-context-from-applicationname">Logging Context from ApplicationName</a></li><li class="nav-item toc4 right svelte-9zwk14 bookmark-nav" data-id="antiforgery-token-support" title="Antiforgery Token Support"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#antiforgery-token-support">Antiforgery Token Support</a></li><li class="nav-item toc4 right svelte-9zwk14 bookmark-nav" data-id="upload-support-1" title="Upload Support"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#upload-support-1">Upload Support</a></li><li class="nav-item toc2 mt-2 right svelte-9zwk14 bookmark-nav" data-id="version-2220-2025-04-07" title="Version 2.22.0 (2025-04-07)"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#version-2220-2025-04-07">Version 2.22.0 (2025-04-07)</a></li><li class="nav-item toc3 right svelte-9zwk14 bookmark-nav" data-id="improved-logging" title="Improved Logging"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#improved-logging">Improved Logging</a></li><li class="nav-item toc3 right svelte-9zwk14 bookmark-nav" data-id="fixed-crud-plugin" title="Fixed CRUD Plugin"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#fixed-crud-plugin">Fixed CRUD Plugin</a></li><li class="nav-item toc2 mt-2 right svelte-9zwk14 bookmark-nav" data-id="version-2210-2025-03-24" title="Version 2.21.0 (2025-03-24)"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#version-2210-2025-03-24">Version 2.21.0 (2025-03-24)</a></li><li class="nav-item toc3 right svelte-9zwk14 bookmark-nav" data-id="support-for-multiple-connections" title="Support For Multiple Connections"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#support-for-multiple-connections">Support For Multiple Connections</a></li><li class="nav-item toc2 mt-2 right svelte-9zwk14 bookmark-nav" data-id="version-2200-2025-03-05" title="Version 2.20.0 (2025-03-05)"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#version-2200-2025-03-05">Version 2.20.0 (2025-03-05)</a></li><li class="nav-item toc3 right svelte-9zwk14 bookmark-nav" data-id="1-breaking-changes-in-interfaces" title="1) Breaking changes in interfaces"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#1-breaking-changes-in-interfaces">1) Breaking changes in interfaces</a></li><li class="nav-item toc3 right svelte-9zwk14 bookmark-nav" data-id="2-logging-improvements" title="2) Logging improvements"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#2-logging-improvements">2) Logging improvements</a></li><li class="nav-item toc3 right svelte-9zwk14 bookmark-nav" data-id="3-caching-improvements" title="3) Caching Improvements"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#3-caching-improvements">3) Caching Improvements</a></li><li class="nav-item toc3 right svelte-9zwk14 bookmark-nav" data-id="4-responses-parser" title="4) Responses Parser"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#4-responses-parser">4) Responses Parser</a></li><li class="nav-item toc2 mt-2 right svelte-9zwk14 bookmark-nav" data-id="version-2190-2025-02-24" title="Version 2.19.0 (2025-02-24)"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#version-2190-2025-02-24">Version 2.19.0 (2025-02-24)</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="older-versions" title="Older Versions"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#older-versions">Older Versions</a></li></ul></div></div></main><script>!function(){var i=document.querySelector("nav.navbar"),f=document.getElementsByTagName("main")[0],L=f.getElementsByClassName("sidebar")[0],w=f.getElementsByClassName("content")[0],o=document.querySelectorAll("div.code"),k=i.querySelector(".home");function E(e,t){for(var n=1;n<arguments.length;n++)e.classList.remove(arguments[n])}function T(e,t){for(var n=1;n<arguments.length;n++)e.classList.remove(arguments[n]);E(e,t),e.classList.add(t)}function t(e,t){var n=e.currentTarget;if(!n.classList.contains("bi-check")){for(var i="",o=0;o<n.classList.length;o++)if(n.classList[o].startsWith("bi-")){i=n.classList[o];break}n.classList.remove(i),n.classList.add("spinner-border-sm"),n.classList.add("spinner-border");e=bootstrap.Tooltip.getInstance(n);e&&(e.setContent({".tooltip-inner":"Copying..."}),e.show()),t(n,function(){var e;n.classList.remove(i),n.classList.remove("spinner-border-sm"),n.classList.remove("spinner-border"),n.classList.add("bi-check"),bootstrap&&(e=bootstrap.Tooltip.getInstance(n))&&(e.setContent({".tooltip-inner":"Copied!"}),e.show()),setTimeout(function(){var e;n.classList.add(i),n.classList.remove("bi-check"),bootstrap&&(e=bootstrap.Tooltip.getInstance(n))&&e.setContent({".tooltip-inner":n.dataset.bsTitle})},2e3)})}}"/"==document.location.pathname&&T(k,"d-none");var e=document.querySelector(".post-share > .copy-url"),n=(e&&e.addEventListener("click",function(e){t(e,function(e,t){navigator.clipboard.writeText(document.location.origin+document.location.pathname),t()})}),document.getElementsByTagName("html")[0]),a=i.querySelector("#theme-btn"),s="theme";function l(e){var t=a.getElementsByTagName("svg");"dark"===e?(t[0].style.display="",t[1].style.display="none",a.getElementsByClassName("check")[0].classList.add("checked")):(t[0].style.display="none",t[1].style.display="",a.getElementsByClassName("check")[0].classList.remove("checked"));for(var n=0;n<o.length;n++){var i=o[n];"dark"===e?(i.children[1].style.display="inherit",i.children[2].style.display="none"):"light"===e&&(i.children[1].style.display="none",i.children[2].style.display="inherit")}window._theme&&window._theme(e)}function r(e){t(e,function(e,t){navigator.clipboard.writeText(e.parentElement.nextSibling.innerText),t()})}function c(e){t(e,function(e,t){var n=localStorage.getItem(s);e="dark"===n?e.parentElement.parentElement.children[1]:e.parentElement.parentElement.children[2],setTimeout(function(){html2canvas(e).then(e=>{e.toBlob(e=>navigator.clipboard.write([new ClipboardItem({"image/png":e})])),t()})},0)})}a.addEventListener("click",()=>{var e="dark"===localStorage.getItem(s)?"light":"dark";localStorage.setItem(s,e),l(n.dataset.bsTheme=e)}),l(localStorage.getItem(s)),a.children[0].classList.remove("hidden");for(var d=0;d<o.length;d++){o[d].getElementsByClassName("copy-code")[0].addEventListener("click",r);var m=o[d].getElementsByClassName("photo-code");m.length&&m[0].addEventListener("click",c)}for(var S=function(){var a,o,s;if(f.children[2]&&"none"!=f.children[2].style.display)return a=f.querySelector(".main-content").querySelectorAll("[id]"),o=void 0,this.initNavs=function(e){s=e.querySelectorAll("li.bookmark-nav");for(var t=0;t<a.length;t++){for(var n=a[t].id,i=null,o=0;o<s.length;o++)if(s[o].dataset.id==n){i=s[o];break}a[t].nav=i}setTimeout(function(){for(var e=0;e<a.length;e++){var t=a[e];if(l(t).visible&&t.nav)return void t.nav.classList.add("active")}},1e3),r()},f.children[1].addEventListener("scroll",r),this;function l(e){var e=e.getBoundingClientRect(),t=Math.max(document.documentElement.clientHeight,window.innerHeight),n=0<e.top&&!(e.bottom<0||0<=e.top-t)||e.top<0&&e.bottom>t,i=!1;return{visible:n,above:i=n?i:e.bottom<t}}function r(){if(s&&s.length){for(var e=0;e<s.length;e++)s[e].classList.remove("active");for(var t=void 0,e=0;e<a.length;e++){const i=a[e];var n=l(i);if(!n.visible&&n.above&&(t=i.nav),n.visible&&i.nav&&!i.nav.classList.contains("active"))return i.nav.classList.add("active"),o&&clearTimeout(o),void(o=setTimeout(function(){i.nav.scrollIntoView({behavior:"smooth"}),o=void 0},250))}t&&!t.classList.contains("active")&&(t.classList.add("active"),o&&clearTimeout(o),o=setTimeout(function(){t.scrollIntoView({behavior:"smooth"}),o=void 0},250))}}}(),h=function(){var l,r=i.querySelector("#nav-btn"),c=480,d="200px",m="0.25fr",h=730,v=535,u=f.children[0].children[0].children[0],g=f.children[2]&&f.children[2].children[0].children[0],t="sidebar-pinned",p=null==localStorage.getItem(t)||"true"==localStorage.getItem(t),y=!1,b=!1;function n(){window._onresize&&window._onresize();var e=window.outerWidth||window.innerWidth,t=e<c,n=t?y?"100%":"0":p?""+d:"0",i=`grid-template-columns: ${n} 1fr`,o=t&&y?"width: 100%":"0"!=n?"":"display: none",a=t&&y?"display: none":"",s=t?y?"sidebar-show":"sidebar-hide":p?"sidebar-show":"sidebar-hide",n="0"==n;f.children[2]&&(m&&h&&v&&(n&&e<v||!n&&e<h?b||(u.innerHTML=l+g.innerHTML,S.initNavs(u),b=!0):b&&(u.innerHTML=l,S.initNavs(g),b=!1)),!m||t||b?(i+=";",f.children[2].style.display="none"):(i+=` ${m};`,f.children[2].style.display="")),T(r,!t&&p||t&&y?"rotate":"rotate-back","rotate","rotate-back"),p?(r.classList.add("text-shadow"),null==document.querySelector("main .sidebar .accordion > [title='VB-Consulting'] > .collapsed")&&T(k,"d-none")):("/"!=document.location.pathname&&E(k,"d-none"),r.classList.remove("text-shadow")),f.style=L?i:"display: grid;",L&&T(L,s,"sidebar-show","sidebar-hide"),L&&(L.firstChild.style=o),w.style=a,t&&!y&&"/"!=document.location.pathname&&E(k,"d-none"),t&&y&&T(k,"d-none")}function e(){var e=window.outerWidth<c;e?y=!y:p=!p,localStorage.setItem(t,p.toString()),n(),p?(r.classList.add("text-shadow"),null==document.querySelector("main .sidebar .accordion > [title='VB-Consulting'] > .collapsed")&&T(k,"d-none")):("/"!=document.location.pathname&&E(k,"d-none"),r.classList.remove("text-shadow")),e&&!y&&"/"!=document.location.pathname&&E(k,"d-none"),e&&y&&T(k,"d-none")}return m&&h&&v&&g&&(l=u.innerHTML,S.initNavs(g)),r.addEventListener("click",e),(window.onresize=n)(),this.closeSidebar=function(){window.outerWidth<c&&y&&e()},this}(),v=document.getElementsByClassName("auto-close"),u=0;u<v.length;u++)v[u].addEventListener("click",function(e){h.closeSidebar()});location.hash&&(e=document.getElementById(location.hash.replace("#","")))&&e.scrollIntoView()}();</script><script src="/bootstrap.bundle.min.js"></script><script>!function(){for(var e=document.querySelectorAll('[data-bs-toggle="tooltip"]'),t=0;t<e.length;t++)new bootstrap.Tooltip(e[t]);var n=document.getElementsByClassName("accordion-item");if(n.length){for(t=0;t<n.length;t++){var o=n[t];o.querySelectorAll("[href='"+document.location.pathname+"']").length&&o.firstChild.click()}var l=document.querySelector("nav.navbar").querySelector(".home"),a=document.getElementsByClassName("accordion");"/"==document.location.pathname&&l.classList.add("d-none");for(t=0;t<n.length;t++){var s=a[t];s&&s.firstChild&&"VB-Consulting"==s.firstChild.title&&(null!=s.firstChild.querySelector(".collapse")&&l.classList.contains("d-none")&&"/"!=document.location.pathname&&l.classList.remove("d-none"),s.addEventListener("show.bs.collapse",function(){"/"!=document.location.pathname&&l.classList.remove("d-none"),l.classList.add("d-none")}),s.addEventListener("hide.bs.collapse",function(){"/"!=document.location.pathname&&l.classList.remove("d-none")}))}}}();</script><script src="/html2canvas.min.js"></script><script async defer src="https://buttons.github.io/buttons.js"></script></body><script async data-id="101435862" src="//static.getclicky.com/js"></script></html>