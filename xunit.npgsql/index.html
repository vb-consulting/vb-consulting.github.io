<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>XUnit.Npgsql</title><meta name="description" content="XUnit Testing Suite for PostgreSQL Databases and .NET Standard 2.1"><meta name="keywords" content="net, dotnet, c#, csharp, netcore, test, testing, unit testing, integration testing, database, postgresql, npgsql, sql"><link href="https://vb-consulting.github.io//xunit.npgsql/" rel="canonical"><link rel="stylesheet" href="/_elderjs/assets/svelte-0e23f477.css" media="all"><style></style><link href="/style.css?1754739442085" rel="stylesheet"><script>!function(){var e="theme",t=localStorage.getItem(e);t||(t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",localStorage.setItem(e,t)),document.getElementsByTagName("html")[0].dataset.bsTheme=t}();</script></head><body class="d-flex flex-column h-100"><header id="header"><nav class="navbar navbar-expand-md navbar-dark fixed-top py-0 py-md-0 svelte-30jr7w"><div class="container-fluid flex-nowrap svelte-30jr7w"><div class="d-flex svelte-30jr7w"><button id="nav-btn" type="button" class="d-flex btn btn-sm logo animate-rotate svelte-30jr7w"><i class="material-icons-outlined">menu</i></button> <a class="nav-link my-auto ms-2 fw-semibold home svelte-30jr7w" href="/"><i class="bi-chevron-double-left"></i> VB Home</a></div><div class="d-flex right svelte-30jr7w"><a class="nav-link my-auto svelte-30jr7w" data-bs-toggle="tooltip" data-bs-html="true" title="Become a Patreon" href="https://www.patreon.com/vbconsulting" target="_blank"><div class="patreon"></div></a><div class="vr1 text-muted my-auto svelte-30jr7w"></div><a class="nav-link my-auto svelte-30jr7w" data-bs-toggle="tooltip" data-bs-html="true" title="Buy Me a Coffee" href="https://www.buymeacoffee.com/vbilopavu" target="_blank"><div class="bmc"></div></a><div class="vr1 text-muted my-auto svelte-30jr7w"></div><a class="nav-link my-auto me-2 svelte-30jr7w" data-bs-toggle="tooltip" data-bs-html="true" title="XUnit.Npgsql on GitHub" href="https://github.com/vb-consulting/XUnit.Npgsql"><i class="bi-github"></i></a> <a class="github-button svelte-30jr7w" href="https://github.com/vb-consulting/XUnit.Npgsql" data-bs-toggle="tooltip" data-bs-html="true" title="Star XUnit.Npgsql on GitHub" data-color-scheme="no-preference: light_high_contrast; light: light_high_contrast; dark: light_high_contrast;" data-icon="octicon-star" data-show-count="true" aria-label="Star XUnit.Npgsql on GitHub"></a><div class="vr1 text-muted my-auto svelte-30jr7w"></div><button id="theme-btn" type="button" aria-pressed="true" aria-label="theme" class="svelte-30jr7w"><span class="check hidden svelte-30jr7w"><span class="icon svelte-30jr7w"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="svelte-30jr7w"><path fill="currentColor" d="M12 21q-3.775 0-6.388-2.613T3 12q0-3.45 2.25-5.988T11 3.05q.625-.075.975.45t-.025 1.1q-.425.65-.638 1.375T11.1 7.5q0 2.25 1.575 3.825T16.5 12.9q.775 0 1.538-.225t1.362-.625q.525-.35 1.075-.037t.475.987q-.35 3.45-2.937 5.725T12 21Zm0-2q2.2 0 3.95-1.213t2.55-3.162q-.5.125-1 .2t-1 .075q-3.075 0-5.238-2.163T9.1 7.5q0-.5.075-1t.2-1q-1.95.8-3.163 2.55T5 12q0 2.9 2.05 4.95T12 19Zm-.25-6.75Z"></path></svg> <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="svelte-30jr7w"><g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M0 0h24v24H0z"></path><path fill="currentColor" d="M12 19a1 1 0 0 1 .993.883L13 20v1a1 1 0 0 1-1.993.117L11 21v-1a1 1 0 0 1 1-1zm6.313-2.09l.094.083l.7.7a1 1 0 0 1-1.32 1.497l-.094-.083l-.7-.7a1 1 0 0 1 1.218-1.567l.102.07zm-11.306.083a1 1 0 0 1 .083 1.32l-.083.094l-.7.7a1 1 0 0 1-1.497-1.32l.083-.094l.7-.7a1 1 0 0 1 1.414 0zM4 11a1 1 0 0 1 .117 1.993L4 13H3a1 1 0 0 1-.117-1.993L3 11h1zm17 0a1 1 0 0 1 .117 1.993L21 13h-1a1 1 0 0 1-.117-1.993L20 11h1zM6.213 4.81l.094.083l.7.7a1 1 0 0 1-1.32 1.497l-.094-.083l-.7-.7A1 1 0 0 1 6.11 4.74l.102.07zm12.894.083a1 1 0 0 1 .083 1.32l-.083.094l-.7.7a1 1 0 0 1-1.497-1.32l.083-.094l.7-.7a1 1 0 0 1 1.414 0zM12 2a1 1 0 0 1 .993.883L13 3v1a1 1 0 0 1-1.993.117L11 4V3a1 1 0 0 1 1-1zm0 5a5 5 0 1 1-4.995 5.217L7 12l.005-.217A5 5 0 0 1 12 7z"></path></g></svg></span></span></button></div></div></nav></header><main class="svelte-9zwk14"><div class="sidebar sidebar-hide svelte-9zwk14"><div class="svelte-9zwk14"><ul class="navbar-nav sidenav accordion svelte-9zwk14"><li class="accordion-item svelte-9zwk14" title="VB-Consulting"><button class="accordion-header accordion-button collapsed svelte-9zwk14 text-uppercase" href="/" type="button" data-bs-toggle="collapse" data-bs-target="#accordion-vb-consulting" aria-expanded="false" aria-controls="accordion-vb-consulting">VB-Consulting</button><div id="accordion-vb-consulting" class="accordion-collapse collapse"><div class="accordion-body svelte-9zwk14"><ul class="navbar-nav"><li class="nav-item svelte-9zwk14" data-id="" title="Home"><a class="nav-link svelte-9zwk14 text-uppercase" href="/">Home</a></li><li class="nav-divider svelte-9zwk14"><hr class="svelte-9zwk14"></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="NpgsqlRest"><a class="nav-link svelte-9zwk14 text-uppercase" href="/npgsqlrest/">NpgsqlRest</a></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="Norm.Net"><a class="nav-link svelte-9zwk14 text-uppercase" href="/norm.net/">Norm.Net</a></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="RazorSvelte"><a class="nav-link svelte-9zwk14 text-uppercase" href="/razorsvelte/">RazorSvelte</a></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="PgRoutiner"><a class="nav-link svelte-9zwk14 text-uppercase" href="/pgroutiner/">PgRoutiner</a></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="pgmigrations"><a class="nav-link svelte-9zwk14 text-uppercase" href="/pgmigrations/">pgmigrations</a></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="PostrgeSQL Schema Tools"><a class="nav-link svelte-9zwk14 text-uppercase" href="/pg_schema_tools/">PostrgeSQL Schema Tools</a></li><li class="nav-txt-divider text-muted svelte-9zwk14"><hr class="svelte-9zwk14"><span class="svelte-9zwk14">blogs</span><hr class="svelte-9zwk14"></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="<span class='btn-link'>ALL BLOGS</span>"><a class="nav-link btn btn-sm w-fit px-3 mx-auto svelte-9zwk14 lr-arrow text-uppercase" href="/blogs/"><i class="bi bi-arrow-right-circle svelte-9zwk14"></i> <span class="btn-link">ALL BLOGS</span></a></li><li class="nav-item svelte-9zwk14" data-id="" title="WebAPI Load Tests"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/npgsqlrest/load-test/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>WebAPI Load Tests</a></li><li class="nav-item svelte-9zwk14" data-id="" title="NpgsqlRest v2 Update üêòüî•"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/npgsqlrest-v2/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>NpgsqlRest v2 Update üêòüî•</a></li><li class="nav-item svelte-9zwk14" data-id="" title="NpgsqlRest Update 1.6.2"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/npgsqlrest-update1.6.2/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>NpgsqlRest Update 1.6.2</a></li><li class="nav-item svelte-9zwk14" data-id="" title="Vanilla SQL With NpgsqlRest Part 1 - ToDo App Requirements"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/npgsqlrest/todo/part1-todo-requirements/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>Vanilla SQL With NpgsqlRest Part 1 - ToDo App Requirements</a></li><li class="nav-item svelte-9zwk14" data-id="" title="Unit Testing and TDD With PostgreSQL is Easy"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/unit-testing-postgresql/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>Unit Testing and TDD With PostgreSQL is Easy</a></li><li class="nav-item svelte-9zwk14" data-id="" title="From Transaction Scripts and Domain Model to SQL"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/domain-model-transaction-script/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>From Transaction Scripts and Domain Model to SQL</a></li><li class="nav-item svelte-9zwk14" data-id="" title="Transaction Script DDD vs SQL"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/transaction-script/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>Transaction Script DDD vs SQL</a></li><li class="nav-item svelte-9zwk14" data-id="" title="Common Sense Software Design"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/common-sense-design/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>Common Sense Software Design</a></li><li class="nav-item svelte-9zwk14" data-id="" title="PostgreSQL Arrays üêò"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/postgresql-array/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>PostgreSQL Arrays üêò</a></li><li class="nav-item svelte-9zwk14" data-id="" title="How DDD is screwing up your SQL"><a class="nav-link svelte-9zwk14 lr-arrow text-uppercase" href="/blog/sql-vs-ddd/"><i class="bi bi-chat-left-text svelte-9zwk14"></i>How DDD is screwing up your SQL</a></li></ul></div></div></li><li class="nav-txt-divider text-muted svelte-9zwk14"><hr class="svelte-9zwk14"><span class="svelte-9zwk14">xunit.npgsql</span><hr class="svelte-9zwk14"></li><li class="nav-item toc2 svelte-9zwk14 active" data-id="" title="XUnit.Npgsql"><a class="nav-link svelte-9zwk14 text-uppercase" href="/xunit.npgsql/">XUnit.Npgsql</a></li><li class="nav-item toc2 svelte-9zwk14" data-id="" title="Sample Config"><a class="nav-link svelte-9zwk14 text-uppercase" href="/xunit.npgsql-sample-config/">Sample Config</a></li></ul></div></div><div class="content svelte-9zwk14"><div class="container-sm main-content gh-content"><h1 id="xunitnpgsql">XUnit.Npgsql<a class="anchor bookmark-target" href="#xunitnpgsql"><i class="bi bi-link-45deg"></i></a></h1><a href="https://github.com/vb-consulting/XUnit.Npgsql" class="github-edit"><i class="bi bi-github"></i>Edit this page on GitHub</a><p><em>XUnit Unit Testing for PostgreSQL Databases and .NET Standard 2.1</em></p><p><img src="https://github.com/vb-consulting/XUnit.Npgsql/workflows/build-publish/badge.svg" alt="build-publish"></p><h2 id="basic-usage">Basic Usage<a class="anchor bookmark-target" href="#basic-usage"><i class="bi bi-link-45deg"></i></a></h2><ol><li><p>Create a new XUnit Test Project.</p></li><li><p>Add a reference to the XUnit.Npgsql package. e.g. <code>dotnet add package XUnit.Npgsql</code></p></li><li><p>Add new collection fixture to your project:</p></li></ol><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">XUnit</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">Npgsql</span><span style="color: #E6E6E6">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E6E6E6">[</span><span style="color: #4EC9B0">CollectionDefinition</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"PostgreSqlDatabase"</span><span style="color: #E6E6E6">)]</span></span>
<span class="line"><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">class</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">DatabaseCollection</span><span style="color: #E6E6E6"> : </span><span style="color: #4EC9B0">ICollectionFixture</span><span style="color: #E6E6E6">&lt;</span><span style="color: #4EC9B0">PostgreSqlUnitTestFixture</span><span style="color: #E6E6E6">> { }</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">XUnit</span><span style="color: #000000">.</span><span style="color: #267F99">Npgsql</span><span style="color: #000000">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #000000">[</span><span style="color: #267F99">CollectionDefinition</span><span style="color: #000000">(</span><span style="color: #A31515">"PostgreSqlDatabase"</span><span style="color: #000000">)]</span></span>
<span class="line"><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #267F99">DatabaseCollection</span><span style="color: #000000"> : </span><span style="color: #267F99">ICollectionFixture</span><span style="color: #000000">&lt;</span><span style="color: #267F99">PostgreSqlUnitTestFixture</span><span style="color: #000000">> { }</span></span></code></pre></div><ul><li><p>Note: The collection name must be always <code>PostgreSqlDatabase</code>.</p></li><li><p>Note: Collection class name is arbitrary (in this example <code>DatabaseCollection</code>).</p></li></ul><ol start="4"><li>Add configuration file to your XUnit Test Project project root named <code>testsettings.json</code>.</li></ol><ul><li><p>Note: see sample configuration file here: <a href="https://github.com/vb-consulting/XUnit.Npgsql/blob/master/testsettings-config-sample.jsonc">testsettings.json sample</a></p></li><li><p>Note: Make sure that configuration file is copied to output directory on build.</p></li></ul><ol start="5"><li>Add new test class to your project.</li></ol><p>Note: test class must inherit <code>PostgreSqlUnitTest</code> class.</p><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">XUnit</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">Npgsql</span><span style="color: #E6E6E6">;</span></span>
<span class="line"><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">class</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">MyDatabaseTests</span><span style="color: #E6E6E6"> : </span><span style="color: #4EC9B0">PostgreSqlUnitTest</span></span>
<span class="line"><span style="color: #E6E6E6">{</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">MyDatabaseTests</span><span style="color: #E6E6E6">(</span><span style="color: #4EC9B0">PostgreSqlUnitTestFixture</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">tests</span><span style="color: #E6E6E6">) : </span><span style="color: #569CD6">base</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">tests</span><span style="color: #E6E6E6">) { }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955">    // example database unit test</span></span>
<span class="line"><span style="color: #E6E6E6">    [</span><span style="color: #4EC9B0">Fact</span><span style="color: #E6E6E6">]</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">void</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">Test_Get_Company_Details</span><span style="color: #E6E6E6">()</span></span>
<span class="line"><span style="color: #E6E6E6">    {</span></span>
<span class="line"><span style="color: #6A9955">        //</span></span>
<span class="line"><span style="color: #6A9955">        // Arrange</span></span>
<span class="line"><span style="color: #6A9955">        //</span></span>
<span class="line"><span style="color: #E6E6E6">        </span><span style="color: #4EC9B0">Guid</span><span style="color: #E6E6E6">? </span><span style="color: #9CDCFE">id</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">Connection</span></span>
<span class="line"><span style="color: #E6E6E6">            .</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">&lt;</span><span style="color: #4EC9B0">Guid</span><span style="color: #E6E6E6">>(</span><span style="color: #9CDCFE">command</span><span style="color: #E6E6E6">: </span><span style="color: #CE9178">@"insert into companies (name, linkedin) values ('name', 'linkedin') returning id"</span><span style="color: #E6E6E6">)</span></span>
<span class="line"><span style="color: #E6E6E6">            .</span><span style="color: #DCDCAA">Single</span><span style="color: #E6E6E6">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955">        //</span></span>
<span class="line"><span style="color: #6A9955">        // Act</span></span>
<span class="line"><span style="color: #6A9955">        //</span></span>
<span class="line"><span style="color: #E6E6E6">        </span><span style="color: #569CD6">var</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">result</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">Connection</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Read</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">new</span></span>
<span class="line"><span style="color: #E6E6E6">            {</span></span>
<span class="line"><span style="color: #E6E6E6">                </span><span style="color: #9CDCFE">id</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">default</span><span style="color: #E6E6E6">(</span><span style="color: #4EC9B0">Guid</span><span style="color: #E6E6E6">),</span></span>
<span class="line"><span style="color: #E6E6E6">                </span><span style="color: #9CDCFE">name</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">default</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">),</span></span>
<span class="line"><span style="color: #E6E6E6">                </span><span style="color: #9CDCFE">linkedin</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">default</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">)</span></span>
<span class="line"><span style="color: #E6E6E6">            },</span></span>
<span class="line"><span style="color: #E6E6E6">            </span><span style="color: #CE9178">"select get_company_details(@id)"</span><span style="color: #E6E6E6">, </span><span style="color: #569CD6">new</span><span style="color: #E6E6E6"> { </span><span style="color: #9CDCFE">id</span><span style="color: #E6E6E6"> }) </span><span style="color: #6A9955">// get_company_details udf</span></span>
<span class="line"><span style="color: #E6E6E6">            .</span><span style="color: #DCDCAA">Single</span><span style="color: #E6E6E6">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955">        //</span></span>
<span class="line"><span style="color: #6A9955">        // Assert</span></span>
<span class="line"><span style="color: #6A9955">        //</span></span>
<span class="line"><span style="color: #E6E6E6">        </span><span style="color: #9CDCFE">result</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Should</span><span style="color: #E6E6E6">().</span><span style="color: #DCDCAA">BeEquivalentTo</span><span style="color: #E6E6E6">(</span><span style="color: #569CD6">new</span></span>
<span class="line"><span style="color: #E6E6E6">        {</span></span>
<span class="line"><span style="color: #E6E6E6">            </span><span style="color: #9CDCFE">id</span><span style="color: #E6E6E6">,</span></span>
<span class="line"><span style="color: #E6E6E6">            </span><span style="color: #9CDCFE">name</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">"name"</span><span style="color: #E6E6E6">,</span></span>
<span class="line"><span style="color: #E6E6E6">            </span><span style="color: #9CDCFE">linkedin</span><span style="color: #E6E6E6"> </span><span style="color: #D4D4D4">=</span><span style="color: #E6E6E6"> </span><span style="color: #CE9178">"linkedin"</span></span>
<span class="line"><span style="color: #E6E6E6">        });</span></span>
<span class="line"><span style="color: #E6E6E6">    }</span></span>
<span class="line"><span style="color: #E6E6E6">}</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">XUnit</span><span style="color: #000000">.</span><span style="color: #267F99">Npgsql</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #267F99">MyDatabaseTests</span><span style="color: #000000"> : </span><span style="color: #267F99">PostgreSqlUnitTest</span></span>
<span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #795E26">MyDatabaseTests</span><span style="color: #000000">(</span><span style="color: #267F99">PostgreSqlUnitTestFixture</span><span style="color: #000000"> </span><span style="color: #001080">tests</span><span style="color: #000000">) : </span><span style="color: #0000FF">base</span><span style="color: #000000">(</span><span style="color: #001080">tests</span><span style="color: #000000">) { }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #008000">    // example database unit test</span></span>
<span class="line"><span style="color: #000000">    [</span><span style="color: #267F99">Fact</span><span style="color: #000000">]</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">void</span><span style="color: #000000"> </span><span style="color: #795E26">Test_Get_Company_Details</span><span style="color: #000000">()</span></span>
<span class="line"><span style="color: #000000">    {</span></span>
<span class="line"><span style="color: #008000">        //</span></span>
<span class="line"><span style="color: #008000">        // Arrange</span></span>
<span class="line"><span style="color: #008000">        //</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #267F99">Guid</span><span style="color: #000000">? </span><span style="color: #001080">id</span><span style="color: #000000"> = </span><span style="color: #001080">Connection</span></span>
<span class="line"><span style="color: #000000">            .</span><span style="color: #795E26">Read</span><span style="color: #000000">&lt;</span><span style="color: #267F99">Guid</span><span style="color: #000000">>(</span><span style="color: #001080">command</span><span style="color: #000000">: </span><span style="color: #A31515">@"insert into companies (name, linkedin) values ('name', 'linkedin') returning id"</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">            .</span><span style="color: #795E26">Single</span><span style="color: #000000">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #008000">        //</span></span>
<span class="line"><span style="color: #008000">        // Act</span></span>
<span class="line"><span style="color: #008000">        //</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">result</span><span style="color: #000000"> = </span><span style="color: #001080">Connection</span><span style="color: #000000">.</span><span style="color: #795E26">Read</span><span style="color: #000000">(</span><span style="color: #0000FF">new</span></span>
<span class="line"><span style="color: #000000">            {</span></span>
<span class="line"><span style="color: #000000">                </span><span style="color: #001080">id</span><span style="color: #000000"> = </span><span style="color: #0000FF">default</span><span style="color: #000000">(</span><span style="color: #267F99">Guid</span><span style="color: #000000">),</span></span>
<span class="line"><span style="color: #000000">                </span><span style="color: #001080">name</span><span style="color: #000000"> = </span><span style="color: #0000FF">default</span><span style="color: #000000">(</span><span style="color: #0000FF">string</span><span style="color: #000000">),</span></span>
<span class="line"><span style="color: #000000">                </span><span style="color: #001080">linkedin</span><span style="color: #000000"> = </span><span style="color: #0000FF">default</span><span style="color: #000000">(</span><span style="color: #0000FF">string</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">            },</span></span>
<span class="line"><span style="color: #000000">            </span><span style="color: #A31515">"select get_company_details(@id)"</span><span style="color: #000000">, </span><span style="color: #0000FF">new</span><span style="color: #000000"> { </span><span style="color: #001080">id</span><span style="color: #000000"> }) </span><span style="color: #008000">// get_company_details udf</span></span>
<span class="line"><span style="color: #000000">            .</span><span style="color: #795E26">Single</span><span style="color: #000000">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #008000">        //</span></span>
<span class="line"><span style="color: #008000">        // Assert</span></span>
<span class="line"><span style="color: #008000">        //</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #001080">result</span><span style="color: #000000">.</span><span style="color: #795E26">Should</span><span style="color: #000000">().</span><span style="color: #795E26">BeEquivalentTo</span><span style="color: #000000">(</span><span style="color: #0000FF">new</span></span>
<span class="line"><span style="color: #000000">        {</span></span>
<span class="line"><span style="color: #000000">            </span><span style="color: #001080">id</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">            </span><span style="color: #001080">name</span><span style="color: #000000"> = </span><span style="color: #A31515">"name"</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">            </span><span style="color: #001080">linkedin</span><span style="color: #000000"> = </span><span style="color: #A31515">"linkedin"</span></span>
<span class="line"><span style="color: #000000">        });</span></span>
<span class="line"><span style="color: #000000">    }</span></span>
<span class="line"><span style="color: #000000">}</span></span></code></pre></div><h2 id="advanced-usage">Advanced Usage<a class="anchor bookmark-target" href="#advanced-usage"><i class="bi bi-link-45deg"></i></a></h2><h3 id="configuration-file">Configuration file:<a class="anchor bookmark-target" href="#configuration-file"><i class="bi bi-link-45deg"></i></a></h3><ul><li><p>Configuration file is mandatory.</p></li><li><p>Configuration needs to be copied to output directory on build.</p></li><li><p>Configuration file name must be either <code>testsettings.json</code>, <code>testsettings.Development.json</code>Àô, <code>appsettings.json</code> or <code>appsettings.Development.json</code> in that order.</p></li><li><p>Note: see sample configuration file here: <a href="https://github.com/vb-consulting/XUnit.Npgsql/blob/master/testsettings-config-sample.jsonc">testsettings.json sample</a></p></li><li><p>Configuration can contain <code>ConnectionStrings</code> section</p></li><li><p>Configuration file must contain <code>TestSettings</code> section. This sections can have these values:</p><ul><li><code>TestConnection</code> - connection string name from <code>ConnectionStrings</code> section to the test database.</li><li><code>ConfigPath</code> - path to the configuration file. This is useful when you want to use different configuration file for different environments. e.g. <code>ConfigPath: "appsettings.Development.json"</code></li><li><code>TestDatabaseName</code> - name of the test database. Default connection is used for server and this name for database name. If not specified, test database will be created with random name. If it is specified name will be appended with random string to ensure that test database is unique. This database is recreated and dropped on every test session unless <code>SkipCreateTestDatabase</code> is set to true.</li><li><code>SkipCreateTestDatabase</code> - skip creating and dropping test database. Default is false.</li><li><code>TestDatabaseFromTemplate</code> - If set to true, the test database will be created from a <a href="https://www.postgresql.org/docs/current/manage-ag-templatedbs.html">template database</a>. PostgreSQL can create a new database from a template database together with data, very fast.</li><li><code>UpScripts</code> - list of scripts to run before tests. Scripts are run in order.</li><li><code>DownScripts</code> - list of scripts to run after tests. Scripts are run in order.</li><li><code>UnitTestsUnderTransaction</code> - if set to true, all tests will be run under transaction that is rolled-back when test ends. This is useful when you want to run tests in parallel. Default is true.</li><li><code>DisableConstraintCheckingForTransaction</code> - when running tests under transaction, this will disable constraint checking. This is useful when arranging test data, all related tables don't have to be populated. Default is true.</li><li><code>UnitTestsNewDatabaseFromTemplate</code> - if set to true, all tests will run in unique database created from a template. This is useful when testing sequences. Default is false.</li></ul></li></ul><h3 id="overriding-configuration-in-test-class">Overriding configuration in test class<a class="anchor bookmark-target" href="#overriding-configuration-in-test-class"><i class="bi bi-link-45deg"></i></a></h3><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">XUnit</span><span style="color: #E6E6E6">.</span><span style="color: #4EC9B0">Npgsql</span><span style="color: #E6E6E6">;</span></span>
<span class="line"><span style="color: #569CD6">using</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">Norm</span><span style="color: #E6E6E6">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">class</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">MyDatabaseTests</span><span style="color: #E6E6E6"> : </span><span style="color: #4EC9B0">PostgreSqlUnitTest</span></span>
<span class="line"><span style="color: #E6E6E6">{</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">MyDatabaseTests</span><span style="color: #E6E6E6">(</span><span style="color: #4EC9B0">PostgreSqlUnitTestFixture</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">tests</span><span style="color: #E6E6E6">) : </span><span style="color: #569CD6">base</span><span style="color: #E6E6E6">(</span></span>
<span class="line"><span style="color: #E6E6E6">        </span><span style="color: #9CDCFE">tests</span><span style="color: #E6E6E6">,</span></span>
<span class="line"><span style="color: #6A9955">        // override "create new database from template" behavior for these tests</span></span>
<span class="line"><span style="color: #E6E6E6">        </span><span style="color: #9CDCFE">newDatabaseFromTemplate</span><span style="color: #E6E6E6">: </span><span style="color: #569CD6">false</span><span style="color: #E6E6E6">, </span></span>
<span class="line"><span style="color: #6A9955">        // override test database name for these tests (if set name is exact, without guid)</span></span>
<span class="line"><span style="color: #E6E6E6">        </span><span style="color: #9CDCFE">testDatabaseName</span><span style="color: #E6E6E6">: </span><span style="color: #CE9178">"test_database_name"</span><span style="color: #E6E6E6">, </span></span>
<span class="line"><span style="color: #6A9955">        // override "run tests under transaction" behavior for these tests</span></span>
<span class="line"><span style="color: #E6E6E6">        </span><span style="color: #9CDCFE">underTransaction</span><span style="color: #E6E6E6">: </span><span style="color: #569CD6">true</span><span style="color: #E6E6E6">, </span></span>
<span class="line"><span style="color: #6A9955">        // override "disable constraint checking for transaction" behavior for these tests</span></span>
<span class="line"><span style="color: #E6E6E6">        </span><span style="color: #9CDCFE">disableConstraintCheckingForTransaction</span><span style="color: #E6E6E6">: </span><span style="color: #569CD6">false</span><span style="color: #E6E6E6"> </span></span>
<span class="line"><span style="color: #E6E6E6">    ) { }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E6E6E6">    [</span><span style="color: #4EC9B0">Fact</span><span style="color: #E6E6E6">]</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">void</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">Test</span><span style="color: #E6E6E6">()</span></span>
<span class="line"><span style="color: #E6E6E6">    {</span></span>
<span class="line"><span style="color: #6A9955">        // arrange</span></span>
<span class="line"><span style="color: #6A9955">        // act</span></span>
<span class="line"><span style="color: #6A9955">        // assert ...</span></span>
<span class="line"><span style="color: #E6E6E6">    }</span></span>
<span class="line"><span style="color: #E6E6E6">}</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">XUnit</span><span style="color: #000000">.</span><span style="color: #267F99">Npgsql</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #AF00DB">using</span><span style="color: #000000"> </span><span style="color: #267F99">Norm</span><span style="color: #000000">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #267F99">MyDatabaseTests</span><span style="color: #000000"> : </span><span style="color: #267F99">PostgreSqlUnitTest</span></span>
<span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #795E26">MyDatabaseTests</span><span style="color: #000000">(</span><span style="color: #267F99">PostgreSqlUnitTestFixture</span><span style="color: #000000"> </span><span style="color: #001080">tests</span><span style="color: #000000">) : </span><span style="color: #0000FF">base</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #001080">tests</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #008000">        // override "create new database from template" behavior for these tests</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #001080">newDatabaseFromTemplate</span><span style="color: #000000">: </span><span style="color: #0000FF">false</span><span style="color: #000000">, </span></span>
<span class="line"><span style="color: #008000">        // override test database name for these tests (if set name is exact, without guid)</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #001080">testDatabaseName</span><span style="color: #000000">: </span><span style="color: #A31515">"test_database_name"</span><span style="color: #000000">, </span></span>
<span class="line"><span style="color: #008000">        // override "run tests under transaction" behavior for these tests</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #001080">underTransaction</span><span style="color: #000000">: </span><span style="color: #0000FF">true</span><span style="color: #000000">, </span></span>
<span class="line"><span style="color: #008000">        // override "disable constraint checking for transaction" behavior for these tests</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #001080">disableConstraintCheckingForTransaction</span><span style="color: #000000">: </span><span style="color: #0000FF">false</span><span style="color: #000000"> </span></span>
<span class="line"><span style="color: #000000">    ) { }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #000000">    [</span><span style="color: #267F99">Fact</span><span style="color: #000000">]</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">void</span><span style="color: #000000"> </span><span style="color: #795E26">Test</span><span style="color: #000000">()</span></span>
<span class="line"><span style="color: #000000">    {</span></span>
<span class="line"><span style="color: #008000">        // arrange</span></span>
<span class="line"><span style="color: #008000">        // act</span></span>
<span class="line"><span style="color: #008000">        // assert ...</span></span>
<span class="line"><span style="color: #000000">    }</span></span>
<span class="line"><span style="color: #000000">}</span></span></code></pre></div><h3 id="overriding-configuration-test-fixtures-class">Overriding configuration test fixtures class<a class="anchor bookmark-target" href="#overriding-configuration-test-fixtures-class"><i class="bi bi-link-45deg"></i></a></h3><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #E6E6E6">[</span><span style="color: #4EC9B0">CollectionDefinition</span><span style="color: #E6E6E6">(</span><span style="color: #CE9178">"PostgreSqlDatabase"</span><span style="color: #E6E6E6">)]</span></span>
<span class="line"><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">class</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">TestCollection</span><span style="color: #E6E6E6"> : </span><span style="color: #4EC9B0">ICollectionFixture</span><span style="color: #E6E6E6">&lt;</span><span style="color: #4EC9B0">CustomTestFixtures</span><span style="color: #E6E6E6">> { }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">class</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">CustomTestFixtures</span><span style="color: #E6E6E6"> : </span><span style="color: #4EC9B0">PostgreSqlUnitTestFixture</span></span>
<span class="line"><span style="color: #E6E6E6">{</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">CustomTestFixtures</span><span style="color: #E6E6E6">() : </span><span style="color: #569CD6">base</span><span style="color: #E6E6E6">()</span></span>
<span class="line"><span style="color: #E6E6E6">    {</span></span>
<span class="line"><span style="color: #6A9955">        // override default constructor before tests are run</span></span>
<span class="line"><span style="color: #6A9955">        // this is executed once per project</span></span>
<span class="line"><span style="color: #E6E6E6">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">override</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">void</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">Dispose</span><span style="color: #E6E6E6">()</span></span>
<span class="line"><span style="color: #E6E6E6">    {</span></span>
<span class="line"><span style="color: #6A9955">        // override default dispose after tests are run</span></span>
<span class="line"><span style="color: #6A9955">        // this is executed once per project</span></span>
<span class="line"><span style="color: #E6E6E6">        </span><span style="color: #569CD6">base</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">Dispose</span><span style="color: #E6E6E6">();</span></span>
<span class="line"><span style="color: #E6E6E6">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">override</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">void</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">CreateTestDatabase</span><span style="color: #E6E6E6">(</span><span style="color: #4EC9B0">NpgsqlConnection</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">)</span></span>
<span class="line"><span style="color: #E6E6E6">    {</span></span>
<span class="line"><span style="color: #6A9955">        // override creating test database for all tests or call base method (that creates database from configuration)</span></span>
<span class="line"><span style="color: #6A9955">        // CreateTestDatabase is called from default constructor</span></span>
<span class="line"><span style="color: #E6E6E6">        </span><span style="color: #569CD6">base</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">CreateTestDatabase</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">);</span></span>
<span class="line"><span style="color: #E6E6E6">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">override</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">void</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">DropTestDatabase</span><span style="color: #E6E6E6">(</span><span style="color: #4EC9B0">NpgsqlConnection</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">)</span></span>
<span class="line"><span style="color: #E6E6E6">    {</span></span>
<span class="line"><span style="color: #6A9955">        // override dropping test database for all tests or call base method (that creates database from configuration)</span></span>
<span class="line"><span style="color: #6A9955">        // DropTestDatabase is called from Dispose method</span></span>
<span class="line"><span style="color: #E6E6E6">        </span><span style="color: #569CD6">base</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">DropTestDatabase</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">);</span></span>
<span class="line"><span style="color: #E6E6E6">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">override</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">void</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">ApplyMigrations</span><span style="color: #E6E6E6">(</span><span style="color: #4EC9B0">NpgsqlConnection</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">, </span><span style="color: #4EC9B0">List</span><span style="color: #E6E6E6">&lt;</span><span style="color: #569CD6">string</span><span style="color: #E6E6E6">> </span><span style="color: #9CDCFE">scriptPaths</span><span style="color: #E6E6E6">)</span></span>
<span class="line"><span style="color: #E6E6E6">    {</span></span>
<span class="line"><span style="color: #6A9955">        // override apply migrations method</span></span>
<span class="line"><span style="color: #6A9955">        // this method is called twice: </span></span>
<span class="line"><span style="color: #6A9955">        // 1) from default constructor (after CreateTestDatabase) for up migrations</span></span>
<span class="line"><span style="color: #6A9955">        // 2) from Dispose method (before DropTestDatabase) for down migrations</span></span>
<span class="line"><span style="color: #E6E6E6">        </span><span style="color: #569CD6">base</span><span style="color: #E6E6E6">.</span><span style="color: #DCDCAA">ApplyMigrations</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">connection</span><span style="color: #E6E6E6">, </span><span style="color: #9CDCFE">scriptPaths</span><span style="color: #E6E6E6">);</span></span>
<span class="line"><span style="color: #E6E6E6">    }</span></span>
<span class="line"><span style="color: #E6E6E6">}</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #000000">[</span><span style="color: #267F99">CollectionDefinition</span><span style="color: #000000">(</span><span style="color: #A31515">"PostgreSqlDatabase"</span><span style="color: #000000">)]</span></span>
<span class="line"><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #267F99">TestCollection</span><span style="color: #000000"> : </span><span style="color: #267F99">ICollectionFixture</span><span style="color: #000000">&lt;</span><span style="color: #267F99">CustomTestFixtures</span><span style="color: #000000">> { }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #267F99">CustomTestFixtures</span><span style="color: #000000"> : </span><span style="color: #267F99">PostgreSqlUnitTestFixture</span></span>
<span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #795E26">CustomTestFixtures</span><span style="color: #000000">() : </span><span style="color: #0000FF">base</span><span style="color: #000000">()</span></span>
<span class="line"><span style="color: #000000">    {</span></span>
<span class="line"><span style="color: #008000">        // override default constructor before tests are run</span></span>
<span class="line"><span style="color: #008000">        // this is executed once per project</span></span>
<span class="line"><span style="color: #000000">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">override</span><span style="color: #000000"> </span><span style="color: #0000FF">void</span><span style="color: #000000"> </span><span style="color: #795E26">Dispose</span><span style="color: #000000">()</span></span>
<span class="line"><span style="color: #000000">    {</span></span>
<span class="line"><span style="color: #008000">        // override default dispose after tests are run</span></span>
<span class="line"><span style="color: #008000">        // this is executed once per project</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0000FF">base</span><span style="color: #000000">.</span><span style="color: #795E26">Dispose</span><span style="color: #000000">();</span></span>
<span class="line"><span style="color: #000000">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">override</span><span style="color: #000000"> </span><span style="color: #0000FF">void</span><span style="color: #000000"> </span><span style="color: #795E26">CreateTestDatabase</span><span style="color: #000000">(</span><span style="color: #267F99">NpgsqlConnection</span><span style="color: #000000"> </span><span style="color: #001080">connection</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">    {</span></span>
<span class="line"><span style="color: #008000">        // override creating test database for all tests or call base method (that creates database from configuration)</span></span>
<span class="line"><span style="color: #008000">        // CreateTestDatabase is called from default constructor</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0000FF">base</span><span style="color: #000000">.</span><span style="color: #795E26">CreateTestDatabase</span><span style="color: #000000">(</span><span style="color: #001080">connection</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #000000">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">override</span><span style="color: #000000"> </span><span style="color: #0000FF">void</span><span style="color: #000000"> </span><span style="color: #795E26">DropTestDatabase</span><span style="color: #000000">(</span><span style="color: #267F99">NpgsqlConnection</span><span style="color: #000000"> </span><span style="color: #001080">connection</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">    {</span></span>
<span class="line"><span style="color: #008000">        // override dropping test database for all tests or call base method (that creates database from configuration)</span></span>
<span class="line"><span style="color: #008000">        // DropTestDatabase is called from Dispose method</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0000FF">base</span><span style="color: #000000">.</span><span style="color: #795E26">DropTestDatabase</span><span style="color: #000000">(</span><span style="color: #001080">connection</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #000000">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">override</span><span style="color: #000000"> </span><span style="color: #0000FF">void</span><span style="color: #000000"> </span><span style="color: #795E26">ApplyMigrations</span><span style="color: #000000">(</span><span style="color: #267F99">NpgsqlConnection</span><span style="color: #000000"> </span><span style="color: #001080">connection</span><span style="color: #000000">, </span><span style="color: #267F99">List</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">string</span><span style="color: #000000">> </span><span style="color: #001080">scriptPaths</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">    {</span></span>
<span class="line"><span style="color: #008000">        // override apply migrations method</span></span>
<span class="line"><span style="color: #008000">        // this method is called twice: </span></span>
<span class="line"><span style="color: #008000">        // 1) from default constructor (after CreateTestDatabase) for up migrations</span></span>
<span class="line"><span style="color: #008000">        // 2) from Dispose method (before DropTestDatabase) for down migrations</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0000FF">base</span><span style="color: #000000">.</span><span style="color: #795E26">ApplyMigrations</span><span style="color: #000000">(</span><span style="color: #001080">connection</span><span style="color: #000000">, </span><span style="color: #001080">scriptPaths</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #000000">    }</span></span>
<span class="line"><span style="color: #000000">}</span></span></code></pre></div><p>And, change the reference in the unit test:</p><div class="code csharp"><div class="toolbar"><div class="copy-code bi-clipboard" data-bs-toggle="tooltip" data-bs-title="Copy code to clipboard"></div><div class="photo-code bi-camera" data-bs-toggle="tooltip" data-bs-title="Copy code image to clipboard"></div></div><pre class="shiki slack-dark" style="background-color: #222222" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #569CD6">class</span><span style="color: #E6E6E6"> </span><span style="color: #4EC9B0">MyDatabaseTests</span><span style="color: #E6E6E6"> : </span><span style="color: #4EC9B0">PostgreSqlUnitTest</span></span>
<span class="line"><span style="color: #E6E6E6">{</span></span>
<span class="line"><span style="color: #E6E6E6">    </span><span style="color: #569CD6">public</span><span style="color: #E6E6E6"> </span><span style="color: #DCDCAA">MyDatabaseTests</span><span style="color: #E6E6E6">(</span><span style="color: #4EC9B0">CustomTestFixtures</span><span style="color: #E6E6E6"> </span><span style="color: #9CDCFE">tests</span><span style="color: #E6E6E6">) : </span><span style="color: #569CD6">base</span><span style="color: #E6E6E6">(</span><span style="color: #9CDCFE">tests</span><span style="color: #E6E6E6">) { }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A9955">    // the rest of the tests</span></span>
<span class="line"><span style="color: #E6E6E6">}</span></span></code></pre><pre class="shiki light-plus" style="background-color: #FFFFFF" tabindex="0"><code class="code-highlight"><span class="line"><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #267F99">MyDatabaseTests</span><span style="color: #000000"> : </span><span style="color: #267F99">PostgreSqlUnitTest</span></span>
<span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #795E26">MyDatabaseTests</span><span style="color: #000000">(</span><span style="color: #267F99">CustomTestFixtures</span><span style="color: #000000"> </span><span style="color: #001080">tests</span><span style="color: #000000">) : </span><span style="color: #0000FF">base</span><span style="color: #000000">(</span><span style="color: #001080">tests</span><span style="color: #000000">) { }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #008000">    // the rest of the tests</span></span>
<span class="line"><span style="color: #000000">}</span></span></code></pre></div><h2 id="dependencies">Dependencies<a class="anchor bookmark-target" href="#dependencies"><i class="bi bi-link-45deg"></i></a></h2><pre><code>Microsoft.Extensions.Configuration >= 7.0.0
Microsoft.Extensions.Configuration.Binder >= 7.0.4
Microsoft.Extensions.Configuration.Json >= 7.0.0
Npgsq >= 7.0.0
xunit >= 2.0.0
</code></pre><h2 id="changelog">Changelog<a class="anchor bookmark-target" href="#changelog"><i class="bi bi-link-45deg"></i></a></h2><h2 id="113-2023-09-06"><a href="https://github.com/vb-consulting/XUnit.Npgsql/tree/1.1.3">1.1.3</a> (2023-09-06)<a class="anchor bookmark-target" href="#113-2023-09-06"><i class="bi bi-link-45deg"></i></a></h2><p><a href="https://github.com/vb-consulting/XUnit.Npgsql/compare/1.1.2...1.1.3">Full Changelog</a></p><p>Expose <code>IConfigurationRoot</code> as static public readonly property of ≈•he <code>Config</code> class.</p><p>This is useful to access custom configuiration values without having to load configuiration file again (e.g. <code>Config.ConfigurationRoot.GetConnectionString("AdminConnection")</code>)</p><h2 id="112-2023-08-27"><a href="https://github.com/vb-consulting/XUnit.Npgsql/tree/1.1.2">1.1.2</a> (2023-08-27)<a class="anchor bookmark-target" href="#112-2023-08-27"><i class="bi bi-link-45deg"></i></a></h2><p><a href="https://github.com/vb-consulting/XUnit.Npgsql/compare/1.1.1...1.1.2">Full Changelog</a></p><p>Add default value to config and check is string null or empty.</p><h2 id="111-2023-08-27"><a href="https://github.com/vb-consulting/XUnit.Npgsql/tree/1.1.1">1.1.1</a> (2023-08-27)<a class="anchor bookmark-target" href="#111-2023-08-27"><i class="bi bi-link-45deg"></i></a></h2><p><a href="https://github.com/vb-consulting/XUnit.Npgsql/compare/1.1.0...1.1.1">Full Changelog</a></p><p>If <code>SkipCreateTestDatabase</code> is true and <code>TestDatabaseName</code> is set, change the connection database to <code>TestDatabaseName</code> instead of the default database.</p><h2 id="110-2023-08-27"><a href="https://github.com/vb-consulting/XUnit.Npgsql/tree/1.1.0">1.1.0</a> (2023-08-27)<a class="anchor bookmark-target" href="#110-2023-08-27"><i class="bi bi-link-45deg"></i></a></h2><p><a href="https://github.com/vb-consulting/XUnit.Npgsql/compare/1.0.2...1.1.0">Full Changelog</a></p><h3 id="new-setting-skipcreatetestdatabase">New setting SkipCreateTestDatabase<a class="anchor bookmark-target" href="#new-setting-skipcreatetestdatabase"><i class="bi bi-link-45deg"></i></a></h3><p>Set to true to skip the creation of the test database.</p><p>The database from the connection string will be used directly and no test database will be created or dropped.</p><p>This doesn't apply to <code>UnitTestsNewDatabaseFromTemplate</code> setting will create and drop new template database from this database on each unit test. This settings cannot be combined with <code>TestDatabaseFromTemplate</code> because the you can't create a template database if you choose to skip creating a test database.</p><h3 id="improvements">Improvements<a class="anchor bookmark-target" href="#improvements"><i class="bi bi-link-45deg"></i></a></h3><ul><li><p>Fixed strange PostgreSQL bug where test database can't be dropped because PostgreSQL thinks it's in pipeline mode (although it isn't).</p></li><li><p>Add global counter for test database name when using <code>TestDatabaseFromTemplate</code> for each unit tests (besides timestamps guid).</p></li></ul><h2 id="currently-supported-platforms">Currently supported platforms<a class="anchor bookmark-target" href="#currently-supported-platforms"><i class="bi bi-link-45deg"></i></a></h2><ul><li>.NET Standard 2.1</li></ul><h2 id="support">Support<a class="anchor bookmark-target" href="#support"><i class="bi bi-link-45deg"></i></a></h2><p>This is open-source software developed and maintained freely without any compensation whatsoever.</p><h2 id="licence">Licence<a class="anchor bookmark-target" href="#licence"><i class="bi bi-link-45deg"></i></a></h2><p>Copyright (c) Vedran Bilopavloviƒá - VB Consulting and VB Software 2020 This source code is licensed under the <a href="https://github.com/vbilopav/XUnit.Npgsql/blob/master/LICENSE">MIT license</a>.</p><div class="pt-5 border-top"><div id="comments-section" class="h5">Comments</div><div>Comments are not available.</div></div><footer class="mt-3 py-5"><div class="w-fit mx-auto mb-3 border-top border-bottom"><div class="alert text-center fs-smaller text-muted"><div class="alert text-center fs-smaller text-muted mb-1">If you like my content, use my software, or otherwise benefit from my work, consider supporting me by buying me a coffee. The software runs on coffee after all.</div><a class="btn rl-arrow" target="_blank" data-bs-toggle="tooltip" data-bs-html="true" title="Click Here to Buy Me a Coffee Or Scan the Code" href="https://www.buymeacoffee.com/vbilopavu" style="display: inline-grid;">Buy me a Coffee <img class="m-auto svelte-byttq0" alt="Scan Here To Buy Me a Cofee" src="/bmc_qr.png"></a></div></div><div class="d-flex justify-content-center"><a class="btn rl-arrow me-1" target="_blank" data-bs-toggle="tooltip" data-bs-html="true" title="XUnit.Npgsql on GitHub" href="https://github.com/vb-consulting/XUnit.Npgsql" style="display: inline-grid;">XUnit.Npgsql on GitHub <i class="bi bi-github"></i></a> <a class="btn rl-arrow" target="_blank" data-bs-toggle="tooltip" data-bs-html="true" title="I Post Software Development Content Daily" href="https://www.linkedin.com/in/vb-software/" style="display: inline-grid;">Follow me on LinkedIn <i class="bi bi-linkedin"></i></a></div><div class="text-center"><div class="mt-5 mb-5 background-floki svelte-byttq0" data-bs-toggle="tooltip" data-bs-html="true" title="Floki is a developer dog."></div></div></footer></div></div><div class="rightside svelte-9zwk14"><div class="svelte-9zwk14"><ul class="navbar-nav sidenav svelte-9zwk14"><li class="nav-txt-divider text-muted svelte-9zwk14"><hr class="svelte-9zwk14"><span class="svelte-9zwk14">on this page</span><hr class="svelte-9zwk14"></li><li class="nav-item toc1 right svelte-9zwk14 bookmark-nav" data-id="xunitnpgsql" title="XUnit.Npgsql"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#xunitnpgsql">XUnit.Npgsql</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="basic-usage" title="Basic Usage"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#basic-usage">Basic Usage</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="advanced-usage" title="Advanced Usage"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#advanced-usage">Advanced Usage</a></li><li class="nav-item toc3 right svelte-9zwk14 bookmark-nav" data-id="configuration-file" title="Configuration file:"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#configuration-file">Configuration file:</a></li><li class="nav-item toc3 right svelte-9zwk14 bookmark-nav" data-id="overriding-configuration-in-test-class" title="Overriding configuration in test class"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#overriding-configuration-in-test-class">Overriding configuration in test class</a></li><li class="nav-item toc3 right svelte-9zwk14 bookmark-nav" data-id="overriding-configuration-test-fixtures-class" title="Overriding configuration test fixtures class"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#overriding-configuration-test-fixtures-class">Overriding configuration test fixtures class</a></li><li class="nav-item toc2 mt-2 right svelte-9zwk14 bookmark-nav" data-id="dependencies" title="Dependencies"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#dependencies">Dependencies</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="changelog" title="Changelog"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#changelog">Changelog</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="113-2023-09-06" title="1.1.3 (2023-09-06)"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#113-2023-09-06">1.1.3 (2023-09-06)</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="112-2023-08-27" title="1.1.2 (2023-08-27)"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#112-2023-08-27">1.1.2 (2023-08-27)</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="111-2023-08-27" title="1.1.1 (2023-08-27)"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#111-2023-08-27">1.1.1 (2023-08-27)</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="110-2023-08-27" title="1.1.0 (2023-08-27)"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#110-2023-08-27">1.1.0 (2023-08-27)</a></li><li class="nav-item toc3 right svelte-9zwk14 bookmark-nav" data-id="new-setting-skipcreatetestdatabase" title="New setting SkipCreateTestDatabase"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#new-setting-skipcreatetestdatabase">New setting SkipCreateTestDatabase</a></li><li class="nav-item toc3 right svelte-9zwk14 bookmark-nav" data-id="improvements" title="Improvements"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#improvements">Improvements</a></li><li class="nav-item toc2 mt-2 right svelte-9zwk14 bookmark-nav" data-id="currently-supported-platforms" title="Currently supported platforms"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#currently-supported-platforms">Currently supported platforms</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="support" title="Support"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#support">Support</a></li><li class="nav-item toc2 right svelte-9zwk14 bookmark-nav" data-id="licence" title="Licence"><a class="nav-link auto-close svelte-9zwk14 bookmark-link" href="#licence">Licence</a></li></ul></div></div></main><script>!function(){var i=document.querySelector("nav.navbar"),f=document.getElementsByTagName("main")[0],L=f.getElementsByClassName("sidebar")[0],w=f.getElementsByClassName("content")[0],o=document.querySelectorAll("div.code"),k=i.querySelector(".home");function E(e,t){for(var n=1;n<arguments.length;n++)e.classList.remove(arguments[n])}function T(e,t){for(var n=1;n<arguments.length;n++)e.classList.remove(arguments[n]);E(e,t),e.classList.add(t)}function t(e,t){var n=e.currentTarget;if(!n.classList.contains("bi-check")){for(var i="",o=0;o<n.classList.length;o++)if(n.classList[o].startsWith("bi-")){i=n.classList[o];break}n.classList.remove(i),n.classList.add("spinner-border-sm"),n.classList.add("spinner-border");e=bootstrap.Tooltip.getInstance(n);e&&(e.setContent({".tooltip-inner":"Copying..."}),e.show()),t(n,function(){var e;n.classList.remove(i),n.classList.remove("spinner-border-sm"),n.classList.remove("spinner-border"),n.classList.add("bi-check"),bootstrap&&(e=bootstrap.Tooltip.getInstance(n))&&(e.setContent({".tooltip-inner":"Copied!"}),e.show()),setTimeout(function(){var e;n.classList.add(i),n.classList.remove("bi-check"),bootstrap&&(e=bootstrap.Tooltip.getInstance(n))&&e.setContent({".tooltip-inner":n.dataset.bsTitle})},2e3)})}}"/"==document.location.pathname&&T(k,"d-none");var e=document.querySelector(".post-share > .copy-url"),n=(e&&e.addEventListener("click",function(e){t(e,function(e,t){navigator.clipboard.writeText(document.location.origin+document.location.pathname),t()})}),document.getElementsByTagName("html")[0]),a=i.querySelector("#theme-btn"),s="theme";function l(e){var t=a.getElementsByTagName("svg");"dark"===e?(t[0].style.display="",t[1].style.display="none",a.getElementsByClassName("check")[0].classList.add("checked")):(t[0].style.display="none",t[1].style.display="",a.getElementsByClassName("check")[0].classList.remove("checked"));for(var n=0;n<o.length;n++){var i=o[n];"dark"===e?(i.children[1].style.display="inherit",i.children[2].style.display="none"):"light"===e&&(i.children[1].style.display="none",i.children[2].style.display="inherit")}window._theme&&window._theme(e)}function r(e){t(e,function(e,t){navigator.clipboard.writeText(e.parentElement.nextSibling.innerText),t()})}function c(e){t(e,function(e,t){var n=localStorage.getItem(s);e="dark"===n?e.parentElement.parentElement.children[1]:e.parentElement.parentElement.children[2],setTimeout(function(){html2canvas(e).then(e=>{e.toBlob(e=>navigator.clipboard.write([new ClipboardItem({"image/png":e})])),t()})},0)})}a.addEventListener("click",()=>{var e="dark"===localStorage.getItem(s)?"light":"dark";localStorage.setItem(s,e),l(n.dataset.bsTheme=e)}),l(localStorage.getItem(s)),a.children[0].classList.remove("hidden");for(var d=0;d<o.length;d++){o[d].getElementsByClassName("copy-code")[0].addEventListener("click",r);var m=o[d].getElementsByClassName("photo-code");m.length&&m[0].addEventListener("click",c)}for(var S=function(){var a,o,s;if(f.children[2]&&"none"!=f.children[2].style.display)return a=f.querySelector(".main-content").querySelectorAll("[id]"),o=void 0,this.initNavs=function(e){s=e.querySelectorAll("li.bookmark-nav");for(var t=0;t<a.length;t++){for(var n=a[t].id,i=null,o=0;o<s.length;o++)if(s[o].dataset.id==n){i=s[o];break}a[t].nav=i}setTimeout(function(){for(var e=0;e<a.length;e++){var t=a[e];if(l(t).visible&&t.nav)return void t.nav.classList.add("active")}},1e3),r()},f.children[1].addEventListener("scroll",r),this;function l(e){var e=e.getBoundingClientRect(),t=Math.max(document.documentElement.clientHeight,window.innerHeight),n=0<e.top&&!(e.bottom<0||0<=e.top-t)||e.top<0&&e.bottom>t,i=!1;return{visible:n,above:i=n?i:e.bottom<t}}function r(){if(s&&s.length){for(var e=0;e<s.length;e++)s[e].classList.remove("active");for(var t=void 0,e=0;e<a.length;e++){const i=a[e];var n=l(i);if(!n.visible&&n.above&&(t=i.nav),n.visible&&i.nav&&!i.nav.classList.contains("active"))return i.nav.classList.add("active"),o&&clearTimeout(o),void(o=setTimeout(function(){i.nav.scrollIntoView({behavior:"smooth"}),o=void 0},250))}t&&!t.classList.contains("active")&&(t.classList.add("active"),o&&clearTimeout(o),o=setTimeout(function(){t.scrollIntoView({behavior:"smooth"}),o=void 0},250))}}}(),h=function(){var l,r=i.querySelector("#nav-btn"),c=480,d="200px",m="0.25fr",h=730,v=535,u=f.children[0].children[0].children[0],g=f.children[2]&&f.children[2].children[0].children[0],t="sidebar-pinned",p=null==localStorage.getItem(t)||"true"==localStorage.getItem(t),y=!1,b=!1;function n(){window._onresize&&window._onresize();var e=window.outerWidth||window.innerWidth,t=e<c,n=t?y?"100%":"0":p?""+d:"0",i=`grid-template-columns: ${n} 1fr`,o=t&&y?"width: 100%":"0"!=n?"":"display: none",a=t&&y?"display: none":"",s=t?y?"sidebar-show":"sidebar-hide":p?"sidebar-show":"sidebar-hide",n="0"==n;f.children[2]&&(m&&h&&v&&(n&&e<v||!n&&e<h?b||(u.innerHTML=l+g.innerHTML,S.initNavs(u),b=!0):b&&(u.innerHTML=l,S.initNavs(g),b=!1)),!m||t||b?(i+=";",f.children[2].style.display="none"):(i+=` ${m};`,f.children[2].style.display="")),T(r,!t&&p||t&&y?"rotate":"rotate-back","rotate","rotate-back"),p?(r.classList.add("text-shadow"),null==document.querySelector("main .sidebar .accordion > [title='VB-Consulting'] > .collapsed")&&T(k,"d-none")):("/"!=document.location.pathname&&E(k,"d-none"),r.classList.remove("text-shadow")),f.style=L?i:"display: grid;",L&&T(L,s,"sidebar-show","sidebar-hide"),L&&(L.firstChild.style=o),w.style=a,t&&!y&&"/"!=document.location.pathname&&E(k,"d-none"),t&&y&&T(k,"d-none")}function e(){var e=window.outerWidth<c;e?y=!y:p=!p,localStorage.setItem(t,p.toString()),n(),p?(r.classList.add("text-shadow"),null==document.querySelector("main .sidebar .accordion > [title='VB-Consulting'] > .collapsed")&&T(k,"d-none")):("/"!=document.location.pathname&&E(k,"d-none"),r.classList.remove("text-shadow")),e&&!y&&"/"!=document.location.pathname&&E(k,"d-none"),e&&y&&T(k,"d-none")}return m&&h&&v&&g&&(l=u.innerHTML,S.initNavs(g)),r.addEventListener("click",e),(window.onresize=n)(),this.closeSidebar=function(){window.outerWidth<c&&y&&e()},this}(),v=document.getElementsByClassName("auto-close"),u=0;u<v.length;u++)v[u].addEventListener("click",function(e){h.closeSidebar()});location.hash&&(e=document.getElementById(location.hash.replace("#","")))&&e.scrollIntoView()}();</script><script src="/bootstrap.bundle.min.js"></script><script>!function(){for(var e=document.querySelectorAll('[data-bs-toggle="tooltip"]'),t=0;t<e.length;t++)new bootstrap.Tooltip(e[t]);var n=document.getElementsByClassName("accordion-item");if(n.length){for(t=0;t<n.length;t++){var o=n[t];o.querySelectorAll("[href='"+document.location.pathname+"']").length&&o.firstChild.click()}var l=document.querySelector("nav.navbar").querySelector(".home"),a=document.getElementsByClassName("accordion");"/"==document.location.pathname&&l.classList.add("d-none");for(t=0;t<n.length;t++){var s=a[t];s&&s.firstChild&&"VB-Consulting"==s.firstChild.title&&(null!=s.firstChild.querySelector(".collapse")&&l.classList.contains("d-none")&&"/"!=document.location.pathname&&l.classList.remove("d-none"),s.addEventListener("show.bs.collapse",function(){"/"!=document.location.pathname&&l.classList.remove("d-none"),l.classList.add("d-none")}),s.addEventListener("hide.bs.collapse",function(){"/"!=document.location.pathname&&l.classList.remove("d-none")}))}}}();</script><script src="/html2canvas.min.js"></script><script async defer src="https://buttons.github.io/buttons.js"></script></body><script async data-id="101435862" src="//static.getclicky.com/js"></script></html>